<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Hongyi Xu">
<meta name="dcterms.date" content="2025-01-10">

<title>Non-financial Liabilities and Restructuring</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="AFA_test_2005_files/libs/clipboard/clipboard.min.js"></script>
<script src="AFA_test_2005_files/libs/quarto-html/quarto.js"></script>
<script src="AFA_test_2005_files/libs/quarto-html/popper.min.js"></script>
<script src="AFA_test_2005_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="AFA_test_2005_files/libs/quarto-html/anchor.min.js"></script>
<link href="AFA_test_2005_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="AFA_test_2005_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="AFA_test_2005_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="AFA_test_2005_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="AFA_test_2005_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="AFA_test_2005_files/libs/kePrint-0.0.1/kePrint.js"></script>

<link href="AFA_test_2005_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">


  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sec-s1-raw-dataset" id="toc-sec-s1-raw-dataset" class="nav-link active" data-scroll-target="#sec-s1-raw-dataset">S1. Download and Load the Raw Dataset</a></li>
  <li><a href="#sec-s2-clean-prep" id="toc-sec-s2-clean-prep" class="nav-link" data-scroll-target="#sec-s2-clean-prep">S2. Data Cleaning and Prep</a></li>
  <li><a href="#sec-s3-difference-in-difference-examination" id="toc-sec-s3-difference-in-difference-examination" class="nav-link" data-scroll-target="#sec-s3-difference-in-difference-examination">S3. Difference-in-Difference Examination</a>
  <ul class="collapse">
  <li><a href="#sec-s3a-try-and-error-with-calender-year-dyear" id="toc-sec-s3a-try-and-error-with-calender-year-dyear" class="nav-link" data-scroll-target="#sec-s3a-try-and-error-with-calender-year-dyear">s3.1. try-and-error with calender year <code>dyear</code></a></li>
  <li><a href="#sec-s3b-try-and-error-with-calender-year-fyear" id="toc-sec-s3b-try-and-error-with-calender-year-fyear" class="nav-link" data-scroll-target="#sec-s3b-try-and-error-with-calender-year-fyear">s3.2. try-and-error with calender year <code>fyear</code></a></li>
  </ul></li>
  <li><a href="#sec-s4-industry-level-did" id="toc-sec-s4-industry-level-did" class="nav-link" data-scroll-target="#sec-s4-industry-level-did">S4. [Deprecated] Industry Level DiD</a></li>
  <li><a href="#sec-appendix" id="toc-sec-appendix" class="nav-link" data-scroll-target="#sec-appendix">Appendix</a>
  <ul class="collapse">
  <li><a href="#sec-a1-different-measures-of-net-rental-expenses" id="toc-sec-a1-different-measures-of-net-rental-expenses" class="nav-link" data-scroll-target="#sec-a1-different-measures-of-net-rental-expenses">A1. Results using different measures of “Net Rental Expenses”</a></li>
  <li><a href="#sec-a2-results-using-data-filters-in-the-main-paper" id="toc-sec-a2-results-using-data-filters-in-the-main-paper" class="nav-link" data-scroll-target="#sec-a2-results-using-data-filters-in-the-main-paper">A2. Results using data filters in the main paper</a></li>
  <li><a href="#sec-a3-sensitivity-analysis" id="toc-sec-a3-sensitivity-analysis" class="nav-link" data-scroll-target="#sec-a3-sensitivity-analysis">A3. Sensitivity Analysis of Choosing 2000</a></li>
  <li><a href="#sec-a4-firms-wo-missing" id="toc-sec-a4-firms-wo-missing" class="nav-link" data-scroll-target="#sec-a4-firms-wo-missing">A4. Restrict to Firms w/o Missing Values</a></li>
  <li><a href="#sec-a5-industry-heterogeneity" id="toc-sec-a5-industry-heterogeneity" class="nav-link" data-scroll-target="#sec-a5-industry-heterogeneity">A5. Do different industries behave differently?</a></li>
  <li><a href="#a6.-re-run-main-tests-with-more-filters" id="toc-a6.-re-run-main-tests-with-more-filters" class="nav-link" data-scroll-target="#a6.-re-run-main-tests-with-more-filters">A6. Re-run Main Tests with More Filters</a></li>
  <li><a href="#endnotes" id="toc-endnotes" class="nav-link" data-scroll-target="#endnotes">EndNotes</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Non-financial Liabilities and Restructuring</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
<p class="subtitle lead">Empirical support from 2005 Reform</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Hongyi Xu </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 10, 2025</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">February 28, 2025</p>
    </div>
  </div>
    
  </div>
  


</header>


<style type="text/css">
body, td {
   font-size: 16px;
}
code.r{
  font-size: 12px;
}
pre { /* For appearance of output blocks */
  font-size: 12px;
  background-color: #f0f0f0; /* Light grey background */
  padding: 5px;
  <!-- border-radius: 5px; /* border corner */ -->
} 
.gt_table .gt_caption {
    font-size: 16px; 
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* Middle column: Main content */
.content-column {
  flex: 1; /* Takes remaining space */
  margin-right: 20px; /* Spacing between columns */
}

/* Right column: Outputs */
.output-column {
  flex: 0 0 45%; /* Fixed width for outputs */
  position: sticky;
  top: 0;
  height: 100vh; /* Full height */
  overflow-y: auto; /* Scrollable if content is long */
}
</style>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
This analysis is suggested by discussant Samuel Antill in 2025 AFA meeting.
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<section id="sec-s1-raw-dataset" class="level2">
<h2 class="anchored" data-anchor-id="sec-s1-raw-dataset">S1. Download and Load the Raw Dataset</h2>
<p>We download the firm-level capital structure = from Compustat-CapitalIQ North America. The first measure of executory contracts is accounting data which (under U.S. GAAP) cover leases and rental contracts. We use the variables “Debt Equivalent of Operating Leases”, “Capital Leases” and “Net Rental Expenses”.</p>
<ul>
<li><p><code>Debt - Capitalized Lease Obligations (dclo)</code>: This item represents long-term obligations due in respect of lease finances and hire purchase arrangements. This item includes:</p>
<ul>
<li>Long-term finance lease obligations</li>
<li>Long-term lease financing</li>
<li>Long-term hire purchase obligations</li>
<li>Non-current obligations under capital leases</li>
</ul></li>
<li><p><code>Rental Expense (xrent)</code>: This item represents all costs charged to operations for rental, lease, or hire of space and/or equipment. This item includes:</p>
<ul>
<li>Airlines’ landing fees</li>
<li>Contingent rentals associated with capitalized leases</li>
<li>Lease charges and plant hire</li>
</ul>
<p>This <code>xrent</code> variable is used in <a href="#sec-a1-different-measures-of-net-rental-expenses" class="quarto-xref">Section&nbsp;5.1</a>. In the main test, we construct a new variable called <code>total rent</code>, which is defined as the total rental commitment <code>mrc1 + mrc2 + mrc3 + mrc4 + mrc5 + mrct</code> reported in year <span class="math inline">t</span>.</p></li>
<li><p><code>Asset - Total (at)</code>: Book value of total assets.</p></li>
<li><p><code>Debt in Current Liabilities - Total (dlc)</code> is for the short-term debt and <code>Long-term debt - Total (dltt)</code> is for the long-term debt.</p></li>
<li><p><code>Earnings Before Interest (EBITDA)</code>: EBITDA.</p></li>
<li><p>Industry classifications: <code>naics</code>, <code>sic</code> and <code>spcindcd</code> + (Fama-French 30 Industry Classifiers, <mark><a href="https://github.com/Wenzhi-Ding/FamaFrenchIndustry">To Be Added</a> / <a href="https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/Data_Library/det_30_ind_port.html">Definition</a></mark>).</p></li>
</ul>
<p>We download all annual observations with <code>Data Date (datadate)</code> between Jan 2000 and Dec 2007 and <mark>restrict to firms either incorporated or having headquarters in US</mark> (i.e.&nbsp;<code>fic == "USA" | loc == "USA"</code>). Given that the policy shock happens under the US jurisdiction, we expect more significant treatment effect to be detected in this sample. The period used in Samuel’s slides is between 2002 and 2007, which is after the doc.com bubble and after the GFC. The variables in the dataset are:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## load the compustat_na data </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># compustat_na &lt;- as_tibble(read.csv(file = "C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/g4f68dkn3beu1iag.csv") )</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>compustat_na <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/azsyeo1yjmrb2q1v.csv"</span>) ) <span class="sc">%&gt;%</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fic <span class="sc">==</span> <span class="st">"USA"</span> <span class="sc">|</span> loc <span class="sc">==</span> <span class="st">"USA"</span> ) <span class="do">## keep only US related observations (| fic == "CAN" | loc == "CAN")</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="do">## data file record: </span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># | Feb 24, 2025 &gt; azsyeo1yjmrb2q1v.csv </span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># | Jan 14, 2025 &gt; g4f68dkn3beu1iag.csv </span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="do">## check the variable names </span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Variables include:</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">names</span>(compustat_na))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Variables include:

 [1] "at"       "cik"      "conm"     "consol"   "costat"   "curcd"   
 [7] "cusip"    "datadate" "datafmt"  "dclo"     "dlc"      "dltt"    
[13] "ebitda"   "fic"      "fyear"    "fyr"      "fyrc"     "gvkey"   
[19] "indfmt"   "loc"      "mrc1"     "mrc2"     "mrc3"     "mrc4"    
[25] "mrc5"     "mrct"     "naics"    "popsrc"   "sic"      "spcindcd"
[31] "tic"      "xrent"   </code></pre>
</div>
</div>
</section>
<section id="sec-s2-clean-prep" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="sec-s2-clean-prep">S2. Data Cleaning and Prep</h2>
<p>Two dependent variables are constructed to measure firm’s leverage: (<u>cf.&nbsp;p18 and Table 2 of the paper</u>)</p>
<ul>
<li><p><code>Book leverage</code>: we define leverage as the ratio of the sum of short-term debt and long-term debt to assets (we drop observations where this is outside the [0,1] range)*.</p></li>
<li><p><code>Debt/EBITDA</code>: we define debt-to-EBITDA as the ratio of the long- and short-term debt to EBITDA (we drop observations where this is outside the [0,15] range)*.</p></li>
</ul>
<p>*<mark>These restrictions are imposed only in analyses in <a href="#sec-a2-results-using-data-filters-in-the-main-paper" class="quarto-xref">Section&nbsp;5.2</a>.<mark></mark></mark></p>

<div class="no-row-height column-margin column-container"><div id="nte-rent-var" class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note&nbsp;1
</div>
</div>
<div class="callout-body-container callout-body">
<p>What should be the best way to construct this <mark>PV of Rent / Net Rental Expenses</mark> variable in this test?</p>
</div>
</div></div><div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">## set the base year </span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>base_year <span class="ot">&lt;-</span> <span class="dv">2005</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="do">## create leverage variables </span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> compustat_na <span class="sc">%&gt;%</span> </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(at &gt; 0) %&gt;% </span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(indfmt <span class="sc">==</span> <span class="st">"INDL"</span>) <span class="sc">%&gt;%</span> <span class="do">## remove all financial firms</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="do">## leverage variables: </span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> at, </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">debt_ebitda =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> ebitda, </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="do">## treatment intensity: </span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">totalrent =</span> mrc1 <span class="sc">+</span> mrc2 <span class="sc">+</span> mrc3 <span class="sc">+</span> mrc4 <span class="sc">+</span> mrc5 <span class="sc">+</span> mrct, <span class="co"># total rent w/o discount</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">contract_intensity =</span> (dclo <span class="sc">+</span> totalrent) <span class="sc">/</span> at, <span class="co"># executory contract intensity</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># contract_intensity = (totalrent) / at, # executory contract intensity</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="do">## other variables: </span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.integer</span>(<span class="fu">substr</span>(datadate, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">stop =</span> <span class="dv">4</span>)) <span class="co"># data year </span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="do">## record the variable names </span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Variables include:</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">names</span>(data)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Variables include:

 [1] "at"                 "book_leverage"      "cik"               
 [4] "conm"               "consol"             "contract_intensity"
 [7] "costat"             "curcd"              "cusip"             
[10] "datadate"           "datafmt"            "dclo"              
[13] "debt_ebitda"        "dlc"                "dltt"              
[16] "dyear"              "ebitda"             "fic"               
[19] "fyear"              "fyr"                "fyrc"              
[22] "gvkey"              "indfmt"             "loc"               
[25] "mrc1"               "mrc2"               "mrc3"              
[28] "mrc4"               "mrc5"               "mrct"              
[31] "naics"              "popsrc"             "sic"               
[34] "spcindcd"           "tic"                "totalrent"         
[37] "xrent"             </code></pre>
</div>
</div>
<p>The main independent variable in the test is executory contract intensity, which is named as <code>contract_intensity</code> in our dataset. We follow Samuel’s definition w/o purchase contracts information for firm <span class="math inline">i</span> at year <span class="math inline">t</span>:</p>
<p><span class="math display">\begin{equation}
\begin{split}
&amp; \text{Executory Contract Intensity}_{i,t} = \frac{\text{Capitalized Leases}_{i,t} + \text{PV of Rent}_{i,t} }{\text{Book Asset}_{i,t}} \\
&amp; \Rightarrow \text{contract\_intensity}_{i,t} = \begin{cases}
\frac{\text{dclo}_{i,t} + \text{xrent}_{i,t} \times 3 }{\text{at}_{i,t}} \\
\frac{\text{dclo}_{i,t} + \text{totalrent}_{i,t} }{\text{at}_{i,t}}\\
\end{cases}, \\
&amp; \quad \text{ with totalrent = mrc1 + mrc2 + mrc3 + mrc4 + mrc5 + mrct} \\
\end{split}
\end{equation}</span></p>
</section>
<section id="sec-s3-difference-in-difference-examination" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="sec-s3-difference-in-difference-examination">S3. Difference-in-Difference Examination</h2>
<p>Then, we construct the dataset for the difference-in-difference analysis.</p>
<p>In this section, we use all observations without missing values in subsequent analyses.</p>
<p>The original dataset (<code>data</code>) contains observations with data year (<code>dyear</code>) range in [1997, 2009] and we restrict the sample to the data year in [2002, 2007].</p>
<p>For results with restrictions on specific variables, please refer to <a href="#sec-a2-results-using-data-filters-in-the-main-paper" class="quarto-xref">Section&nbsp;5.2</a>.</p>

<div class="no-row-height column-margin column-container"><div id="nte-group-def" class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note&nbsp;2
</div>
</div>
<div class="callout-body-container callout-body">
<p>Does altering the time (i.e.&nbsp;2000 to 1995) for measuring the treatment intensity alter the results?</p>
</div>
</div></div><section id="sec-s3a-try-and-error-with-calender-year-dyear" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="sec-s3a-try-and-error-with-calender-year-dyear">s3.1. try-and-error with calender year <code>dyear</code></h3>
<p>In this section, we first try to use the year information <code>dyear</code> extracted from variable <code>datadate</code> as the periods.</p>
<p>On top of the base <code>data</code>, we add several new variables in dataset <code>data_did</code>:</p>
<ul>
<li><code>contract_intensity_2000</code>: the contract intensity for each firm in year <code>dyear == 2000</code>.</li>
<li><code>post_2005</code>: an indicator equals to 1 if <code>dyear &gt; 2005</code> and 0 otherwise.</li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>data_firm <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span> <span class="co"># use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, <span class="at">contract_intensity_2000 =</span> contract_intensity) <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span> </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">contract_intensity_2000 =</span> <span class="fu">mean</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) ) <span class="sc">%&gt;%</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>FF_30ind <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"</span>))</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>data_did <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable </span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span> </span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classifiaction </span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span> </span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="do">## exclude certain industries </span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">20</span>, <span class="co"># exclude Utiltiy (number 20) </span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(sic <span class="sc">&gt;=</span> <span class="dv">6000</span> <span class="sc">&amp;</span> sic <span class="sc">&lt;=</span> <span class="dv">6199</span>) <span class="co"># exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  <span class="do">## pre- &amp; post- </span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">indexyear =</span> (dyear <span class="sc">-</span> base_year), <span class="co"># year index with 2005 as base 0.</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(dyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)  <span class="co"># whether it is after the 2005 reform </span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="co"># %&gt;% </span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># drop values outside the range:</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 1), yes = book_leverage, no = NA),</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   debt_ebitda = ifelse(test = (debt_ebitda &gt;= 0 &amp; debt_ebitda &lt;= 15), yes = debt_ebitda, no = NA )</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ) </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>DiD Analysis:</p>

<div class="no-row-height column-margin column-container"><div id="nte-ipo-delist" class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note&nbsp;3
</div>
</div>
<div class="callout-body-container callout-body">
<p>Q: Do we need to remove IPO and delisting firms?</p>
</div>
</div><div id="imp-ipo-delist" class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important&nbsp;1: More Fixed-effects
</div>
</div>
<div class="callout-body-container callout-body">
<p>Adding the industry-year fixed effects does not change the regression results.</p>
</div>
</div></div>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>data_did <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">ind =</span> <span class="fu">as.factor</span>(ff_30ind_name), <span class="co"># industry </span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">ind_time =</span> <span class="fu">as.factor</span>(<span class="fu">paste</span>(ff_30ind_name, dyear, <span class="at">sep =</span> <span class="st">" + "</span>)), </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="do">## adding industry*year FE does not change the results: + ind_time </span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">etable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                      .
Dependent Var.:                           book_leverage
                                                       
contract_intensity_2000 x post_2005 -0.4184*** (0.1028)
Fixed-Effects:                      -------------------
gvkey                                               Yes
dyear                                               Yes
___________________________________ ___________________
S.E.: Clustered                       by: gvkey &amp; ff_3.
Observations                                     22,803
R2                                              0.39586
Within R2                                       0.00336
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>data_did <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, indexyear, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">1998</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey) <span class="co">#, </span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># dyear = as.factor(dyear), </span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># indexyear = relevel(factor(indexyear), ref = "0") </span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> </span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>                  <span class="co"># i(dyear):contract_intensity_2000</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">i</span>(indexyear, contract_intensity_2000, <span class="at">ref =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>                <span class="sc">|</span> gvkey <span class="sc">+</span> indexyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">iplot</span>(., </span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="fu">paste</span>(<span class="st">"Time to treatment (0 is Year "</span>, base_year, <span class="st">")"</span>, <span class="at">sep =</span> <span class="st">""</span>),</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Treatment Effect (TWFE): calendar year"</span>, </span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">ref.line =</span> <span class="cn">FALSE</span>,</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">ref.line.par =</span> <span class="fu">list</span>(<span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>),</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">pt.join =</span> <span class="cn">FALSE</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>        ); <span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">at =</span> <span class="sc">-</span><span class="dv">7</span><span class="sc">:</span><span class="dv">2</span>); <span class="fu">abline</span>(<span class="at">v =</span> <span class="fl">0.5</span>, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AFA_test_2005_files/figure-html/s3-did-test-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># fixest::coefplot(sub = "base year: dyear = 2004") </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="sec-s3b-try-and-error-with-calender-year-fyear" class="level3">
<h3 class="anchored" data-anchor-id="sec-s3b-try-and-error-with-calender-year-fyear">s3.2. try-and-error with calender year <code>fyear</code></h3>
<p>In this section, we first try to use the year information <code>fyear</code> extracted from variable <code>datadate</code> as the periods.</p>
<p>On top of the base <code>data</code>, we add several new variables in dataset <code>data_did</code>:</p>
<ul>
<li><code>contract_intensity_2000</code>: the contract intensity for each firm in year <code>fyear == 2000</code>.</li>
<li><code>post_2005</code>: an indicator equals to 1 if <code>fyear &gt; 2005</code> and 0 otherwise.</li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>data_firm <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fyear <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span> <span class="co"># use `fyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, <span class="at">contract_intensity_2000 =</span> contract_intensity) </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>FF_30ind <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"</span>))</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>data_did <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable </span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span> </span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classifiaction </span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span> </span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="do">## exclude certain industries </span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">20</span>, <span class="co"># exclude Utiltiy (number 20) </span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(sic <span class="sc">&gt;=</span> <span class="dv">6000</span> <span class="sc">&amp;</span> sic <span class="sc">&lt;=</span> <span class="dv">6199</span>) <span class="co"># exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>  <span class="do">## pre- &amp; post- </span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">indexyear =</span> (fyear <span class="sc">-</span> base_year), <span class="co"># year index with 2005 as base 0.</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(fyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)  <span class="co"># whether it is after the 2005 reform </span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>DiD Analysis:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>data_did <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, fyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> fyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">fyear =</span> <span class="fu">as.factor</span>(fyear), </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> fyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">etable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                      .
Dependent Var.:                           book_leverage
                                                       
contract_intensity_2000 x post_2005 -0.4250*** (0.1023)
Fixed-Effects:                      -------------------
gvkey                                               Yes
fyear                                               Yes
___________________________________ ___________________
S.E.: Clustered                       by: gvkey &amp; ff_3.
Observations                                     22,689
R2                                              0.30332
Within R2                                       0.00113
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>data_did <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, fyear, contract_intensity_2000, post_2005, indexyear, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fyear <span class="sc">&gt;=</span> <span class="dv">1998</span> <span class="sc">&amp;</span> fyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey)  </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># fyear = as.factor(fyear), </span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># indexyear = relevel(factor(indexyear), ref = "0") </span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> <span class="fu">i</span>(indexyear, contract_intensity_2000, <span class="sc">-</span><span class="dv">1</span>) <span class="sc">|</span> gvkey <span class="sc">+</span> indexyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">iplot</span>(., </span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="fu">paste</span>(<span class="st">"Time to treatment (0 is Year "</span>, base_year, <span class="st">")"</span>, <span class="at">sep =</span> <span class="st">""</span>),</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Treatment Effect (TWFE): fiscal year"</span>, </span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">ref.line =</span> <span class="cn">FALSE</span>,</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">ref.line.par =</span> <span class="fu">list</span>(<span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>),</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">pt.join =</span> <span class="cn">FALSE</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>        ); <span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">at =</span> <span class="sc">-</span><span class="dv">7</span><span class="sc">:</span><span class="dv">2</span>); <span class="fu">abline</span>(<span class="at">v =</span> <span class="fl">0.5</span>, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AFA_test_2005_files/figure-html/s3b-did-test-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># fixest::coefplot(sub = "base year: fyear = 2000") </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="sec-s4-industry-level-did" class="level2">
<h2 class="anchored" data-anchor-id="sec-s4-industry-level-did">S4. [Deprecated] Industry Level DiD</h2>
<p>We start by constructing industry-level information.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>data_firm <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span> <span class="co"># use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, <span class="at">contract_intensity_2000 =</span> contract_intensity) <span class="sc">%&gt;%</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">contract_intensity_2000 =</span> <span class="fu">mean</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) ) <span class="sc">%&gt;%</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>FF_30ind <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"</span>))</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="do">## industry level measures</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>data_did_ind <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classifiaction</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity, book_leverage, debt_ebitda, sic, ff_30ind, ff_30ind_desc) <span class="sc">%&gt;%</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ff_30_ind_full =</span> <span class="fu">paste</span>(<span class="fu">ifelse</span>(ff_30ind <span class="sc">&lt;</span> <span class="dv">10</span>,</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">yes =</span> <span class="fu">paste</span>(<span class="st">" "</span>, ff_30ind, <span class="at">sep =</span> <span class="st">""</span>),</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">no =</span> <span class="fu">as.character</span>(ff_30ind)),</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>                                ff_30ind_desc, <span class="at">sep =</span> <span class="st">": "</span>) ) <span class="sc">%&gt;%</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>  <span class="do">## for each industry-year:</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(dyear, ff_30_ind_full, ff_30ind, ff_30ind_desc) <span class="sc">%&gt;%</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">contract_intensity_ind =</span> <span class="fu">median</span>(contract_intensity, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage_ind =</span> <span class="fu">median</span>(book_leverage, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">debt_ebitda_ind =</span> <span class="fu">median</span>(debt_ebitda, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>data_did_ind <span class="sc">%&gt;%</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">==</span> <span class="dv">2000</span> <span class="sc">&amp;</span> ff_30ind <span class="sc">!=</span> <span class="dv">20</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>contract_intensity_ind) <span class="sc">%&gt;%</span></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>dyear, <span class="sc">-</span>ff_30_ind_full,</span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">FF30 Code</span><span class="st">`</span> <span class="ot">=</span> ff_30ind, <span class="co"># the industry code</span></span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Fama-French 30 Industry</span><span class="st">`</span> <span class="ot">=</span> ff_30ind_desc, <span class="co"># name of the</span></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Contract Intensity</span><span class="st">`</span> <span class="ot">=</span> contract_intensity_ind,</span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Book Leverage</span><span class="st">`</span> <span class="ot">=</span> book_leverage_ind,</span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Debt-to-EBITDA</span><span class="st">`</span> <span class="ot">=</span> debt_ebitda_ind </span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span></span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>(</span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">rowname_col =</span> <span class="st">"FF30 Code"</span></span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(</span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">Contract Intensity</span><span class="st">`</span>, <span class="st">`</span><span class="at">Book Leverage</span><span class="st">`</span>, <span class="st">`</span><span class="at">Debt-to-EBITDA</span><span class="st">`</span>),</span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">3</span></span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Table: Contract Intensity by Industry in 2000"</span></span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">size =</span> <span class="st">"small"</span>),  <span class="co"># Reduce font size</span></span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>(<span class="at">columns =</span> <span class="fu">everything</span>()) <span class="co"># reduce the size of tab headers</span></span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">size =</span> <span class="st">"small"</span>),  <span class="co"># Reduce font size</span></span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()</span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="hxwfihxqud" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#hxwfihxqud table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#hxwfihxqud thead, #hxwfihxqud tbody, #hxwfihxqud tfoot, #hxwfihxqud tr, #hxwfihxqud td, #hxwfihxqud th {
  border-style: none;
}

#hxwfihxqud p {
  margin: 0;
  padding: 0;
}

#hxwfihxqud .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#hxwfihxqud .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#hxwfihxqud .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#hxwfihxqud .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#hxwfihxqud .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hxwfihxqud .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hxwfihxqud .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hxwfihxqud .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#hxwfihxqud .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#hxwfihxqud .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#hxwfihxqud .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#hxwfihxqud .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#hxwfihxqud .gt_spanner_row {
  border-bottom-style: hidden;
}

#hxwfihxqud .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#hxwfihxqud .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#hxwfihxqud .gt_from_md > :first-child {
  margin-top: 0;
}

#hxwfihxqud .gt_from_md > :last-child {
  margin-bottom: 0;
}

#hxwfihxqud .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#hxwfihxqud .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#hxwfihxqud .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#hxwfihxqud .gt_row_group_first td {
  border-top-width: 2px;
}

#hxwfihxqud .gt_row_group_first th {
  border-top-width: 2px;
}

#hxwfihxqud .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hxwfihxqud .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#hxwfihxqud .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#hxwfihxqud .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hxwfihxqud .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hxwfihxqud .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#hxwfihxqud .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#hxwfihxqud .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#hxwfihxqud .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hxwfihxqud .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hxwfihxqud .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hxwfihxqud .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hxwfihxqud .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hxwfihxqud .gt_left {
  text-align: left;
}

#hxwfihxqud .gt_center {
  text-align: center;
}

#hxwfihxqud .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#hxwfihxqud .gt_font_normal {
  font-weight: normal;
}

#hxwfihxqud .gt_font_bold {
  font-weight: bold;
}

#hxwfihxqud .gt_font_italic {
  font-style: italic;
}

#hxwfihxqud .gt_super {
  font-size: 65%;
}

#hxwfihxqud .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#hxwfihxqud .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#hxwfihxqud .gt_indent_1 {
  text-indent: 5px;
}

#hxwfihxqud .gt_indent_2 {
  text-indent: 10px;
}

#hxwfihxqud .gt_indent_3 {
  text-indent: 15px;
}

#hxwfihxqud .gt_indent_4 {
  text-indent: 20px;
}

#hxwfihxqud .gt_indent_5 {
  text-indent: 25px;
}

#hxwfihxqud .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#hxwfihxqud div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="5" class="gt_heading gt_title gt_font_normal gt_bottom_border">Table: Contract Intensity by Industry in 2000</th>
</tr>
<tr class="odd gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"></th>
<th id="Fama-French 30 Industry" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-size: small" scope="col">Fama-French 30 Industry</th>
<th id="Contract Intensity" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-size: small" scope="col">Contract Intensity</th>
<th id="Book Leverage" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-size: small" scope="col">Book Leverage</th>
<th id="Debt-to-EBITDA" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-size: small" scope="col">Debt-to-EBITDA</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td id="stub_1_1" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">28</td>
<td class="gt_row gt_left" headers="stub_1_1 Fama-French 30 Industry" style="font-size: small">Restaurants, Hotels, Motels</td>
<td class="gt_row gt_right" headers="stub_1_1 Contract Intensity" style="font-size: small">0.566</td>
<td class="gt_row gt_right" headers="stub_1_1 Book Leverage" style="font-size: small">0.348</td>
<td class="gt_row gt_right" headers="stub_1_1 Debt-to-EBITDA" style="font-size: small">2.227</td>
</tr>
<tr class="even">
<td id="stub_1_2" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">27</td>
<td class="gt_row gt_left" headers="stub_1_2 Fama-French 30 Industry" style="font-size: small">Retail</td>
<td class="gt_row gt_right" headers="stub_1_2 Contract Intensity" style="font-size: small">0.538</td>
<td class="gt_row gt_right" headers="stub_1_2 Book Leverage" style="font-size: small">0.228</td>
<td class="gt_row gt_right" headers="stub_1_2 Debt-to-EBITDA" style="font-size: small">1.058</td>
</tr>
<tr class="odd">
<td id="stub_1_3" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">22</td>
<td class="gt_row gt_left" headers="stub_1_3 Fama-French 30 Industry" style="font-size: small">Personal and Business Services</td>
<td class="gt_row gt_right" headers="stub_1_3 Contract Intensity" style="font-size: small">0.195</td>
<td class="gt_row gt_right" headers="stub_1_3 Book Leverage" style="font-size: small">0.061</td>
<td class="gt_row gt_right" headers="stub_1_3 Debt-to-EBITDA" style="font-size: small">0.000</td>
</tr>
<tr class="even">
<td id="stub_1_4" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">25</td>
<td class="gt_row gt_left" headers="stub_1_4 Fama-French 30 Industry" style="font-size: small">Transportation</td>
<td class="gt_row gt_right" headers="stub_1_4 Contract Intensity" style="font-size: small">0.188</td>
<td class="gt_row gt_right" headers="stub_1_4 Book Leverage" style="font-size: small">0.321</td>
<td class="gt_row gt_right" headers="stub_1_4 Debt-to-EBITDA" style="font-size: small">2.128</td>
</tr>
<tr class="odd">
<td id="stub_1_5" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">7</td>
<td class="gt_row gt_left" headers="stub_1_5 Fama-French 30 Industry" style="font-size: small">Apparel</td>
<td class="gt_row gt_right" headers="stub_1_5 Contract Intensity" style="font-size: small">0.167</td>
<td class="gt_row gt_right" headers="stub_1_5 Book Leverage" style="font-size: small">0.255</td>
<td class="gt_row gt_right" headers="stub_1_5 Debt-to-EBITDA" style="font-size: small">0.735</td>
</tr>
<tr class="even">
<td id="stub_1_6" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">5</td>
<td class="gt_row gt_left" headers="stub_1_6 Fama-French 30 Industry" style="font-size: small">Printing and Publishing</td>
<td class="gt_row gt_right" headers="stub_1_6 Contract Intensity" style="font-size: small">0.137</td>
<td class="gt_row gt_right" headers="stub_1_6 Book Leverage" style="font-size: small">0.276</td>
<td class="gt_row gt_right" headers="stub_1_6 Debt-to-EBITDA" style="font-size: small">1.540</td>
</tr>
<tr class="odd">
<td id="stub_1_7" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">8</td>
<td class="gt_row gt_left" headers="stub_1_7 Fama-French 30 Industry" style="font-size: small">Healthcare, Medical Equipment, Pharmaceutical Products</td>
<td class="gt_row gt_right" headers="stub_1_7 Contract Intensity" style="font-size: small">0.131</td>
<td class="gt_row gt_right" headers="stub_1_7 Book Leverage" style="font-size: small">0.098</td>
<td class="gt_row gt_right" headers="stub_1_7 Debt-to-EBITDA" style="font-size: small">0.000</td>
</tr>
<tr class="even">
<td id="stub_1_8" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">30</td>
<td class="gt_row gt_left" headers="stub_1_8 Fama-French 30 Industry" style="font-size: small">Everything Else</td>
<td class="gt_row gt_right" headers="stub_1_8 Contract Intensity" style="font-size: small">0.118</td>
<td class="gt_row gt_right" headers="stub_1_8 Book Leverage" style="font-size: small">0.276</td>
<td class="gt_row gt_right" headers="stub_1_8 Debt-to-EBITDA" style="font-size: small">0.000</td>
</tr>
<tr class="odd">
<td id="stub_1_9" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">26</td>
<td class="gt_row gt_left" headers="stub_1_9 Fama-French 30 Industry" style="font-size: small">Wholesale</td>
<td class="gt_row gt_right" headers="stub_1_9 Contract Intensity" style="font-size: small">0.115</td>
<td class="gt_row gt_right" headers="stub_1_9 Book Leverage" style="font-size: small">0.302</td>
<td class="gt_row gt_right" headers="stub_1_9 Debt-to-EBITDA" style="font-size: small">1.921</td>
</tr>
<tr class="even">
<td id="stub_1_10" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">2</td>
<td class="gt_row gt_left" headers="stub_1_10 Fama-French 30 Industry" style="font-size: small">Beer &amp; Liquor</td>
<td class="gt_row gt_right" headers="stub_1_10 Contract Intensity" style="font-size: small">0.115</td>
<td class="gt_row gt_right" headers="stub_1_10 Book Leverage" style="font-size: small">0.312</td>
<td class="gt_row gt_right" headers="stub_1_10 Debt-to-EBITDA" style="font-size: small">0.917</td>
</tr>
<tr class="odd">
<td id="stub_1_11" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">23</td>
<td class="gt_row gt_left" headers="stub_1_11 Fama-French 30 Industry" style="font-size: small">Business Equipment</td>
<td class="gt_row gt_right" headers="stub_1_11 Contract Intensity" style="font-size: small">0.114</td>
<td class="gt_row gt_right" headers="stub_1_11 Book Leverage" style="font-size: small">0.064</td>
<td class="gt_row gt_right" headers="stub_1_11 Debt-to-EBITDA" style="font-size: small">0.000</td>
</tr>
<tr class="even">
<td id="stub_1_12" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">4</td>
<td class="gt_row gt_left" headers="stub_1_12 Fama-French 30 Industry" style="font-size: small">Recreation</td>
<td class="gt_row gt_right" headers="stub_1_12 Contract Intensity" style="font-size: small">0.106</td>
<td class="gt_row gt_right" headers="stub_1_12 Book Leverage" style="font-size: small">0.374</td>
<td class="gt_row gt_right" headers="stub_1_12 Debt-to-EBITDA" style="font-size: small">0.940</td>
</tr>
<tr class="odd">
<td id="stub_1_13" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">18</td>
<td class="gt_row gt_left" headers="stub_1_13 Fama-French 30 Industry" style="font-size: small">Coal</td>
<td class="gt_row gt_right" headers="stub_1_13 Contract Intensity" style="font-size: small">0.095</td>
<td class="gt_row gt_right" headers="stub_1_13 Book Leverage" style="font-size: small">0.521</td>
<td class="gt_row gt_right" headers="stub_1_13 Debt-to-EBITDA" style="font-size: small">3.799</td>
</tr>
<tr class="even">
<td id="stub_1_14" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">6</td>
<td class="gt_row gt_left" headers="stub_1_14 Fama-French 30 Industry" style="font-size: small">Consumer Goods</td>
<td class="gt_row gt_right" headers="stub_1_14 Contract Intensity" style="font-size: small">0.094</td>
<td class="gt_row gt_right" headers="stub_1_14 Book Leverage" style="font-size: small">0.307</td>
<td class="gt_row gt_right" headers="stub_1_14 Debt-to-EBITDA" style="font-size: small">1.343</td>
</tr>
<tr class="odd">
<td id="stub_1_15" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">13</td>
<td class="gt_row gt_left" headers="stub_1_15 Fama-French 30 Industry" style="font-size: small">Fabricated Products and Machinery</td>
<td class="gt_row gt_right" headers="stub_1_15 Contract Intensity" style="font-size: small">0.083</td>
<td class="gt_row gt_right" headers="stub_1_15 Book Leverage" style="font-size: small">0.260</td>
<td class="gt_row gt_right" headers="stub_1_15 Debt-to-EBITDA" style="font-size: small">1.267</td>
</tr>
<tr class="even">
<td id="stub_1_16" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">10</td>
<td class="gt_row gt_left" headers="stub_1_16 Fama-French 30 Industry" style="font-size: small">Textiles</td>
<td class="gt_row gt_right" headers="stub_1_16 Contract Intensity" style="font-size: small">0.079</td>
<td class="gt_row gt_right" headers="stub_1_16 Book Leverage" style="font-size: small">0.476</td>
<td class="gt_row gt_right" headers="stub_1_16 Debt-to-EBITDA" style="font-size: small">3.529</td>
</tr>
<tr class="odd">
<td id="stub_1_17" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">21</td>
<td class="gt_row gt_left" headers="stub_1_17 Fama-French 30 Industry" style="font-size: small">Communication</td>
<td class="gt_row gt_right" headers="stub_1_17 Contract Intensity" style="font-size: small">0.079</td>
<td class="gt_row gt_right" headers="stub_1_17 Book Leverage" style="font-size: small">0.377</td>
<td class="gt_row gt_right" headers="stub_1_17 Debt-to-EBITDA" style="font-size: small">0.014</td>
</tr>
<tr class="even">
<td id="stub_1_18" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">14</td>
<td class="gt_row gt_left" headers="stub_1_18 Fama-French 30 Industry" style="font-size: small">Electrical Equipment</td>
<td class="gt_row gt_right" headers="stub_1_18 Contract Intensity" style="font-size: small">0.076</td>
<td class="gt_row gt_right" headers="stub_1_18 Book Leverage" style="font-size: small">0.216</td>
<td class="gt_row gt_right" headers="stub_1_18 Debt-to-EBITDA" style="font-size: small">0.461</td>
</tr>
<tr class="odd">
<td id="stub_1_19" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">16</td>
<td class="gt_row gt_left" headers="stub_1_19 Fama-French 30 Industry" style="font-size: small">Aircraft, ships, and railroad equipment</td>
<td class="gt_row gt_right" headers="stub_1_19 Contract Intensity" style="font-size: small">0.075</td>
<td class="gt_row gt_right" headers="stub_1_19 Book Leverage" style="font-size: small">0.275</td>
<td class="gt_row gt_right" headers="stub_1_19 Debt-to-EBITDA" style="font-size: small">1.752</td>
</tr>
<tr class="even">
<td id="stub_1_20" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">9</td>
<td class="gt_row gt_left" headers="stub_1_20 Fama-French 30 Industry" style="font-size: small">Chemicals</td>
<td class="gt_row gt_right" headers="stub_1_20 Contract Intensity" style="font-size: small">0.071</td>
<td class="gt_row gt_right" headers="stub_1_20 Book Leverage" style="font-size: small">0.313</td>
<td class="gt_row gt_right" headers="stub_1_20 Debt-to-EBITDA" style="font-size: small">1.773</td>
</tr>
<tr class="odd">
<td id="stub_1_21" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">24</td>
<td class="gt_row gt_left" headers="stub_1_21 Fama-French 30 Industry" style="font-size: small">Business Supplies and Shipping Containers</td>
<td class="gt_row gt_right" headers="stub_1_21 Contract Intensity" style="font-size: small">0.071</td>
<td class="gt_row gt_right" headers="stub_1_21 Book Leverage" style="font-size: small">0.396</td>
<td class="gt_row gt_right" headers="stub_1_21 Debt-to-EBITDA" style="font-size: small">2.564</td>
</tr>
<tr class="even">
<td id="stub_1_22" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">15</td>
<td class="gt_row gt_left" headers="stub_1_22 Fama-French 30 Industry" style="font-size: small">Automobiles and Trucks</td>
<td class="gt_row gt_right" headers="stub_1_22 Contract Intensity" style="font-size: small">0.067</td>
<td class="gt_row gt_right" headers="stub_1_22 Book Leverage" style="font-size: small">0.363</td>
<td class="gt_row gt_right" headers="stub_1_22 Debt-to-EBITDA" style="font-size: small">2.514</td>
</tr>
<tr class="odd">
<td id="stub_1_23" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">1</td>
<td class="gt_row gt_left" headers="stub_1_23 Fama-French 30 Industry" style="font-size: small">Food Products</td>
<td class="gt_row gt_right" headers="stub_1_23 Contract Intensity" style="font-size: small">0.065</td>
<td class="gt_row gt_right" headers="stub_1_23 Book Leverage" style="font-size: small">0.378</td>
<td class="gt_row gt_right" headers="stub_1_23 Debt-to-EBITDA" style="font-size: small">2.414</td>
</tr>
<tr class="even">
<td id="stub_1_24" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">11</td>
<td class="gt_row gt_left" headers="stub_1_24 Fama-French 30 Industry" style="font-size: small">Construction and Construction Materials</td>
<td class="gt_row gt_right" headers="stub_1_24 Contract Intensity" style="font-size: small">0.058</td>
<td class="gt_row gt_right" headers="stub_1_24 Book Leverage" style="font-size: small">0.311</td>
<td class="gt_row gt_right" headers="stub_1_24 Debt-to-EBITDA" style="font-size: small">1.754</td>
</tr>
<tr class="odd">
<td id="stub_1_25" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">12</td>
<td class="gt_row gt_left" headers="stub_1_25 Fama-French 30 Industry" style="font-size: small">Steel Works Etc</td>
<td class="gt_row gt_right" headers="stub_1_25 Contract Intensity" style="font-size: small">0.056</td>
<td class="gt_row gt_right" headers="stub_1_25 Book Leverage" style="font-size: small">0.340</td>
<td class="gt_row gt_right" headers="stub_1_25 Debt-to-EBITDA" style="font-size: small">3.191</td>
</tr>
<tr class="even">
<td id="stub_1_26" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">3</td>
<td class="gt_row gt_left" headers="stub_1_26 Fama-French 30 Industry" style="font-size: small">Tobacco Products</td>
<td class="gt_row gt_right" headers="stub_1_26 Contract Intensity" style="font-size: small">0.049</td>
<td class="gt_row gt_right" headers="stub_1_26 Book Leverage" style="font-size: small">0.256</td>
<td class="gt_row gt_right" headers="stub_1_26 Debt-to-EBITDA" style="font-size: small">1.208</td>
</tr>
<tr class="odd">
<td id="stub_1_27" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">29</td>
<td class="gt_row gt_left" headers="stub_1_27 Fama-French 30 Industry" style="font-size: small">Banking, Insurance, Real Estate, Trading</td>
<td class="gt_row gt_right" headers="stub_1_27 Contract Intensity" style="font-size: small">0.048</td>
<td class="gt_row gt_right" headers="stub_1_27 Book Leverage" style="font-size: small">0.150</td>
<td class="gt_row gt_right" headers="stub_1_27 Debt-to-EBITDA" style="font-size: small">3.215</td>
</tr>
<tr class="even">
<td id="stub_1_28" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">17</td>
<td class="gt_row gt_left" headers="stub_1_28 Fama-French 30 Industry" style="font-size: small">Precious Metals, Non-Metallic, and Industrial Metal Mining</td>
<td class="gt_row gt_right" headers="stub_1_28 Contract Intensity" style="font-size: small">0.042</td>
<td class="gt_row gt_right" headers="stub_1_28 Book Leverage" style="font-size: small">0.181</td>
<td class="gt_row gt_right" headers="stub_1_28 Debt-to-EBITDA" style="font-size: small">0.000</td>
</tr>
<tr class="odd">
<td id="stub_1_29" class="gt_row gt_right gt_stub" data-quarto-table-cell-role="th" scope="row">19</td>
<td class="gt_row gt_left" headers="stub_1_29 Fama-French 30 Industry" style="font-size: small">Petroleum and Natural Gas</td>
<td class="gt_row gt_right" headers="stub_1_29 Contract Intensity" style="font-size: small">0.028</td>
<td class="gt_row gt_right" headers="stub_1_29 Book Leverage" style="font-size: small">0.254</td>
<td class="gt_row gt_right" headers="stub_1_29 Debt-to-EBITDA" style="font-size: small">0.958</td>
</tr>
</tbody>
</table>

</div>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Plot the top and bottom parts:</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># data_did_ind %&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   ggplot(aes(x = dyear, y = contract_intensity_ind, colour = ff_30_ind_full)) +</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_line() +</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_point(aes(shape = ff_30_ind_full)) +</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co">#   scale_x_continuous(n.breaks = 10, name = NULL)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Then, we perform DiD analysis using the industry-level contract intensity. The hypothesis in this test is that, after the option value of rejecting non-financial obligations decreases, the debt capacity of the firm also decreases. By replacing the contract intensity at the firm level by that at the industry level in 2000, we re-run the standard TWFE regression as in <a href="#sec-s3-difference-in-difference-examination" class="quarto-xref">Section&nbsp;3</a>.</p>
<p><span class="math display">\begin{equation}

\text{Book Leverage}_{i,j,t} = \theta_{i} + \gamma_t + \beta \text{Contract Intensity}^{2000}_j \times \text{Post}^{2005}_t + \varepsilon_{i,j,t}

\end{equation}</span></p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>fixest<span class="sc">::</span><span class="fu">etable</span>(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="do">## industry level difference-in-difference analysis</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="do">## firm-level dependent variable:</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">%&gt;%</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classifiaction</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, book_leverage, debt_ebitda, sic, ff_30ind) <span class="sc">%&gt;%</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> <span class="fu">filter</span>(data_did_ind, dyear <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>              <span class="st">`</span><span class="at">names&lt;-</span><span class="st">`</span>(<span class="at">value =</span> <span class="fu">str_replace</span>(<span class="at">string =</span> <span class="fu">names</span>(.),</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">pattern =</span> <span class="st">"_ind$"</span>,</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">replacement =</span> <span class="st">"_ind2000"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>              <span class="fu">select</span>(<span class="sc">-</span>dyear),</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">join_by</span>(ff_30ind)</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(dyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>), <span class="co"># whether it is after the 2005 reform</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey),</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear),</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">ind =</span> <span class="fu">as.factor</span>(ff_30ind), <span class="co"># industry</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">ind_time =</span> <span class="fu">as.factor</span>(<span class="fu">paste</span>(ff_30_ind_full, dyear, <span class="at">sep =</span> <span class="st">" + "</span>))</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_ind2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind"</span>)),</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>  <span class="do">## industry-level dependent variable</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>  data_did_ind <span class="sc">%&gt;%</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> <span class="fu">filter</span>(data_did_ind, dyear <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>              <span class="fu">select</span>(<span class="sc">-</span>ff_30_ind_full, <span class="sc">-</span>ff_30ind_desc) <span class="sc">%&gt;%</span></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>              <span class="st">`</span><span class="at">names&lt;-</span><span class="st">`</span>(<span class="at">value =</span> <span class="fu">str_replace</span>(<span class="at">string =</span> <span class="fu">names</span>(.),</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">pattern =</span> <span class="st">"_ind$"</span>,</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">replacement =</span> <span class="st">"_ind2000"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>              <span class="fu">select</span>(<span class="sc">-</span>dyear),</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">join_by</span>(ff_30ind)</span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(dyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>), <span class="co"># whether it is after the 2005 reform</span></span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">ff_30ind =</span> <span class="fu">as.factor</span>(ff_30ind),</span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear)</span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage_ind <span class="sc">~</span> contract_intensity_ind2000<span class="sc">:</span>post_2005 <span class="sc">|</span> ff_30ind <span class="sc">+</span> dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"ff_30ind"</span>))</span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">"html"</span>, <span class="at">caption =</span> <span class="st">"DiD Results with Industry-level Contract Intensity"</span>, <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="fu">paste</span>(<span class="st">"("</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="st">")"</span>, <span class="at">sep =</span> <span class="st">""</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(</span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">font_size =</span> <span class="dv">8</span>,       <span class="co"># Smaller font (default is 16px)</span></span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">full_width =</span> <span class="cn">FALSE</span>,   <span class="co"># Table width fits content</span></span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"condensed"</span>)</span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-striped table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<caption>DiD Results with Industry-level Contract Intensity</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th">(1)</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">(2)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Dependent Var.:</td>
<td style="text-align: left;">book_leverage</td>
<td style="text-align: left;">book_leverage_ind</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">contract_intensity_ind2000 x post_2005</td>
<td style="text-align: left;">0.9357 (1.703)</td>
<td style="text-align: left;">0.0739 (0.0543)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fixed-Effects:</td>
<td style="text-align: left;">--------------</td>
<td style="text-align: left;">-----------------</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gvkey</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">No</td>
</tr>
<tr class="even">
<td style="text-align: left;">dyear</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ff_30ind</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Yes</td>
</tr>
<tr class="even">
<td style="text-align: left;">______________________________________</td>
<td style="text-align: left;">______________</td>
<td style="text-align: left;">_________________</td>
</tr>
<tr class="odd">
<td style="text-align: left;">S.E.: Clustered</td>
<td style="text-align: left;">by: gvkey &amp; ff_3.</td>
<td style="text-align: left;">by: ff_30ind</td>
</tr>
<tr class="even">
<td style="text-align: left;">Observations</td>
<td style="text-align: left;">43,490</td>
<td style="text-align: left;">180</td>
</tr>
<tr class="odd">
<td style="text-align: left;">R2</td>
<td style="text-align: left;">0.42987</td>
<td style="text-align: left;">0.87141</td>
</tr>
<tr class="even">
<td style="text-align: left;">Within R2</td>
<td style="text-align: left;">2.64e-6</td>
<td style="text-align: left;">0.01510</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>However, the results show that the industry level evidence is not significant to support the hypothesis. In the regressions using industry-level contact intensities in year 2000 for grouping, the dependent variable is firm level book leverage in regression (1) and industry level median book leverage in regression (2). The coefficient estimates of the interaction term are both positive, which is the opposite of our main regressions. This indicates that the industry-level intensity may not be a good measure for our firm level analysis in <a href="#sec-s3-difference-in-difference-examination" class="quarto-xref">Section&nbsp;3</a>.</p>
<p>For more firm-level analysis for different industries, please refer to <a href="#sec-a5-industry-heterogeneity" class="quarto-xref">Section&nbsp;5.5</a>.</p>
</section>
<section id="sec-appendix" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="sec-appendix">Appendix</h2>
<p>Here are additional tests results with alternative specifications.</p>
<section id="sec-a1-different-measures-of-net-rental-expenses" class="level3">
<h3 class="anchored" data-anchor-id="sec-a1-different-measures-of-net-rental-expenses">A1. Results using different measures of “Net Rental Expenses”</h3>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="do">## create leverage variables </span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> compustat_na <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(at &gt; 0) %&gt;% </span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(indfmt <span class="sc">==</span> <span class="st">"INDL"</span>) <span class="sc">%&gt;%</span> <span class="do">## remove all financial firms </span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="do">## leverage variables: </span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> at, </span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">debt_ebitda =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> ebitda, </span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    <span class="do">## treatment intensity: </span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># totalrent = mrc1 + mrc2 + mrc3 + mrc4 + mrc5 + mrct, # total rent w/o discount</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">contract_intensity =</span> (dclo <span class="sc">+</span> xrent <span class="sc">*</span> <span class="dv">3</span>) <span class="sc">/</span> at, <span class="co"># executory contract intensity</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># contract_intensity = (dclo + totalrent) / at, # executory contract intensity</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    <span class="do">## other variables: </span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.integer</span>(<span class="fu">substr</span>(datadate, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">stop =</span> <span class="dv">4</span>)) <span class="co"># data year</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In this part of the analysis, I use the definition of “Net Rental Expenses” in our paper, namely <code>Debt in Current Liabilities (Total) + 3 * xrent</code> and use this to construct a different measure of contract intensity.</p>
<section id="sec-a1a-try-and-error-with-calender-year-dyear" class="level4">
<h4 class="anchored" data-anchor-id="sec-a1a-try-and-error-with-calender-year-dyear">A1.1. try-and-error with calender year <code>dyear</code></h4>
<p>In this section, we first try to use the year information <code>dyear</code> extracted from variable <code>datadate</code> as the periods.</p>
<p>On top of the base <code>data</code>, we add several new variables in dataset <code>data_did</code>:</p>
<ul>
<li><code>contract_intensity_2000</code>: the contract intensity for each firm in year <code>dyear == 2000</code>.</li>
<li><code>post_2005</code>: an indicator equals to 1 if <code>dyear &gt; 2005</code> and 0 otherwise.</li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>data_firm <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span> <span class="co"># use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, <span class="at">contract_intensity_2000 =</span> contract_intensity) <span class="sc">%&gt;%</span> </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span> </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">contract_intensity_2000 =</span> <span class="fu">mean</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) ) <span class="sc">%&gt;%</span> </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() </span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>FF_30ind <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"</span>))</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>data_did <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable </span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span> </span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classifiaction </span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span> </span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>  <span class="do">## exclude certain industries </span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">20</span>, <span class="co"># exclude Utiltiy (number 20) </span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(sic <span class="sc">&gt;=</span> <span class="dv">6000</span> <span class="sc">&amp;</span> sic <span class="sc">&lt;=</span> <span class="dv">6199</span>) <span class="co"># exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>  <span class="do">## pre- &amp; post- </span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">indexyear =</span> (dyear <span class="sc">-</span> base_year), <span class="co"># year index with 2005 as base 0.</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(dyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)  <span class="co"># whether it is after the 2005 reform </span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="co"># %&gt;% </span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># drop values outside the range:</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(</span></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 1), yes = book_leverage, no = NA),</span></span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   debt_ebitda = ifelse(test = (debt_ebitda &gt;= 0 &amp; debt_ebitda &lt;= 15), yes = debt_ebitda, no = NA )</span></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ) </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>DiD Analysis:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>data_did <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">etable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                    .
Dependent Var.:                         book_leverage
                                                     
contract_intensity_2000 x post_2005 -0.9712* (0.4132)
Fixed-Effects:                      -----------------
gvkey                                             Yes
dyear                                             Yes
___________________________________ _________________
S.E.: Clustered                     by: gvkey &amp; ff_3.
Observations                                   24,307
R2                                            0.37021
Within R2                                     0.00335
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>data_did <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, indexyear, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2000</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey) </span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> <span class="fu">i</span>(indexyear, contract_intensity_2000, <span class="sc">-</span><span class="dv">1</span>) <span class="sc">|</span> gvkey <span class="sc">+</span> indexyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">iplot</span>(., </span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="fu">paste</span>(<span class="st">"Time to treatment (0 is Year "</span>, base_year, <span class="st">")"</span>, <span class="at">sep =</span> <span class="st">""</span>),</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Treatment Effect (TWFE): calendar year"</span>, </span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">ref.line =</span> <span class="cn">FALSE</span>,</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">ref.line.par =</span> <span class="fu">list</span>(<span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>),</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">pt.join =</span> <span class="cn">FALSE</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>        ); <span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">at =</span> <span class="sc">-</span><span class="dv">7</span><span class="sc">:</span><span class="dv">2</span>); <span class="fu">abline</span>(<span class="at">v =</span> <span class="fl">0.5</span>, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">3</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AFA_test_2005_files/figure-html/a1a-did-test-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># fixest::coefplot()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="sec-a1b-try-and-error-with-calender-year-fyear" class="level4">
<h4 class="anchored" data-anchor-id="sec-a1b-try-and-error-with-calender-year-fyear">A1.2. try-and-error with calender year <code>fyear</code></h4>
<p>In this section, we first try to use the year information <code>fyear</code> extracted from variable <code>datadate</code> as the periods.</p>
<p>On top of the base <code>data</code>, we add several new variables in dataset <code>data_did</code>:</p>
<ul>
<li><code>contract_intensity_2000</code>: the contract intensity for each firm in year <code>fyear == 2000</code>.</li>
<li><code>post_2005</code>: an indicator equals to 1 if <code>fyear &gt; 2005</code> and 0 otherwise.</li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>data_firm <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fyear <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span> <span class="co"># use `fyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, <span class="at">contract_intensity_2000 =</span> contract_intensity) </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>FF_30ind <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"</span>))</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>data_did <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable </span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span> </span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classifiaction </span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="do">## exclude certain industries </span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">20</span>, <span class="co"># exclude Utiltiy (number 20) </span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(sic <span class="sc">&gt;=</span> <span class="dv">6000</span> <span class="sc">&amp;</span> sic <span class="sc">&lt;=</span> <span class="dv">6199</span>) <span class="co"># exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>  <span class="do">## pre- &amp; post- </span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">indexyear =</span> (fyear <span class="sc">-</span> base_year), <span class="co"># year index with 2005 as base 0.</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(fyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)  <span class="co"># whether it is after the 2005 reform </span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="co"># %&gt;% </span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># drop values outside the range:</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 1), yes = book_leverage, no = NA),</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   debt_ebitda = ifelse(test = (debt_ebitda &gt;= 0 &amp; debt_ebitda &lt;= 15), yes = debt_ebitda, no = NA )</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ) </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>DiD Analysis:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>data_did <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, fyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> fyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">fyear =</span> <span class="fu">as.factor</span>(fyear), </span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> fyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">etable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                    .
Dependent Var.:                         book_leverage
                                                     
contract_intensity_2000 x post_2005 -0.9878* (0.4243)
Fixed-Effects:                      -----------------
gvkey                                             Yes
fyear                                             Yes
___________________________________ _________________
S.E.: Clustered                     by: gvkey &amp; ff_3.
Observations                                   24,133
R2                                            0.29925
Within R2                                     0.00130
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>data_did <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, fyear, contract_intensity_2000, post_2005, indexyear, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fyear <span class="sc">&gt;=</span> <span class="dv">2000</span> <span class="sc">&amp;</span> fyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey) </span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> <span class="fu">i</span>(indexyear, contract_intensity_2000, <span class="sc">-</span><span class="dv">1</span>) <span class="sc">|</span> gvkey <span class="sc">+</span> indexyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">iplot</span>(., </span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="fu">paste</span>(<span class="st">"Time to treatment (0 is Year "</span>, base_year, <span class="st">")"</span>, <span class="at">sep =</span> <span class="st">""</span>),</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Treatment Effect (TWFE): fiscal year"</span>, </span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">ref.line =</span> <span class="cn">FALSE</span>,</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">ref.line.par =</span> <span class="fu">list</span>(<span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>),</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">pt.join =</span> <span class="cn">FALSE</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>        ); <span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">at =</span> <span class="sc">-</span><span class="dv">7</span><span class="sc">:</span><span class="dv">2</span>); <span class="fu">abline</span>(<span class="at">v =</span> <span class="fl">0.5</span>, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">3</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AFA_test_2005_files/figure-html/a1b-did-test-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># fixest::coefplot() </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="sec-a2-results-using-data-filters-in-the-main-paper" class="level3">
<h3 class="anchored" data-anchor-id="sec-a2-results-using-data-filters-in-the-main-paper">A2. Results using data filters in the main paper</h3>
<p>In this section, we restrict to observations with <code>Book leverage</code> inside the [0,1] range over the full sample.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="do">## create leverage variables </span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> compustat_na <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(at &gt; 0) %&gt;% </span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(indfmt <span class="sc">==</span> <span class="st">"INDL"</span>) <span class="sc">%&gt;%</span> <span class="do">## remove all financial firms </span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    <span class="do">## leverage variables: </span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> at, </span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">debt_ebitda =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> ebitda, </span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    <span class="do">## treatment intensity: </span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">totalrent =</span> mrc1 <span class="sc">+</span> mrc2 <span class="sc">+</span> mrc3 <span class="sc">+</span> mrc4 <span class="sc">+</span> mrc5 <span class="sc">+</span> mrct, <span class="co"># total rent w/o discount</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">contract_intensity =</span> (dclo <span class="sc">+</span> totalrent) <span class="sc">/</span> at, <span class="co"># executory contract intensity</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>    <span class="do">## other variables: </span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.integer</span>(<span class="fu">substr</span>(datadate, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">stop =</span> <span class="dv">4</span>)) <span class="co"># data year</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>data_firm <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span> <span class="co"># use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, <span class="at">contract_intensity_2000 =</span> contract_intensity) <span class="sc">%&gt;%</span> </span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span> </span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">contract_intensity_2000 =</span> <span class="fu">mean</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) ) <span class="sc">%&gt;%</span> </span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() </span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>data_did <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable </span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span> </span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classifiaction </span></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span> </span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>  <span class="do">## exclude certain industries </span></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">20</span>, <span class="co"># exclude Utiltiy (number 20) </span></span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(sic <span class="sc">&gt;=</span> <span class="dv">6000</span> <span class="sc">&amp;</span> sic <span class="sc">&lt;=</span> <span class="dv">6199</span>) <span class="co"># exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>  <span class="do">## pre- &amp; post- </span></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">indexyear =</span> (dyear <span class="sc">-</span> base_year), <span class="co"># year index with 2005 as base 0.</span></span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(dyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)  <span class="co"># whether it is after the 2005 reform </span></span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># drop values outside the range:</span></span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a>   <span class="at">book_leverage =</span> <span class="fu">ifelse</span>(<span class="at">test =</span> (book_leverage <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> book_leverage <span class="sc">&lt;=</span> <span class="dv">1</span>), <span class="at">yes =</span> book_leverage, <span class="at">no =</span> <span class="cn">NA</span>)</span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>First, we look at some summary statistics for the <code>book_leverage</code> variable.</p>
<p>Summary statistics for the <code>book_leverage</code> variable:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>data_did <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(book_leverage) <span class="sc">%&gt;%</span> </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   book_leverage_1 = ifelse(book_leverage &gt;= 0 &amp; book_leverage &lt;= 1, yes = book_leverage, no = NA), </span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   book_leverage_3 = ifelse(book_leverage &gt;= 0 &amp; book_leverage &lt;= 3, yes = book_leverage, no = NA), </span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   book_leverage_5 = ifelse(book_leverage &gt;= 0 &amp; book_leverage &lt;= 5, yes = book_leverage, no = NA) </span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ) %&gt;% </span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  psych<span class="sc">::</span><span class="fu">describe</span>(.) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>              vars     n mean   sd median trimmed  mad min max range skew
book_leverage    1 52294 0.22 0.23   0.16    0.19 0.24   0   1     1 1.03
              kurtosis se
book_leverage     0.37  0</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, book_leverage, debt_ebitda) <span class="sc">%&gt;%</span> </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(book_leverage) <span class="sc">%&gt;%</span> </span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(book_leverage <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> book_leverage <span class="sc">&lt;=</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  .<span class="sc">$</span>book_leverage <span class="sc">%&gt;%</span> </span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hist</span>(., </span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">prob =</span> <span class="cn">TRUE</span>, <span class="co"># density plot</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">"#E1DEFC"</span>,  </span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">main =</span> <span class="st">"Density Histogram: raw data from Compustat NA (US only)"</span>, </span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">xlab =</span> <span class="st">"Book leverage (only show the region [0,3])"</span>,</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">ylab =</span> <span class="st">"Density"</span>, </span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">breaks =</span> <span class="dv">50</span>, <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">3</span>) </span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>       )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AFA_test_2005_files/figure-html/a2-did-summary-stat-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>data_did <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, dlc, dltt, at, book_leverage, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>book_leverage) <span class="sc">%&gt;%</span> </span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 22,039 × 9
   gvkey dyear contract_intensity_2…¹    dlc    dltt      at book_leverage   sic
   &lt;int&gt; &lt;int&gt;                  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt; &lt;int&gt;
 1  8045  2006                 0       0.005 4.5 e-2 5   e-2         1      6500
 2 66660  2007                 0.0119  7.8   1.75e+3 1.76e+3         1.00   1520
 3 61584  2004                 1.48   19.6   6.97e+2 7.17e+2         1.00   8300
 4 13472  2002                 0.0844  0.196 2.89e+0 3.09e+0         0.999  3823
 5  8526  2004                 0.227   2.61  3.67e+1 3.94e+1         0.998  2834
 6 61108  2005                 0.441   0.2   3.3 e-1 5.31e-1         0.998  3826
 7 30950  2005                 0.0266  3.04  7.83e+2 7.88e+2         0.998  4833
 8  6773  2002                 0.466   0.854 3.40e+0 4.26e+0         0.998  7370
 9  8526  2003                 0.227   8.44  3.64e+1 4.50e+1         0.997  2834
10 12252  2005                 0.594   0     7.24e+1 7.26e+1         0.997  2836
# ℹ 22,029 more rows
# ℹ abbreviated name: ¹​contract_intensity_2000
# ℹ 1 more variable: ff_30ind_name &lt;chr&gt;</code></pre>
</div>
</div>
<p>DiD Analysis:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">etable</span>(</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">(1)</span><span class="st">`</span> <span class="ot">=</span> data_did <span class="sc">%&gt;%</span> </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)), </span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">(2)</span><span class="st">`</span> <span class="ot">=</span> data_did <span class="sc">%&gt;%</span> </span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear <span class="sc">+</span> ff_30ind_name<span class="sc">^</span>dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) </span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                  (1)               (2)
Dependent Var.:                         book_leverage     book_leverage
                                                                       
contract_intensity_2000 x post_2005   0.0031 (0.0020)   0.0028 (0.0019)
Fixed-Effects:                        ---------------   ---------------
gvkey                                             Yes               Yes
dyear                                             Yes               Yes
ff_30ind_name-dyear                                No               Yes
___________________________________   _______________   _______________
S.E.: Clustered                     by: gvkey &amp; ff_3. by: gvkey &amp; ff_3.
Observations                                   21,599            21,599
R2                                            0.79481           0.79807
Within R2                                     0.00020           0.00017
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>model_a2_a <span class="ot">&lt;-</span> data_did <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, indexyear, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2001</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey) </span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> <span class="fu">i</span>(indexyear, contract_intensity_2000, <span class="sc">-</span><span class="dv">4</span>) <span class="sc">|</span> gvkey <span class="sc">+</span> indexyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>))</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>model_a2_b <span class="ot">&lt;-</span> data_did <span class="sc">%&gt;%</span> </span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, indexyear, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2001</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey) </span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> <span class="fu">i</span>(indexyear, contract_intensity_2000, <span class="sc">-</span><span class="dv">4</span>) <span class="sc">|</span> gvkey <span class="sc">+</span> indexyear <span class="sc">+</span> ff_30ind_name<span class="sc">^</span>indexyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) <span class="co"># with industry-year FE. </span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a><span class="fu">iplot</span>(<span class="fu">list</span>(model_a2_a, model_a2_b), </span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="fu">paste</span>(<span class="st">"Time to treatment (0 is Year "</span>, base_year, <span class="st">")"</span>, <span class="at">sep =</span> <span class="st">""</span>),</span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Treatment Effect (TWFE): Book leverage in [0,1]"</span>, </span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">ref.line =</span> <span class="cn">FALSE</span>,</span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">ref.line.par =</span> <span class="fu">list</span>(<span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>),</span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">pt.join =</span> <span class="cn">FALSE</span></span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>        ); <span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">at =</span> <span class="sc">-</span><span class="dv">7</span><span class="sc">:</span><span class="dv">2</span>); <span class="fu">abline</span>(<span class="at">v =</span> <span class="fl">0.5</span>, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">3</span>); <span class="fu">legend</span>(<span class="st">"bottomleft"</span>, <span class="at">bty =</span> <span class="st">"n"</span>, <span class="at">col =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="at">pch =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">17</span>), <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"TWFE"</span>, <span class="st">"TWFE + Industry-Year FE"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AFA_test_2005_files/figure-html/a2-did-test-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># fixest::coefplot() </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Compare to results in <a href="#sec-s3a-try-and-error-with-calender-year-dyear" class="quarto-xref">Section&nbsp;3.1</a>, the coefficient estimate on the treatment in <a href="#sec-a2-results-using-data-filters-in-the-main-paper" class="quarto-xref">Section&nbsp;5.2</a> not only becomes insignificant, but also changes the direction of the impact.</p>
</section>
<section id="sec-a3-sensitivity-analysis" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="sec-a3-sensitivity-analysis">A3. Sensitivity Analysis of Choosing 2000</h3>
<p>In this subsection, we examine how sensitive the coefficient estimate is with respect to changes in the base year for determining the contract intensity of a firm. We still use <code>dyear</code> as the year variable.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>data_firm_wide <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(dyear, gvkey, contract_intensity) <span class="sc">%&gt;%</span> </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(dyear, gvkey) <span class="sc">%&gt;%</span> </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">contract_intensity =</span> <span class="fu">mean</span>(contract_intensity, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) ) <span class="sc">%&gt;%</span> </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&lt;</span> <span class="dv">2002</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> dyear, <span class="at">values_from =</span> contract_intensity) <span class="sc">%&gt;%</span> </span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="at">.fn =</span> <span class="sc">~</span> <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">d{4}"</span>, <span class="at">x =</span> .x), <span class="fu">paste0</span>(<span class="st">"contract_intensity_"</span>, .x), <span class="at">no =</span> .x) )</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>data_did_wide <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable </span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm_wide, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span> </span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classifiaction </span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>  <span class="do">## exclude certain industries </span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">20</span>, <span class="co"># exclude Utiltiy (number 20) </span></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(sic <span class="sc">&gt;=</span> <span class="dv">6000</span> <span class="sc">&amp;</span> sic <span class="sc">&lt;=</span> <span class="dv">6199</span>) <span class="co"># exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>  <span class="do">## pre- &amp; post- </span></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">indexyear =</span> (dyear <span class="sc">-</span> base_year), <span class="co"># year index with 2005 as base 0.</span></span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(dyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)  <span class="co"># whether it is after the 2005 reform</span></span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We construct a series of new column variables under the name of <code>contract_intensity_[year]</code> with <code>dyear &lt; 2002</code>.</p>
<p>DiD Analysis:</p>
<div class="cell page-columns page-full">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>reg_contract_intensity_list <span class="ot">&lt;-</span> <span class="fu">list</span>(); <span class="cf">for</span> (contract_base <span class="cf">in</span> <span class="fu">names</span>(data_firm_wide)[<span class="sc">-</span><span class="dv">1</span>] ) {</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="do">## format the regression</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  reg_raw_year <span class="ot">&lt;-</span> <span class="fu">as.formula</span>(<span class="fu">paste</span>(<span class="st">"book_leverage ~ "</span>, contract_base, <span class="st">":post_2005 | gvkey + dyear"</span>, <span class="at">sep =</span> <span class="st">""</span>)) </span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="do">## use different base year(s) </span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  reg_year <span class="ot">&lt;-</span> data_did_wide <span class="sc">%&gt;%</span> </span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(gvkey, dyear, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name, (<span class="sc">!!</span><span class="fu">sym</span>(contract_base)) ) <span class="sc">%&gt;%</span> </span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear) </span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>    fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> reg_raw_year, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) </span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>  reg_contract_intensity_list[[contract_base]] <span class="ot">&lt;-</span> reg_year</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">assign</span>(<span class="at">x =</span> <span class="fu">paste</span>(<span class="st">"reg_"</span>, contract_base, <span class="at">sep =</span> <span class="st">""</span>), reg_year) </span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>} </span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a><span class="do">## change the name of each did regressions: </span></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(reg_contract_intensity_list) <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(<span class="at">string =</span> <span class="fu">names</span>(reg_contract_intensity_list), <span class="at">pattern =</span> <span class="st">"contract_intensity_"</span>, <span class="at">replacement =</span> <span class="st">"base: dyear="</span>)</span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a><span class="fu">etable</span>(reg_contract_intensity_list, <span class="at">vcov =</span> <span class="st">"cluster"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">"html"</span>, <span class="at">caption =</span> <span class="st">"DiD Results with Different Base Year for Contract Intensity"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(</span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">font_size =</span> <span class="dv">8</span>,       <span class="co"># Smaller font (default is 16px)</span></span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">full_width =</span> <span class="cn">FALSE</span>,   <span class="co"># Table width fits content </span></span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"condensed"</span>)</span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display column-page-right">
<table class="table table-striped table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<caption>DiD Results with Different Base Year for Contract Intensity</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th">base: dye..1997</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">base: dyear=1998</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">base: dyear=1999</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">base: dyear=2000</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">base: dyear=2001</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Dependent Var.:</td>
<td style="text-align: left;">book_leverage</td>
<td style="text-align: left;">book_leverage</td>
<td style="text-align: left;">book_leverage</td>
<td style="text-align: left;">book_leverage</td>
<td style="text-align: left;">book_leverage</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">contract_intensity_1997 x post_2005</td>
<td style="text-align: left;">0.0676 (0.3000)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">contract_intensity_1998 x post_2005</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">-0.0003 (0.0005)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">contract_intensity_1999 x post_2005</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">-1.797*** (0.2602)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">contract_intensity_2000 x post_2005</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">-0.4184*** (0.1057)</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">contract_intensity_2001 x post_2005</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">-0.4592*** (0.0129)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fixed-Effects:</td>
<td style="text-align: left;">---------------</td>
<td style="text-align: left;">----------------</td>
<td style="text-align: left;">------------------</td>
<td style="text-align: left;">-------------------</td>
<td style="text-align: left;">-------------------</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gvkey</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
</tr>
<tr class="even">
<td style="text-align: left;">dyear</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
</tr>
<tr class="odd">
<td style="text-align: left;">___________________________________</td>
<td style="text-align: left;">_______________</td>
<td style="text-align: left;">________________</td>
<td style="text-align: left;">__________________</td>
<td style="text-align: left;">___________________</td>
<td style="text-align: left;">___________________</td>
</tr>
<tr class="even">
<td style="text-align: left;">S.E.: Clustered</td>
<td style="text-align: left;">by: gvkey</td>
<td style="text-align: left;">by: gvkey</td>
<td style="text-align: left;">by: gvkey</td>
<td style="text-align: left;">by: gvkey</td>
<td style="text-align: left;">by: gvkey</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Observations</td>
<td style="text-align: left;">17,349</td>
<td style="text-align: left;">19,003</td>
<td style="text-align: left;">21,231</td>
<td style="text-align: left;">22,803</td>
<td style="text-align: left;">24,018</td>
</tr>
<tr class="even">
<td style="text-align: left;">R2</td>
<td style="text-align: left;">0.31625</td>
<td style="text-align: left;">0.51764</td>
<td style="text-align: left;">0.52312</td>
<td style="text-align: left;">0.39586</td>
<td style="text-align: left;">0.31542</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Within R2</td>
<td style="text-align: left;">9.14e-7</td>
<td style="text-align: left;">9.11e-8</td>
<td style="text-align: left;">0.00434</td>
<td style="text-align: left;">0.00336</td>
<td style="text-align: left;">0.00290</td>
</tr>
</tbody>
</table>


</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">coefplot</span>(</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  reg_contract_intensity_list, </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">horiz =</span> <span class="cn">TRUE</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div class="page-columns page-full">
<figure class="figure page-columns page-full">
<p class="page-columns page-full"><img src="AFA_test_2005_files/figure-html/a3-did-test-1.png" class="img-fluid figure-img column-page-right" width="672"></p>
</figure>
</div>
</div>
</div>
<p>From the regression results, we can see that the treatment effect remains negatively statistically significant at 1% level, if we choose 1999 or 2001 as the base year to measure the contract intensity characteristic of a firm. Choosing years before 1999 will make the treatment effect insignificant. This is understandable as firms characteristics before 1999 may not be a good measure for its characteristics between 2002 and 2007. Our results are robust to most of adjustments in the standard errors. In the base tests, results are invariant when we cluster standard errors at the firm level and also at both the firm and year level.</p>
<p>However, the results are <mark>no longer significant when we use the heteroscedasticity-robust (HC1) corrected standard errors</mark>, even when using 2000 as the base year for <code>contract_intensity</code>. See the regression results below:</p>
<div class="cell page-columns page-full">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">etable</span>(reg_contract_intensity_list, <span class="at">vcov =</span> <span class="st">"HC1"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">"html"</span>, <span class="at">caption =</span> <span class="st">"DiD Results with Different Base Years for Contract Intensity"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">font_size =</span> <span class="dv">8</span>,       <span class="co"># Smaller font (default is 16px)</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">full_width =</span> <span class="cn">FALSE</span>,   <span class="co"># Table width fits content </span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"condensed"</span>)</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display column-page-right">
<table class="table table-striped table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<caption>DiD Results with Different Base Years for Contract Intensity</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th">base: dye..1997</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">base: dyear=1998</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">base: dy..1999</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">base: dyear=2000</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">base: dyear=2001</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Dependent Var.:</td>
<td style="text-align: left;">book_leverage</td>
<td style="text-align: left;">book_leverage</td>
<td style="text-align: left;">book_leverage</td>
<td style="text-align: left;">book_leverage</td>
<td style="text-align: left;">book_leverage</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">contract_intensity_1997 x post_2005</td>
<td style="text-align: left;">0.0676 (0.2919)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">contract_intensity_1998 x post_2005</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">-0.0003 (0.0005)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">contract_intensity_1999 x post_2005</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">-1.797 (1.308)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">contract_intensity_2000 x post_2005</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">-0.4184. (0.2329)</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">contract_intensity_2001 x post_2005</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">-0.4592 (0.3001)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fixed-Effects:</td>
<td style="text-align: left;">---------------</td>
<td style="text-align: left;">----------------</td>
<td style="text-align: left;">--------------</td>
<td style="text-align: left;">-----------------</td>
<td style="text-align: left;">----------------</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gvkey</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
</tr>
<tr class="even">
<td style="text-align: left;">dyear</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
</tr>
<tr class="odd">
<td style="text-align: left;">___________________________________</td>
<td style="text-align: left;">_______________</td>
<td style="text-align: left;">________________</td>
<td style="text-align: left;">______________</td>
<td style="text-align: left;">_________________</td>
<td style="text-align: left;">________________</td>
</tr>
<tr class="even">
<td style="text-align: left;">S.E. type</td>
<td style="text-align: left;">Heteroske.-rob.</td>
<td style="text-align: left;">Heterosked.-rob.</td>
<td style="text-align: left;">Heterosk.-rob.</td>
<td style="text-align: left;">Heteroskeda.-rob.</td>
<td style="text-align: left;">Heterosked.-rob.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Observations</td>
<td style="text-align: left;">17,349</td>
<td style="text-align: left;">19,003</td>
<td style="text-align: left;">21,231</td>
<td style="text-align: left;">22,803</td>
<td style="text-align: left;">24,018</td>
</tr>
<tr class="even">
<td style="text-align: left;">R2</td>
<td style="text-align: left;">0.31625</td>
<td style="text-align: left;">0.51764</td>
<td style="text-align: left;">0.52312</td>
<td style="text-align: left;">0.39586</td>
<td style="text-align: left;">0.31542</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Within R2</td>
<td style="text-align: left;">9.14e-7</td>
<td style="text-align: left;">9.11e-8</td>
<td style="text-align: left;">0.00434</td>
<td style="text-align: left;">0.00336</td>
<td style="text-align: left;">0.00290</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>The numbers in this test, however, are closer to the ones in Samuel’s slides.</p>
<p>In the last part, we re-run all analyses using <code>fyear</code> as the year variable.</p>
<div class="cell page-columns page-full">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="do">## data prep: </span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>data_firm_wide_fyear <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(fyear, gvkey, contract_intensity) <span class="sc">%&gt;%</span> </span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fyear <span class="sc">&lt;</span> <span class="dv">2002</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> fyear, <span class="at">values_from =</span> contract_intensity) <span class="sc">%&gt;%</span> </span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="at">.fn =</span> <span class="sc">~</span> <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">d{4}"</span>, <span class="at">x =</span> .x), <span class="fu">paste0</span>(<span class="st">"contract_intensity_"</span>, .x), <span class="at">no =</span> .x) )</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>data_did_wide_fyear <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable </span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm_wide_fyear, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span> </span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classifiaction </span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span> </span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>  <span class="do">## exclude certain industries </span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">20</span>, <span class="co"># exclude Utiltiy (number 20) </span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(sic <span class="sc">&gt;=</span> <span class="dv">6000</span> <span class="sc">&amp;</span> sic <span class="sc">&lt;=</span> <span class="dv">6199</span>) <span class="co"># exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>  <span class="do">## pre- &amp; post- </span></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">indexyear =</span> (fyear <span class="sc">-</span> base_year), <span class="co"># year index with 2005 as base 0.</span></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(fyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)  <span class="co"># whether it is after the 2005 reform</span></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a><span class="do">## did reg: </span></span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>reg_contract_intensity_list_fyear <span class="ot">&lt;-</span> <span class="fu">list</span>(); <span class="cf">for</span> (contract_base <span class="cf">in</span> <span class="fu">names</span>(data_firm_wide)[<span class="sc">-</span><span class="dv">1</span>] ) {</span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a>  <span class="do">## format the regression</span></span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a>  reg_raw_year <span class="ot">&lt;-</span> <span class="fu">as.formula</span>(<span class="fu">paste</span>(<span class="st">"book_leverage ~ "</span>, contract_base, <span class="st">":post_2005 | gvkey + fyear"</span>, <span class="at">sep =</span> <span class="st">""</span>)) </span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a>  <span class="do">## use different base year(s) </span></span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a>  reg_year <span class="ot">&lt;-</span> data_did_wide <span class="sc">%&gt;%</span> </span>
<span id="cb43-30"><a href="#cb43-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(gvkey, fyear, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name, (<span class="sc">!!</span><span class="fu">sym</span>(contract_base)) ) <span class="sc">%&gt;%</span> </span>
<span id="cb43-31"><a href="#cb43-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(fyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> fyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-32"><a href="#cb43-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb43-33"><a href="#cb43-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb43-34"><a href="#cb43-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">fyear =</span> <span class="fu">as.factor</span>(fyear) </span>
<span id="cb43-35"><a href="#cb43-35" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb43-36"><a href="#cb43-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb43-37"><a href="#cb43-37" aria-hidden="true" tabindex="-1"></a>    fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> reg_raw_year, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) </span>
<span id="cb43-38"><a href="#cb43-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-39"><a href="#cb43-39" aria-hidden="true" tabindex="-1"></a>  reg_contract_intensity_list_fyear[[contract_base]] <span class="ot">&lt;-</span> reg_year</span>
<span id="cb43-40"><a href="#cb43-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-41"><a href="#cb43-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">assign</span>(<span class="at">x =</span> <span class="fu">paste</span>(<span class="st">"reg_"</span>, contract_base, <span class="at">sep =</span> <span class="st">""</span>), reg_year) </span>
<span id="cb43-42"><a href="#cb43-42" aria-hidden="true" tabindex="-1"></a>} </span>
<span id="cb43-43"><a href="#cb43-43" aria-hidden="true" tabindex="-1"></a><span class="do">## change the name of each did regressions: </span></span>
<span id="cb43-44"><a href="#cb43-44" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(reg_contract_intensity_list_fyear) <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(<span class="at">string =</span> <span class="fu">names</span>(reg_contract_intensity_list_fyear), <span class="at">pattern =</span> <span class="st">"contract_intensity_"</span>, <span class="at">replacement =</span> <span class="st">"base: fyear="</span>)</span>
<span id="cb43-45"><a href="#cb43-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-46"><a href="#cb43-46" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"SE clustered at firm level: </span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "SE clustered at firm level: \n"</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">etable</span>(reg_contract_intensity_list_fyear, <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">"html"</span>, <span class="at">caption =</span> <span class="st">"DiD Results with Different Base Year for Contract Intensity"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">font_size =</span> <span class="dv">8</span>,       <span class="co"># Smaller font (default is 16px)</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">full_width =</span> <span class="cn">FALSE</span>,   <span class="co"># Table width fits content </span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"condensed"</span>)</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display column-page-right">
<table class="table table-striped table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<caption>DiD Results with Different Base Year for Contract Intensity</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th">base: fye..1997</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">base: fyear=1998</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">base: fyear=1999</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">base: fyear=2000</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">base: fyear=2001</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Dependent Var.:</td>
<td style="text-align: left;">book_leverage</td>
<td style="text-align: left;">book_leverage</td>
<td style="text-align: left;">book_leverage</td>
<td style="text-align: left;">book_leverage</td>
<td style="text-align: left;">book_leverage</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">contract_intensity_1997 x post_2005</td>
<td style="text-align: left;">0.0139 (0.2941)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">contract_intensity_1998 x post_2005</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">-0.0003 (0.0006)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">contract_intensity_1999 x post_2005</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">-1.781*** (0.2527)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">contract_intensity_2000 x post_2005</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">-0.4244*** (0.1016)</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">contract_intensity_2001 x post_2005</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">-0.4708*** (0.0146)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fixed-Effects:</td>
<td style="text-align: left;">---------------</td>
<td style="text-align: left;">----------------</td>
<td style="text-align: left;">------------------</td>
<td style="text-align: left;">-------------------</td>
<td style="text-align: left;">-------------------</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gvkey</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
</tr>
<tr class="even">
<td style="text-align: left;">fyear</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
</tr>
<tr class="odd">
<td style="text-align: left;">___________________________________</td>
<td style="text-align: left;">_______________</td>
<td style="text-align: left;">________________</td>
<td style="text-align: left;">__________________</td>
<td style="text-align: left;">___________________</td>
<td style="text-align: left;">___________________</td>
</tr>
<tr class="even">
<td style="text-align: left;">S.E.: Clustered</td>
<td style="text-align: left;">by: gvkey &amp; ff_3.</td>
<td style="text-align: left;">by: gvkey &amp; ff_3.</td>
<td style="text-align: left;">by: gvkey &amp; ff_3.</td>
<td style="text-align: left;">by: gvkey &amp; ff_3.</td>
<td style="text-align: left;">by: gvkey &amp; ff_3.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Observations</td>
<td style="text-align: left;">17,140</td>
<td style="text-align: left;">18,782</td>
<td style="text-align: left;">20,988</td>
<td style="text-align: left;">22,538</td>
<td style="text-align: left;">23,739</td>
</tr>
<tr class="even">
<td style="text-align: left;">R2</td>
<td style="text-align: left;">0.32024</td>
<td style="text-align: left;">0.52108</td>
<td style="text-align: left;">0.51044</td>
<td style="text-align: left;">0.30292</td>
<td style="text-align: left;">0.26540</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Within R2</td>
<td style="text-align: left;">4.13e-8</td>
<td style="text-align: left;">1.04e-7</td>
<td style="text-align: left;">0.00434</td>
<td style="text-align: left;">0.00112</td>
<td style="text-align: left;">0.00076</td>
</tr>
</tbody>
</table>


</div>
</div>
<div class="cell page-columns page-full">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"HC1 robust SE: </span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "HC1 robust SE: \n"</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">etable</span>(reg_contract_intensity_list_fyear, <span class="at">vcov =</span> <span class="st">"HC1"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">"html"</span>, <span class="at">caption =</span> <span class="st">"DiD Results with Different Base Year for Contract Intensity"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">font_size =</span> <span class="dv">8</span>,       <span class="co"># Smaller font (default is 16px)</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">full_width =</span> <span class="cn">FALSE</span>,   <span class="co"># Table width fits content </span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"condensed"</span>)</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display column-page-right">
<table class="table table-striped table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<caption>DiD Results with Different Base Year for Contract Intensity</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th">base: fye..1997</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">base: fyear=1998</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">base: fy..1999</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">base: fyear=2000</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">base: fyear=2001</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Dependent Var.:</td>
<td style="text-align: left;">book_leverage</td>
<td style="text-align: left;">book_leverage</td>
<td style="text-align: left;">book_leverage</td>
<td style="text-align: left;">book_leverage</td>
<td style="text-align: left;">book_leverage</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">contract_intensity_1997 x post_2005</td>
<td style="text-align: left;">0.0139 (0.2737)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">contract_intensity_1998 x post_2005</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">-0.0003 (0.0005)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">contract_intensity_1999 x post_2005</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">-1.781 (1.296)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">contract_intensity_2000 x post_2005</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">-0.4244. (0.2343)</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">contract_intensity_2001 x post_2005</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">-0.4708 (0.2999)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fixed-Effects:</td>
<td style="text-align: left;">---------------</td>
<td style="text-align: left;">----------------</td>
<td style="text-align: left;">--------------</td>
<td style="text-align: left;">-----------------</td>
<td style="text-align: left;">----------------</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gvkey</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
</tr>
<tr class="even">
<td style="text-align: left;">fyear</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
</tr>
<tr class="odd">
<td style="text-align: left;">___________________________________</td>
<td style="text-align: left;">_______________</td>
<td style="text-align: left;">________________</td>
<td style="text-align: left;">______________</td>
<td style="text-align: left;">_________________</td>
<td style="text-align: left;">________________</td>
</tr>
<tr class="even">
<td style="text-align: left;">S.E. type</td>
<td style="text-align: left;">Heteroske.-rob.</td>
<td style="text-align: left;">Heterosked.-rob.</td>
<td style="text-align: left;">Heterosk.-rob.</td>
<td style="text-align: left;">Heteroskeda.-rob.</td>
<td style="text-align: left;">Heterosked.-rob.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Observations</td>
<td style="text-align: left;">17,140</td>
<td style="text-align: left;">18,782</td>
<td style="text-align: left;">20,988</td>
<td style="text-align: left;">22,538</td>
<td style="text-align: left;">23,739</td>
</tr>
<tr class="even">
<td style="text-align: left;">R2</td>
<td style="text-align: left;">0.32024</td>
<td style="text-align: left;">0.52108</td>
<td style="text-align: left;">0.51044</td>
<td style="text-align: left;">0.30292</td>
<td style="text-align: left;">0.26540</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Within R2</td>
<td style="text-align: left;">4.13e-8</td>
<td style="text-align: left;">1.04e-7</td>
<td style="text-align: left;">0.00434</td>
<td style="text-align: left;">0.00112</td>
<td style="text-align: left;">0.00076</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>In this case, with HC1 standard errors (same as the default in STATA: <code>robust</code>), only the coefficient using 2000 contract intensity is significant at 10% level, which is very close to the results in Samuel’s slides.</p>

<div class="no-row-height column-margin column-container"><div id="nte-clustering" class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note&nbsp;4
</div>
</div>
<div class="callout-body-container callout-body">
<p>The reason for not using two-way clustering is that there are only 6 clusters at the time dimension. <b>Fewer than 10–20 clusters in a dimension can lead to biased standard errors (Cameron &amp; Miller, 2015)</b>. With 6 years, two-way clustering would produce unreliable results.</p>
</div>
</div></div></section>
<section id="sec-a4-firms-wo-missing" class="level3">
<h3 class="anchored" data-anchor-id="sec-a4-firms-wo-missing">A4. Restrict to Firms w/o Missing Values</h3>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>data_firm <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span> <span class="co"># use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, <span class="at">contract_intensity_2000 =</span> contract_intensity) <span class="sc">%&gt;%</span> </span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span> </span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">contract_intensity_2000 =</span> <span class="fu">mean</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) ) <span class="sc">%&gt;%</span> </span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() </span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>FF_30ind <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"</span>))</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>data_did <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable </span></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span> </span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classifiaction </span></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span> </span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>  <span class="do">## exclude certain industries </span></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">20</span>, <span class="co"># exclude Utiltiy (number 20) </span></span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(sic <span class="sc">&gt;=</span> <span class="dv">6000</span> <span class="sc">&amp;</span> sic <span class="sc">&lt;=</span> <span class="dv">6199</span>) <span class="co"># exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a>  <span class="do">## pre- &amp; post- </span></span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">indexyear =</span> (dyear <span class="sc">-</span> base_year), <span class="co"># year index with 2005 as base 0.</span></span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(dyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)  <span class="co"># whether it is after the 2005 reform </span></span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="exclude-ipo-and-delisting" class="level4">
<h4 class="anchored" data-anchor-id="exclude-ipo-and-delisting">Exclude IPO and Delisting</h4>
<p>If we drop IPO and delisting firms from the sample, the results are as follows:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>data_did <span class="sc">%&gt;%</span> </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="do">## drop IPO and delisting firms</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_obs =</span> <span class="fu">n</span>(), <span class="co"># number of observations for each firm</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_post =</span> <span class="fu">sum</span>(post_2005, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># number of obs after 2005</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n_obs <span class="sc">&gt;</span> n_post <span class="sc">&amp;</span> n_post <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># clean variables</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">ind =</span> <span class="fu">as.factor</span>(ff_30ind_name), <span class="co"># industry </span></span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">ind_time =</span> <span class="fu">as.factor</span>(<span class="fu">paste</span>(ff_30ind_name, dyear, <span class="at">sep =</span> <span class="st">" + "</span>)), </span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a>  <span class="do">## adding industry*year FE does not change the results: + ind_time </span></span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb50-23"><a href="#cb50-23" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">etable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                      .
Dependent Var.:                           book_leverage
                                                       
contract_intensity_2000 x post_2005 -0.4184*** (0.1028)
Fixed-Effects:                      -------------------
gvkey                                               Yes
dyear                                               Yes
___________________________________ ___________________
S.E.: Clustered                       by: gvkey &amp; ff_3.
Observations                                     19,701
R2                                              0.36855
Within R2                                       0.00398
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>data_did <span class="sc">%&gt;%</span> </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, indexyear, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2000</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_obs =</span> <span class="fu">n</span>(), <span class="co"># number of observations for each firm</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_post =</span> <span class="fu">sum</span>(post_2005, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># number of obs after 2005</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n_obs <span class="sc">&gt;</span> n_post <span class="sc">&amp;</span> n_post <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey) </span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> <span class="fu">i</span>(indexyear, contract_intensity_2000, <span class="sc">-</span><span class="dv">1</span>) <span class="sc">|</span> gvkey <span class="sc">+</span> indexyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">iplot</span>(., </span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="fu">paste</span>(<span class="st">"Time to treatment (0 is Year "</span>, base_year, <span class="st">")"</span>, <span class="at">sep =</span> <span class="st">""</span>),</span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Treatment Effect (TWFE): ex. IPO and Delisting"</span>, </span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">ref.line =</span> <span class="cn">FALSE</span>,</span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">ref.line.par =</span> <span class="fu">list</span>(<span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>),</span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">pt.join =</span> <span class="cn">FALSE</span></span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>        ); <span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">at =</span> <span class="sc">-</span><span class="dv">7</span><span class="sc">:</span><span class="dv">2</span>); <span class="fu">abline</span>(<span class="at">v =</span> <span class="fl">0.5</span>, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">3</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AFA_test_2005_files/figure-html/a4-did-test-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># fixest::coefplot(sub = "base year: dyear = 2000") </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The results are similar to the baseline results in <a href="#sec-s3a-try-and-error-with-calender-year-dyear" class="quarto-xref">Section&nbsp;3.1</a>.</p>
</section>
<section id="balanced-panel" class="level4">
<h4 class="anchored" data-anchor-id="balanced-panel">Balanced Panel</h4>
<p>If we restrict our sample to firms having observations in the full sample between 2002 and 2007, the results are as follows:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="do">## baseline: </span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"(1) Baseline:"</span>) </span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>model_a4_a <span class="ot">&lt;-</span> data_did <span class="sc">%&gt;%</span> </span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>  <span class="do">## drop IPO and delisting firms</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_obs =</span> <span class="fu">n</span>(), <span class="co"># number of observations for each firm</span></span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_post =</span> <span class="fu">sum</span>(post_2005, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># number of obs after 2005</span></span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n_obs <span class="sc">==</span> <span class="dv">6</span>) <span class="sc">%&gt;%</span></span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># clean variables</span></span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">ind =</span> <span class="fu">as.factor</span>(ff_30ind_name), <span class="co"># industry </span></span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">ind_time =</span> <span class="fu">as.factor</span>(<span class="fu">paste</span>(ff_30ind_name, dyear, <span class="at">sep =</span> <span class="st">" + "</span>)), </span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-24"><a href="#cb54-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-25"><a href="#cb54-25" aria-hidden="true" tabindex="-1"></a>  <span class="do">## adding industry*year FE does not change the results: + ind_time </span></span>
<span id="cb54-26"><a href="#cb54-26" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) </span>
<span id="cb54-27"><a href="#cb54-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-28"><a href="#cb54-28" aria-hidden="true" tabindex="-1"></a><span class="co"># model_a4_a %&gt;% fixest::etable()</span></span>
<span id="cb54-29"><a href="#cb54-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-30"><a href="#cb54-30" aria-hidden="true" tabindex="-1"></a><span class="do">## baseline + industry*year FE: </span></span>
<span id="cb54-31"><a href="#cb54-31" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb54-32"><a href="#cb54-32" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"(2) Baseline + Industry*Year FE:"</span>) </span>
<span id="cb54-33"><a href="#cb54-33" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb54-34"><a href="#cb54-34" aria-hidden="true" tabindex="-1"></a>model_a4_b <span class="ot">&lt;-</span> data_did <span class="sc">%&gt;%</span> </span>
<span id="cb54-35"><a href="#cb54-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb54-36"><a href="#cb54-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-37"><a href="#cb54-37" aria-hidden="true" tabindex="-1"></a>  <span class="do">## drop IPO and delisting firms</span></span>
<span id="cb54-38"><a href="#cb54-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span></span>
<span id="cb54-39"><a href="#cb54-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-40"><a href="#cb54-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_obs =</span> <span class="fu">n</span>(), <span class="co"># number of observations for each firm</span></span>
<span id="cb54-41"><a href="#cb54-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_post =</span> <span class="fu">sum</span>(post_2005, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># number of obs after 2005</span></span>
<span id="cb54-42"><a href="#cb54-42" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-43"><a href="#cb54-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb54-44"><a href="#cb54-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n_obs <span class="sc">==</span> <span class="dv">6</span>) <span class="sc">%&gt;%</span></span>
<span id="cb54-45"><a href="#cb54-45" aria-hidden="true" tabindex="-1"></a>  <span class="co"># clean variables</span></span>
<span id="cb54-46"><a href="#cb54-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-47"><a href="#cb54-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb54-48"><a href="#cb54-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb54-49"><a href="#cb54-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">ind =</span> <span class="fu">as.factor</span>(ff_30ind_name), <span class="co"># industry </span></span>
<span id="cb54-50"><a href="#cb54-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">ind_time =</span> <span class="fu">as.factor</span>(<span class="fu">paste</span>(ff_30ind_name, dyear, <span class="at">sep =</span> <span class="st">" + "</span>)), </span>
<span id="cb54-51"><a href="#cb54-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb54-52"><a href="#cb54-52" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-53"><a href="#cb54-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-54"><a href="#cb54-54" aria-hidden="true" tabindex="-1"></a>  <span class="do">## adding industry*year FE does not change the results: + ind_time </span></span>
<span id="cb54-55"><a href="#cb54-55" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear <span class="sc">+</span> ind<span class="sc">^</span>dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) </span>
<span id="cb54-56"><a href="#cb54-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-57"><a href="#cb54-57" aria-hidden="true" tabindex="-1"></a><span class="co"># model_a4_b %&gt;% fixest::etable()</span></span>
<span id="cb54-58"><a href="#cb54-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-59"><a href="#cb54-59" aria-hidden="true" tabindex="-1"></a><span class="do">## baseline + constraints on the leverage: </span></span>
<span id="cb54-60"><a href="#cb54-60" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb54-61"><a href="#cb54-61" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"(3) Baseline + Leverage Restrictions:"</span>) </span>
<span id="cb54-62"><a href="#cb54-62" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb54-63"><a href="#cb54-63" aria-hidden="true" tabindex="-1"></a>model_a4_c <span class="ot">&lt;-</span> data_did <span class="sc">%&gt;%</span> </span>
<span id="cb54-64"><a href="#cb54-64" aria-hidden="true" tabindex="-1"></a>  <span class="co"># drop values outside the range:</span></span>
<span id="cb54-65"><a href="#cb54-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-66"><a href="#cb54-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> <span class="fu">ifelse</span>(<span class="at">test =</span> (book_leverage <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> book_leverage <span class="sc">&lt;=</span> <span class="dv">1</span>), <span class="at">yes =</span> book_leverage, <span class="at">no =</span> <span class="cn">NA</span>),</span>
<span id="cb54-67"><a href="#cb54-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">debt_ebitda =</span> <span class="fu">ifelse</span>(<span class="at">test =</span> (debt_ebitda <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> debt_ebitda <span class="sc">&lt;=</span> <span class="dv">15</span>), <span class="at">yes =</span> debt_ebitda, <span class="at">no =</span> <span class="cn">NA</span> )</span>
<span id="cb54-68"><a href="#cb54-68" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-69"><a href="#cb54-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb54-70"><a href="#cb54-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-71"><a href="#cb54-71" aria-hidden="true" tabindex="-1"></a>  <span class="do">## drop IPO and delisting firms</span></span>
<span id="cb54-72"><a href="#cb54-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span></span>
<span id="cb54-73"><a href="#cb54-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-74"><a href="#cb54-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_obs =</span> <span class="fu">n</span>(), <span class="co"># number of observations for each firm</span></span>
<span id="cb54-75"><a href="#cb54-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_post =</span> <span class="fu">sum</span>(post_2005, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># number of obs after 2005</span></span>
<span id="cb54-76"><a href="#cb54-76" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb54-77"><a href="#cb54-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb54-78"><a href="#cb54-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n_obs <span class="sc">==</span> <span class="dv">6</span>) <span class="sc">%&gt;%</span></span>
<span id="cb54-79"><a href="#cb54-79" aria-hidden="true" tabindex="-1"></a>  <span class="co"># clean variables</span></span>
<span id="cb54-80"><a href="#cb54-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-81"><a href="#cb54-81" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb54-82"><a href="#cb54-82" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb54-83"><a href="#cb54-83" aria-hidden="true" tabindex="-1"></a>    <span class="at">ind =</span> <span class="fu">as.factor</span>(ff_30ind_name), <span class="co"># industry </span></span>
<span id="cb54-84"><a href="#cb54-84" aria-hidden="true" tabindex="-1"></a>    <span class="at">ind_time =</span> <span class="fu">as.factor</span>(<span class="fu">paste</span>(ff_30ind_name, dyear, <span class="at">sep =</span> <span class="st">" + "</span>)), </span>
<span id="cb54-85"><a href="#cb54-85" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb54-86"><a href="#cb54-86" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-87"><a href="#cb54-87" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-88"><a href="#cb54-88" aria-hidden="true" tabindex="-1"></a>  <span class="do">## adding industry*year FE does not change the results: + ind_time </span></span>
<span id="cb54-89"><a href="#cb54-89" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) </span>
<span id="cb54-90"><a href="#cb54-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-91"><a href="#cb54-91" aria-hidden="true" tabindex="-1"></a><span class="co"># model_a4_c %&gt;% fixest::etable()</span></span>
<span id="cb54-92"><a href="#cb54-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-93"><a href="#cb54-93" aria-hidden="true" tabindex="-1"></a><span class="do">## baseline + industry*year FE + constraints on the leverage: </span></span>
<span id="cb54-94"><a href="#cb54-94" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb54-95"><a href="#cb54-95" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"(4) Baseline + industry*year FE + Leverage Restrictions:"</span>) </span>
<span id="cb54-96"><a href="#cb54-96" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb54-97"><a href="#cb54-97" aria-hidden="true" tabindex="-1"></a>model_a4_d <span class="ot">&lt;-</span> data_did <span class="sc">%&gt;%</span> </span>
<span id="cb54-98"><a href="#cb54-98" aria-hidden="true" tabindex="-1"></a>  <span class="co"># drop values outside the range:</span></span>
<span id="cb54-99"><a href="#cb54-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-100"><a href="#cb54-100" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> <span class="fu">ifelse</span>(<span class="at">test =</span> (book_leverage <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> book_leverage <span class="sc">&lt;=</span> <span class="dv">1</span>), <span class="at">yes =</span> book_leverage, <span class="at">no =</span> <span class="cn">NA</span>),</span>
<span id="cb54-101"><a href="#cb54-101" aria-hidden="true" tabindex="-1"></a>    <span class="at">debt_ebitda =</span> <span class="fu">ifelse</span>(<span class="at">test =</span> (debt_ebitda <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> debt_ebitda <span class="sc">&lt;=</span> <span class="dv">15</span>), <span class="at">yes =</span> debt_ebitda, <span class="at">no =</span> <span class="cn">NA</span> )</span>
<span id="cb54-102"><a href="#cb54-102" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-103"><a href="#cb54-103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb54-104"><a href="#cb54-104" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-105"><a href="#cb54-105" aria-hidden="true" tabindex="-1"></a>  <span class="do">## drop IPO and delisting firms</span></span>
<span id="cb54-106"><a href="#cb54-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span></span>
<span id="cb54-107"><a href="#cb54-107" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-108"><a href="#cb54-108" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_obs =</span> <span class="fu">n</span>(), <span class="co"># number of observations for each firm</span></span>
<span id="cb54-109"><a href="#cb54-109" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_post =</span> <span class="fu">sum</span>(post_2005, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># number of obs after 2005</span></span>
<span id="cb54-110"><a href="#cb54-110" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb54-111"><a href="#cb54-111" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb54-112"><a href="#cb54-112" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n_obs <span class="sc">==</span> <span class="dv">6</span>) <span class="sc">%&gt;%</span></span>
<span id="cb54-113"><a href="#cb54-113" aria-hidden="true" tabindex="-1"></a>  <span class="co"># clean variables</span></span>
<span id="cb54-114"><a href="#cb54-114" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-115"><a href="#cb54-115" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb54-116"><a href="#cb54-116" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb54-117"><a href="#cb54-117" aria-hidden="true" tabindex="-1"></a>    <span class="at">ind =</span> <span class="fu">as.factor</span>(ff_30ind_name), <span class="co"># industry </span></span>
<span id="cb54-118"><a href="#cb54-118" aria-hidden="true" tabindex="-1"></a>    <span class="at">ind_time =</span> <span class="fu">as.factor</span>(<span class="fu">paste</span>(ff_30ind_name, dyear, <span class="at">sep =</span> <span class="st">" + "</span>)), </span>
<span id="cb54-119"><a href="#cb54-119" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb54-120"><a href="#cb54-120" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-121"><a href="#cb54-121" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-122"><a href="#cb54-122" aria-hidden="true" tabindex="-1"></a>  <span class="do">## adding industry*year FE does not change the results: + ind_time </span></span>
<span id="cb54-123"><a href="#cb54-123" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear <span class="sc">+</span> ind<span class="sc">^</span>dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) </span>
<span id="cb54-124"><a href="#cb54-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-125"><a href="#cb54-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-126"><a href="#cb54-126" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st"> </span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb54-127"><a href="#cb54-127" aria-hidden="true" tabindex="-1"></a><span class="fu">etable</span>(<span class="fu">list</span>(<span class="st">`</span><span class="at">(1) Full Sample</span><span class="st">`</span> <span class="ot">=</span> model_a4_a, </span>
<span id="cb54-128"><a href="#cb54-128" aria-hidden="true" tabindex="-1"></a>            <span class="st">`</span><span class="at">(2) Full Sample</span><span class="st">`</span> <span class="ot">=</span> model_a4_b, </span>
<span id="cb54-129"><a href="#cb54-129" aria-hidden="true" tabindex="-1"></a>            <span class="st">`</span><span class="at">(3) Filtered Sample</span><span class="st">`</span> <span class="ot">=</span> model_a4_c, </span>
<span id="cb54-130"><a href="#cb54-130" aria-hidden="true" tabindex="-1"></a>            <span class="st">`</span><span class="at">(4) Filtered Sample</span><span class="st">`</span> <span class="ot">=</span> model_a4_d  </span>
<span id="cb54-131"><a href="#cb54-131" aria-hidden="true" tabindex="-1"></a>            ), </span>
<span id="cb54-132"><a href="#cb54-132" aria-hidden="true" tabindex="-1"></a>       <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>))</span>
<span id="cb54-133"><a href="#cb54-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-134"><a href="#cb54-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-135"><a href="#cb54-135" aria-hidden="true" tabindex="-1"></a><span class="do">## plot the coefficients pre- and post-treatment: </span></span>
<span id="cb54-136"><a href="#cb54-136" aria-hidden="true" tabindex="-1"></a>data_did <span class="sc">%&gt;%</span> </span>
<span id="cb54-137"><a href="#cb54-137" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, indexyear, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb54-138"><a href="#cb54-138" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2000</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span></span>
<span id="cb54-139"><a href="#cb54-139" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span></span>
<span id="cb54-140"><a href="#cb54-140" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-141"><a href="#cb54-141" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_obs =</span> <span class="fu">sum</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>), <span class="co"># number of observations for each firm</span></span>
<span id="cb54-142"><a href="#cb54-142" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_post =</span> <span class="fu">sum</span>(post_2005, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># number of obs after 2005</span></span>
<span id="cb54-143"><a href="#cb54-143" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb54-144"><a href="#cb54-144" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb54-145"><a href="#cb54-145" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n_obs <span class="sc">==</span> <span class="dv">6</span>) <span class="sc">%&gt;%</span></span>
<span id="cb54-146"><a href="#cb54-146" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-147"><a href="#cb54-147" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey) </span>
<span id="cb54-148"><a href="#cb54-148" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-149"><a href="#cb54-149" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-150"><a href="#cb54-150" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> <span class="fu">i</span>(indexyear, contract_intensity_2000, <span class="sc">-</span><span class="dv">1</span>) <span class="sc">|</span> gvkey <span class="sc">+</span> indexyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb54-151"><a href="#cb54-151" aria-hidden="true" tabindex="-1"></a>  <span class="fu">iplot</span>(., </span>
<span id="cb54-152"><a href="#cb54-152" aria-hidden="true" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="fu">paste</span>(<span class="st">"Time to treatment (0 is Year "</span>, base_year, <span class="st">")"</span>, <span class="at">sep =</span> <span class="st">""</span>),</span>
<span id="cb54-153"><a href="#cb54-153" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Treatment Effect (TWFE): ex. observations with missing values"</span>, </span>
<span id="cb54-154"><a href="#cb54-154" aria-hidden="true" tabindex="-1"></a>        <span class="at">ref.line =</span> <span class="cn">FALSE</span>,</span>
<span id="cb54-155"><a href="#cb54-155" aria-hidden="true" tabindex="-1"></a>        <span class="at">ref.line.par =</span> <span class="fu">list</span>(<span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>),</span>
<span id="cb54-156"><a href="#cb54-156" aria-hidden="true" tabindex="-1"></a>        <span class="at">pt.join =</span> <span class="cn">FALSE</span></span>
<span id="cb54-157"><a href="#cb54-157" aria-hidden="true" tabindex="-1"></a>        ); <span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">at =</span> <span class="sc">-</span><span class="dv">7</span><span class="sc">:</span><span class="dv">2</span>); <span class="fu">abline</span>(<span class="at">v =</span> <span class="fl">0.5</span>, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">3</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AFA_test_2005_files/figure-html/a4-did-test2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># fixest::coefplot(sub = "base year: dyear = 2000") </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
(1) Baseline:

(2) Baseline + Industry*Year FE:

(3) Baseline + Leverage Restrictions:

(4) Baseline + industry*year FE + Leverage Restrictions:

 
                                        (1) Full Sample     (2) Full Sample
Dependent Var.:                           book_leverage       book_leverage
                                                                           
contract_intensity_2000 x post_2005 -0.4190*** (0.1041) -0.4177*** (0.1032)
Fixed-Effects:                      ------------------- -------------------
gvkey                                               Yes                 Yes
dyear                                               Yes                 Yes
ind-dyear                                            No                 Yes
___________________________________ ___________________ ___________________
S.E.: Clustered                       by: gvkey &amp; ff_3.   by: gvkey &amp; ff_3.
Observations                                     17,935              17,935
R2                                              0.39999             0.40320
Within R2                                       0.00511             0.00510

                                      (3) Filtered ..  (4) Filtered S..
Dependent Var.:                         book_leverage     book_leverage
                                                                       
contract_intensity_2000 x post_2005   0.0021 (0.0061)  -0.0010 (0.0070)
Fixed-Effects:                        ---------------  ----------------
gvkey                                             Yes               Yes
dyear                                             Yes               Yes
ind-dyear                                          No               Yes
___________________________________   _______________  ________________
S.E.: Clustered                     by: gvkey &amp; ff_3. by: gvkey &amp; ff_3.
Observations                                   13,668            13,668
R2                                            0.85252           0.85574
Within R2                                     2.97e-5           5.71e-6
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>The results are robust to the sample selection.</p>
</section>
</section>
<section id="sec-a5-industry-heterogeneity" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="sec-a5-industry-heterogeneity">A5. Do different industries behave differently?</h3>
<div class="cell page-columns page-full">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="do">## create leverage variables </span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> compustat_na <span class="sc">%&gt;%</span> </span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(at &gt; 0) %&gt;% </span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(indfmt <span class="sc">==</span> <span class="st">"INDL"</span>) <span class="sc">%&gt;%</span> <span class="do">## remove all financial firms </span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>    <span class="do">## leverage variables: </span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> at, </span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">debt_ebitda =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> ebitda, </span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>    <span class="do">## treatment intensity: </span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">totalrent =</span> mrc1 <span class="sc">+</span> mrc2 <span class="sc">+</span> mrc3 <span class="sc">+</span> mrc4 <span class="sc">+</span> mrc5 <span class="sc">+</span> mrct, <span class="co"># total rent w/o discount</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">contract_intensity =</span> (dclo <span class="sc">+</span> totalrent) <span class="sc">/</span> at, <span class="co"># executory contract intensity</span></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>    <span class="do">## other variables: </span></span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.integer</span>(<span class="fu">substr</span>(datadate, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">stop =</span> <span class="dv">4</span>)) <span class="co"># data year</span></span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>data_firm <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span> <span class="co"># use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, <span class="at">contract_intensity_2000 =</span> contract_intensity) <span class="sc">%&gt;%</span> </span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span> </span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">contract_intensity_2000 =</span> <span class="fu">mean</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) ) <span class="sc">%&gt;%</span> </span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() </span>
<span id="cb57-23"><a href="#cb57-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-24"><a href="#cb57-24" aria-hidden="true" tabindex="-1"></a>FF_30ind <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"</span>))</span>
<span id="cb57-25"><a href="#cb57-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-26"><a href="#cb57-26" aria-hidden="true" tabindex="-1"></a>data_did_withind <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb57-27"><a href="#cb57-27" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable </span></span>
<span id="cb57-28"><a href="#cb57-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span> </span>
<span id="cb57-29"><a href="#cb57-29" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classification </span></span>
<span id="cb57-30"><a href="#cb57-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span> </span>
<span id="cb57-31"><a href="#cb57-31" aria-hidden="true" tabindex="-1"></a>  <span class="do">## pre- &amp; post- </span></span>
<span id="cb57-32"><a href="#cb57-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-33"><a href="#cb57-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">indexyear =</span> (dyear <span class="sc">-</span> base_year), <span class="co"># year index with 2005 as base 0.</span></span>
<span id="cb57-34"><a href="#cb57-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(dyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)  <span class="co"># whether it is after the 2005 reform </span></span>
<span id="cb57-35"><a href="#cb57-35" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb57-36"><a href="#cb57-36" aria-hidden="true" tabindex="-1"></a>  <span class="do">## remove some industries: </span></span>
<span id="cb57-37"><a href="#cb57-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb57-38"><a href="#cb57-38" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">20</span>, <span class="co"># exclude Utiltiy (number 20) </span></span>
<span id="cb57-39"><a href="#cb57-39" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(sic <span class="sc">&gt;=</span> <span class="dv">6000</span> <span class="sc">&amp;</span> sic <span class="sc">&lt;=</span> <span class="dv">6199</span>) <span class="co"># exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb57-40"><a href="#cb57-40" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb57-41"><a href="#cb57-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-42"><a href="#cb57-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-43"><a href="#cb57-43" aria-hidden="true" tabindex="-1"></a><span class="do">## did analysis: </span></span>
<span id="cb57-44"><a href="#cb57-44" aria-hidden="true" tabindex="-1"></a>model_a5_average <span class="ot">&lt;-</span> data_did_withind <span class="sc">%&gt;%</span> </span>
<span id="cb57-45"><a href="#cb57-45" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name, ff_30ind_desc, ff_30ind) <span class="sc">%&gt;%</span> </span>
<span id="cb57-46"><a href="#cb57-46" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb57-47"><a href="#cb57-47" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(</span>
<span id="cb57-48"><a href="#cb57-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb57-49"><a href="#cb57-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb57-50"><a href="#cb57-50" aria-hidden="true" tabindex="-1"></a>        <span class="at">ff_30ind =</span> <span class="fu">as.factor</span>(<span class="fu">paste</span>(ff_30ind, ff_30ind_desc, <span class="at">sep =</span> <span class="st">": "</span>)), </span>
<span id="cb57-51"><a href="#cb57-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb57-52"><a href="#cb57-52" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb57-53"><a href="#cb57-53" aria-hidden="true" tabindex="-1"></a>      <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb57-54"><a href="#cb57-54" aria-hidden="true" tabindex="-1"></a>      fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear <span class="sc">+</span> ff_30ind<span class="sc">^</span>dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind"</span>))</span>
<span id="cb57-55"><a href="#cb57-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-56"><a href="#cb57-56" aria-hidden="true" tabindex="-1"></a>model_a5_average <span class="sc">%&gt;%</span> fixest<span class="sc">::</span><span class="fu">etable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                       .
Dependent Var.:                            book_leverage
                                                        
contract_intensity_2000 x post_2005  -0.4159*** (0.1016)
Fixed-Effects:                       -------------------
gvkey                                                Yes
dyear                                                Yes
ff_30ind-dyear                                       Yes
___________________________________  ___________________
S.E.: Clustered                     by: gvkey &amp; ff_30ind
Observations                                      22,803
R2                                               0.40083
Within R2                                        0.00334
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="do">## did analysis for the treatment effects in each industry: </span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>did_withind_model <span class="ot">&lt;-</span> data_did_withind <span class="sc">%&gt;%</span> </span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name, ff_30ind_desc, ff_30ind) <span class="sc">%&gt;%</span> </span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">ff_30ind =</span> <span class="fu">as.factor</span>(<span class="fu">paste</span>(ff_30ind, ff_30ind_desc, <span class="at">sep =</span> <span class="st">": "</span>)), </span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005<span class="sc">:</span>ff_30ind <span class="sc">|</span> gvkey <span class="sc">+</span> dyear <span class="sc">+</span> ff_30ind<span class="sc">^</span>dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>))</span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a>did_withind_model <span class="sc">%&gt;%</span> fixest<span class="sc">::</span><span class="fu">etable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                                                                                           .
Dependent Var.:                                                                                                book_leverage
                                                                                                                            
contract_intensity_2000 x post_2005 x ff_30ind1 x FoodProducts                                                 2.557 (2.321)
contract_intensity_2000 x post_2005 x ff_30ind10 x Textiles                                                  0.2202 (0.6599)
contract_intensity_2000 x post_2005 x ff_30ind11 x ConstructionandConstructionMaterials                       0.3840 (1.948)
contract_intensity_2000 x post_2005 x ff_30ind12 x SteelWorksEtc                                            0.0945* (0.0372)
contract_intensity_2000 x post_2005 x ff_30ind13 x FabricatedProductsandMachinery                            -1.343 (0.8874)
contract_intensity_2000 x post_2005 x ff_30ind14 x ElectricalEquipment                                         1.513 (1.098)
contract_intensity_2000 x post_2005 x ff_30ind15 x AutomobilesandTrucks                                     24.04*** (1.203)
contract_intensity_2000 x post_2005 x ff_30ind16 x Aircraft,ships,andrailroadequipment                      29.67*** (4.386)
contract_intensity_2000 x post_2005 x ff_30ind17 x PreciousMetals,Non-Metallic,andIndustrialMetalMining        63.12 (67.90)
contract_intensity_2000 x post_2005 x ff_30ind18 x Coal                                                     -0.3487 (0.5070)
contract_intensity_2000 x post_2005 x ff_30ind19 x PetroleumandNaturalGas                                -0.4027*** (0.0041)
contract_intensity_2000 x post_2005 x ff_30ind2 x Beer&amp;Liquor                                             0.7163*** (0.1104)
contract_intensity_2000 x post_2005 x ff_30ind21 x Communication                                             0.3623 (0.5689)
contract_intensity_2000 x post_2005 x ff_30ind22 x PersonalandBusinessServices                           -0.3330*** (0.0082)
contract_intensity_2000 x post_2005 x ff_30ind23 x BusinessEquipment                                      -17.50*** (0.6654)
contract_intensity_2000 x post_2005 x ff_30ind24 x BusinessSuppliesandShippingContainers                      -2.812 (1.908)
contract_intensity_2000 x post_2005 x ff_30ind25 x Transportation                                             -1.039 (1.066)
contract_intensity_2000 x post_2005 x ff_30ind26 x Wholesale                                                  -1.617 (4.053)
contract_intensity_2000 x post_2005 x ff_30ind27 x Retail                                                    0.0586 (0.0405)
contract_intensity_2000 x post_2005 x ff_30ind28 x Restaurants,Hotels,Motels                                   2.457 (2.469)
contract_intensity_2000 x post_2005 x ff_30ind29 x Banking,Insurance,RealEstate,Trading                     -0.0304 (0.3842)
contract_intensity_2000 x post_2005 x ff_30ind3 x TobaccoProducts                                       -2.974*** (7.57e-14)
contract_intensity_2000 x post_2005 x ff_30ind30 x EverythingElse                                              1.480 (1.196)
contract_intensity_2000 x post_2005 x ff_30ind4 x Recreation                                                  -4.806 (4.700)
contract_intensity_2000 x post_2005 x ff_30ind5 x PrintingandPublishing                                        171.2 (204.1)
contract_intensity_2000 x post_2005 x ff_30ind6 x ConsumerGoods                                              0.0226 (0.0278)
contract_intensity_2000 x post_2005 x ff_30ind7 x Apparel                                                  -0.0936* (0.0384)
contract_intensity_2000 x post_2005 x ff_30ind8 x Healthcare,MedicalEquipment,PharmaceuticalProducts      -2.003*** (0.0754)
contract_intensity_2000 x post_2005 x ff_30ind9 x Chemicals                                                   3.559. (1.836)
Fixed-Effects:                                                                                          --------------------
gvkey                                                                                                                    Yes
dyear                                                                                                                    Yes
ff_30ind-dyear                                                                                                           Yes
________________________________________                                                                ____________________
S.E.: Clustered                                                                                                    by: gvkey
Observations                                                                                                          22,803
R2                                                                                                                   0.41325
Within R2                                                                                                            0.02400
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>fixest<span class="sc">::</span><span class="fu">coefplot</span>(did_withind_model,</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">order =</span> <span class="fu">str_extract</span>(<span class="at">string =</span> <span class="fu">names</span>(<span class="fu">sort</span>(<span class="fu">coef</span>(did_withind_model), <span class="at">decreasing =</span> <span class="cn">FALSE</span>)), <span class="at">pattern =</span> <span class="st">"(?&lt;=ind).*"</span>), </span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">horiz =</span> <span class="cn">TRUE</span>, </span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">drop =</span> <span class="st">"Print"</span>, <span class="co"># remove the number 5: Printing &amp; Publishing</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">main =</span> <span class="st">"Treatment Effect Estimates for Fama-French 30 Industries"</span>, </span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">sub =</span> <span class="st">"*Printing and Publishing (Industry 5) is excluded. Red dashed line indicates the average treatment effect."</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>                 ); <span class="fu">abline</span>(<span class="at">v =</span> model_a5_average<span class="sc">$</span>coefficients, <span class="at">col =</span> <span class="dv">2</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div class="page-columns page-full">
<figure class="figure page-columns page-full">
<p class="page-columns page-full"><img src="AFA_test_2005_files/figure-html/a5-did-industry-1.png" class="img-fluid figure-img column-page-right" width="1440"></p>
</figure>
</div>
</div>
</div>
<p>In this figure, we present the heterogeneous treatment effect of the 2005 policy on the firm leverage across different industries. We include the firm, year and the industry-year fixed effects in the difference-in-difference analysis. We can see that the treatment effect is negative and statistically significant in Business equipment (23), Healthcare (8), Petroleum and Nature Gas (19), Personal and Business Services (22). While the effect is positive and statistically significant in Automobiles and Trucks (15) and Aircraft, ships, and rail road equipment (16).</p>

<div class="no-row-height column-margin column-container"><div id="nte-ind-obs" class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note&nbsp;5
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Number of observations in each industry</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>data_did_withind <span class="sc">%&gt;%</span> </span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span>  </span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ff_30ind) <span class="sc">%&gt;%</span> </span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_obs =</span> <span class="fu">n</span>(), <span class="at">ff_30ind_name =</span> <span class="fu">unique</span>(ff_30ind_desc)) <span class="sc">%&gt;%</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">n_per %</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(n_obs <span class="sc">/</span> <span class="fu">sum</span>(n_obs) <span class="sc">*</span> <span class="dv">100</span>, <span class="at">digits =</span> <span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>n_obs) <span class="sc">%&gt;%</span> </span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">size =</span> <span class="st">"x-small"</span>),  <span class="co"># Reduce font size</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>(<span class="at">columns =</span> <span class="fu">everything</span>()) <span class="co"># reduce the size of tab headers </span></span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">size =</span> <span class="st">"x-small"</span>),  <span class="co"># Reduce font size</span></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()</span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="ogjkboazbn" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ogjkboazbn table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ogjkboazbn thead, #ogjkboazbn tbody, #ogjkboazbn tfoot, #ogjkboazbn tr, #ogjkboazbn td, #ogjkboazbn th {
  border-style: none;
}

#ogjkboazbn p {
  margin: 0;
  padding: 0;
}

#ogjkboazbn .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ogjkboazbn .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ogjkboazbn .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ogjkboazbn .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ogjkboazbn .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ogjkboazbn .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ogjkboazbn .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ogjkboazbn .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ogjkboazbn .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ogjkboazbn .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ogjkboazbn .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ogjkboazbn .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ogjkboazbn .gt_spanner_row {
  border-bottom-style: hidden;
}

#ogjkboazbn .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ogjkboazbn .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ogjkboazbn .gt_from_md > :first-child {
  margin-top: 0;
}

#ogjkboazbn .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ogjkboazbn .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ogjkboazbn .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ogjkboazbn .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ogjkboazbn .gt_row_group_first td {
  border-top-width: 2px;
}

#ogjkboazbn .gt_row_group_first th {
  border-top-width: 2px;
}

#ogjkboazbn .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ogjkboazbn .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ogjkboazbn .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ogjkboazbn .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ogjkboazbn .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ogjkboazbn .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ogjkboazbn .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ogjkboazbn .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ogjkboazbn .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ogjkboazbn .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ogjkboazbn .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ogjkboazbn .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ogjkboazbn .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ogjkboazbn .gt_left {
  text-align: left;
}

#ogjkboazbn .gt_center {
  text-align: center;
}

#ogjkboazbn .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ogjkboazbn .gt_font_normal {
  font-weight: normal;
}

#ogjkboazbn .gt_font_bold {
  font-weight: bold;
}

#ogjkboazbn .gt_font_italic {
  font-style: italic;
}

#ogjkboazbn .gt_super {
  font-size: 65%;
}

#ogjkboazbn .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ogjkboazbn .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ogjkboazbn .gt_indent_1 {
  text-indent: 5px;
}

#ogjkboazbn .gt_indent_2 {
  text-indent: 10px;
}

#ogjkboazbn .gt_indent_3 {
  text-indent: 15px;
}

#ogjkboazbn .gt_indent_4 {
  text-indent: 20px;
}

#ogjkboazbn .gt_indent_5 {
  text-indent: 25px;
}

#ogjkboazbn .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#ogjkboazbn div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="ff_30ind" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-size: x-small" scope="col">ff_30ind</th>
<th id="n_obs" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-size: x-small" scope="col">n_obs</th>
<th id="ff_30ind_name" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-size: x-small" scope="col">ff_30ind_name</th>
<th id="n_per %" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-size: x-small" scope="col">n_per %</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">22</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">3277</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Personal and Business Services</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">16.86</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">23</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">2717</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Business Equipment</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">13.98</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">8</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">2570</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Healthcare, Medical Equipment, Pharmaceutical Products</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">13.22</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">27</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">1277</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Retail</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">6.57</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">29</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">1220</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Banking, Insurance, Real Estate, Trading</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">6.28</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">30</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">767</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Everything Else</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">3.95</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">26</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">755</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Wholesale</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">3.88</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">13</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">706</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Fabricated Products and Machinery</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">3.63</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">21</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">624</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Communication</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">3.21</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">11</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">581</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Construction and Construction Materials</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">2.99</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">19</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">576</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Petroleum and Natural Gas</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">2.96</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">25</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">501</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Transportation</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">2.58</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">28</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">488</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Restaurants, Hotels, Motels</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">2.51</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">4</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">443</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Recreation</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">2.28</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">9</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">400</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Chemicals</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">2.06</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">1</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">391</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Food Products</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">2.01</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">7</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">327</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Apparel</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">1.68</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">6</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">271</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Consumer Goods</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">1.39</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">14</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">267</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Electrical Equipment</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">1.37</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">15</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">251</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Automobiles and Trucks</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">1.29</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">24</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">242</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Business Supplies and Shipping Containers</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">1.25</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">5</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">214</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Printing and Publishing</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">1.10</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">16</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">157</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Aircraft, ships, and railroad equipment</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">0.81</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">12</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">155</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Steel Works Etc</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">0.80</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">10</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">83</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Textiles</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">0.43</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">2</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">71</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Beer &amp; Liquor</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">0.37</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">17</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">67</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Precious Metals, Non-Metallic, and Industrial Metal Mining</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">0.34</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">18</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">26</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Coal</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">0.13</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="font-size: x-small">3</td>
<td class="gt_row gt_right" headers="n_obs" style="font-size: x-small">10</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="font-size: x-small">Tobacco Products</td>
<td class="gt_row gt_right" headers="n_per %" style="font-size: x-small">0.05</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</div>
</div></div><p>This heterogeneous treatment effect is consistent with our hypothesis. The changes in Section 365(d)(4) are mainly on the leases of non-residential real property and thus should have a significant negative impact on the industries with more non-residential real property leases, e.g.&nbsp;industry 8, 23, 22. Its impact on industries with a lot of executory contract unrelated to the real property (e.g.&nbsp;industry 15, 16) should be non-negative.</p>
<p>In the figure, we remove the Industry 5 (Printing &amp; Publishing). Comparing to industries with positive treatment effects, industries with negative treatment effects compose the majority of observations in the sample. This is consistent with our main results in <a href="#sec-s3a-try-and-error-with-calender-year-dyear" class="quarto-xref">Section&nbsp;3.1</a> and in <a href="#sec-a4-firms-wo-missing" class="quarto-xref">Section&nbsp;5.4</a>.</p>
<div style="page-break-after: always;"></div>
</section>
<section id="a6.-re-run-main-tests-with-more-filters" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="a6.-re-run-main-tests-with-more-filters">A6. Re-run Main Tests with More Filters</h3>
<p>In <a href="#sec-a2-results-using-data-filters-in-the-main-paper" class="quarto-xref">Section&nbsp;5.2</a>, we find that restricting the dependent variable <span class="math inline">\in [0,1]</span> significantly impact the treatment effect estimate from the DiD analysis. We therefore re-do main analysis from previous sections.</p>
<section id="dataset-without-filters-i.e.-baseline" class="level4">
<h4 class="anchored" data-anchor-id="dataset-without-filters-i.e.-baseline">Dataset without filters (i.e.&nbsp;baseline)</h4>
<p>In this setting, we do not put any filters on any variables in the regression. The result is exactly the same as in <a href="#sec-s3a-try-and-error-with-calender-year-dyear" class="quarto-xref">Section&nbsp;3.1</a>.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="sc">!</span> (<span class="fu">ls</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"base_year"</span>, <span class="st">"compustat_na"</span>))])</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="do">## create leverage variables </span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> compustat_na <span class="sc">%&gt;%</span> </span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(at &gt; 0) %&gt;% </span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(indfmt <span class="sc">==</span> <span class="st">"INDL"</span>) <span class="sc">%&gt;%</span> <span class="do">## remove all financial firms</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>    <span class="do">## leverage variables: </span></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> at, </span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">debt_ebitda =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> ebitda, </span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>    <span class="do">## treatment intensity: </span></span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">totalrent =</span> mrc1 <span class="sc">+</span> mrc2 <span class="sc">+</span> mrc3 <span class="sc">+</span> mrc4 <span class="sc">+</span> mrc5 <span class="sc">+</span> mrct, <span class="co"># total rent w/o discount</span></span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">contract_intensity =</span> (dclo <span class="sc">+</span> totalrent) <span class="sc">/</span> at, <span class="co"># executory contract intensity</span></span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># contract_intensity = (totalrent) / at, # executory contract intensity</span></span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a>    <span class="do">## other variables: </span></span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.integer</span>(<span class="fu">substr</span>(datadate, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">stop =</span> <span class="dv">4</span>)) <span class="co"># data year </span></span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a>data_firm <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span> <span class="co"># use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb63-22"><a href="#cb63-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, <span class="at">contract_intensity_2000 =</span> contract_intensity) <span class="sc">%&gt;%</span> </span>
<span id="cb63-23"><a href="#cb63-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span> </span>
<span id="cb63-24"><a href="#cb63-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">contract_intensity_2000 =</span> <span class="fu">mean</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) ) <span class="sc">%&gt;%</span> </span>
<span id="cb63-25"><a href="#cb63-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() </span>
<span id="cb63-26"><a href="#cb63-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-27"><a href="#cb63-27" aria-hidden="true" tabindex="-1"></a>FF_30ind <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"</span>))</span>
<span id="cb63-28"><a href="#cb63-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-29"><a href="#cb63-29" aria-hidden="true" tabindex="-1"></a>data_did <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb63-30"><a href="#cb63-30" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable </span></span>
<span id="cb63-31"><a href="#cb63-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span> </span>
<span id="cb63-32"><a href="#cb63-32" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classification </span></span>
<span id="cb63-33"><a href="#cb63-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span> </span>
<span id="cb63-34"><a href="#cb63-34" aria-hidden="true" tabindex="-1"></a>  <span class="do">## exclude certain industries </span></span>
<span id="cb63-35"><a href="#cb63-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb63-36"><a href="#cb63-36" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">20</span>, <span class="co"># exclude Utiltiy (number 20) </span></span>
<span id="cb63-37"><a href="#cb63-37" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(sic <span class="sc">&gt;=</span> <span class="dv">6000</span> <span class="sc">&amp;</span> sic <span class="sc">&lt;=</span> <span class="dv">6199</span>) <span class="co"># exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb63-38"><a href="#cb63-38" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb63-39"><a href="#cb63-39" aria-hidden="true" tabindex="-1"></a>  <span class="do">## pre- &amp; post- </span></span>
<span id="cb63-40"><a href="#cb63-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb63-41"><a href="#cb63-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">indexyear =</span> (dyear <span class="sc">-</span> base_year), <span class="co"># year index with 2005 as base 0.</span></span>
<span id="cb63-42"><a href="#cb63-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(dyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)  <span class="co"># whether it is after the 2005 reform </span></span>
<span id="cb63-43"><a href="#cb63-43" aria-hidden="true" tabindex="-1"></a>  ) <span class="co"># %&gt;% </span></span>
<span id="cb63-44"><a href="#cb63-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># # drop values outside the range:</span></span>
<span id="cb63-45"><a href="#cb63-45" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(</span></span>
<span id="cb63-46"><a href="#cb63-46" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 1), yes = book_leverage, no = NA),</span></span>
<span id="cb63-47"><a href="#cb63-47" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   debt_ebitda = ifelse(test = (debt_ebitda &gt;= 0 &amp; debt_ebitda &lt;= 15), yes = debt_ebitda, no = NA )</span></span>
<span id="cb63-48"><a href="#cb63-48" aria-hidden="true" tabindex="-1"></a>  <span class="co"># )</span></span>
<span id="cb63-49"><a href="#cb63-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-50"><a href="#cb63-50" aria-hidden="true" tabindex="-1"></a><span class="fu">etable</span>(</span>
<span id="cb63-51"><a href="#cb63-51" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">(1)</span><span class="st">`</span> <span class="ot">=</span> data_did <span class="sc">%&gt;%</span> </span>
<span id="cb63-52"><a href="#cb63-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb63-53"><a href="#cb63-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb63-54"><a href="#cb63-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb63-55"><a href="#cb63-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb63-56"><a href="#cb63-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb63-57"><a href="#cb63-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb63-58"><a href="#cb63-58" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb63-59"><a href="#cb63-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb63-60"><a href="#cb63-60" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)), </span>
<span id="cb63-61"><a href="#cb63-61" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">(2)</span><span class="st">`</span> <span class="ot">=</span> data_did <span class="sc">%&gt;%</span> </span>
<span id="cb63-62"><a href="#cb63-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb63-63"><a href="#cb63-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb63-64"><a href="#cb63-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb63-65"><a href="#cb63-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb63-66"><a href="#cb63-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb63-67"><a href="#cb63-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb63-68"><a href="#cb63-68" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb63-69"><a href="#cb63-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb63-70"><a href="#cb63-70" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear <span class="sc">+</span> ff_30ind_name<span class="sc">^</span>dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) </span>
<span id="cb63-71"><a href="#cb63-71" aria-hidden="true" tabindex="-1"></a>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                    (1)                 (2)
Dependent Var.:                           book_leverage       book_leverage
                                                                           
contract_intensity_2000 x post_2005 -0.4184*** (0.1028) -0.4159*** (0.1016)
Fixed-Effects:                      ------------------- -------------------
gvkey                                               Yes                 Yes
dyear                                               Yes                 Yes
ff_30ind_name-dyear                                  No                 Yes
___________________________________ ___________________ ___________________
S.E.: Clustered                       by: gvkey &amp; ff_3.   by: gvkey &amp; ff_3.
Observations                                     22,803              22,803
R2                                              0.39586             0.40083
Within R2                                       0.00336             0.00334
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
<section id="dataset-with-filters-on-at" class="level4">
<h4 class="anchored" data-anchor-id="dataset-with-filters-on-at">Dataset with filters on <code>at</code></h4>
<p>For <code>at &gt; 0</code>, the results are invariant.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="sc">!</span> (<span class="fu">ls</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"base_year"</span>, <span class="st">"compustat_na"</span>))])</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="do">## create leverage variables </span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> compustat_na <span class="sc">%&gt;%</span> </span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(at <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(indfmt <span class="sc">==</span> <span class="st">"INDL"</span>) <span class="sc">%&gt;%</span> <span class="do">## remove all financial firms</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>    <span class="do">## leverage variables: </span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> at, </span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">debt_ebitda =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> ebitda, </span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>    <span class="do">## treatment intensity: </span></span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">totalrent =</span> mrc1 <span class="sc">+</span> mrc2 <span class="sc">+</span> mrc3 <span class="sc">+</span> mrc4 <span class="sc">+</span> mrc5 <span class="sc">+</span> mrct, <span class="co"># total rent w/o discount</span></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">contract_intensity =</span> (dclo <span class="sc">+</span> totalrent) <span class="sc">/</span> at, <span class="co"># executory contract intensity</span></span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># contract_intensity = (totalrent) / at, # executory contract intensity</span></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>    <span class="do">## other variables: </span></span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.integer</span>(<span class="fu">substr</span>(datadate, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">stop =</span> <span class="dv">4</span>)) <span class="co"># data year </span></span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(book_leverage <span class="sc">&gt;=</span> <span class="dv">0</span>)</span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a>data_firm <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span> <span class="co"># use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, <span class="at">contract_intensity_2000 =</span> contract_intensity) <span class="sc">%&gt;%</span> </span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span> </span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">contract_intensity_2000 =</span> <span class="fu">mean</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) ) <span class="sc">%&gt;%</span> </span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() </span>
<span id="cb65-27"><a href="#cb65-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-28"><a href="#cb65-28" aria-hidden="true" tabindex="-1"></a>FF_30ind <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"</span>))</span>
<span id="cb65-29"><a href="#cb65-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-30"><a href="#cb65-30" aria-hidden="true" tabindex="-1"></a>data_did <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb65-31"><a href="#cb65-31" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable </span></span>
<span id="cb65-32"><a href="#cb65-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span> </span>
<span id="cb65-33"><a href="#cb65-33" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classification </span></span>
<span id="cb65-34"><a href="#cb65-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span> </span>
<span id="cb65-35"><a href="#cb65-35" aria-hidden="true" tabindex="-1"></a>  <span class="do">## exclude certain industries </span></span>
<span id="cb65-36"><a href="#cb65-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb65-37"><a href="#cb65-37" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">20</span>, <span class="co"># exclude Utiltiy (number 20) </span></span>
<span id="cb65-38"><a href="#cb65-38" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(sic <span class="sc">&gt;=</span> <span class="dv">6000</span> <span class="sc">&amp;</span> sic <span class="sc">&lt;=</span> <span class="dv">6199</span>) <span class="co"># exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb65-39"><a href="#cb65-39" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb65-40"><a href="#cb65-40" aria-hidden="true" tabindex="-1"></a>  <span class="do">## pre- &amp; post- </span></span>
<span id="cb65-41"><a href="#cb65-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb65-42"><a href="#cb65-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">indexyear =</span> (dyear <span class="sc">-</span> base_year), <span class="co"># year index with 2005 as base 0.</span></span>
<span id="cb65-43"><a href="#cb65-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(dyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)  <span class="co"># whether it is after the 2005 reform </span></span>
<span id="cb65-44"><a href="#cb65-44" aria-hidden="true" tabindex="-1"></a>  ) <span class="co"># %&gt;% </span></span>
<span id="cb65-45"><a href="#cb65-45" aria-hidden="true" tabindex="-1"></a>  <span class="co"># # drop values outside the range:</span></span>
<span id="cb65-46"><a href="#cb65-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(</span></span>
<span id="cb65-47"><a href="#cb65-47" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 1), yes = book_leverage, no = NA),</span></span>
<span id="cb65-48"><a href="#cb65-48" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   debt_ebitda = ifelse(test = (debt_ebitda &gt;= 0 &amp; debt_ebitda &lt;= 15), yes = debt_ebitda, no = NA )</span></span>
<span id="cb65-49"><a href="#cb65-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># )</span></span>
<span id="cb65-50"><a href="#cb65-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-51"><a href="#cb65-51" aria-hidden="true" tabindex="-1"></a><span class="fu">etable</span>(</span>
<span id="cb65-52"><a href="#cb65-52" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">(1)</span><span class="st">`</span> <span class="ot">=</span> data_did <span class="sc">%&gt;%</span> </span>
<span id="cb65-53"><a href="#cb65-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb65-54"><a href="#cb65-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb65-55"><a href="#cb65-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb65-56"><a href="#cb65-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb65-57"><a href="#cb65-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb65-58"><a href="#cb65-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb65-59"><a href="#cb65-59" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb65-60"><a href="#cb65-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb65-61"><a href="#cb65-61" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)), </span>
<span id="cb65-62"><a href="#cb65-62" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">(2)</span><span class="st">`</span> <span class="ot">=</span> data_did <span class="sc">%&gt;%</span> </span>
<span id="cb65-63"><a href="#cb65-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb65-64"><a href="#cb65-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb65-65"><a href="#cb65-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb65-66"><a href="#cb65-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb65-67"><a href="#cb65-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb65-68"><a href="#cb65-68" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb65-69"><a href="#cb65-69" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb65-70"><a href="#cb65-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb65-71"><a href="#cb65-71" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear <span class="sc">+</span> ff_30ind_name<span class="sc">^</span>dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) </span>
<span id="cb65-72"><a href="#cb65-72" aria-hidden="true" tabindex="-1"></a>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                    (1)                 (2)
Dependent Var.:                           book_leverage       book_leverage
                                                                           
contract_intensity_2000 x post_2005 -0.4184*** (0.1028) -0.4159*** (0.1016)
Fixed-Effects:                      ------------------- -------------------
gvkey                                               Yes                 Yes
dyear                                               Yes                 Yes
ff_30ind_name-dyear                                  No                 Yes
___________________________________ ___________________ ___________________
S.E.: Clustered                       by: gvkey &amp; ff_3.   by: gvkey &amp; ff_3.
Observations                                     22,779              22,779
R2                                              0.39586             0.40083
Within R2                                       0.00336             0.00334
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>For <code>at &gt; 0.05</code>, the treatment effects are still negative, but no longer significant.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="sc">!</span> (<span class="fu">ls</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"base_year"</span>, <span class="st">"compustat_na"</span>))])</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="do">## create leverage variables </span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> compustat_na <span class="sc">%&gt;%</span> </span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(at <span class="sc">&gt;</span> <span class="fl">0.05</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(indfmt <span class="sc">==</span> <span class="st">"INDL"</span>) <span class="sc">%&gt;%</span> <span class="do">## remove all financial firms</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>    <span class="do">## leverage variables: </span></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> at, </span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">debt_ebitda =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> ebitda, </span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>    <span class="do">## treatment intensity: </span></span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">totalrent =</span> mrc1 <span class="sc">+</span> mrc2 <span class="sc">+</span> mrc3 <span class="sc">+</span> mrc4 <span class="sc">+</span> mrc5 <span class="sc">+</span> mrct, <span class="co"># total rent w/o discount</span></span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">contract_intensity =</span> (dclo <span class="sc">+</span> totalrent) <span class="sc">/</span> at, <span class="co"># executory contract intensity</span></span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># contract_intensity = (totalrent) / at, # executory contract intensity</span></span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a>    <span class="do">## other variables: </span></span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.integer</span>(<span class="fu">substr</span>(datadate, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">stop =</span> <span class="dv">4</span>)) <span class="co"># data year </span></span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb67-19"><a href="#cb67-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(book_leverage <span class="sc">&lt;</span> <span class="cn">Inf</span>)</span>
<span id="cb67-20"><a href="#cb67-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-21"><a href="#cb67-21" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">describe</span>(<span class="fu">data.frame</span>(<span class="at">book_leverage =</span> data<span class="sc">$</span>book_leverage))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>              vars      n mean   sd median trimmed  mad   min    max  range
book_leverage    1 103021 0.43 4.95   0.19    0.22 0.27 -0.05 843.86 843.91
                skew kurtosis   se
book_leverage 113.91 15769.32 0.02</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>data_firm <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span> <span class="co"># use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, <span class="at">contract_intensity_2000 =</span> contract_intensity) <span class="sc">%&gt;%</span> </span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span> </span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">contract_intensity_2000 =</span> <span class="fu">mean</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) ) <span class="sc">%&gt;%</span> </span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() </span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>FF_30ind <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"</span>))</span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>data_did <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable </span></span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span> </span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classification </span></span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span> </span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a>  <span class="do">## exclude certain industries </span></span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">20</span>, <span class="co"># exclude Utiltiy (number 20) </span></span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(sic <span class="sc">&gt;=</span> <span class="dv">6000</span> <span class="sc">&amp;</span> sic <span class="sc">&lt;=</span> <span class="dv">6199</span>) <span class="co"># exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb69-19"><a href="#cb69-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb69-20"><a href="#cb69-20" aria-hidden="true" tabindex="-1"></a>  <span class="do">## pre- &amp; post- </span></span>
<span id="cb69-21"><a href="#cb69-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb69-22"><a href="#cb69-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">indexyear =</span> (dyear <span class="sc">-</span> base_year), <span class="co"># year index with 2005 as base 0.</span></span>
<span id="cb69-23"><a href="#cb69-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(dyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)  <span class="co"># whether it is after the 2005 reform </span></span>
<span id="cb69-24"><a href="#cb69-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="co"># %&gt;% </span></span>
<span id="cb69-25"><a href="#cb69-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># # drop values outside the range:</span></span>
<span id="cb69-26"><a href="#cb69-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(</span></span>
<span id="cb69-27"><a href="#cb69-27" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 1), yes = book_leverage, no = NA),</span></span>
<span id="cb69-28"><a href="#cb69-28" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   debt_ebitda = ifelse(test = (debt_ebitda &gt;= 0 &amp; debt_ebitda &lt;= 15), yes = debt_ebitda, no = NA )</span></span>
<span id="cb69-29"><a href="#cb69-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># )</span></span>
<span id="cb69-30"><a href="#cb69-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-31"><a href="#cb69-31" aria-hidden="true" tabindex="-1"></a><span class="fu">etable</span>(</span>
<span id="cb69-32"><a href="#cb69-32" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">(1)</span><span class="st">`</span> <span class="ot">=</span> data_did <span class="sc">%&gt;%</span> </span>
<span id="cb69-33"><a href="#cb69-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb69-34"><a href="#cb69-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb69-35"><a href="#cb69-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb69-36"><a href="#cb69-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb69-37"><a href="#cb69-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb69-38"><a href="#cb69-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb69-39"><a href="#cb69-39" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb69-40"><a href="#cb69-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb69-41"><a href="#cb69-41" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)), </span>
<span id="cb69-42"><a href="#cb69-42" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">(2)</span><span class="st">`</span> <span class="ot">=</span> data_did <span class="sc">%&gt;%</span> </span>
<span id="cb69-43"><a href="#cb69-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb69-44"><a href="#cb69-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb69-45"><a href="#cb69-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb69-46"><a href="#cb69-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb69-47"><a href="#cb69-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb69-48"><a href="#cb69-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb69-49"><a href="#cb69-49" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb69-50"><a href="#cb69-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb69-51"><a href="#cb69-51" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear <span class="sc">+</span> ff_30ind_name<span class="sc">^</span>dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) </span>
<span id="cb69-52"><a href="#cb69-52" aria-hidden="true" tabindex="-1"></a>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                  (1)               (2)
Dependent Var.:                         book_leverage     book_leverage
                                                                       
contract_intensity_2000 x post_2005  -0.0227 (0.0772)  -0.0134 (0.0913)
Fixed-Effects:                       ----------------  ----------------
gvkey                                             Yes               Yes
dyear                                             Yes               Yes
ff_30ind_name-dyear                                No               Yes
___________________________________  ________________  ________________
S.E.: Clustered                     by: gvkey &amp; ff_3. by: gvkey &amp; ff_3.
Observations                                   22,592            22,592
R2                                            0.51966           0.52440
Within R2                                     2.04e-5           6.44e-6
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
<section id="dataset-with-filters-on-book_leverage" class="level4">
<h4 class="anchored" data-anchor-id="dataset-with-filters-on-book_leverage">Dataset with filters on <code>book_leverage</code></h4>
<p>For <code>book_leverage ∈ [0,5]</code>, the treatment effect estimates even turn into significantly positive values.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="sc">!</span> (<span class="fu">ls</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"base_year"</span>, <span class="st">"compustat_na"</span>))])</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="do">## create leverage variables </span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> compustat_na <span class="sc">%&gt;%</span> </span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(at <span class="sc">&gt;</span> <span class="fl">0.05</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(indfmt <span class="sc">==</span> <span class="st">"INDL"</span>) <span class="sc">%&gt;%</span> <span class="do">## remove all financial firms</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>    <span class="do">## leverage variables: </span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> at, </span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">debt_ebitda =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> ebitda, </span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>    <span class="do">## treatment intensity: </span></span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">totalrent =</span> mrc1 <span class="sc">+</span> mrc2 <span class="sc">+</span> mrc3 <span class="sc">+</span> mrc4 <span class="sc">+</span> mrc5 <span class="sc">+</span> mrct, <span class="co"># total rent w/o discount</span></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">contract_intensity =</span> (dclo <span class="sc">+</span> totalrent) <span class="sc">/</span> at, <span class="co"># executory contract intensity</span></span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># contract_intensity = (totalrent) / at, # executory contract intensity</span></span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a>    <span class="do">## other variables: </span></span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.integer</span>(<span class="fu">substr</span>(datadate, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">stop =</span> <span class="dv">4</span>)) <span class="co"># data year </span></span>
<span id="cb71-18"><a href="#cb71-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb71-19"><a href="#cb71-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(book_leverage <span class="sc">&lt;</span> <span class="cn">Inf</span>)</span>
<span id="cb71-20"><a href="#cb71-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-21"><a href="#cb71-21" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">describe</span>(<span class="fu">data.frame</span>(<span class="at">book_leverage =</span> data<span class="sc">$</span>book_leverage))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>              vars      n mean   sd median trimmed  mad   min    max  range
book_leverage    1 103021 0.43 4.95   0.19    0.22 0.27 -0.05 843.86 843.91
                skew kurtosis   se
book_leverage 113.91 15769.32 0.02</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>data_firm <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span> <span class="co"># use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, <span class="at">contract_intensity_2000 =</span> contract_intensity) <span class="sc">%&gt;%</span> </span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span> </span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">contract_intensity_2000 =</span> <span class="fu">mean</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) ) <span class="sc">%&gt;%</span> </span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() </span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>FF_30ind <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"</span>))</span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>data_did <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable </span></span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span> </span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classification </span></span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a>  <span class="do">## exclude certain industries </span></span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">20</span>, <span class="co"># exclude Utiltiy (number 20) </span></span>
<span id="cb73-18"><a href="#cb73-18" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(sic <span class="sc">&gt;=</span> <span class="dv">6000</span> <span class="sc">&amp;</span> sic <span class="sc">&lt;=</span> <span class="dv">6199</span>) <span class="co"># exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb73-19"><a href="#cb73-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb73-20"><a href="#cb73-20" aria-hidden="true" tabindex="-1"></a>  <span class="do">## pre- &amp; post- </span></span>
<span id="cb73-21"><a href="#cb73-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb73-22"><a href="#cb73-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">indexyear =</span> (dyear <span class="sc">-</span> base_year), <span class="co"># year index with 2005 as base 0.</span></span>
<span id="cb73-23"><a href="#cb73-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(dyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)  <span class="co"># whether it is after the 2005 reform </span></span>
<span id="cb73-24"><a href="#cb73-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb73-25"><a href="#cb73-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># drop values outside the range:</span></span>
<span id="cb73-26"><a href="#cb73-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb73-27"><a href="#cb73-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> <span class="fu">ifelse</span>(<span class="at">test =</span> (book_leverage <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> book_leverage <span class="sc">&lt;=</span> <span class="dv">5</span>), <span class="at">yes =</span> book_leverage, <span class="at">no =</span> <span class="cn">NA</span>) </span>
<span id="cb73-28"><a href="#cb73-28" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb73-29"><a href="#cb73-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-30"><a href="#cb73-30" aria-hidden="true" tabindex="-1"></a><span class="fu">etable</span>(</span>
<span id="cb73-31"><a href="#cb73-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">(1)</span><span class="st">`</span> <span class="ot">=</span> data_did <span class="sc">%&gt;%</span> </span>
<span id="cb73-32"><a href="#cb73-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb73-33"><a href="#cb73-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb73-34"><a href="#cb73-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb73-35"><a href="#cb73-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb73-36"><a href="#cb73-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb73-37"><a href="#cb73-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb73-38"><a href="#cb73-38" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb73-39"><a href="#cb73-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb73-40"><a href="#cb73-40" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)), </span>
<span id="cb73-41"><a href="#cb73-41" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">(2)</span><span class="st">`</span> <span class="ot">=</span> data_did <span class="sc">%&gt;%</span> </span>
<span id="cb73-42"><a href="#cb73-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb73-43"><a href="#cb73-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb73-44"><a href="#cb73-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb73-45"><a href="#cb73-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb73-46"><a href="#cb73-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb73-47"><a href="#cb73-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb73-48"><a href="#cb73-48" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb73-49"><a href="#cb73-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb73-50"><a href="#cb73-50" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear <span class="sc">+</span> ff_30ind_name<span class="sc">^</span>dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) </span>
<span id="cb73-51"><a href="#cb73-51" aria-hidden="true" tabindex="-1"></a>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                  (1)               (2)
Dependent Var.:                         book_leverage     book_leverage
                                                                       
contract_intensity_2000 x post_2005  0.0358* (0.0141)  0.0382* (0.0158)
Fixed-Effects:                       ----------------  ----------------
gvkey                                             Yes               Yes
dyear                                             Yes               Yes
ff_30ind_name-dyear                                No               Yes
___________________________________  ________________  ________________
S.E.: Clustered                     by: gvkey &amp; ff_3. by: gvkey &amp; ff_3.
Observations                                   22,434            22,434
R2                                            0.70006           0.70265
Within R2                                     0.00093           0.00095
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>For <code>book_leverage ∈ [0,3]</code>, the treatment effect estimates are still positive, but not statistically significant anymore.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="sc">!</span> (<span class="fu">ls</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"base_year"</span>, <span class="st">"compustat_na"</span>))])</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="do">## create leverage variables </span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> compustat_na <span class="sc">%&gt;%</span> </span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(at <span class="sc">&gt;</span> <span class="fl">0.05</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(indfmt <span class="sc">==</span> <span class="st">"INDL"</span>) <span class="sc">%&gt;%</span> <span class="do">## remove all financial firms</span></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>    <span class="do">## leverage variables: </span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> at, </span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">debt_ebitda =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> ebitda, </span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a>    <span class="do">## treatment intensity: </span></span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">totalrent =</span> mrc1 <span class="sc">+</span> mrc2 <span class="sc">+</span> mrc3 <span class="sc">+</span> mrc4 <span class="sc">+</span> mrc5 <span class="sc">+</span> mrct, <span class="co"># total rent w/o discount</span></span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb75-14"><a href="#cb75-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">contract_intensity =</span> (dclo <span class="sc">+</span> totalrent) <span class="sc">/</span> at, <span class="co"># executory contract intensity</span></span>
<span id="cb75-15"><a href="#cb75-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># contract_intensity = (totalrent) / at, # executory contract intensity</span></span>
<span id="cb75-16"><a href="#cb75-16" aria-hidden="true" tabindex="-1"></a>    <span class="do">## other variables: </span></span>
<span id="cb75-17"><a href="#cb75-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.integer</span>(<span class="fu">substr</span>(datadate, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">stop =</span> <span class="dv">4</span>)) <span class="co"># data year </span></span>
<span id="cb75-18"><a href="#cb75-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb75-19"><a href="#cb75-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(book_leverage <span class="sc">&lt;</span> <span class="cn">Inf</span>)</span>
<span id="cb75-20"><a href="#cb75-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-21"><a href="#cb75-21" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">describe</span>(<span class="fu">data.frame</span>(<span class="at">book_leverage =</span> data<span class="sc">$</span>book_leverage))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>              vars      n mean   sd median trimmed  mad   min    max  range
book_leverage    1 103021 0.43 4.95   0.19    0.22 0.27 -0.05 843.86 843.91
                skew kurtosis   se
book_leverage 113.91 15769.32 0.02</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>data_firm <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span> <span class="co"># use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, <span class="at">contract_intensity_2000 =</span> contract_intensity) <span class="sc">%&gt;%</span> </span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span> </span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">contract_intensity_2000 =</span> <span class="fu">mean</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) ) <span class="sc">%&gt;%</span> </span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() </span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>FF_30ind <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"</span>))</span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a>data_did <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable </span></span>
<span id="cb77-12"><a href="#cb77-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span> </span>
<span id="cb77-13"><a href="#cb77-13" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classification </span></span>
<span id="cb77-14"><a href="#cb77-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span> </span>
<span id="cb77-15"><a href="#cb77-15" aria-hidden="true" tabindex="-1"></a>  <span class="do">## exclude certain industries </span></span>
<span id="cb77-16"><a href="#cb77-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb77-17"><a href="#cb77-17" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">20</span>, <span class="co"># exclude Utiltiy (number 20) </span></span>
<span id="cb77-18"><a href="#cb77-18" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(sic <span class="sc">&gt;=</span> <span class="dv">6000</span> <span class="sc">&amp;</span> sic <span class="sc">&lt;=</span> <span class="dv">6199</span>) <span class="co"># exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb77-19"><a href="#cb77-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb77-20"><a href="#cb77-20" aria-hidden="true" tabindex="-1"></a>  <span class="do">## pre- &amp; post- </span></span>
<span id="cb77-21"><a href="#cb77-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb77-22"><a href="#cb77-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">indexyear =</span> (dyear <span class="sc">-</span> base_year), <span class="co"># year index with 2005 as base 0.</span></span>
<span id="cb77-23"><a href="#cb77-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(dyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)  <span class="co"># whether it is after the 2005 reform </span></span>
<span id="cb77-24"><a href="#cb77-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb77-25"><a href="#cb77-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># drop values outside the range:</span></span>
<span id="cb77-26"><a href="#cb77-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb77-27"><a href="#cb77-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> <span class="fu">ifelse</span>(<span class="at">test =</span> (book_leverage <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> book_leverage <span class="sc">&lt;=</span> <span class="dv">3</span>), <span class="at">yes =</span> book_leverage, <span class="at">no =</span> <span class="cn">NA</span>) </span>
<span id="cb77-28"><a href="#cb77-28" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb77-29"><a href="#cb77-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-30"><a href="#cb77-30" aria-hidden="true" tabindex="-1"></a><span class="fu">etable</span>(</span>
<span id="cb77-31"><a href="#cb77-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">(1)</span><span class="st">`</span> <span class="ot">=</span> data_did <span class="sc">%&gt;%</span> </span>
<span id="cb77-32"><a href="#cb77-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb77-33"><a href="#cb77-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb77-34"><a href="#cb77-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb77-35"><a href="#cb77-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb77-36"><a href="#cb77-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb77-37"><a href="#cb77-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb77-38"><a href="#cb77-38" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb77-39"><a href="#cb77-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb77-40"><a href="#cb77-40" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)), </span>
<span id="cb77-41"><a href="#cb77-41" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">(2)</span><span class="st">`</span> <span class="ot">=</span> data_did <span class="sc">%&gt;%</span> </span>
<span id="cb77-42"><a href="#cb77-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb77-43"><a href="#cb77-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb77-44"><a href="#cb77-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb77-45"><a href="#cb77-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb77-46"><a href="#cb77-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb77-47"><a href="#cb77-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb77-48"><a href="#cb77-48" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb77-49"><a href="#cb77-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb77-50"><a href="#cb77-50" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear <span class="sc">+</span> ff_30ind_name<span class="sc">^</span>dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) </span>
<span id="cb77-51"><a href="#cb77-51" aria-hidden="true" tabindex="-1"></a>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                  (1)               (2)
Dependent Var.:                         book_leverage     book_leverage
                                                                       
contract_intensity_2000 x post_2005   0.0191 (0.0115)   0.0183 (0.0129)
Fixed-Effects:                        ---------------   ---------------
gvkey                                             Yes               Yes
dyear                                             Yes               Yes
ff_30ind_name-dyear                                No               Yes
___________________________________   _______________   _______________
S.E.: Clustered                     by: gvkey &amp; ff_3. by: gvkey &amp; ff_3.
Observations                                   22,296            22,296
R2                                            0.74885           0.75112
Within R2                                     0.00051           0.00042
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>For <code>book_leverage ∈ [0,1]</code>, the treatment effect estimates are indifferent from zero.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="sc">!</span> (<span class="fu">ls</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"base_year"</span>, <span class="st">"compustat_na"</span>))])</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="do">## create leverage variables </span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> compustat_na <span class="sc">%&gt;%</span> </span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(at <span class="sc">&gt;</span> <span class="fl">0.05</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(indfmt <span class="sc">==</span> <span class="st">"INDL"</span>) <span class="sc">%&gt;%</span> <span class="do">## remove all financial firms</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>    <span class="do">## leverage variables: </span></span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> at, </span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">debt_ebitda =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> ebitda, </span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>    <span class="do">## treatment intensity: </span></span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">totalrent =</span> mrc1 <span class="sc">+</span> mrc2 <span class="sc">+</span> mrc3 <span class="sc">+</span> mrc4 <span class="sc">+</span> mrc5 <span class="sc">+</span> mrct, <span class="co"># total rent w/o discount</span></span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">contract_intensity =</span> (dclo <span class="sc">+</span> totalrent) <span class="sc">/</span> at, <span class="co"># executory contract intensity</span></span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># contract_intensity = (totalrent) / at, # executory contract intensity</span></span>
<span id="cb79-16"><a href="#cb79-16" aria-hidden="true" tabindex="-1"></a>    <span class="do">## other variables: </span></span>
<span id="cb79-17"><a href="#cb79-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.integer</span>(<span class="fu">substr</span>(datadate, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">stop =</span> <span class="dv">4</span>)) <span class="co"># data year </span></span>
<span id="cb79-18"><a href="#cb79-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb79-19"><a href="#cb79-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(book_leverage <span class="sc">&lt;</span> <span class="cn">Inf</span>)</span>
<span id="cb79-20"><a href="#cb79-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-21"><a href="#cb79-21" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">describe</span>(<span class="fu">data.frame</span>(<span class="at">book_leverage =</span> data<span class="sc">$</span>book_leverage))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>              vars      n mean   sd median trimmed  mad   min    max  range
book_leverage    1 103021 0.43 4.95   0.19    0.22 0.27 -0.05 843.86 843.91
                skew kurtosis   se
book_leverage 113.91 15769.32 0.02</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>data_firm <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span> <span class="co"># use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, <span class="at">contract_intensity_2000 =</span> contract_intensity) <span class="sc">%&gt;%</span> </span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span> </span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">contract_intensity_2000 =</span> <span class="fu">mean</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) ) <span class="sc">%&gt;%</span> </span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() </span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>FF_30ind <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"</span>))</span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a>data_did <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable </span></span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span> </span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classification </span></span>
<span id="cb81-14"><a href="#cb81-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span> </span>
<span id="cb81-15"><a href="#cb81-15" aria-hidden="true" tabindex="-1"></a>  <span class="do">## exclude certain industries </span></span>
<span id="cb81-16"><a href="#cb81-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb81-17"><a href="#cb81-17" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">20</span>, <span class="co"># exclude Utiltiy (number 20) </span></span>
<span id="cb81-18"><a href="#cb81-18" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(sic <span class="sc">&gt;=</span> <span class="dv">6000</span> <span class="sc">&amp;</span> sic <span class="sc">&lt;=</span> <span class="dv">6199</span>) <span class="co"># exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb81-19"><a href="#cb81-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb81-20"><a href="#cb81-20" aria-hidden="true" tabindex="-1"></a>  <span class="do">## pre- &amp; post- </span></span>
<span id="cb81-21"><a href="#cb81-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb81-22"><a href="#cb81-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">indexyear =</span> (dyear <span class="sc">-</span> base_year), <span class="co"># year index with 2005 as base 0.</span></span>
<span id="cb81-23"><a href="#cb81-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(dyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)  <span class="co"># whether it is after the 2005 reform </span></span>
<span id="cb81-24"><a href="#cb81-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb81-25"><a href="#cb81-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># drop values outside the range:</span></span>
<span id="cb81-26"><a href="#cb81-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb81-27"><a href="#cb81-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> <span class="fu">ifelse</span>(<span class="at">test =</span> (book_leverage <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> book_leverage <span class="sc">&lt;=</span> <span class="dv">1</span>), <span class="at">yes =</span> book_leverage, <span class="at">no =</span> <span class="cn">NA</span>) </span>
<span id="cb81-28"><a href="#cb81-28" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb81-29"><a href="#cb81-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-30"><a href="#cb81-30" aria-hidden="true" tabindex="-1"></a><span class="fu">etable</span>(</span>
<span id="cb81-31"><a href="#cb81-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">(1)</span><span class="st">`</span> <span class="ot">=</span> data_did <span class="sc">%&gt;%</span> </span>
<span id="cb81-32"><a href="#cb81-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb81-33"><a href="#cb81-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb81-34"><a href="#cb81-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb81-35"><a href="#cb81-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb81-36"><a href="#cb81-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb81-37"><a href="#cb81-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb81-38"><a href="#cb81-38" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb81-39"><a href="#cb81-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb81-40"><a href="#cb81-40" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)), </span>
<span id="cb81-41"><a href="#cb81-41" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">(2)</span><span class="st">`</span> <span class="ot">=</span> data_did <span class="sc">%&gt;%</span> </span>
<span id="cb81-42"><a href="#cb81-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb81-43"><a href="#cb81-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb81-44"><a href="#cb81-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb81-45"><a href="#cb81-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb81-46"><a href="#cb81-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb81-47"><a href="#cb81-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb81-48"><a href="#cb81-48" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb81-49"><a href="#cb81-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb81-50"><a href="#cb81-50" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear <span class="sc">+</span> ff_30ind_name<span class="sc">^</span>dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) </span>
<span id="cb81-51"><a href="#cb81-51" aria-hidden="true" tabindex="-1"></a>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                  (1)               (2)
Dependent Var.:                         book_leverage     book_leverage
                                                                       
contract_intensity_2000 x post_2005   0.0034 (0.0098)   0.0022 (0.0110)
Fixed-Effects:                        ---------------   ---------------
gvkey                                             Yes               Yes
dyear                                             Yes               Yes
ff_30ind_name-dyear                                No               Yes
___________________________________   _______________   _______________
S.E.: Clustered                     by: gvkey &amp; ff_3. by: gvkey &amp; ff_3.
Observations                                   21,480            21,480
R2                                            0.79683           0.80012
Within R2                                     4.19e-5           1.57e-5
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
<section id="treatment-effects-across-industries" class="level4 page-columns page-full">
<h4 class="anchored" data-anchor-id="treatment-effects-across-industries">Treatment Effects across Industries</h4>
<p>If we use all observations in the dataset, the results are the same as those in <a href="#sec-a5-industry-heterogeneity" class="quarto-xref">Section&nbsp;5.5</a>.</p>
<div class="cell page-columns page-full">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="do">## create leverage variables </span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> compustat_na <span class="sc">%&gt;%</span> </span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(at &gt; 0) %&gt;% </span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(indfmt <span class="sc">==</span> <span class="st">"INDL"</span>) <span class="sc">%&gt;%</span> <span class="do">## remove all financial firms </span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>    <span class="do">## leverage variables: </span></span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> at, </span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">debt_ebitda =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> ebitda, </span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a>    <span class="do">## treatment intensity: </span></span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">totalrent =</span> mrc1 <span class="sc">+</span> mrc2 <span class="sc">+</span> mrc3 <span class="sc">+</span> mrc4 <span class="sc">+</span> mrc5 <span class="sc">+</span> mrct, <span class="co"># total rent w/o discount</span></span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">contract_intensity =</span> (dclo <span class="sc">+</span> totalrent) <span class="sc">/</span> at, <span class="co"># executory contract intensity</span></span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true" tabindex="-1"></a>    <span class="do">## other variables: </span></span>
<span id="cb83-14"><a href="#cb83-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.integer</span>(<span class="fu">substr</span>(datadate, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">stop =</span> <span class="dv">4</span>)) <span class="co"># data year</span></span>
<span id="cb83-15"><a href="#cb83-15" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb83-16"><a href="#cb83-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-17"><a href="#cb83-17" aria-hidden="true" tabindex="-1"></a>data_firm <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb83-18"><a href="#cb83-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span> <span class="co"># use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb83-19"><a href="#cb83-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, <span class="at">contract_intensity_2000 =</span> contract_intensity) <span class="sc">%&gt;%</span> </span>
<span id="cb83-20"><a href="#cb83-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span> </span>
<span id="cb83-21"><a href="#cb83-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">contract_intensity_2000 =</span> <span class="fu">mean</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) ) <span class="sc">%&gt;%</span> </span>
<span id="cb83-22"><a href="#cb83-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() </span>
<span id="cb83-23"><a href="#cb83-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-24"><a href="#cb83-24" aria-hidden="true" tabindex="-1"></a>FF_30ind <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"</span>))</span>
<span id="cb83-25"><a href="#cb83-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-26"><a href="#cb83-26" aria-hidden="true" tabindex="-1"></a>data_did_withind <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb83-27"><a href="#cb83-27" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable </span></span>
<span id="cb83-28"><a href="#cb83-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span> </span>
<span id="cb83-29"><a href="#cb83-29" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classification </span></span>
<span id="cb83-30"><a href="#cb83-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span> </span>
<span id="cb83-31"><a href="#cb83-31" aria-hidden="true" tabindex="-1"></a>  <span class="do">## pre- &amp; post- </span></span>
<span id="cb83-32"><a href="#cb83-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb83-33"><a href="#cb83-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">indexyear =</span> (dyear <span class="sc">-</span> base_year), <span class="co"># year index with 2005 as base 0.</span></span>
<span id="cb83-34"><a href="#cb83-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(dyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)  <span class="co"># whether it is after the 2005 reform </span></span>
<span id="cb83-35"><a href="#cb83-35" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb83-36"><a href="#cb83-36" aria-hidden="true" tabindex="-1"></a>  <span class="do">## remove some industries: </span></span>
<span id="cb83-37"><a href="#cb83-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb83-38"><a href="#cb83-38" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">20</span>, <span class="co"># exclude Utiltiy (number 20) </span></span>
<span id="cb83-39"><a href="#cb83-39" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(sic <span class="sc">&gt;=</span> <span class="dv">6000</span> <span class="sc">&amp;</span> sic <span class="sc">&lt;=</span> <span class="dv">6199</span>) <span class="co"># exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb83-40"><a href="#cb83-40" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb83-41"><a href="#cb83-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb83-42"><a href="#cb83-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-43"><a href="#cb83-43" aria-hidden="true" tabindex="-1"></a><span class="do">## did analysis: </span></span>
<span id="cb83-44"><a href="#cb83-44" aria-hidden="true" tabindex="-1"></a>model_a5_average <span class="ot">&lt;-</span> data_did_withind <span class="sc">%&gt;%</span> </span>
<span id="cb83-45"><a href="#cb83-45" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name, ff_30ind_desc, ff_30ind) <span class="sc">%&gt;%</span> </span>
<span id="cb83-46"><a href="#cb83-46" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb83-47"><a href="#cb83-47" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(</span>
<span id="cb83-48"><a href="#cb83-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb83-49"><a href="#cb83-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb83-50"><a href="#cb83-50" aria-hidden="true" tabindex="-1"></a>        <span class="at">ff_30ind =</span> <span class="fu">as.factor</span>(<span class="fu">paste</span>(ff_30ind, ff_30ind_desc, <span class="at">sep =</span> <span class="st">": "</span>)), </span>
<span id="cb83-51"><a href="#cb83-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb83-52"><a href="#cb83-52" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb83-53"><a href="#cb83-53" aria-hidden="true" tabindex="-1"></a>      <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb83-54"><a href="#cb83-54" aria-hidden="true" tabindex="-1"></a>      fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear <span class="sc">+</span> sic<span class="sc">^</span>dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>))</span>
<span id="cb83-55"><a href="#cb83-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-56"><a href="#cb83-56" aria-hidden="true" tabindex="-1"></a>model_a5_average <span class="sc">%&gt;%</span> fixest<span class="sc">::</span><span class="fu">etable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                      .
Dependent Var.:                           book_leverage
                                                       
contract_intensity_2000 x post_2005 -0.4161*** (0.1010)
Fixed-Effects:                      -------------------
gvkey                                               Yes
dyear                                               Yes
sic-dyear                                           Yes
___________________________________ ___________________
S.E.: Clustered                       by: gvkey &amp; ff_3.
Observations                                     22,803
R2                                              0.43833
Within R2                                       0.00346
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="do">## did analysis for the treatment effects in each industry: </span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>did_withind_model <span class="ot">&lt;-</span> data_did_withind <span class="sc">%&gt;%</span> </span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name, ff_30ind_desc, ff_30ind) <span class="sc">%&gt;%</span> </span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">ff_30ind =</span> <span class="fu">as.factor</span>(<span class="fu">paste</span>(ff_30ind, ff_30ind_desc, <span class="at">sep =</span> <span class="st">": "</span>)), </span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005<span class="sc">:</span>ff_30ind <span class="sc">|</span> gvkey <span class="sc">+</span> dyear <span class="sc">+</span> ff_30ind<span class="sc">^</span>dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>))</span>
<span id="cb85-13"><a href="#cb85-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-14"><a href="#cb85-14" aria-hidden="true" tabindex="-1"></a>did_withind_model <span class="sc">%&gt;%</span> fixest<span class="sc">::</span><span class="fu">etable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                                                                                           .
Dependent Var.:                                                                                                book_leverage
                                                                                                                            
contract_intensity_2000 x post_2005 x ff_30ind1 x FoodProducts                                                 2.557 (2.321)
contract_intensity_2000 x post_2005 x ff_30ind10 x Textiles                                                  0.2202 (0.6599)
contract_intensity_2000 x post_2005 x ff_30ind11 x ConstructionandConstructionMaterials                       0.3840 (1.948)
contract_intensity_2000 x post_2005 x ff_30ind12 x SteelWorksEtc                                            0.0945* (0.0372)
contract_intensity_2000 x post_2005 x ff_30ind13 x FabricatedProductsandMachinery                            -1.343 (0.8874)
contract_intensity_2000 x post_2005 x ff_30ind14 x ElectricalEquipment                                         1.513 (1.098)
contract_intensity_2000 x post_2005 x ff_30ind15 x AutomobilesandTrucks                                     24.04*** (1.203)
contract_intensity_2000 x post_2005 x ff_30ind16 x Aircraft,ships,andrailroadequipment                      29.67*** (4.386)
contract_intensity_2000 x post_2005 x ff_30ind17 x PreciousMetals,Non-Metallic,andIndustrialMetalMining        63.12 (67.90)
contract_intensity_2000 x post_2005 x ff_30ind18 x Coal                                                     -0.3487 (0.5070)
contract_intensity_2000 x post_2005 x ff_30ind19 x PetroleumandNaturalGas                                -0.4027*** (0.0041)
contract_intensity_2000 x post_2005 x ff_30ind2 x Beer&amp;Liquor                                             0.7163*** (0.1104)
contract_intensity_2000 x post_2005 x ff_30ind21 x Communication                                             0.3623 (0.5689)
contract_intensity_2000 x post_2005 x ff_30ind22 x PersonalandBusinessServices                           -0.3330*** (0.0082)
contract_intensity_2000 x post_2005 x ff_30ind23 x BusinessEquipment                                      -17.50*** (0.6654)
contract_intensity_2000 x post_2005 x ff_30ind24 x BusinessSuppliesandShippingContainers                      -2.812 (1.908)
contract_intensity_2000 x post_2005 x ff_30ind25 x Transportation                                             -1.039 (1.066)
contract_intensity_2000 x post_2005 x ff_30ind26 x Wholesale                                                  -1.617 (4.053)
contract_intensity_2000 x post_2005 x ff_30ind27 x Retail                                                    0.0586 (0.0405)
contract_intensity_2000 x post_2005 x ff_30ind28 x Restaurants,Hotels,Motels                                   2.457 (2.469)
contract_intensity_2000 x post_2005 x ff_30ind29 x Banking,Insurance,RealEstate,Trading                     -0.0304 (0.3842)
contract_intensity_2000 x post_2005 x ff_30ind3 x TobaccoProducts                                       -2.974*** (7.57e-14)
contract_intensity_2000 x post_2005 x ff_30ind30 x EverythingElse                                              1.480 (1.196)
contract_intensity_2000 x post_2005 x ff_30ind4 x Recreation                                                  -4.806 (4.700)
contract_intensity_2000 x post_2005 x ff_30ind5 x PrintingandPublishing                                        171.2 (204.1)
contract_intensity_2000 x post_2005 x ff_30ind6 x ConsumerGoods                                              0.0226 (0.0278)
contract_intensity_2000 x post_2005 x ff_30ind7 x Apparel                                                  -0.0936* (0.0384)
contract_intensity_2000 x post_2005 x ff_30ind8 x Healthcare,MedicalEquipment,PharmaceuticalProducts      -2.003*** (0.0754)
contract_intensity_2000 x post_2005 x ff_30ind9 x Chemicals                                                   3.559. (1.836)
Fixed-Effects:                                                                                          --------------------
gvkey                                                                                                                    Yes
dyear                                                                                                                    Yes
ff_30ind-dyear                                                                                                           Yes
________________________________________                                                                ____________________
S.E.: Clustered                                                                                                    by: gvkey
Observations                                                                                                          22,803
R2                                                                                                                   0.41325
Within R2                                                                                                            0.02400
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>fixest<span class="sc">::</span><span class="fu">coefplot</span>(did_withind_model,</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">order =</span> <span class="fu">str_extract</span>(<span class="at">string =</span> <span class="fu">names</span>(<span class="fu">sort</span>(<span class="fu">coef</span>(did_withind_model), <span class="at">decreasing =</span> <span class="cn">FALSE</span>)), <span class="at">pattern =</span> <span class="st">"(?&lt;=ind).*"</span>), </span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">horiz =</span> <span class="cn">TRUE</span>, </span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">drop =</span> <span class="st">"Print"</span>, <span class="co"># remove the number 5: Printing &amp; Publishing</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">main =</span> <span class="st">""</span>, </span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">sub =</span> <span class="st">""</span></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>                 ); </span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="at">main =</span> <span class="fu">expression</span>(<span class="fu">bold</span>(<span class="st">"Treatment Effect Estimates for Fama-French 30 Industries"</span>)), <span class="at">adj =</span> <span class="fl">0.2</span>); </span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a><span class="fu">mtext</span>(<span class="st">"*Printing and Publishing (Industry 5) is excluded. Red dashed line indicates the average treatment effect."</span>, <span class="at">side =</span> <span class="dv">1</span>, <span class="at">line =</span> <span class="dv">4</span>, <span class="at">adj =</span> <span class="dv">0</span>); </span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> model_a5_average<span class="sc">$</span>coefficients, <span class="at">col =</span> <span class="dv">2</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div class="page-columns page-full">
<figure class="figure page-columns page-full">
<p class="page-columns page-full"><img src="AFA_test_2005_files/figure-html/a6-did-industry-all-1.png" class="img-fluid figure-img column-page-right" width="1440"></p>
</figure>
</div>
</div>
</div>
<p>For the dataset with filters on <code>book_leverage ∈ [0,1]</code>, we re-run all the tests.</p>
<div class="cell page-columns page-full">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="do">## create leverage variables </span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> compustat_na <span class="sc">%&gt;%</span> </span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(at &gt; 0) %&gt;% </span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(indfmt <span class="sc">==</span> <span class="st">"INDL"</span>) <span class="sc">%&gt;%</span> <span class="do">## remove all financial firms </span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>    <span class="do">## leverage variables: </span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> at, </span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">debt_ebitda =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> ebitda, </span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>    <span class="do">## treatment intensity: </span></span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">totalrent =</span> mrc1 <span class="sc">+</span> mrc2 <span class="sc">+</span> mrc3 <span class="sc">+</span> mrc4 <span class="sc">+</span> mrc5 <span class="sc">+</span> mrct, <span class="co"># total rent w/o discount</span></span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb88-12"><a href="#cb88-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">contract_intensity =</span> (dclo <span class="sc">+</span> totalrent) <span class="sc">/</span> at, <span class="co"># executory contract intensity</span></span>
<span id="cb88-13"><a href="#cb88-13" aria-hidden="true" tabindex="-1"></a>    <span class="do">## other variables: </span></span>
<span id="cb88-14"><a href="#cb88-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.integer</span>(<span class="fu">substr</span>(datadate, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">stop =</span> <span class="dv">4</span>)) <span class="co"># data year</span></span>
<span id="cb88-15"><a href="#cb88-15" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb88-16"><a href="#cb88-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-17"><a href="#cb88-17" aria-hidden="true" tabindex="-1"></a>data_firm <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb88-18"><a href="#cb88-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span> <span class="co"># use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb88-19"><a href="#cb88-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, <span class="at">contract_intensity_2000 =</span> contract_intensity) <span class="sc">%&gt;%</span> </span>
<span id="cb88-20"><a href="#cb88-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span> </span>
<span id="cb88-21"><a href="#cb88-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">contract_intensity_2000 =</span> <span class="fu">mean</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) ) <span class="sc">%&gt;%</span> </span>
<span id="cb88-22"><a href="#cb88-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() </span>
<span id="cb88-23"><a href="#cb88-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-24"><a href="#cb88-24" aria-hidden="true" tabindex="-1"></a>FF_30ind <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"</span>))</span>
<span id="cb88-25"><a href="#cb88-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-26"><a href="#cb88-26" aria-hidden="true" tabindex="-1"></a>data_did_withind2 <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb88-27"><a href="#cb88-27" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable </span></span>
<span id="cb88-28"><a href="#cb88-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span> </span>
<span id="cb88-29"><a href="#cb88-29" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classification </span></span>
<span id="cb88-30"><a href="#cb88-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span> </span>
<span id="cb88-31"><a href="#cb88-31" aria-hidden="true" tabindex="-1"></a>  <span class="do">## pre- &amp; post- </span></span>
<span id="cb88-32"><a href="#cb88-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb88-33"><a href="#cb88-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">indexyear =</span> (dyear <span class="sc">-</span> base_year), <span class="co"># year index with 2005 as base 0.</span></span>
<span id="cb88-34"><a href="#cb88-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(dyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)  <span class="co"># whether it is after the 2005 reform </span></span>
<span id="cb88-35"><a href="#cb88-35" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb88-36"><a href="#cb88-36" aria-hidden="true" tabindex="-1"></a>  <span class="do">## remove some industries: </span></span>
<span id="cb88-37"><a href="#cb88-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb88-38"><a href="#cb88-38" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">20</span>, <span class="co"># exclude Utiltiy (number 20) </span></span>
<span id="cb88-39"><a href="#cb88-39" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(sic <span class="sc">&gt;=</span> <span class="dv">6000</span> <span class="sc">&amp;</span> sic <span class="sc">&lt;=</span> <span class="dv">6199</span>) <span class="co"># exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb88-40"><a href="#cb88-40" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb88-41"><a href="#cb88-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># drop values outside the range:</span></span>
<span id="cb88-42"><a href="#cb88-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb88-43"><a href="#cb88-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> <span class="fu">ifelse</span>(<span class="at">test =</span> (book_leverage <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> book_leverage <span class="sc">&lt;=</span> <span class="dv">1</span>), <span class="at">yes =</span> book_leverage, <span class="at">no =</span> <span class="cn">NA</span>) </span>
<span id="cb88-44"><a href="#cb88-44" aria-hidden="true" tabindex="-1"></a>  ) <span class="co"># %&gt;% </span></span>
<span id="cb88-45"><a href="#cb88-45" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ## keep only firms with all observations over the full period. </span></span>
<span id="cb88-46"><a href="#cb88-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># group_by(gvkey) %&gt;% </span></span>
<span id="cb88-47"><a href="#cb88-47" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(</span></span>
<span id="cb88-48"><a href="#cb88-48" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   n_obs = n(), # number of observations for each firm</span></span>
<span id="cb88-49"><a href="#cb88-49" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   n_post = sum(post_2005, na.rm = TRUE) # number of obs after 2005</span></span>
<span id="cb88-50"><a href="#cb88-50" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ) %&gt;%</span></span>
<span id="cb88-51"><a href="#cb88-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ungroup() %&gt;%</span></span>
<span id="cb88-52"><a href="#cb88-52" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(n_obs &gt; n_post &amp; n_post &gt; 0)</span></span>
<span id="cb88-53"><a href="#cb88-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-54"><a href="#cb88-54" aria-hidden="true" tabindex="-1"></a><span class="do">## did analysis: </span></span>
<span id="cb88-55"><a href="#cb88-55" aria-hidden="true" tabindex="-1"></a>model_a5_average2 <span class="ot">&lt;-</span> data_did_withind2 <span class="sc">%&gt;%</span> </span>
<span id="cb88-56"><a href="#cb88-56" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name, ff_30ind_desc, ff_30ind) <span class="sc">%&gt;%</span> </span>
<span id="cb88-57"><a href="#cb88-57" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb88-58"><a href="#cb88-58" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(</span>
<span id="cb88-59"><a href="#cb88-59" aria-hidden="true" tabindex="-1"></a>        <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb88-60"><a href="#cb88-60" aria-hidden="true" tabindex="-1"></a>        <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb88-61"><a href="#cb88-61" aria-hidden="true" tabindex="-1"></a>        <span class="at">ff_30ind =</span> <span class="fu">as.factor</span>(<span class="fu">paste</span>(ff_30ind, ff_30ind_desc, <span class="at">sep =</span> <span class="st">": "</span>)), </span>
<span id="cb88-62"><a href="#cb88-62" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb88-63"><a href="#cb88-63" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb88-64"><a href="#cb88-64" aria-hidden="true" tabindex="-1"></a>      <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb88-65"><a href="#cb88-65" aria-hidden="true" tabindex="-1"></a>      fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear <span class="sc">+</span> ff_30ind<span class="sc">^</span>dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>))</span>
<span id="cb88-66"><a href="#cb88-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-67"><a href="#cb88-67" aria-hidden="true" tabindex="-1"></a>model_a5_average2 <span class="sc">%&gt;%</span> fixest<span class="sc">::</span><span class="fu">etable</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                    .
Dependent Var.:                         book_leverage
                                                     
contract_intensity_2000 x post_2005   0.0028 (0.0019)
Fixed-Effects:                        ---------------
gvkey                                             Yes
dyear                                             Yes
ff_30ind-dyear                                    Yes
___________________________________   _______________
S.E.: Clustered                     by: gvkey &amp; ff_3.
Observations                                   21,599
R2                                            0.79807
Within R2                                     0.00017
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="do">## did analysis for the treatment effects in each industry: </span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>did_withind_model2 <span class="ot">&lt;-</span> data_did_withind2 <span class="sc">%&gt;%</span> </span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name, ff_30ind_desc, ff_30ind) <span class="sc">%&gt;%</span> </span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear), </span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">ff_30ind =</span> <span class="fu">as.factor</span>(<span class="fu">paste</span>(ff_30ind, ff_30ind_desc, <span class="at">sep =</span> <span class="st">": "</span>)), </span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005<span class="sc">:</span>ff_30ind <span class="sc">|</span> gvkey <span class="sc">+</span> dyear <span class="sc">+</span> ff_30ind<span class="sc">^</span>dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>))</span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-14"><a href="#cb90-14" aria-hidden="true" tabindex="-1"></a>did_withind_model2 <span class="sc">%&gt;%</span> fixest<span class="sc">::</span><span class="fu">etable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                                                                                           .
Dependent Var.:                                                                                                book_leverage
                                                                                                                            
contract_intensity_2000 x post_2005 x ff_30ind1 x FoodProducts                                              -0.0089 (0.0829)
contract_intensity_2000 x post_2005 x ff_30ind10 x Textiles                                                  0.1242 (0.7233)
contract_intensity_2000 x post_2005 x ff_30ind11 x ConstructionandConstructionMaterials                     -0.0240 (0.0261)
contract_intensity_2000 x post_2005 x ff_30ind12 x SteelWorksEtc                                            0.0686* (0.0278)
contract_intensity_2000 x post_2005 x ff_30ind13 x FabricatedProductsandMachinery                           -0.1308 (0.1273)
contract_intensity_2000 x post_2005 x ff_30ind14 x ElectricalEquipment                                     0.3717** (0.1228)
contract_intensity_2000 x post_2005 x ff_30ind15 x AutomobilesandTrucks                                     -0.3024 (0.2737)
contract_intensity_2000 x post_2005 x ff_30ind16 x Aircraft,ships,andrailroadequipment                      -0.4004 (0.2792)
contract_intensity_2000 x post_2005 x ff_30ind17 x PreciousMetals,Non-Metallic,andIndustrialMetalMining     -0.2696 (0.3718)
contract_intensity_2000 x post_2005 x ff_30ind18 x Coal                                                     -0.3487 (0.5071)
contract_intensity_2000 x post_2005 x ff_30ind19 x PetroleumandNaturalGas                                 0.0263*** (0.0027)
contract_intensity_2000 x post_2005 x ff_30ind2 x Beer&amp;Liquor                                             0.7163*** (0.1104)
contract_intensity_2000 x post_2005 x ff_30ind21 x Communication                                            -0.0166 (0.0234)
contract_intensity_2000 x post_2005 x ff_30ind22 x PersonalandBusinessServices                              -0.0280 (0.0272)
contract_intensity_2000 x post_2005 x ff_30ind23 x BusinessEquipment                                      0.0060*** (0.0015)
contract_intensity_2000 x post_2005 x ff_30ind24 x BusinessSuppliesandShippingContainers                    -0.0471 (0.1226)
contract_intensity_2000 x post_2005 x ff_30ind25 x Transportation                                           -0.0082 (0.0177)
contract_intensity_2000 x post_2005 x ff_30ind26 x Wholesale                                                -0.0394 (0.0467)
contract_intensity_2000 x post_2005 x ff_30ind27 x Retail                                                    0.0106 (0.0129)
contract_intensity_2000 x post_2005 x ff_30ind28 x Restaurants,Hotels,Motels                                -0.0222 (0.0303)
contract_intensity_2000 x post_2005 x ff_30ind29 x Banking,Insurance,RealEstate,Trading                      0.0416 (0.0462)
contract_intensity_2000 x post_2005 x ff_30ind3 x TobaccoProducts                                       -2.974*** (2.05e-16)
contract_intensity_2000 x post_2005 x ff_30ind30 x EverythingElse                                            0.0072 (0.0307)
contract_intensity_2000 x post_2005 x ff_30ind4 x Recreation                                                0.1603* (0.0749)
contract_intensity_2000 x post_2005 x ff_30ind5 x PrintingandPublishing                                      0.1978 (0.1655)
contract_intensity_2000 x post_2005 x ff_30ind6 x ConsumerGoods                                              0.0127 (0.0295)
contract_intensity_2000 x post_2005 x ff_30ind7 x Apparel                                                  -0.0755* (0.0317)
contract_intensity_2000 x post_2005 x ff_30ind8 x Healthcare,MedicalEquipment,PharmaceuticalProducts         0.0012 (0.0012)
contract_intensity_2000 x post_2005 x ff_30ind9 x Chemicals                                                -0.3381* (0.1453)
Fixed-Effects:                                                                                          --------------------
gvkey                                                                                                                    Yes
dyear                                                                                                                    Yes
ff_30ind-dyear                                                                                                           Yes
________________________________________                                                                ____________________
S.E.: Clustered                                                                                                    by: gvkey
Observations                                                                                                          21,599
R2                                                                                                                   0.79900
Within R2                                                                                                            0.00481
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>fixest<span class="sc">::</span><span class="fu">coefplot</span>(did_withind_model2,</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">order =</span> <span class="fu">str_extract</span>(<span class="at">string =</span> <span class="fu">names</span>(<span class="fu">sort</span>(<span class="fu">coef</span>(did_withind_model2), <span class="at">decreasing =</span> <span class="cn">FALSE</span>)), <span class="at">pattern =</span> <span class="st">"(?&lt;=ind).*"</span>), </span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">horiz =</span> <span class="cn">TRUE</span>, </span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">drop =</span> <span class="st">"Print"</span>, <span class="co"># remove the number 5: Printing &amp; Publishing</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">main =</span> <span class="st">""</span>, </span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">sub =</span> <span class="st">""</span></span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>                 ); </span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="at">main =</span> <span class="fu">expression</span>(<span class="fu">bold</span>(<span class="st">"Treatment Effect Estimates for Fama-French 30 Industries (Book leverage"</span> <span class="sc">%in%</span> <span class="st">"[0,1])"</span>)), <span class="at">adj =</span> <span class="fl">0.2</span>); </span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a><span class="fu">mtext</span>(<span class="st">"*Printing and Publishing (Industry 5) is excluded. Red dashed line indicates the average treatment effect."</span>, <span class="at">side =</span> <span class="dv">1</span>, <span class="at">line =</span> <span class="dv">4</span>, <span class="at">adj =</span> <span class="dv">0</span>); </span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> model_a5_average2<span class="sc">$</span>coefficients, <span class="at">col =</span> <span class="dv">2</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div class="page-columns page-full">
<figure class="figure page-columns page-full">
<p class="page-columns page-full"><img src="AFA_test_2005_files/figure-html/a6-did-industry-01-1.png" class="img-fluid figure-img column-page-right" width="1440"></p>
</figure>
</div>
</div>
</div>
<p>The industry-by-industry estimates show that observations for <code>ff_30ind == 8, 22, 23</code> (Healthcare, Medical Equipment, Pharmaceutical Products; Personal and Business Services; Business Equipment) are significantly reduced and this contributes to the change in the average treatment effect estimate in <a href="#sec-a2-results-using-data-filters-in-the-main-paper" class="quarto-xref">Section&nbsp;5.2</a>.</p>
<hr>
<p>We also compare the treatment effects from the two samples:</p>
<p>as the coefficient estimates for industry 5 are too large, they are excluded in the following graph.</p>
<div class="cell page-columns page-full">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>fixest<span class="sc">::</span><span class="fu">coefplot</span>(<span class="fu">list</span>(did_withind_model, did_withind_model2), </span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">order =</span> <span class="fu">paste</span>(<span class="st">"ind"</span>, <span class="fu">sort</span>(<span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(<span class="fu">names</span>(<span class="fu">coef</span>(did_withind_model2)), <span class="at">pattern =</span> <span class="st">"(?&lt;=ind)[^:]+"</span>))), <span class="st">":"</span>, <span class="at">sep =</span> <span class="st">""</span>), </span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">horiz =</span> <span class="cn">TRUE</span>, </span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">drop =</span> <span class="st">"Print"</span>, <span class="co"># remove the number 5: Printing &amp; Publishing</span></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">main =</span> <span class="st">""</span>, </span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">sub =</span> <span class="st">""</span>, <span class="at">sep =</span> <span class="fl">0.3</span></span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>                 ); </span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="at">main =</span> <span class="fu">expression</span>(<span class="fu">bold</span>(<span class="st">"Treatment Effect Estimates for Fama-French 30 Industries"</span>)), <span class="at">adj =</span> <span class="fl">0.2</span>); </span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a><span class="fu">mtext</span>(<span class="st">"*Printing and Publishing (Industry 5) is excluded. Red dashed line indicates the average treatment effect."</span>, <span class="at">side =</span> <span class="dv">1</span>, <span class="at">line =</span> <span class="dv">4</span>, <span class="at">adj =</span> <span class="dv">0</span>); </span>
<span id="cb93-10"><a href="#cb93-10" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"bottomleft"</span>, <span class="at">bty =</span> <span class="st">"n"</span>, <span class="at">col =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="at">pch =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">17</span>), </span>
<span id="cb93-11"><a href="#cb93-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"Full Sample"</span>, <span class="fu">expression</span>(<span class="st">"Book leverage"</span> <span class="sc">%in%</span> <span class="st">"[0,1]"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div class="page-columns page-full">
<figure class="figure page-columns page-full">
<p class="page-columns page-full"><img src="AFA_test_2005_files/figure-html/a6-did-industry-compare-1.png" class="img-fluid figure-img column-page-right" width="1440"></p>
</figure>
</div>
</div>
</div>
<p>We also check the impact of this filter, <code>book_leverage ∈ [0,1]</code>, on the sample. The left table below gives the number of firm-year observations for each industry in the full sample and the right one gives the number of observations for each industry in the filter sample. We can see a decrease in the number of observations in the three industries, 8, 22 and 23, after applying the filter. These three industries happen to be the ones contribute most to the average treatment effect.</p>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>tbl_count1 <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable </span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span> </span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classification </span></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span> </span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>  <span class="do">## remove some industries: </span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">20</span>, <span class="co"># exclude Utiltiy (number 20) </span></span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(sic <span class="sc">&gt;=</span> <span class="dv">6000</span> <span class="sc">&amp;</span> sic <span class="sc">&lt;=</span> <span class="dv">6199</span>) <span class="co"># exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span>  </span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span></span>
<span id="cb94-13"><a href="#cb94-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ff_30ind) <span class="sc">%&gt;%</span> </span>
<span id="cb94-14"><a href="#cb94-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_obs =</span> <span class="fu">n</span>(), <span class="at">ff_30ind_name =</span> <span class="fu">unique</span>(ff_30ind_desc)) <span class="sc">%&gt;%</span></span>
<span id="cb94-15"><a href="#cb94-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb94-16"><a href="#cb94-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">n_per %</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(n_obs <span class="sc">/</span> <span class="fu">sum</span>(n_obs) <span class="sc">*</span> <span class="dv">100</span>, <span class="at">digits =</span> <span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb94-17"><a href="#cb94-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>n_obs) <span class="sc">%&gt;%</span> </span>
<span id="cb94-18"><a href="#cb94-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb94-19"><a href="#cb94-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb94-20"><a href="#cb94-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">"(1) Full Sample"</span>,</span>
<span id="cb94-21"><a href="#cb94-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(n_obs, <span class="st">`</span><span class="at">n_per %</span><span class="st">`</span>)</span>
<span id="cb94-22"><a href="#cb94-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb94-23"><a href="#cb94-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb94-24"><a href="#cb94-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">size =</span> <span class="st">"x-small"</span>),  <span class="co"># Reduce font size</span></span>
<span id="cb94-25"><a href="#cb94-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>(<span class="at">columns =</span> <span class="fu">everything</span>()) <span class="co"># reduce the size of tab headers </span></span>
<span id="cb94-26"><a href="#cb94-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb94-27"><a href="#cb94-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb94-28"><a href="#cb94-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">size =</span> <span class="st">"x-small"</span>),  <span class="co"># Reduce font size</span></span>
<span id="cb94-29"><a href="#cb94-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()</span>
<span id="cb94-30"><a href="#cb94-30" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb94-31"><a href="#cb94-31" aria-hidden="true" tabindex="-1"></a>tbl_count1</span>
<span id="cb94-32"><a href="#cb94-32" aria-hidden="true" tabindex="-1"></a>tbl_count2 <span class="ot">&lt;-</span> data_did_withind2 <span class="sc">%&gt;%</span> </span>
<span id="cb94-33"><a href="#cb94-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span>  </span>
<span id="cb94-34"><a href="#cb94-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span></span>
<span id="cb94-35"><a href="#cb94-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ff_30ind) <span class="sc">%&gt;%</span> </span>
<span id="cb94-36"><a href="#cb94-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_obs =</span> <span class="fu">n</span>(), <span class="at">ff_30ind_name =</span> <span class="fu">unique</span>(ff_30ind_desc)) <span class="sc">%&gt;%</span></span>
<span id="cb94-37"><a href="#cb94-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb94-38"><a href="#cb94-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">n_per %</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(n_obs <span class="sc">/</span> <span class="fu">sum</span>(n_obs) <span class="sc">*</span> <span class="dv">100</span>, <span class="at">digits =</span> <span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb94-39"><a href="#cb94-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>n_obs) <span class="sc">%&gt;%</span> </span>
<span id="cb94-40"><a href="#cb94-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb94-41"><a href="#cb94-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb94-42"><a href="#cb94-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">html</span>(<span class="st">"(2) book leverage &amp;isin; [0,1]"</span>), </span>
<span id="cb94-43"><a href="#cb94-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(n_obs, <span class="st">`</span><span class="at">n_per %</span><span class="st">`</span>)</span>
<span id="cb94-44"><a href="#cb94-44" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb94-45"><a href="#cb94-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb94-46"><a href="#cb94-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">size =</span> <span class="st">"x-small"</span>),  <span class="co"># Reduce font size</span></span>
<span id="cb94-47"><a href="#cb94-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>(<span class="at">columns =</span> <span class="fu">everything</span>()) <span class="co"># reduce the size of tab headers </span></span>
<span id="cb94-48"><a href="#cb94-48" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb94-49"><a href="#cb94-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb94-50"><a href="#cb94-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">size =</span> <span class="st">"x-small"</span>),  <span class="co"># Reduce font size</span></span>
<span id="cb94-51"><a href="#cb94-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()</span>
<span id="cb94-52"><a href="#cb94-52" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb94-53"><a href="#cb94-53" aria-hidden="true" tabindex="-1"></a>tbl_count2 </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell column-page-right quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div id="girkeobjln" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#girkeobjln table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#girkeobjln thead, #girkeobjln tbody, #girkeobjln tfoot, #girkeobjln tr, #girkeobjln td, #girkeobjln th {
  border-style: none;
}

#girkeobjln p {
  margin: 0;
  padding: 0;
}

#girkeobjln .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#girkeobjln .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#girkeobjln .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#girkeobjln .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#girkeobjln .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#girkeobjln .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#girkeobjln .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#girkeobjln .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#girkeobjln .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#girkeobjln .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#girkeobjln .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#girkeobjln .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#girkeobjln .gt_spanner_row {
  border-bottom-style: hidden;
}

#girkeobjln .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#girkeobjln .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#girkeobjln .gt_from_md > :first-child {
  margin-top: 0;
}

#girkeobjln .gt_from_md > :last-child {
  margin-bottom: 0;
}

#girkeobjln .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#girkeobjln .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#girkeobjln .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#girkeobjln .gt_row_group_first td {
  border-top-width: 2px;
}

#girkeobjln .gt_row_group_first th {
  border-top-width: 2px;
}

#girkeobjln .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#girkeobjln .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#girkeobjln .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#girkeobjln .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#girkeobjln .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#girkeobjln .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#girkeobjln .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#girkeobjln .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#girkeobjln .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#girkeobjln .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#girkeobjln .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#girkeobjln .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#girkeobjln .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#girkeobjln .gt_left {
  text-align: left;
}

#girkeobjln .gt_center {
  text-align: center;
}

#girkeobjln .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#girkeobjln .gt_font_normal {
  font-weight: normal;
}

#girkeobjln .gt_font_bold {
  font-weight: bold;
}

#girkeobjln .gt_font_italic {
  font-style: italic;
}

#girkeobjln .gt_super {
  font-size: 65%;
}

#girkeobjln .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#girkeobjln .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#girkeobjln .gt_indent_1 {
  text-indent: 5px;
}

#girkeobjln .gt_indent_2 {
  text-indent: 10px;
}

#girkeobjln .gt_indent_3 {
  text-indent: 15px;
}

#girkeobjln .gt_indent_4 {
  text-indent: 20px;
}

#girkeobjln .gt_indent_5 {
  text-indent: 25px;
}

#girkeobjln .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#girkeobjln div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings gt_spanner_row">
<th rowspan="2" id="ff_30ind" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="text-align: left; font-size: x-small;" scope="col">ff_30ind</th>
<th colspan="2" id="(1) Full Sample" class="gt_center gt_columns_top_border gt_column_spanner_outer" style="text-align: left;" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">(1) Full Sample</span></th>
<th rowspan="2" id="ff_30ind_name" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="text-align: left; font-size: x-small;" scope="col">ff_30ind_name</th>
</tr>
<tr class="odd gt_col_headings">
<th id="n_obs" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="text-align: left; font-size: x-small;" scope="col">n_obs</th>
<th id="n_per %" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="text-align: left; font-size: x-small;" scope="col">n_per %</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">22</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">3277</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">16.86</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Personal and Business Services</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">23</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">2717</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">13.98</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Business Equipment</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">8</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">2570</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">13.22</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Healthcare, Medical Equipment, Pharmaceutical Products</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">27</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">1277</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">6.57</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Retail</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">29</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">1220</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">6.28</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Banking, Insurance, Real Estate, Trading</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">30</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">767</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">3.95</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Everything Else</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">26</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">755</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">3.88</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Wholesale</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">13</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">706</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">3.63</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Fabricated Products and Machinery</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">21</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">624</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">3.21</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Communication</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">11</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">581</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">2.99</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Construction and Construction Materials</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">19</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">576</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">2.96</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Petroleum and Natural Gas</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">25</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">501</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">2.58</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Transportation</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">28</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">488</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">2.51</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Restaurants, Hotels, Motels</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">4</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">443</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">2.28</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Recreation</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">9</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">400</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">2.06</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Chemicals</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">1</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">391</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">2.01</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Food Products</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">7</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">327</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">1.68</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Apparel</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">6</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">271</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">1.39</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Consumer Goods</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">14</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">267</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">1.37</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Electrical Equipment</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">15</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">251</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">1.29</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Automobiles and Trucks</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">24</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">242</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">1.25</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Business Supplies and Shipping Containers</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">5</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">214</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">1.10</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Printing and Publishing</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">16</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">157</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">0.81</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Aircraft, ships, and railroad equipment</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">12</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">155</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">0.80</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Steel Works Etc</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">10</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">83</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">0.43</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Textiles</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">2</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">71</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">0.37</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Beer &amp; Liquor</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">17</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">67</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">0.34</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Precious Metals, Non-Metallic, and Industrial Metal Mining</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">18</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">26</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">0.13</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Coal</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">3</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">10</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">0.05</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Tobacco Products</td>
</tr>
</tbody>
</table>

</div>
<div id="ebeslzoywz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ebeslzoywz table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ebeslzoywz thead, #ebeslzoywz tbody, #ebeslzoywz tfoot, #ebeslzoywz tr, #ebeslzoywz td, #ebeslzoywz th {
  border-style: none;
}

#ebeslzoywz p {
  margin: 0;
  padding: 0;
}

#ebeslzoywz .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ebeslzoywz .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ebeslzoywz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ebeslzoywz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ebeslzoywz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ebeslzoywz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ebeslzoywz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ebeslzoywz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ebeslzoywz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ebeslzoywz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ebeslzoywz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ebeslzoywz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ebeslzoywz .gt_spanner_row {
  border-bottom-style: hidden;
}

#ebeslzoywz .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ebeslzoywz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ebeslzoywz .gt_from_md > :first-child {
  margin-top: 0;
}

#ebeslzoywz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ebeslzoywz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ebeslzoywz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ebeslzoywz .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ebeslzoywz .gt_row_group_first td {
  border-top-width: 2px;
}

#ebeslzoywz .gt_row_group_first th {
  border-top-width: 2px;
}

#ebeslzoywz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ebeslzoywz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ebeslzoywz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ebeslzoywz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ebeslzoywz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ebeslzoywz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ebeslzoywz .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ebeslzoywz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ebeslzoywz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ebeslzoywz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ebeslzoywz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ebeslzoywz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ebeslzoywz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ebeslzoywz .gt_left {
  text-align: left;
}

#ebeslzoywz .gt_center {
  text-align: center;
}

#ebeslzoywz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ebeslzoywz .gt_font_normal {
  font-weight: normal;
}

#ebeslzoywz .gt_font_bold {
  font-weight: bold;
}

#ebeslzoywz .gt_font_italic {
  font-style: italic;
}

#ebeslzoywz .gt_super {
  font-size: 65%;
}

#ebeslzoywz .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ebeslzoywz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ebeslzoywz .gt_indent_1 {
  text-indent: 5px;
}

#ebeslzoywz .gt_indent_2 {
  text-indent: 10px;
}

#ebeslzoywz .gt_indent_3 {
  text-indent: 15px;
}

#ebeslzoywz .gt_indent_4 {
  text-indent: 20px;
}

#ebeslzoywz .gt_indent_5 {
  text-indent: 25px;
}

#ebeslzoywz .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#ebeslzoywz div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings gt_spanner_row">
<th rowspan="2" id="ff_30ind" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="text-align: left; font-size: x-small;" scope="col">ff_30ind</th>
<th colspan="2" id="(2) book leverage &amp;isin; [0,1]" class="gt_center gt_columns_top_border gt_column_spanner_outer" style="text-align: left;" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">(2) book leverage ∈ [0,1]</span></th>
<th rowspan="2" id="ff_30ind_name" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="text-align: left; font-size: x-small;" scope="col">ff_30ind_name</th>
</tr>
<tr class="odd gt_col_headings">
<th id="n_obs" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="text-align: left; font-size: x-small;" scope="col">n_obs</th>
<th id="n_per %" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="text-align: left; font-size: x-small;" scope="col">n_per %</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">22</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">3131</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">16.86</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Personal and Business Services</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">23</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">2615</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">14.08</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Business Equipment</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">8</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">2439</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">13.13</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Healthcare, Medical Equipment, Pharmaceutical Products</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">27</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">1251</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">6.74</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Retail</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">29</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">1183</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">6.37</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Banking, Insurance, Real Estate, Trading</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">26</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">737</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">3.97</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Wholesale</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">30</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">682</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">3.67</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Everything Else</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">13</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">669</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">3.60</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Fabricated Products and Machinery</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">11</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">563</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">3.03</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Construction and Construction Materials</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">19</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">560</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">3.02</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Petroleum and Natural Gas</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">21</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">547</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">2.95</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Communication</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">25</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">495</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">2.67</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Transportation</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">28</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">469</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">2.53</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Restaurants, Hotels, Motels</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">4</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">419</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">2.26</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Recreation</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">1</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">384</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">2.07</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Food Products</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">9</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">371</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">2.00</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Chemicals</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">7</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">322</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">1.73</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Apparel</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">14</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">260</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">1.40</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Electrical Equipment</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">6</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">249</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">1.34</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Consumer Goods</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">15</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">241</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">1.30</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Automobiles and Trucks</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">24</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">232</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">1.25</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Business Supplies and Shipping Containers</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">5</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">201</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">1.08</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Printing and Publishing</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">12</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">153</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">0.82</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Steel Works Etc</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">16</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">146</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">0.79</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Aircraft, ships, and railroad equipment</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">10</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">79</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">0.43</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Textiles</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">2</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">71</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">0.38</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Beer &amp; Liquor</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">17</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">66</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">0.36</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Precious Metals, Non-Metallic, and Industrial Metal Mining</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">18</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">26</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">0.14</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Coal</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="ff_30ind" style="text-align: left; font-size: x-small;">3</td>
<td class="gt_row gt_right" headers="n_obs" style="text-align: left; font-size: x-small;">10</td>
<td class="gt_row gt_right" headers="n_per %" style="text-align: left; font-size: x-small;">0.05</td>
<td class="gt_row gt_left" headers="ff_30ind_name" style="text-align: left; font-size: x-small;">Tobacco Products</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>To further validate our conjecture that the filter affecting different industries unequally, we remove all firms which contain <code>book_leverage</code> outside the [0,1] range. We re-do the main analysis and the industry level analysis on a balanced panel:</p>
<div class="cell page-columns page-full">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="do">## create leverage variables </span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> compustat_na <span class="sc">%&gt;%</span> </span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(at &gt; 0) %&gt;% </span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(indfmt <span class="sc">==</span> <span class="st">"INDL"</span>) <span class="sc">%&gt;%</span> <span class="do">## remove all financial firms </span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>    <span class="do">## leverage variables: </span></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> at, </span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">debt_ebitda =</span> (dlc <span class="sc">+</span> dltt) <span class="sc">/</span> ebitda, </span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a>    <span class="do">## treatment intensity: </span></span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">totalrent =</span> mrc1 <span class="sc">+</span> mrc2 <span class="sc">+</span> mrc3 <span class="sc">+</span> mrc4 <span class="sc">+</span> mrc5 <span class="sc">+</span> mrct, <span class="co"># total rent w/o discount</span></span>
<span id="cb95-11"><a href="#cb95-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb95-12"><a href="#cb95-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">contract_intensity =</span> (dclo <span class="sc">+</span> totalrent) <span class="sc">/</span> at, <span class="co"># executory contract intensity</span></span>
<span id="cb95-13"><a href="#cb95-13" aria-hidden="true" tabindex="-1"></a>    <span class="do">## other variables: </span></span>
<span id="cb95-14"><a href="#cb95-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.integer</span>(<span class="fu">substr</span>(datadate, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">stop =</span> <span class="dv">4</span>)) <span class="co"># data year</span></span>
<span id="cb95-15"><a href="#cb95-15" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb95-16"><a href="#cb95-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-17"><a href="#cb95-17" aria-hidden="true" tabindex="-1"></a>data_firm <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb95-18"><a href="#cb95-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span> <span class="co"># use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb95-19"><a href="#cb95-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, <span class="at">contract_intensity_2000 =</span> contract_intensity) <span class="sc">%&gt;%</span> </span>
<span id="cb95-20"><a href="#cb95-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span> </span>
<span id="cb95-21"><a href="#cb95-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">contract_intensity_2000 =</span> <span class="fu">mean</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) ) <span class="sc">%&gt;%</span> </span>
<span id="cb95-22"><a href="#cb95-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() </span>
<span id="cb95-23"><a href="#cb95-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-24"><a href="#cb95-24" aria-hidden="true" tabindex="-1"></a>FF_30ind <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"</span>))</span>
<span id="cb95-25"><a href="#cb95-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-26"><a href="#cb95-26" aria-hidden="true" tabindex="-1"></a>data_did_withind3 <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb95-27"><a href="#cb95-27" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable </span></span>
<span id="cb95-28"><a href="#cb95-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span> </span>
<span id="cb95-29"><a href="#cb95-29" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classification </span></span>
<span id="cb95-30"><a href="#cb95-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span> </span>
<span id="cb95-31"><a href="#cb95-31" aria-hidden="true" tabindex="-1"></a>  <span class="do">## pre- &amp; post- </span></span>
<span id="cb95-32"><a href="#cb95-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb95-33"><a href="#cb95-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">indexyear =</span> (dyear <span class="sc">-</span> base_year), <span class="co"># year index with 2005 as base 0.</span></span>
<span id="cb95-34"><a href="#cb95-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(dyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)  <span class="co"># whether it is after the 2005 reform </span></span>
<span id="cb95-35"><a href="#cb95-35" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb95-36"><a href="#cb95-36" aria-hidden="true" tabindex="-1"></a>  <span class="do">## remove some industries: </span></span>
<span id="cb95-37"><a href="#cb95-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb95-38"><a href="#cb95-38" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">20</span>, <span class="co"># exclude Utiltiy (number 20) </span></span>
<span id="cb95-39"><a href="#cb95-39" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">5</span>, <span class="co"># exclude (number 5) </span></span>
<span id="cb95-40"><a href="#cb95-40" aria-hidden="true" tabindex="-1"></a>    fic <span class="sc">==</span> <span class="st">"USA"</span>, </span>
<span id="cb95-41"><a href="#cb95-41" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(sic <span class="sc">&gt;=</span> <span class="dv">6000</span> <span class="sc">&amp;</span> sic <span class="sc">&lt;=</span> <span class="dv">6199</span>) <span class="co"># exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb95-42"><a href="#cb95-42" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb95-43"><a href="#cb95-43" aria-hidden="true" tabindex="-1"></a>  <span class="co"># drop values outside the range:</span></span>
<span id="cb95-44"><a href="#cb95-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb95-45"><a href="#cb95-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> <span class="fu">ifelse</span>(<span class="at">test =</span> (book_leverage <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> book_leverage <span class="sc">&lt;=</span> <span class="dv">1</span>), <span class="at">yes =</span> book_leverage, <span class="at">no =</span> <span class="cn">NA</span>) </span>
<span id="cb95-46"><a href="#cb95-46" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb95-47"><a href="#cb95-47" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb95-48"><a href="#cb95-48" aria-hidden="true" tabindex="-1"></a><span class="do">## did analysis: </span></span>
<span id="cb95-49"><a href="#cb95-49" aria-hidden="true" tabindex="-1"></a>data_did_withind3 <span class="sc">%&gt;%</span> </span>
<span id="cb95-50"><a href="#cb95-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb95-51"><a href="#cb95-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb95-52"><a href="#cb95-52" aria-hidden="true" tabindex="-1"></a>  <span class="do">## keep only firms with all observations over the full period.</span></span>
<span id="cb95-53"><a href="#cb95-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb95-54"><a href="#cb95-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span></span>
<span id="cb95-55"><a href="#cb95-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb95-56"><a href="#cb95-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_obs =</span> <span class="fu">n</span>(), <span class="co"># number of observations for each firm</span></span>
<span id="cb95-57"><a href="#cb95-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_post =</span> <span class="fu">sum</span>(post_2005, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># number of obs after 2005</span></span>
<span id="cb95-58"><a href="#cb95-58" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb95-59"><a href="#cb95-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb95-60"><a href="#cb95-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n_obs <span class="sc">&gt;=</span> <span class="dv">6</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb95-61"><a href="#cb95-61" aria-hidden="true" tabindex="-1"></a>  <span class="do">## re-clean  </span></span>
<span id="cb95-62"><a href="#cb95-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb95-63"><a href="#cb95-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey) </span>
<span id="cb95-64"><a href="#cb95-64" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb95-65"><a href="#cb95-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb95-66"><a href="#cb95-66" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear <span class="sc">+</span> ff_30ind<span class="sc">^</span>dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb95-67"><a href="#cb95-67" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">etable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                    .
Dependent Var.:                         book_leverage
                                                     
contract_intensity_2000 x post_2005  -0.0037 (0.0107)
Fixed-Effects:                       ----------------
gvkey                                             Yes
dyear                                             Yes
ff_30ind-dyear                                    Yes
___________________________________  ________________
S.E.: Clustered                     by: gvkey &amp; ff_3.
Observations                                   15,449
R2                                            0.78062
Within R2                                      3.8e-5
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="do">## did analysis for the treatment effects in each industry: </span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>did_withind_model3 <span class="ot">&lt;-</span> data_did_withind3 <span class="sc">%&gt;%</span> </span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name, ff_30ind_desc, ff_30ind) <span class="sc">%&gt;%</span> </span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>  <span class="do">## keep only firms with all observations over the full period.</span></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span></span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_obs =</span> <span class="fu">n</span>(), <span class="co"># number of observations for each firm</span></span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_post =</span> <span class="fu">sum</span>(post_2005, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># number of obs after 2005</span></span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb97-12"><a href="#cb97-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb97-13"><a href="#cb97-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n_obs <span class="sc">&gt;=</span> <span class="dv">6</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb97-14"><a href="#cb97-14" aria-hidden="true" tabindex="-1"></a>  <span class="do">## </span></span>
<span id="cb97-15"><a href="#cb97-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb97-16"><a href="#cb97-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb97-17"><a href="#cb97-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">ff_30ind =</span> <span class="fu">as.factor</span>(<span class="fu">paste</span>(ff_30ind, ff_30ind_desc, <span class="at">sep =</span> <span class="st">": "</span>)), </span>
<span id="cb97-18"><a href="#cb97-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb97-19"><a href="#cb97-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb97-20"><a href="#cb97-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb97-21"><a href="#cb97-21" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005<span class="sc">:</span>ff_30ind <span class="sc">|</span> gvkey <span class="sc">+</span> dyear <span class="sc">+</span> ff_30ind<span class="sc">^</span>dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>))</span>
<span id="cb97-22"><a href="#cb97-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-23"><a href="#cb97-23" aria-hidden="true" tabindex="-1"></a>model_a5_average3 <span class="ot">&lt;-</span> data_did_withind3 <span class="sc">%&gt;%</span> </span>
<span id="cb97-24"><a href="#cb97-24" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name, ff_30ind_desc, ff_30ind) <span class="sc">%&gt;%</span> </span>
<span id="cb97-25"><a href="#cb97-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb97-26"><a href="#cb97-26" aria-hidden="true" tabindex="-1"></a>      <span class="do">## keep only firms with all observations over the full period.</span></span>
<span id="cb97-27"><a href="#cb97-27" aria-hidden="true" tabindex="-1"></a>      <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb97-28"><a href="#cb97-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span></span>
<span id="cb97-29"><a href="#cb97-29" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(</span>
<span id="cb97-30"><a href="#cb97-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">n_obs =</span> <span class="fu">n</span>(), <span class="co"># number of observations for each firm</span></span>
<span id="cb97-31"><a href="#cb97-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">n_post =</span> <span class="fu">sum</span>(post_2005, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># number of obs after 2005</span></span>
<span id="cb97-32"><a href="#cb97-32" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span></span>
<span id="cb97-33"><a href="#cb97-33" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb97-34"><a href="#cb97-34" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(n_obs <span class="sc">&gt;=</span> <span class="dv">6</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb97-35"><a href="#cb97-35" aria-hidden="true" tabindex="-1"></a>      <span class="do">## </span></span>
<span id="cb97-36"><a href="#cb97-36" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(</span>
<span id="cb97-37"><a href="#cb97-37" aria-hidden="true" tabindex="-1"></a>        <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey), </span>
<span id="cb97-38"><a href="#cb97-38" aria-hidden="true" tabindex="-1"></a>        <span class="at">ff_30ind =</span> <span class="fu">as.factor</span>(<span class="fu">paste</span>(ff_30ind, ff_30ind_desc, <span class="at">sep =</span> <span class="st">": "</span>)), </span>
<span id="cb97-39"><a href="#cb97-39" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> contract_intensity_2000 <span class="sc">&gt;</span> <span class="fu">median</span>(contract_intensity_2000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span>
<span id="cb97-40"><a href="#cb97-40" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb97-41"><a href="#cb97-41" aria-hidden="true" tabindex="-1"></a>      <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb97-42"><a href="#cb97-42" aria-hidden="true" tabindex="-1"></a>      fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> book_leverage <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear <span class="sc">+</span> sic<span class="sc">^</span>dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>))</span>
<span id="cb97-43"><a href="#cb97-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-44"><a href="#cb97-44" aria-hidden="true" tabindex="-1"></a>did_withind_model3 <span class="sc">%&gt;%</span> fixest<span class="sc">::</span><span class="fu">etable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                                                                                           .
Dependent Var.:                                                                                                book_leverage
                                                                                                                            
contract_intensity_2000 x post_2005 x ff_30ind1 x FoodProducts                                               0.0604 (0.0738)
contract_intensity_2000 x post_2005 x ff_30ind10 x Textiles                                                  0.2196 (0.7334)
contract_intensity_2000 x post_2005 x ff_30ind11 x ConstructionandConstructionMaterials                     -0.0205 (0.0245)
contract_intensity_2000 x post_2005 x ff_30ind12 x SteelWorksEtc                                             0.0470 (0.0302)
contract_intensity_2000 x post_2005 x ff_30ind13 x FabricatedProductsandMachinery                           -0.0556 (0.1267)
contract_intensity_2000 x post_2005 x ff_30ind14 x ElectricalEquipment                                    0.4162*** (0.1213)
contract_intensity_2000 x post_2005 x ff_30ind15 x AutomobilesandTrucks                                     -0.2071 (0.2629)
contract_intensity_2000 x post_2005 x ff_30ind16 x Aircraft,ships,andrailroadequipment                      -0.3590 (0.2775)
contract_intensity_2000 x post_2005 x ff_30ind17 x PreciousMetals,Non-Metallic,andIndustrialMetalMining      -0.3417 (1.645)
contract_intensity_2000 x post_2005 x ff_30ind18 x Coal                                                     -0.3487 (0.5080)
contract_intensity_2000 x post_2005 x ff_30ind19 x PetroleumandNaturalGas                                 0.2578*** (0.0543)
contract_intensity_2000 x post_2005 x ff_30ind2 x Beer&amp;Liquor                                             0.7163*** (0.1106)
contract_intensity_2000 x post_2005 x ff_30ind21 x Communication                                            -0.0220 (0.0208)
contract_intensity_2000 x post_2005 x ff_30ind22 x PersonalandBusinessServices                              -0.0351 (0.0316)
contract_intensity_2000 x post_2005 x ff_30ind23 x BusinessEquipment                                         0.0206 (0.0317)
contract_intensity_2000 x post_2005 x ff_30ind24 x BusinessSuppliesandShippingContainers                    -0.1955 (0.2194)
contract_intensity_2000 x post_2005 x ff_30ind25 x Transportation                                            0.0172 (0.0123)
contract_intensity_2000 x post_2005 x ff_30ind26 x Wholesale                                                -0.0344 (0.0411)
contract_intensity_2000 x post_2005 x ff_30ind27 x Retail                                                    0.0060 (0.0130)
contract_intensity_2000 x post_2005 x ff_30ind28 x Restaurants,Hotels,Motels                                -0.0194 (0.0367)
contract_intensity_2000 x post_2005 x ff_30ind29 x Banking,Insurance,RealEstate,Trading                     -0.0034 (0.0351)
contract_intensity_2000 x post_2005 x ff_30ind3 x TobaccoProducts                                       -2.974*** (4.44e-16)
contract_intensity_2000 x post_2005 x ff_30ind30 x EverythingElse                                            0.0336 (0.0290)
contract_intensity_2000 x post_2005 x ff_30ind4 x Recreation                                              0.2530*** (0.0512)
contract_intensity_2000 x post_2005 x ff_30ind6 x ConsumerGoods                                              0.0175 (0.0298)
contract_intensity_2000 x post_2005 x ff_30ind7 x Apparel                                                  -0.0687* (0.0318)
contract_intensity_2000 x post_2005 x ff_30ind8 x Healthcare,MedicalEquipment,PharmaceuticalProducts      -0.0624** (0.0217)
contract_intensity_2000 x post_2005 x ff_30ind9 x Chemicals                                               -0.3987** (0.1323)
Fixed-Effects:                                                                                          --------------------
gvkey                                                                                                                    Yes
dyear                                                                                                                    Yes
ff_30ind-dyear                                                                                                           Yes
________________________________________                                                                ____________________
S.E.: Clustered                                                                                                    by: gvkey
Observations                                                                                                          15,449
R2                                                                                                                   0.78236
Within R2                                                                                                            0.00795
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>fixest<span class="sc">::</span><span class="fu">coefplot</span>(did_withind_model3,</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">order =</span> <span class="fu">str_extract</span>(<span class="at">string =</span> <span class="fu">names</span>(<span class="fu">sort</span>(<span class="fu">coef</span>(did_withind_model3), <span class="at">decreasing =</span> <span class="cn">FALSE</span>)), <span class="at">pattern =</span> <span class="st">"(?&lt;=ind).*"</span>), </span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">horiz =</span> <span class="cn">TRUE</span>, </span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">drop =</span> <span class="st">"Print"</span>, <span class="co"># remove the number 5: Printing &amp; Publishing</span></span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">main =</span> <span class="st">""</span>, </span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">sub =</span> <span class="st">""</span></span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a>                 ); </span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="at">main =</span> <span class="fu">expression</span>(<span class="fu">bold</span>(<span class="st">"Treatment Effect Estimates for Fama-French 30 Industries (Book leverage"</span> <span class="sc">%in%</span> <span class="st">"[0,1] &amp; Balanced Panel)"</span>)), <span class="at">adj =</span> <span class="fl">0.2</span>); </span>
<span id="cb99-9"><a href="#cb99-9" aria-hidden="true" tabindex="-1"></a><span class="fu">mtext</span>(<span class="st">"*Printing and Publishing (Industry 5) is excluded. Red dashed line indicates the average treatment effect."</span>, <span class="at">side =</span> <span class="dv">1</span>, <span class="at">line =</span> <span class="dv">4</span>, <span class="at">adj =</span> <span class="dv">0</span>); </span>
<span id="cb99-10"><a href="#cb99-10" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> model_a5_average3<span class="sc">$</span>coefficients, <span class="at">col =</span> <span class="dv">2</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div class="page-columns page-full">
<figure class="figure page-columns page-full">
<p class="page-columns page-full"><img src="AFA_test_2005_files/figure-html/a6-did-industry-01-balance-1.png" class="img-fluid figure-img column-page-right" width="1440"></p>
</figure>
</div>
</div>
</div>
<p>The average treatment effect estimate is negative but insignificant in the filtered sample. In particular, we have seen a large change in the treatment effect estimate in industries 8 and 23. As these industries consist of most of the observations in our sample (over 25%), this significantly reduce the magnitude of the average treatment effect estimate in the sample and make it insignificant.</p>
<hr>
<p>In this subsection, let’s look into the dynamics of those excluded observations:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="do">## data prep: </span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>data_did_withind3 <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the grouping variable </span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> data_firm, <span class="at">by =</span> <span class="fu">join_by</span>(gvkey) ) <span class="sc">%&gt;%</span> </span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>  <span class="do">## merge the FF 30 industry classification </span></span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="at">y =</span> FF_30ind, <span class="at">by =</span> <span class="fu">join_by</span>(sic)) <span class="sc">%&gt;%</span> </span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>  <span class="do">## pre- &amp; post- </span></span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">indexyear =</span> (dyear <span class="sc">-</span> base_year), <span class="co"># year index with 2005 as base 0.</span></span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_2005 =</span> <span class="fu">ifelse</span>(dyear <span class="sc">&gt;</span> base_year, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)  <span class="co"># whether it is after the 2005 reform </span></span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a>  <span class="do">## remove some industries: </span></span>
<span id="cb100-13"><a href="#cb100-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb100-14"><a href="#cb100-14" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">20</span>, <span class="co"># exclude Utiltiy (number 20) </span></span>
<span id="cb100-15"><a href="#cb100-15" aria-hidden="true" tabindex="-1"></a>    ff_30ind <span class="sc">!=</span> <span class="dv">5</span>, <span class="co"># exclude (number 5) </span></span>
<span id="cb100-16"><a href="#cb100-16" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(sic <span class="sc">&gt;=</span> <span class="dv">6000</span> <span class="sc">&amp;</span> sic <span class="sc">&lt;=</span> <span class="dv">6199</span>) <span class="co"># exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb100-17"><a href="#cb100-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb100-18"><a href="#cb100-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># drop values outside the range:</span></span>
<span id="cb100-19"><a href="#cb100-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb100-20"><a href="#cb100-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage_filter =</span> <span class="fu">ifelse</span>(<span class="at">test =</span> (book_leverage <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> book_leverage <span class="sc">&lt;=</span> <span class="dv">1</span>), <span class="at">yes =</span> book_leverage, <span class="at">no =</span> <span class="cn">NA</span>) </span>
<span id="cb100-21"><a href="#cb100-21" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb100-22"><a href="#cb100-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-23"><a href="#cb100-23" aria-hidden="true" tabindex="-1"></a>data_did_withind3 <span class="sc">%&gt;%</span> </span>
<span id="cb100-24"><a href="#cb100-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(book_leverage_filter)) <span class="sc">%&gt;%</span> </span>
<span id="cb100-25"><a href="#cb100-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2000</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(book_leverage) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(contract_intensity_2000)) <span class="sc">%&gt;%</span> </span>
<span id="cb100-26"><a href="#cb100-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(conm, tic, </span>
<span id="cb100-27"><a href="#cb100-27" aria-hidden="true" tabindex="-1"></a>         <span class="co"># tic, cik, fic, </span></span>
<span id="cb100-28"><a href="#cb100-28" aria-hidden="true" tabindex="-1"></a>         dyear, </span>
<span id="cb100-29"><a href="#cb100-29" aria-hidden="true" tabindex="-1"></a>         <span class="co"># fyear, datadate,</span></span>
<span id="cb100-30"><a href="#cb100-30" aria-hidden="true" tabindex="-1"></a>         <span class="at">ci_2000 =</span> contract_intensity_2000, book_leverage, </span>
<span id="cb100-31"><a href="#cb100-31" aria-hidden="true" tabindex="-1"></a>         at, dlc, dltt, ff_30ind_name) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,799 × 9
   conm       tic   dyear ci_2000 book_leverage     at   dlc  dltt ff_30ind_name
   &lt;chr&gt;      &lt;chr&gt; &lt;int&gt;   &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;        
 1 WORLDS INC WDDD   2000  0.254           1.06  1.96  0.66   1.42 Servs        
 2 WORLDS INC WDDD   2001  0.254         364.    0.006 2.18   0    Servs        
 3 WORLDS INC WDDD   2002  0.254         170.    0.013 2.22   0    Servs        
 4 WORLDS INC WDDD   2003  0.254        1116.    0.002 2.23   0    Servs        
 5 WORLDS INC WDDD   2004  0.254        1037     0.002 2.07   0    Servs        
 6 WORLDS INC WDDD   2005  0.254         613.    0.003 1.84   0    Servs        
 7 WORLDS INC WDDD   2006  0.254         920.    0.002 1.84   0    Servs        
 8 WORLDS INC WDDD   2007  0.254           2.24  0.346 0.774  0    Servs        
 9 B-FAST CO… BFTC   2000  0.0149          1.38 11.6   0.376 15.7  Other        
10 B-FAST CO… BFTC   2001  0.0149          1.53 11.3   0.935 16.4  Other        
# ℹ 1,789 more rows</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="do">## boxplot </span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>data_did_withind3 <span class="sc">%&gt;%</span> </span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind, ff_30ind_name, book_leverage_filter) <span class="sc">%&gt;%</span> </span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>  <span class="do">## keep only firms with all observations over the full period.</span></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># na.omit() %&gt;% </span></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_obs =</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(book_leverage_filter)), <span class="co"># number of non-NA observations for each firm </span></span>
<span id="cb102-10"><a href="#cb102-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_post =</span> <span class="fu">sum</span>(post_2005, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># number of obs after 2005</span></span>
<span id="cb102-11"><a href="#cb102-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb102-12"><a href="#cb102-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb102-13"><a href="#cb102-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n_obs <span class="sc">&lt;</span> <span class="dv">6</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb102-14"><a href="#cb102-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb102-15"><a href="#cb102-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear)</span>
<span id="cb102-16"><a href="#cb102-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb102-17"><a href="#cb102-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data =</span> ., <span class="fu">aes</span>(<span class="at">x =</span> dyear, <span class="at">y =</span> book_leverage)) <span class="sc">+</span></span>
<span id="cb102-18"><a href="#cb102-18" aria-hidden="true" tabindex="-1"></a>  <span class="do">## box plot</span></span>
<span id="cb102-19"><a href="#cb102-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">notch =</span> <span class="cn">FALSE</span>, <span class="at">outlier.shape =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb102-20"><a href="#cb102-20" aria-hidden="true" tabindex="-1"></a>  <span class="do">## add dot plot</span></span>
<span id="cb102-21"><a href="#cb102-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_dotplot</span>(<span class="at">binaxis =</span> <span class="st">"y"</span>,</span>
<span id="cb102-22"><a href="#cb102-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">binwidth =</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">50</span>,</span>
<span id="cb102-23"><a href="#cb102-23" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="dv">0</span>, <span class="at">height =</span> <span class="fl">0.1</span>, <span class="at">seed =</span> <span class="dv">123</span>),</span>
<span id="cb102-24"><a href="#cb102-24" aria-hidden="true" tabindex="-1"></a>               <span class="at">stackdir =</span> <span class="st">"center"</span>,</span>
<span id="cb102-25"><a href="#cb102-25" aria-hidden="true" tabindex="-1"></a>               <span class="at">dotsize =</span> <span class="fl">0.3</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 6911 rows containing non-finite outside the scale range
(`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 6762 rows containing missing values or values outside the scale range
(`stat_bindot()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AFA_test_2005_files/figure-html/a6-testground-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="do">## violin </span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>data_did_withind3 <span class="sc">%&gt;%</span> </span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>  <span class="do">## keep only firms with all observations over the full period.</span></span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span></span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb105-9"><a href="#cb105-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_obs =</span> <span class="fu">n</span>(), <span class="co"># number of observations for each firm</span></span>
<span id="cb105-10"><a href="#cb105-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_post =</span> <span class="fu">sum</span>(post_2005, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># number of obs after 2005</span></span>
<span id="cb105-11"><a href="#cb105-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb105-12"><a href="#cb105-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb105-13"><a href="#cb105-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n_obs <span class="sc">&lt;</span> <span class="dv">6</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb105-14"><a href="#cb105-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb105-15"><a href="#cb105-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear)</span>
<span id="cb105-16"><a href="#cb105-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb105-17"><a href="#cb105-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data =</span> ., <span class="fu">aes</span>(<span class="at">x =</span> dyear, <span class="at">y =</span> book_leverage)) <span class="sc">+</span> </span>
<span id="cb105-18"><a href="#cb105-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 28 rows containing non-finite outside the scale range
(`stat_ydensity()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AFA_test_2005_files/figure-html/a6-testground-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="do">## density </span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>data_did_withind3 <span class="sc">%&gt;%</span> </span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>  <span class="do">## keep only firms with all observations over the full period.</span></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span></span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_obs =</span> <span class="fu">n</span>(), <span class="co"># number of observations for each firm</span></span>
<span id="cb107-10"><a href="#cb107-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_post =</span> <span class="fu">sum</span>(post_2005, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># number of obs after 2005</span></span>
<span id="cb107-11"><a href="#cb107-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb107-12"><a href="#cb107-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb107-13"><a href="#cb107-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n_obs <span class="sc">&lt;</span> <span class="dv">6</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb107-14"><a href="#cb107-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb107-15"><a href="#cb107-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">dyear =</span> <span class="fu">as.factor</span>(dyear)</span>
<span id="cb107-16"><a href="#cb107-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb107-17"><a href="#cb107-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">x =</span> book_leverage, <span class="at">color =</span> <span class="fu">factor</span>(dyear)) ) <span class="sc">+</span> </span>
<span id="cb107-18"><a href="#cb107-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span> </span>
<span id="cb107-19"><a href="#cb107-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Book Leverage"</span>, <span class="at">y =</span> <span class="st">"Density"</span>, <span class="at">title =</span> <span class="st">"Density Plot of Book Leverage by Year"</span>) <span class="sc">+</span></span>
<span id="cb107-20"><a href="#cb107-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb107-21"><a href="#cb107-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 28 rows containing non-finite outside the scale range
(`stat_density()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AFA_test_2005_files/figure-html/a6-testground-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"More tests: use `debt_ebitda` ratio as the dependent variable "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>More tests: use `debt_ebitda` ratio as the dependent variable </code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="do">## did analysis: </span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>data_did_withind <span class="sc">%&gt;%</span> </span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind, ff_30ind_name) <span class="sc">%&gt;%</span> </span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">book_leverage =</span> <span class="fu">ifelse</span>(<span class="at">test =</span> (book_leverage <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> book_leverage <span class="sc">&lt;=</span> <span class="dv">1</span>), <span class="at">yes =</span> book_leverage, <span class="at">no =</span> <span class="cn">NA</span>),</span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">debt_ebitda =</span> <span class="fu">ifelse</span>(<span class="at">test =</span> (debt_ebitda <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> debt_ebitda <span class="sc">&lt;=</span> <span class="dv">15</span>), <span class="at">yes =</span> debt_ebitda, <span class="at">no =</span> <span class="cn">NA</span> )</span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dyear <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> dyear <span class="sc">&lt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb111-9"><a href="#cb111-9" aria-hidden="true" tabindex="-1"></a>  <span class="do">## keep only firms with all observations over the full period.</span></span>
<span id="cb111-10"><a href="#cb111-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb111-11"><a href="#cb111-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey) <span class="sc">%&gt;%</span></span>
<span id="cb111-12"><a href="#cb111-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb111-13"><a href="#cb111-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_obs =</span> <span class="fu">n</span>(), <span class="co"># number of observations for each firm</span></span>
<span id="cb111-14"><a href="#cb111-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_post =</span> <span class="fu">sum</span>(post_2005, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># number of obs after 2005</span></span>
<span id="cb111-15"><a href="#cb111-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb111-16"><a href="#cb111-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb111-17"><a href="#cb111-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(n_obs == 6) %&gt;% </span></span>
<span id="cb111-18"><a href="#cb111-18" aria-hidden="true" tabindex="-1"></a>  <span class="do">## re-clean  </span></span>
<span id="cb111-19"><a href="#cb111-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb111-20"><a href="#cb111-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">gvkey =</span> <span class="fu">as.factor</span>(gvkey) </span>
<span id="cb111-21"><a href="#cb111-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb111-22"><a href="#cb111-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb111-23"><a href="#cb111-23" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">feols</span>(<span class="at">fml =</span> debt_ebitda <span class="sc">~</span> contract_intensity_2000<span class="sc">:</span>post_2005 <span class="sc">|</span> gvkey <span class="sc">+</span> dyear <span class="sc">+</span> ff_30ind<span class="sc">^</span>dyear, <span class="at">data =</span> ., <span class="at">cluster =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"ff_30ind_name"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb111-24"><a href="#cb111-24" aria-hidden="true" tabindex="-1"></a>  fixest<span class="sc">::</span><span class="fu">etable</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                    .
Dependent Var.:                           debt_ebitda
                                                     
contract_intensity_2000 x post_2005   0.0086 (0.0794)
Fixed-Effects:                        ---------------
gvkey                                             Yes
dyear                                             Yes
ff_30ind-dyear                                    Yes
___________________________________   _______________
S.E.: Clustered                     by: gvkey &amp; ff_3.
Observations                                   16,865
R2                                            0.74609
Within R2                                      1.3e-6
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>There seems to be a shift.</p>
<div id="imp-industry-analysis" class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important&nbsp;2
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use <strong>TNIC</strong> or other <strong>word classification techniques</strong> to identify firms more likely to have a lot of non-residential lease contracts.</p>
</div>
</div>
<hr>
</section>
</section>
<section id="endnotes" class="level3">
<h3 class="anchored" data-anchor-id="endnotes">EndNotes</h3>
<!-- -->

</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb113" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Non-financial Liabilities and Restructuring" </span></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co">  "Empirical support from 2005 Reform" </span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Hongyi Xu"</span></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "January 10, 2025"</span></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a><span class="an">date-modified:</span><span class="co"> last-modified</span></span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a><span class="co">    theme: flatly</span></span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true </span></span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-depth: 3  # Add this line to include 3 levels of TOC</span></span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb113-13"><a href="#cb113-13" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb113-14"><a href="#cb113-14" aria-hidden="true" tabindex="-1"></a><span class="co">    code-summary: "Show the code"</span></span>
<span id="cb113-15"><a href="#cb113-15" aria-hidden="true" tabindex="-1"></a><span class="co">    html-math-method: katex</span></span>
<span id="cb113-16"><a href="#cb113-16" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-location: left </span></span>
<span id="cb113-17"><a href="#cb113-17" aria-hidden="true" tabindex="-1"></a><span class="co">    code-block-bg: true</span></span>
<span id="cb113-18"><a href="#cb113-18" aria-hidden="true" tabindex="-1"></a><span class="co">    code-block-border-left: "#31BAE9" </span></span>
<span id="cb113-19"><a href="#cb113-19" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span><span class="co"> </span></span>
<span id="cb113-20"><a href="#cb113-20" aria-hidden="true" tabindex="-1"></a><span class="co">  output: true</span></span>
<span id="cb113-21"><a href="#cb113-21" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb113-22"><a href="#cb113-22" aria-hidden="true" tabindex="-1"></a><span class="an">editor_options:</span><span class="co"> </span></span>
<span id="cb113-23"><a href="#cb113-23" aria-hidden="true" tabindex="-1"></a><span class="co">  chunk_output_type: console</span></span>
<span id="cb113-24"><a href="#cb113-24" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb113-25"><a href="#cb113-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-26"><a href="#cb113-26" aria-hidden="true" tabindex="-1"></a><span class="in">```{=html}</span></span>
<span id="cb113-27"><a href="#cb113-27" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;style type="text/css"&gt;</span></span>
<span id="cb113-28"><a href="#cb113-28" aria-hidden="true" tabindex="-1"></a><span class="in">body, td {</span></span>
<span id="cb113-29"><a href="#cb113-29" aria-hidden="true" tabindex="-1"></a><span class="in">   font-size: 16px;</span></span>
<span id="cb113-30"><a href="#cb113-30" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb113-31"><a href="#cb113-31" aria-hidden="true" tabindex="-1"></a><span class="in">code.r{</span></span>
<span id="cb113-32"><a href="#cb113-32" aria-hidden="true" tabindex="-1"></a><span class="in">  font-size: 12px;</span></span>
<span id="cb113-33"><a href="#cb113-33" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb113-34"><a href="#cb113-34" aria-hidden="true" tabindex="-1"></a><span class="in">pre { /* For appearance of output blocks */</span></span>
<span id="cb113-35"><a href="#cb113-35" aria-hidden="true" tabindex="-1"></a><span class="in">  font-size: 12px;</span></span>
<span id="cb113-36"><a href="#cb113-36" aria-hidden="true" tabindex="-1"></a><span class="in">  background-color: #f0f0f0; /* Light grey background */</span></span>
<span id="cb113-37"><a href="#cb113-37" aria-hidden="true" tabindex="-1"></a><span class="in">  padding: 5px;</span></span>
<span id="cb113-38"><a href="#cb113-38" aria-hidden="true" tabindex="-1"></a><span class="in">  &lt;!-- border-radius: 5px; /* border corner */ --&gt;</span></span>
<span id="cb113-39"><a href="#cb113-39" aria-hidden="true" tabindex="-1"></a><span class="in">} </span></span>
<span id="cb113-40"><a href="#cb113-40" aria-hidden="true" tabindex="-1"></a><span class="in">.gt_table .gt_caption {</span></span>
<span id="cb113-41"><a href="#cb113-41" aria-hidden="true" tabindex="-1"></a><span class="in">    font-size: 16px; </span></span>
<span id="cb113-42"><a href="#cb113-42" aria-hidden="true" tabindex="-1"></a><span class="in">    display: flex;</span></span>
<span id="cb113-43"><a href="#cb113-43" aria-hidden="true" tabindex="-1"></a><span class="in">    justify-content: space-between;</span></span>
<span id="cb113-44"><a href="#cb113-44" aria-hidden="true" tabindex="-1"></a><span class="in">    align-items: center;</span></span>
<span id="cb113-45"><a href="#cb113-45" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb113-46"><a href="#cb113-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-47"><a href="#cb113-47" aria-hidden="true" tabindex="-1"></a><span class="in">/* Middle column: Main content */</span></span>
<span id="cb113-48"><a href="#cb113-48" aria-hidden="true" tabindex="-1"></a><span class="in">.content-column {</span></span>
<span id="cb113-49"><a href="#cb113-49" aria-hidden="true" tabindex="-1"></a><span class="in">  flex: 1; /* Takes remaining space */</span></span>
<span id="cb113-50"><a href="#cb113-50" aria-hidden="true" tabindex="-1"></a><span class="in">  margin-right: 20px; /* Spacing between columns */</span></span>
<span id="cb113-51"><a href="#cb113-51" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb113-52"><a href="#cb113-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-53"><a href="#cb113-53" aria-hidden="true" tabindex="-1"></a><span class="in">/* Right column: Outputs */</span></span>
<span id="cb113-54"><a href="#cb113-54" aria-hidden="true" tabindex="-1"></a><span class="in">.output-column {</span></span>
<span id="cb113-55"><a href="#cb113-55" aria-hidden="true" tabindex="-1"></a><span class="in">  flex: 0 0 45%; /* Fixed width for outputs */</span></span>
<span id="cb113-56"><a href="#cb113-56" aria-hidden="true" tabindex="-1"></a><span class="in">  position: sticky;</span></span>
<span id="cb113-57"><a href="#cb113-57" aria-hidden="true" tabindex="-1"></a><span class="in">  top: 0;</span></span>
<span id="cb113-58"><a href="#cb113-58" aria-hidden="true" tabindex="-1"></a><span class="in">  height: 100vh; /* Full height */</span></span>
<span id="cb113-59"><a href="#cb113-59" aria-hidden="true" tabindex="-1"></a><span class="in">  overflow-y: auto; /* Scrollable if content is long */</span></span>
<span id="cb113-60"><a href="#cb113-60" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb113-61"><a href="#cb113-61" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/style&gt;</span></span>
<span id="cb113-62"><a href="#cb113-62" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-63"><a href="#cb113-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-64"><a href="#cb113-64" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb113-65"><a href="#cb113-65" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::opts_chunk$set(echo = TRUE)</span></span>
<span id="cb113-66"><a href="#cb113-66" aria-hidden="true" tabindex="-1"></a><span class="in">rm(list = ls())</span></span>
<span id="cb113-67"><a href="#cb113-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-68"><a href="#cb113-68" aria-hidden="true" tabindex="-1"></a><span class="in">library(haven) </span></span>
<span id="cb113-69"><a href="#cb113-69" aria-hidden="true" tabindex="-1"></a><span class="in">library(tidyverse) </span></span>
<span id="cb113-70"><a href="#cb113-70" aria-hidden="true" tabindex="-1"></a><span class="in">library(ggplot2) </span></span>
<span id="cb113-71"><a href="#cb113-71" aria-hidden="true" tabindex="-1"></a><span class="in">library(scales) </span></span>
<span id="cb113-72"><a href="#cb113-72" aria-hidden="true" tabindex="-1"></a><span class="in">library(gt)</span></span>
<span id="cb113-73"><a href="#cb113-73" aria-hidden="true" tabindex="-1"></a><span class="in">library(fixest)</span></span>
<span id="cb113-74"><a href="#cb113-74" aria-hidden="true" tabindex="-1"></a><span class="in">library(patchwork)</span></span>
<span id="cb113-75"><a href="#cb113-75" aria-hidden="true" tabindex="-1"></a><span class="in"># library(DiagrammeR)</span></span>
<span id="cb113-76"><a href="#cb113-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-77"><a href="#cb113-77" aria-hidden="true" tabindex="-1"></a><span class="in">setwd("C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response")</span></span>
<span id="cb113-78"><a href="#cb113-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-79"><a href="#cb113-79" aria-hidden="true" tabindex="-1"></a><span class="in">## &gt; Windows: C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024</span></span>
<span id="cb113-80"><a href="#cb113-80" aria-hidden="true" tabindex="-1"></a><span class="in">## &gt; Mac: ~/Library/CloudStorage/OneDrive-HandelshögskolaniStockholm/Projects_2024</span></span>
<span id="cb113-81"><a href="#cb113-81" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-82"><a href="#cb113-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-83"><a href="#cb113-83" aria-hidden="true" tabindex="-1"></a>::: callout-important</span>
<span id="cb113-84"><a href="#cb113-84" aria-hidden="true" tabindex="-1"></a><span class="fu">#### This analysis is suggested by discussant Samuel Antill in 2025 AFA meeting.</span></span>
<span id="cb113-85"><a href="#cb113-85" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb113-86"><a href="#cb113-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-87"><a href="#cb113-87" aria-hidden="true" tabindex="-1"></a><span class="fu">## S1. Download and Load the Raw Dataset {#sec-s1-raw-dataset}</span></span>
<span id="cb113-88"><a href="#cb113-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-89"><a href="#cb113-89" aria-hidden="true" tabindex="-1"></a>We download the firm-level capital structure = from Compustat-CapitalIQ North America. The first measure of executory contracts is accounting data which (under U.S. GAAP) cover leases and rental contracts. We use the variables “Debt Equivalent of Operating Leases”, “Capital Leases” and “Net Rental Expenses”.</span>
<span id="cb113-90"><a href="#cb113-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-91"><a href="#cb113-91" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`Debt - Capitalized Lease Obligations (dclo)`</span>: This item represents long-term obligations due in respect of lease finances and hire purchase arrangements. This item includes:</span>
<span id="cb113-92"><a href="#cb113-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-93"><a href="#cb113-93" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Long-term finance lease obligations</span>
<span id="cb113-94"><a href="#cb113-94" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Long-term lease financing</span>
<span id="cb113-95"><a href="#cb113-95" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Long-term hire purchase obligations</span>
<span id="cb113-96"><a href="#cb113-96" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Non-current obligations under capital leases</span>
<span id="cb113-97"><a href="#cb113-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-98"><a href="#cb113-98" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`Rental Expense (xrent)`</span>: This item represents all costs charged to operations for rental, lease, or hire of space and/or equipment. This item includes:</span>
<span id="cb113-99"><a href="#cb113-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-100"><a href="#cb113-100" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Airlines' landing fees</span>
<span id="cb113-101"><a href="#cb113-101" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Contingent rentals associated with capitalized leases</span>
<span id="cb113-102"><a href="#cb113-102" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Lease charges and plant hire</span>
<span id="cb113-103"><a href="#cb113-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-104"><a href="#cb113-104" aria-hidden="true" tabindex="-1"></a>    This <span class="in">`xrent`</span> variable is used in @sec-a1-different-measures-of-net-rental-expenses. In the main test, we construct a new variable called <span class="in">`total rent`</span>, which is defined as the total rental commitment <span class="in">`mrc1 + mrc2 + mrc3 + mrc4 + mrc5 + mrct`</span> reported in year $t$.</span>
<span id="cb113-105"><a href="#cb113-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-106"><a href="#cb113-106" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`Asset - Total (at)`</span>: Book value of total assets.</span>
<span id="cb113-107"><a href="#cb113-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-108"><a href="#cb113-108" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`Debt in Current Liabilities - Total (dlc)`</span> is for the short-term debt and <span class="in">`Long-term debt - Total (dltt)`</span> is for the long-term debt.</span>
<span id="cb113-109"><a href="#cb113-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-110"><a href="#cb113-110" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`Earnings Before Interest (EBITDA)`</span>: EBITDA.</span>
<span id="cb113-111"><a href="#cb113-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-112"><a href="#cb113-112" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Industry classifications: <span class="in">`naics`</span>, <span class="in">`sic`</span> and <span class="in">`spcindcd`</span> + (Fama-French 30 Industry Classifiers, &lt;mark&gt;<span class="co">[</span><span class="ot">To Be Added</span><span class="co">](https://github.com/Wenzhi-Ding/FamaFrenchIndustry)</span> / <span class="co">[</span><span class="ot">Definition</span><span class="co">](https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/Data_Library/det_30_ind_port.html)</span>&lt;/mark&gt;).</span>
<span id="cb113-113"><a href="#cb113-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-114"><a href="#cb113-114" aria-hidden="true" tabindex="-1"></a>We download all annual observations with <span class="in">`Data Date (datadate)`</span> between Jan 2000 and Dec 2007 and &lt;mark&gt;restrict to firms either incorporated or having headquarters in US&lt;/mark&gt; (i.e. <span class="in">`fic == "USA" | loc == "USA"`</span>). Given that the policy shock happens under the US jurisdiction, we expect more significant treatment effect to be detected in this sample. The period used in Samuel's slides is between 2002 and 2007, which is after the doc.com bubble and after the GFC. The variables in the dataset are: </span>
<span id="cb113-115"><a href="#cb113-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-116"><a href="#cb113-116" aria-hidden="true" tabindex="-1"></a><span class="in">```{r s1-load-data, echo=TRUE, results='hold'}</span></span>
<span id="cb113-117"><a href="#cb113-117" aria-hidden="true" tabindex="-1"></a><span class="in">## load the compustat_na data </span></span>
<span id="cb113-118"><a href="#cb113-118" aria-hidden="true" tabindex="-1"></a><span class="in"># compustat_na &lt;- as_tibble(read.csv(file = "C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/g4f68dkn3beu1iag.csv") )</span></span>
<span id="cb113-119"><a href="#cb113-119" aria-hidden="true" tabindex="-1"></a><span class="in">compustat_na &lt;- as_tibble(read.csv(file = "C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/azsyeo1yjmrb2q1v.csv") ) %&gt;%</span></span>
<span id="cb113-120"><a href="#cb113-120" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(fic == "USA" | loc == "USA" ) ## keep only US related observations (| fic == "CAN" | loc == "CAN")</span></span>
<span id="cb113-121"><a href="#cb113-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-122"><a href="#cb113-122" aria-hidden="true" tabindex="-1"></a><span class="in">## data file record: </span></span>
<span id="cb113-123"><a href="#cb113-123" aria-hidden="true" tabindex="-1"></a><span class="in"># | Feb 24, 2025 &gt; azsyeo1yjmrb2q1v.csv </span></span>
<span id="cb113-124"><a href="#cb113-124" aria-hidden="true" tabindex="-1"></a><span class="in"># | Jan 14, 2025 &gt; g4f68dkn3beu1iag.csv </span></span>
<span id="cb113-125"><a href="#cb113-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-126"><a href="#cb113-126" aria-hidden="true" tabindex="-1"></a><span class="in">## check the variable names </span></span>
<span id="cb113-127"><a href="#cb113-127" aria-hidden="true" tabindex="-1"></a><span class="in">cat("Variables include:\n\n")</span></span>
<span id="cb113-128"><a href="#cb113-128" aria-hidden="true" tabindex="-1"></a><span class="in">sort(names(compustat_na))</span></span>
<span id="cb113-129"><a href="#cb113-129" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-130"><a href="#cb113-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-131"><a href="#cb113-131" aria-hidden="true" tabindex="-1"></a><span class="fu">## S2. Data Cleaning and Prep {#sec-s2-clean-prep}</span></span>
<span id="cb113-132"><a href="#cb113-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-133"><a href="#cb113-133" aria-hidden="true" tabindex="-1"></a>Two dependent variables are constructed to measure firm's leverage: (&lt;u&gt;cf. p18 and Table 2 of the paper&lt;/u&gt;)</span>
<span id="cb113-134"><a href="#cb113-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-135"><a href="#cb113-135" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`Book leverage`</span>: we define leverage as the ratio of the sum of short-term debt and long-term debt to assets (we drop observations where this is outside the <span class="sc">\[</span>0,1<span class="sc">\]</span> range)<span class="sc">\*</span>.</span>
<span id="cb113-136"><a href="#cb113-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-137"><a href="#cb113-137" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`Debt/EBITDA`</span>: we define debt-to-EBITDA as the ratio of the long- and short-term debt to EBITDA (we drop observations where this is outside the <span class="sc">\[</span>0,15<span class="sc">\]</span> range)<span class="sc">\*</span>.</span>
<span id="cb113-138"><a href="#cb113-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-139"><a href="#cb113-139" aria-hidden="true" tabindex="-1"></a><span class="sc">\*</span>&lt;mark&gt;These restrictions are imposed only in analyses in @sec-a2-results-using-data-filters-in-the-main-paper.&lt;mark&gt;</span>
<span id="cb113-140"><a href="#cb113-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-141"><a href="#cb113-141" aria-hidden="true" tabindex="-1"></a>::: {#nte-rent-var .callout-note .column-margin}</span>
<span id="cb113-142"><a href="#cb113-142" aria-hidden="true" tabindex="-1"></a>What should be the best way to construct this &lt;mark&gt;PV of Rent / Net Rental Expenses&lt;/mark&gt; variable in this test?</span>
<span id="cb113-143"><a href="#cb113-143" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb113-144"><a href="#cb113-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-145"><a href="#cb113-145" aria-hidden="true" tabindex="-1"></a><span class="in">```{r s2-clean-prep, echo=TRUE, results='hold'}</span></span>
<span id="cb113-146"><a href="#cb113-146" aria-hidden="true" tabindex="-1"></a><span class="in">## set the base year </span></span>
<span id="cb113-147"><a href="#cb113-147" aria-hidden="true" tabindex="-1"></a><span class="in">base_year &lt;- 2005 </span></span>
<span id="cb113-148"><a href="#cb113-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-149"><a href="#cb113-149" aria-hidden="true" tabindex="-1"></a><span class="in">## create leverage variables </span></span>
<span id="cb113-150"><a href="#cb113-150" aria-hidden="true" tabindex="-1"></a><span class="in">data &lt;- compustat_na %&gt;% </span></span>
<span id="cb113-151"><a href="#cb113-151" aria-hidden="true" tabindex="-1"></a><span class="in">  # filter(at &gt; 0) %&gt;% </span></span>
<span id="cb113-152"><a href="#cb113-152" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(indfmt == "INDL") %&gt;% ## remove all financial firms</span></span>
<span id="cb113-153"><a href="#cb113-153" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-154"><a href="#cb113-154" aria-hidden="true" tabindex="-1"></a><span class="in">    ## leverage variables: </span></span>
<span id="cb113-155"><a href="#cb113-155" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = (dlc + dltt) / at, </span></span>
<span id="cb113-156"><a href="#cb113-156" aria-hidden="true" tabindex="-1"></a><span class="in">    debt_ebitda = (dlc + dltt) / ebitda, </span></span>
<span id="cb113-157"><a href="#cb113-157" aria-hidden="true" tabindex="-1"></a><span class="in">    ## treatment intensity: </span></span>
<span id="cb113-158"><a href="#cb113-158" aria-hidden="true" tabindex="-1"></a><span class="in">    totalrent = mrc1 + mrc2 + mrc3 + mrc4 + mrc5 + mrct, # total rent w/o discount</span></span>
<span id="cb113-159"><a href="#cb113-159" aria-hidden="true" tabindex="-1"></a><span class="in">    # contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb113-160"><a href="#cb113-160" aria-hidden="true" tabindex="-1"></a><span class="in">    contract_intensity = (dclo + totalrent) / at, # executory contract intensity</span></span>
<span id="cb113-161"><a href="#cb113-161" aria-hidden="true" tabindex="-1"></a><span class="in">    # contract_intensity = (totalrent) / at, # executory contract intensity</span></span>
<span id="cb113-162"><a href="#cb113-162" aria-hidden="true" tabindex="-1"></a><span class="in">    ## other variables: </span></span>
<span id="cb113-163"><a href="#cb113-163" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.integer(substr(datadate, start = 1, stop = 4)) # data year </span></span>
<span id="cb113-164"><a href="#cb113-164" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-165"><a href="#cb113-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-166"><a href="#cb113-166" aria-hidden="true" tabindex="-1"></a><span class="in">## record the variable names </span></span>
<span id="cb113-167"><a href="#cb113-167" aria-hidden="true" tabindex="-1"></a><span class="in">cat("Variables include:\n\n")</span></span>
<span id="cb113-168"><a href="#cb113-168" aria-hidden="true" tabindex="-1"></a><span class="in">sort(names(data)) </span></span>
<span id="cb113-169"><a href="#cb113-169" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-170"><a href="#cb113-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-171"><a href="#cb113-171" aria-hidden="true" tabindex="-1"></a>The main independent variable in the test is executory contract intensity, which is named as <span class="in">`contract_intensity`</span> in our dataset. We follow Samuel's definition w/o purchase contracts information for firm $i$ at year $t$:</span>
<span id="cb113-172"><a href="#cb113-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-173"><a href="#cb113-173" aria-hidden="true" tabindex="-1"></a>\begin{equation}</span>
<span id="cb113-174"><a href="#cb113-174" aria-hidden="true" tabindex="-1"></a>\begin{split}</span>
<span id="cb113-175"><a href="#cb113-175" aria-hidden="true" tabindex="-1"></a>&amp; \text{Executory Contract Intensity}_{i,t} = \frac{\text{Capitalized Leases}_{i,t} + \text{PV of Rent}_{i,t} }{\text{Book Asset}_{i,t}} <span class="sc">\\</span> </span>
<span id="cb113-176"><a href="#cb113-176" aria-hidden="true" tabindex="-1"></a>&amp; \Rightarrow \text{contract<span class="sc">\_</span>intensity}_{i,t} = \begin{cases}</span>
<span id="cb113-177"><a href="#cb113-177" aria-hidden="true" tabindex="-1"></a>\frac{\text{dclo}_{i,t} + \text{xrent}_{i,t} \times 3 }{\text{at}_{i,t}} <span class="sc">\\</span> </span>
<span id="cb113-178"><a href="#cb113-178" aria-hidden="true" tabindex="-1"></a>\frac{\text{dclo}_{i,t} + \text{totalrent}_{i,t} }{\text{at}_{i,t}}<span class="sc">\\</span> </span>
<span id="cb113-179"><a href="#cb113-179" aria-hidden="true" tabindex="-1"></a>\end{cases}, <span class="sc">\\</span></span>
<span id="cb113-180"><a href="#cb113-180" aria-hidden="true" tabindex="-1"></a>&amp; \quad \text{ with totalrent = mrc1 + mrc2 + mrc3 + mrc4 + mrc5 + mrct} <span class="sc">\\</span></span>
<span id="cb113-181"><a href="#cb113-181" aria-hidden="true" tabindex="-1"></a>\end{split}</span>
<span id="cb113-182"><a href="#cb113-182" aria-hidden="true" tabindex="-1"></a>\end{equation}</span>
<span id="cb113-183"><a href="#cb113-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-184"><a href="#cb113-184" aria-hidden="true" tabindex="-1"></a><span class="fu">## S3. Difference-in-Difference Examination {#sec-s3-difference-in-difference-examination}</span></span>
<span id="cb113-185"><a href="#cb113-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-186"><a href="#cb113-186" aria-hidden="true" tabindex="-1"></a>Then, we construct the dataset for the difference-in-difference analysis.</span>
<span id="cb113-187"><a href="#cb113-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-188"><a href="#cb113-188" aria-hidden="true" tabindex="-1"></a>In this section, we use all observations without missing values in subsequent analyses.</span>
<span id="cb113-189"><a href="#cb113-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-190"><a href="#cb113-190" aria-hidden="true" tabindex="-1"></a>The original dataset (<span class="in">`data`</span>) contains observations with data year (<span class="in">`dyear`</span>) range in <span class="in">`r paste("[", paste(range(data$dyear, na.rm = TRUE), collapse = ", "), "]", sep = "")`</span> and we restrict the sample to the data year in <span class="sc">\[</span>2002, 2007<span class="sc">\]</span>.</span>
<span id="cb113-191"><a href="#cb113-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-192"><a href="#cb113-192" aria-hidden="true" tabindex="-1"></a>For results with restrictions on specific variables, please refer to @sec-a2-results-using-data-filters-in-the-main-paper.</span>
<span id="cb113-193"><a href="#cb113-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-194"><a href="#cb113-194" aria-hidden="true" tabindex="-1"></a>::: {#nte-group-def .callout-note .column-margin}</span>
<span id="cb113-195"><a href="#cb113-195" aria-hidden="true" tabindex="-1"></a>Does altering the time (i.e. 2000 to 1995) for measuring the treatment intensity alter the results?</span>
<span id="cb113-196"><a href="#cb113-196" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb113-197"><a href="#cb113-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-198"><a href="#cb113-198" aria-hidden="true" tabindex="-1"></a><span class="fu">### s3.1. try-and-error with calender year `dyear` {#sec-s3a-try-and-error-with-calender-year-dyear}</span></span>
<span id="cb113-199"><a href="#cb113-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-200"><a href="#cb113-200" aria-hidden="true" tabindex="-1"></a>In this section, we first try to use the year information <span class="in">`dyear`</span> extracted from variable <span class="in">`datadate`</span> as the periods.</span>
<span id="cb113-201"><a href="#cb113-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-202"><a href="#cb113-202" aria-hidden="true" tabindex="-1"></a>On top of the base <span class="in">`data`</span>, we add several new variables in dataset <span class="in">`data_did`</span>:</span>
<span id="cb113-203"><a href="#cb113-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-204"><a href="#cb113-204" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`contract_intensity_2000`</span>: the contract intensity for each firm in year <span class="in">`dyear == 2000`</span>.</span>
<span id="cb113-205"><a href="#cb113-205" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`post_2005`</span>: an indicator equals to 1 if <span class="in">`dyear &gt; 2005`</span> and 0 otherwise.</span>
<span id="cb113-206"><a href="#cb113-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-207"><a href="#cb113-207" aria-hidden="true" tabindex="-1"></a><span class="in">```{r s3a-did-data, echo=TRUE, results='hold'}</span></span>
<span id="cb113-208"><a href="#cb113-208" aria-hidden="true" tabindex="-1"></a><span class="in">data_firm &lt;- data %&gt;% </span></span>
<span id="cb113-209"><a href="#cb113-209" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear == 2000) %&gt;% # use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb113-210"><a href="#cb113-210" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, contract_intensity_2000 = contract_intensity) %&gt;% </span></span>
<span id="cb113-211"><a href="#cb113-211" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;% </span></span>
<span id="cb113-212"><a href="#cb113-212" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(contract_intensity_2000 = mean(contract_intensity_2000, na.rm = TRUE) ) %&gt;% </span></span>
<span id="cb113-213"><a href="#cb113-213" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() </span></span>
<span id="cb113-214"><a href="#cb113-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-215"><a href="#cb113-215" aria-hidden="true" tabindex="-1"></a><span class="in">FF_30ind &lt;- as_tibble(read.csv(file = "C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"))</span></span>
<span id="cb113-216"><a href="#cb113-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-217"><a href="#cb113-217" aria-hidden="true" tabindex="-1"></a><span class="in">data_did &lt;- data %&gt;% </span></span>
<span id="cb113-218"><a href="#cb113-218" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable </span></span>
<span id="cb113-219"><a href="#cb113-219" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm, by = join_by(gvkey) ) %&gt;% </span></span>
<span id="cb113-220"><a href="#cb113-220" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classifiaction </span></span>
<span id="cb113-221"><a href="#cb113-221" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;% </span></span>
<span id="cb113-222"><a href="#cb113-222" aria-hidden="true" tabindex="-1"></a><span class="in">  ## exclude certain industries </span></span>
<span id="cb113-223"><a href="#cb113-223" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb113-224"><a href="#cb113-224" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 20, # exclude Utiltiy (number 20) </span></span>
<span id="cb113-225"><a href="#cb113-225" aria-hidden="true" tabindex="-1"></a><span class="in">    !(sic &gt;= 6000 &amp; sic &lt;= 6199) # exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb113-226"><a href="#cb113-226" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-227"><a href="#cb113-227" aria-hidden="true" tabindex="-1"></a><span class="in">  ## pre- &amp; post- </span></span>
<span id="cb113-228"><a href="#cb113-228" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-229"><a href="#cb113-229" aria-hidden="true" tabindex="-1"></a><span class="in">    indexyear = (dyear - base_year), # year index with 2005 as base 0.</span></span>
<span id="cb113-230"><a href="#cb113-230" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(dyear &gt; base_year, yes = 1, no = 0)  # whether it is after the 2005 reform </span></span>
<span id="cb113-231"><a href="#cb113-231" aria-hidden="true" tabindex="-1"></a><span class="in">  ) # %&gt;% </span></span>
<span id="cb113-232"><a href="#cb113-232" aria-hidden="true" tabindex="-1"></a><span class="in">  # drop values outside the range:</span></span>
<span id="cb113-233"><a href="#cb113-233" aria-hidden="true" tabindex="-1"></a><span class="in">  # mutate(</span></span>
<span id="cb113-234"><a href="#cb113-234" aria-hidden="true" tabindex="-1"></a><span class="in">  #   book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 1), yes = book_leverage, no = NA),</span></span>
<span id="cb113-235"><a href="#cb113-235" aria-hidden="true" tabindex="-1"></a><span class="in">  #   debt_ebitda = ifelse(test = (debt_ebitda &gt;= 0 &amp; debt_ebitda &lt;= 15), yes = debt_ebitda, no = NA )</span></span>
<span id="cb113-236"><a href="#cb113-236" aria-hidden="true" tabindex="-1"></a><span class="in">  # ) </span></span>
<span id="cb113-237"><a href="#cb113-237" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-238"><a href="#cb113-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-239"><a href="#cb113-239" aria-hidden="true" tabindex="-1"></a>DiD Analysis:</span>
<span id="cb113-240"><a href="#cb113-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-241"><a href="#cb113-241" aria-hidden="true" tabindex="-1"></a>::: {#nte-ipo-delist .callout-note .column-margin}</span>
<span id="cb113-242"><a href="#cb113-242" aria-hidden="true" tabindex="-1"></a>Q: Do we need to remove IPO and delisting firms?</span>
<span id="cb113-243"><a href="#cb113-243" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb113-244"><a href="#cb113-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-245"><a href="#cb113-245" aria-hidden="true" tabindex="-1"></a>::: {#imp-ipo-delist .callout-important .column-margin}</span>
<span id="cb113-246"><a href="#cb113-246" aria-hidden="true" tabindex="-1"></a><span class="fu">## More Fixed-effects</span></span>
<span id="cb113-247"><a href="#cb113-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-248"><a href="#cb113-248" aria-hidden="true" tabindex="-1"></a>Adding the industry-year fixed effects does not change the regression results.</span>
<span id="cb113-249"><a href="#cb113-249" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb113-250"><a href="#cb113-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-251"><a href="#cb113-251" aria-hidden="true" tabindex="-1"></a><span class="in">```{r s3-did-test, echo=TRUE, warning=FALSE, message=FALSE}</span></span>
<span id="cb113-252"><a href="#cb113-252" aria-hidden="true" tabindex="-1"></a><span class="in">data_did %&gt;% </span></span>
<span id="cb113-253"><a href="#cb113-253" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-254"><a href="#cb113-254" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-255"><a href="#cb113-255" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-256"><a href="#cb113-256" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-257"><a href="#cb113-257" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-258"><a href="#cb113-258" aria-hidden="true" tabindex="-1"></a><span class="in">    ind = as.factor(ff_30ind_name), # industry </span></span>
<span id="cb113-259"><a href="#cb113-259" aria-hidden="true" tabindex="-1"></a><span class="in">    ind_time = as.factor(paste(ff_30ind_name, dyear, sep = " + ")), </span></span>
<span id="cb113-260"><a href="#cb113-260" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-261"><a href="#cb113-261" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-262"><a href="#cb113-262" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-263"><a href="#cb113-263" aria-hidden="true" tabindex="-1"></a><span class="in">  ## adding industry*year FE does not change the results: + ind_time </span></span>
<span id="cb113-264"><a href="#cb113-264" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear, data = ., cluster = c("gvkey", "ff_30ind_name")) %&gt;% </span></span>
<span id="cb113-265"><a href="#cb113-265" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::etable()</span></span>
<span id="cb113-266"><a href="#cb113-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-267"><a href="#cb113-267" aria-hidden="true" tabindex="-1"></a><span class="in">data_did %&gt;% </span></span>
<span id="cb113-268"><a href="#cb113-268" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, indexyear, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-269"><a href="#cb113-269" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 1998 &amp; dyear &lt;= 2007) %&gt;%</span></span>
<span id="cb113-270"><a href="#cb113-270" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-271"><a href="#cb113-271" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey) #, </span></span>
<span id="cb113-272"><a href="#cb113-272" aria-hidden="true" tabindex="-1"></a><span class="in">    # dyear = as.factor(dyear), </span></span>
<span id="cb113-273"><a href="#cb113-273" aria-hidden="true" tabindex="-1"></a><span class="in">    # indexyear = relevel(factor(indexyear), ref = "0") </span></span>
<span id="cb113-274"><a href="#cb113-274" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-275"><a href="#cb113-275" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-276"><a href="#cb113-276" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ </span></span>
<span id="cb113-277"><a href="#cb113-277" aria-hidden="true" tabindex="-1"></a><span class="in">                  # i(dyear):contract_intensity_2000</span></span>
<span id="cb113-278"><a href="#cb113-278" aria-hidden="true" tabindex="-1"></a><span class="in">                  i(indexyear, contract_intensity_2000, ref = -1)</span></span>
<span id="cb113-279"><a href="#cb113-279" aria-hidden="true" tabindex="-1"></a><span class="in">                | gvkey + indexyear, data = ., cluster = c("gvkey", "ff_30ind_name")) %&gt;% </span></span>
<span id="cb113-280"><a href="#cb113-280" aria-hidden="true" tabindex="-1"></a><span class="in">  iplot(., </span></span>
<span id="cb113-281"><a href="#cb113-281" aria-hidden="true" tabindex="-1"></a><span class="in">        xlab = paste("Time to treatment (0 is Year ", base_year, ")", sep = ""),</span></span>
<span id="cb113-282"><a href="#cb113-282" aria-hidden="true" tabindex="-1"></a><span class="in">        main = "Treatment Effect (TWFE): calendar year", </span></span>
<span id="cb113-283"><a href="#cb113-283" aria-hidden="true" tabindex="-1"></a><span class="in">        ref.line = FALSE,</span></span>
<span id="cb113-284"><a href="#cb113-284" aria-hidden="true" tabindex="-1"></a><span class="in">        ref.line.par = list(col = "red", lty = 2),</span></span>
<span id="cb113-285"><a href="#cb113-285" aria-hidden="true" tabindex="-1"></a><span class="in">        pt.join = FALSE</span></span>
<span id="cb113-286"><a href="#cb113-286" aria-hidden="true" tabindex="-1"></a><span class="in">        ); axis(1, at = -7:2); abline(v = 0.5, col = "red", lty = 2, lwd = 3)</span></span>
<span id="cb113-287"><a href="#cb113-287" aria-hidden="true" tabindex="-1"></a><span class="in">  # fixest::coefplot(sub = "base year: dyear = 2004") </span></span>
<span id="cb113-288"><a href="#cb113-288" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-289"><a href="#cb113-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-290"><a href="#cb113-290" aria-hidden="true" tabindex="-1"></a><span class="fu">### s3.2. try-and-error with calender year `fyear` {#sec-s3b-try-and-error-with-calender-year-fyear}</span></span>
<span id="cb113-291"><a href="#cb113-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-292"><a href="#cb113-292" aria-hidden="true" tabindex="-1"></a>In this section, we first try to use the year information <span class="in">`fyear`</span> extracted from variable <span class="in">`datadate`</span> as the periods.</span>
<span id="cb113-293"><a href="#cb113-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-294"><a href="#cb113-294" aria-hidden="true" tabindex="-1"></a>On top of the base <span class="in">`data`</span>, we add several new variables in dataset <span class="in">`data_did`</span>:</span>
<span id="cb113-295"><a href="#cb113-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-296"><a href="#cb113-296" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`contract_intensity_2000`</span>: the contract intensity for each firm in year <span class="in">`fyear == 2000`</span>.</span>
<span id="cb113-297"><a href="#cb113-297" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`post_2005`</span>: an indicator equals to 1 if <span class="in">`fyear &gt; 2005`</span> and 0 otherwise.</span>
<span id="cb113-298"><a href="#cb113-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-299"><a href="#cb113-299" aria-hidden="true" tabindex="-1"></a><span class="in">```{r s3b-did-data, echo=TRUE, results='hold'}</span></span>
<span id="cb113-300"><a href="#cb113-300" aria-hidden="true" tabindex="-1"></a><span class="in">data_firm &lt;- data %&gt;% </span></span>
<span id="cb113-301"><a href="#cb113-301" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(fyear == 2000) %&gt;% # use `fyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb113-302"><a href="#cb113-302" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, contract_intensity_2000 = contract_intensity) </span></span>
<span id="cb113-303"><a href="#cb113-303" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb113-304"><a href="#cb113-304" aria-hidden="true" tabindex="-1"></a><span class="in">FF_30ind &lt;- as_tibble(read.csv(file = "C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"))</span></span>
<span id="cb113-305"><a href="#cb113-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-306"><a href="#cb113-306" aria-hidden="true" tabindex="-1"></a><span class="in">data_did &lt;- data %&gt;% </span></span>
<span id="cb113-307"><a href="#cb113-307" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable </span></span>
<span id="cb113-308"><a href="#cb113-308" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm, by = join_by(gvkey) ) %&gt;% </span></span>
<span id="cb113-309"><a href="#cb113-309" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classifiaction </span></span>
<span id="cb113-310"><a href="#cb113-310" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;% </span></span>
<span id="cb113-311"><a href="#cb113-311" aria-hidden="true" tabindex="-1"></a><span class="in">  ## exclude certain industries </span></span>
<span id="cb113-312"><a href="#cb113-312" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb113-313"><a href="#cb113-313" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 20, # exclude Utiltiy (number 20) </span></span>
<span id="cb113-314"><a href="#cb113-314" aria-hidden="true" tabindex="-1"></a><span class="in">    !(sic &gt;= 6000 &amp; sic &lt;= 6199) # exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb113-315"><a href="#cb113-315" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-316"><a href="#cb113-316" aria-hidden="true" tabindex="-1"></a><span class="in">  ## pre- &amp; post- </span></span>
<span id="cb113-317"><a href="#cb113-317" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-318"><a href="#cb113-318" aria-hidden="true" tabindex="-1"></a><span class="in">    indexyear = (fyear - base_year), # year index with 2005 as base 0.</span></span>
<span id="cb113-319"><a href="#cb113-319" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(fyear &gt; base_year, yes = 1, no = 0)  # whether it is after the 2005 reform </span></span>
<span id="cb113-320"><a href="#cb113-320" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-321"><a href="#cb113-321" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-322"><a href="#cb113-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-323"><a href="#cb113-323" aria-hidden="true" tabindex="-1"></a>DiD Analysis:</span>
<span id="cb113-324"><a href="#cb113-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-325"><a href="#cb113-325" aria-hidden="true" tabindex="-1"></a><span class="in">```{r s3b-did-test, echo=TRUE, warning=FALSE, message=FALSE}</span></span>
<span id="cb113-326"><a href="#cb113-326" aria-hidden="true" tabindex="-1"></a><span class="in">data_did %&gt;% </span></span>
<span id="cb113-327"><a href="#cb113-327" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, fyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-328"><a href="#cb113-328" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(fyear &gt;= 2002 &amp; fyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-329"><a href="#cb113-329" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-330"><a href="#cb113-330" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-331"><a href="#cb113-331" aria-hidden="true" tabindex="-1"></a><span class="in">    fyear = as.factor(fyear), </span></span>
<span id="cb113-332"><a href="#cb113-332" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-333"><a href="#cb113-333" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-334"><a href="#cb113-334" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-335"><a href="#cb113-335" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + fyear, data = ., cluster = c("gvkey", "ff_30ind_name")) %&gt;% </span></span>
<span id="cb113-336"><a href="#cb113-336" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::etable()</span></span>
<span id="cb113-337"><a href="#cb113-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-338"><a href="#cb113-338" aria-hidden="true" tabindex="-1"></a><span class="in">data_did %&gt;% </span></span>
<span id="cb113-339"><a href="#cb113-339" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, fyear, contract_intensity_2000, post_2005, indexyear, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-340"><a href="#cb113-340" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(fyear &gt;= 1998 &amp; fyear &lt;= 2007) %&gt;%</span></span>
<span id="cb113-341"><a href="#cb113-341" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-342"><a href="#cb113-342" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey)  </span></span>
<span id="cb113-343"><a href="#cb113-343" aria-hidden="true" tabindex="-1"></a><span class="in">    # fyear = as.factor(fyear), </span></span>
<span id="cb113-344"><a href="#cb113-344" aria-hidden="true" tabindex="-1"></a><span class="in">    # indexyear = relevel(factor(indexyear), ref = "0") </span></span>
<span id="cb113-345"><a href="#cb113-345" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-346"><a href="#cb113-346" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-347"><a href="#cb113-347" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ i(indexyear, contract_intensity_2000, -1) | gvkey + indexyear, data = ., cluster = c("gvkey", "ff_30ind_name")) %&gt;% </span></span>
<span id="cb113-348"><a href="#cb113-348" aria-hidden="true" tabindex="-1"></a><span class="in">  iplot(., </span></span>
<span id="cb113-349"><a href="#cb113-349" aria-hidden="true" tabindex="-1"></a><span class="in">        xlab = paste("Time to treatment (0 is Year ", base_year, ")", sep = ""),</span></span>
<span id="cb113-350"><a href="#cb113-350" aria-hidden="true" tabindex="-1"></a><span class="in">        main = "Treatment Effect (TWFE): fiscal year", </span></span>
<span id="cb113-351"><a href="#cb113-351" aria-hidden="true" tabindex="-1"></a><span class="in">        ref.line = FALSE,</span></span>
<span id="cb113-352"><a href="#cb113-352" aria-hidden="true" tabindex="-1"></a><span class="in">        ref.line.par = list(col = "red", lty = 2),</span></span>
<span id="cb113-353"><a href="#cb113-353" aria-hidden="true" tabindex="-1"></a><span class="in">        pt.join = FALSE</span></span>
<span id="cb113-354"><a href="#cb113-354" aria-hidden="true" tabindex="-1"></a><span class="in">        ); axis(1, at = -7:2); abline(v = 0.5, col = "red", lty = 2, lwd = 3)</span></span>
<span id="cb113-355"><a href="#cb113-355" aria-hidden="true" tabindex="-1"></a><span class="in">  # fixest::coefplot(sub = "base year: fyear = 2000") </span></span>
<span id="cb113-356"><a href="#cb113-356" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-357"><a href="#cb113-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-358"><a href="#cb113-358" aria-hidden="true" tabindex="-1"></a><span class="fu">## S4. [Deprecated] Industry Level DiD {#sec-s4-industry-level-did}</span></span>
<span id="cb113-359"><a href="#cb113-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-360"><a href="#cb113-360" aria-hidden="true" tabindex="-1"></a>We start by constructing industry-level information.</span>
<span id="cb113-361"><a href="#cb113-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-362"><a href="#cb113-362" aria-hidden="true" tabindex="-1"></a><span class="in">```{r s4-industry-data, echo=TRUE, message=FALSE, warning=FALSE}</span></span>
<span id="cb113-363"><a href="#cb113-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-364"><a href="#cb113-364" aria-hidden="true" tabindex="-1"></a><span class="in">data_firm &lt;- data %&gt;% </span></span>
<span id="cb113-365"><a href="#cb113-365" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear == 2000) %&gt;% # use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb113-366"><a href="#cb113-366" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, contract_intensity_2000 = contract_intensity) %&gt;%</span></span>
<span id="cb113-367"><a href="#cb113-367" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;%</span></span>
<span id="cb113-368"><a href="#cb113-368" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(contract_intensity_2000 = mean(contract_intensity_2000, na.rm = TRUE) ) %&gt;%</span></span>
<span id="cb113-369"><a href="#cb113-369" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup()</span></span>
<span id="cb113-370"><a href="#cb113-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-371"><a href="#cb113-371" aria-hidden="true" tabindex="-1"></a><span class="in">FF_30ind &lt;- as_tibble(read.csv(file = "C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"))</span></span>
<span id="cb113-372"><a href="#cb113-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-373"><a href="#cb113-373" aria-hidden="true" tabindex="-1"></a><span class="in">## industry level measures</span></span>
<span id="cb113-374"><a href="#cb113-374" aria-hidden="true" tabindex="-1"></a><span class="in">data_did_ind &lt;- data %&gt;%</span></span>
<span id="cb113-375"><a href="#cb113-375" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable</span></span>
<span id="cb113-376"><a href="#cb113-376" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm, by = join_by(gvkey) ) %&gt;%</span></span>
<span id="cb113-377"><a href="#cb113-377" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classifiaction</span></span>
<span id="cb113-378"><a href="#cb113-378" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;%</span></span>
<span id="cb113-379"><a href="#cb113-379" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity, book_leverage, debt_ebitda, sic, ff_30ind, ff_30ind_desc) %&gt;%</span></span>
<span id="cb113-380"><a href="#cb113-380" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(ff_30_ind_full = paste(ifelse(ff_30ind &lt; 10,</span></span>
<span id="cb113-381"><a href="#cb113-381" aria-hidden="true" tabindex="-1"></a><span class="in">                                       yes = paste(" ", ff_30ind, sep = ""),</span></span>
<span id="cb113-382"><a href="#cb113-382" aria-hidden="true" tabindex="-1"></a><span class="in">                                       no = as.character(ff_30ind)),</span></span>
<span id="cb113-383"><a href="#cb113-383" aria-hidden="true" tabindex="-1"></a><span class="in">                                ff_30ind_desc, sep = ": ") ) %&gt;%</span></span>
<span id="cb113-384"><a href="#cb113-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-385"><a href="#cb113-385" aria-hidden="true" tabindex="-1"></a><span class="in">  ## for each industry-year:</span></span>
<span id="cb113-386"><a href="#cb113-386" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(dyear, ff_30_ind_full, ff_30ind, ff_30ind_desc) %&gt;%</span></span>
<span id="cb113-387"><a href="#cb113-387" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(</span></span>
<span id="cb113-388"><a href="#cb113-388" aria-hidden="true" tabindex="-1"></a><span class="in">    contract_intensity_ind = median(contract_intensity, na.rm = TRUE),</span></span>
<span id="cb113-389"><a href="#cb113-389" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage_ind = median(book_leverage, na.rm = TRUE),</span></span>
<span id="cb113-390"><a href="#cb113-390" aria-hidden="true" tabindex="-1"></a><span class="in">    debt_ebitda_ind = median(debt_ebitda, na.rm = TRUE)</span></span>
<span id="cb113-391"><a href="#cb113-391" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-392"><a href="#cb113-392" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup()</span></span>
<span id="cb113-393"><a href="#cb113-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-394"><a href="#cb113-394" aria-hidden="true" tabindex="-1"></a><span class="in">data_did_ind %&gt;%</span></span>
<span id="cb113-395"><a href="#cb113-395" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear == 2000 &amp; ff_30ind != 20) %&gt;%</span></span>
<span id="cb113-396"><a href="#cb113-396" aria-hidden="true" tabindex="-1"></a><span class="in">  arrange(-contract_intensity_ind) %&gt;%</span></span>
<span id="cb113-397"><a href="#cb113-397" aria-hidden="true" tabindex="-1"></a><span class="in">  select(-dyear, -ff_30_ind_full,</span></span>
<span id="cb113-398"><a href="#cb113-398" aria-hidden="true" tabindex="-1"></a><span class="in">         `FF30 Code` = ff_30ind, # the industry code</span></span>
<span id="cb113-399"><a href="#cb113-399" aria-hidden="true" tabindex="-1"></a><span class="in">         `Fama-French 30 Industry` = ff_30ind_desc, # name of the</span></span>
<span id="cb113-400"><a href="#cb113-400" aria-hidden="true" tabindex="-1"></a><span class="in">         `Contract Intensity` = contract_intensity_ind,</span></span>
<span id="cb113-401"><a href="#cb113-401" aria-hidden="true" tabindex="-1"></a><span class="in">         `Book Leverage` = book_leverage_ind,</span></span>
<span id="cb113-402"><a href="#cb113-402" aria-hidden="true" tabindex="-1"></a><span class="in">         `Debt-to-EBITDA` = debt_ebitda_ind </span></span>
<span id="cb113-403"><a href="#cb113-403" aria-hidden="true" tabindex="-1"></a><span class="in">         ) %&gt;%</span></span>
<span id="cb113-404"><a href="#cb113-404" aria-hidden="true" tabindex="-1"></a><span class="in">  gt(</span></span>
<span id="cb113-405"><a href="#cb113-405" aria-hidden="true" tabindex="-1"></a><span class="in">    rowname_col = "FF30 Code"</span></span>
<span id="cb113-406"><a href="#cb113-406" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-407"><a href="#cb113-407" aria-hidden="true" tabindex="-1"></a><span class="in">  fmt_number(</span></span>
<span id="cb113-408"><a href="#cb113-408" aria-hidden="true" tabindex="-1"></a><span class="in">    columns = c(`Contract Intensity`, `Book Leverage`, `Debt-to-EBITDA`),</span></span>
<span id="cb113-409"><a href="#cb113-409" aria-hidden="true" tabindex="-1"></a><span class="in">    decimals = 3</span></span>
<span id="cb113-410"><a href="#cb113-410" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-411"><a href="#cb113-411" aria-hidden="true" tabindex="-1"></a><span class="in">  tab_header(</span></span>
<span id="cb113-412"><a href="#cb113-412" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "Table: Contract Intensity by Industry in 2000"</span></span>
<span id="cb113-413"><a href="#cb113-413" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-414"><a href="#cb113-414" aria-hidden="true" tabindex="-1"></a><span class="in">  tab_style(</span></span>
<span id="cb113-415"><a href="#cb113-415" aria-hidden="true" tabindex="-1"></a><span class="in">    style = cell_text(size = "small"),  # Reduce font size</span></span>
<span id="cb113-416"><a href="#cb113-416" aria-hidden="true" tabindex="-1"></a><span class="in">    locations = cells_column_labels(columns = everything()) # reduce the size of tab headers</span></span>
<span id="cb113-417"><a href="#cb113-417" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-418"><a href="#cb113-418" aria-hidden="true" tabindex="-1"></a><span class="in">  tab_style(</span></span>
<span id="cb113-419"><a href="#cb113-419" aria-hidden="true" tabindex="-1"></a><span class="in">    style = cell_text(size = "small"),  # Reduce font size</span></span>
<span id="cb113-420"><a href="#cb113-420" aria-hidden="true" tabindex="-1"></a><span class="in">    locations = cells_body()</span></span>
<span id="cb113-421"><a href="#cb113-421" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-422"><a href="#cb113-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-423"><a href="#cb113-423" aria-hidden="true" tabindex="-1"></a><span class="in">## Plot the top and bottom parts:</span></span>
<span id="cb113-424"><a href="#cb113-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-425"><a href="#cb113-425" aria-hidden="true" tabindex="-1"></a><span class="in"># data_did_ind %&gt;%</span></span>
<span id="cb113-426"><a href="#cb113-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-427"><a href="#cb113-427" aria-hidden="true" tabindex="-1"></a><span class="in">#   ggplot(aes(x = dyear, y = contract_intensity_ind, colour = ff_30_ind_full)) +</span></span>
<span id="cb113-428"><a href="#cb113-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-429"><a href="#cb113-429" aria-hidden="true" tabindex="-1"></a><span class="in">#   geom_line() +</span></span>
<span id="cb113-430"><a href="#cb113-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-431"><a href="#cb113-431" aria-hidden="true" tabindex="-1"></a><span class="in">#   geom_point(aes(shape = ff_30_ind_full)) +</span></span>
<span id="cb113-432"><a href="#cb113-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-433"><a href="#cb113-433" aria-hidden="true" tabindex="-1"></a><span class="in">#   scale_x_continuous(n.breaks = 10, name = NULL)</span></span>
<span id="cb113-434"><a href="#cb113-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-435"><a href="#cb113-435" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-436"><a href="#cb113-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-437"><a href="#cb113-437" aria-hidden="true" tabindex="-1"></a>Then, we perform DiD analysis using the industry-level contract intensity. The hypothesis in this test is that, after the option value of rejecting non-financial obligations decreases, the debt capacity of the firm also decreases. By replacing the contract intensity at the firm level by that at the industry level in 2000, we re-run the standard TWFE regression as in @sec-s3-difference-in-difference-examination.</span>
<span id="cb113-438"><a href="#cb113-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-439"><a href="#cb113-439" aria-hidden="true" tabindex="-1"></a>\begin{equation}</span>
<span id="cb113-440"><a href="#cb113-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-441"><a href="#cb113-441" aria-hidden="true" tabindex="-1"></a>\text{Book Leverage}_{i,j,t} = \theta_{i} + \gamma_t + \beta \text{Contract Intensity}^{2000}_j \times \text{Post}^{2005}_t + \varepsilon_{i,j,t}</span>
<span id="cb113-442"><a href="#cb113-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-443"><a href="#cb113-443" aria-hidden="true" tabindex="-1"></a>\end{equation}</span>
<span id="cb113-444"><a href="#cb113-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-445"><a href="#cb113-445" aria-hidden="true" tabindex="-1"></a><span class="in">```{r s4-industry-level-did, echo=TRUE, message=FALSE, warning=FALSE}</span></span>
<span id="cb113-446"><a href="#cb113-446" aria-hidden="true" tabindex="-1"></a><span class="in">fixest::etable(</span></span>
<span id="cb113-447"><a href="#cb113-447" aria-hidden="true" tabindex="-1"></a><span class="in">  ## industry level difference-in-difference analysis</span></span>
<span id="cb113-448"><a href="#cb113-448" aria-hidden="true" tabindex="-1"></a><span class="in">  ## firm-level dependent variable:</span></span>
<span id="cb113-449"><a href="#cb113-449" aria-hidden="true" tabindex="-1"></a><span class="in">  data %&gt;%</span></span>
<span id="cb113-450"><a href="#cb113-450" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable</span></span>
<span id="cb113-451"><a href="#cb113-451" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm, by = join_by(gvkey) ) %&gt;%</span></span>
<span id="cb113-452"><a href="#cb113-452" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classifiaction</span></span>
<span id="cb113-453"><a href="#cb113-453" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;%</span></span>
<span id="cb113-454"><a href="#cb113-454" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, book_leverage, debt_ebitda, sic, ff_30ind) %&gt;%</span></span>
<span id="cb113-455"><a href="#cb113-455" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = filter(data_did_ind, dyear == 2000) %&gt;%</span></span>
<span id="cb113-456"><a href="#cb113-456" aria-hidden="true" tabindex="-1"></a><span class="in">              `names&lt;-`(value = str_replace(string = names(.),</span></span>
<span id="cb113-457"><a href="#cb113-457" aria-hidden="true" tabindex="-1"></a><span class="in">                                            pattern = "_ind$",</span></span>
<span id="cb113-458"><a href="#cb113-458" aria-hidden="true" tabindex="-1"></a><span class="in">                                            replacement = "_ind2000")) %&gt;%</span></span>
<span id="cb113-459"><a href="#cb113-459" aria-hidden="true" tabindex="-1"></a><span class="in">              select(-dyear),</span></span>
<span id="cb113-460"><a href="#cb113-460" aria-hidden="true" tabindex="-1"></a><span class="in">            by = join_by(ff_30ind)</span></span>
<span id="cb113-461"><a href="#cb113-461" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-462"><a href="#cb113-462" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;%</span></span>
<span id="cb113-463"><a href="#cb113-463" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-464"><a href="#cb113-464" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(dyear &gt; base_year, yes = 1, no = 0), # whether it is after the 2005 reform</span></span>
<span id="cb113-465"><a href="#cb113-465" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey),</span></span>
<span id="cb113-466"><a href="#cb113-466" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear),</span></span>
<span id="cb113-467"><a href="#cb113-467" aria-hidden="true" tabindex="-1"></a><span class="in">    ind = as.factor(ff_30ind), # industry</span></span>
<span id="cb113-468"><a href="#cb113-468" aria-hidden="true" tabindex="-1"></a><span class="in">    ind_time = as.factor(paste(ff_30_ind_full, dyear, sep = " + "))</span></span>
<span id="cb113-469"><a href="#cb113-469" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-470"><a href="#cb113-470" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;%</span></span>
<span id="cb113-471"><a href="#cb113-471" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_ind2000:post_2005 | gvkey + dyear, data = ., cluster = c("gvkey", "ff_30ind")),</span></span>
<span id="cb113-472"><a href="#cb113-472" aria-hidden="true" tabindex="-1"></a><span class="in">  ## industry-level dependent variable</span></span>
<span id="cb113-473"><a href="#cb113-473" aria-hidden="true" tabindex="-1"></a><span class="in">  data_did_ind %&gt;%</span></span>
<span id="cb113-474"><a href="#cb113-474" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;%</span></span>
<span id="cb113-475"><a href="#cb113-475" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = filter(data_did_ind, dyear == 2000) %&gt;%</span></span>
<span id="cb113-476"><a href="#cb113-476" aria-hidden="true" tabindex="-1"></a><span class="in">              select(-ff_30_ind_full, -ff_30ind_desc) %&gt;%</span></span>
<span id="cb113-477"><a href="#cb113-477" aria-hidden="true" tabindex="-1"></a><span class="in">              `names&lt;-`(value = str_replace(string = names(.),</span></span>
<span id="cb113-478"><a href="#cb113-478" aria-hidden="true" tabindex="-1"></a><span class="in">                                            pattern = "_ind$",</span></span>
<span id="cb113-479"><a href="#cb113-479" aria-hidden="true" tabindex="-1"></a><span class="in">                                            replacement = "_ind2000")) %&gt;%</span></span>
<span id="cb113-480"><a href="#cb113-480" aria-hidden="true" tabindex="-1"></a><span class="in">              select(-dyear),</span></span>
<span id="cb113-481"><a href="#cb113-481" aria-hidden="true" tabindex="-1"></a><span class="in">            by = join_by(ff_30ind)</span></span>
<span id="cb113-482"><a href="#cb113-482" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-483"><a href="#cb113-483" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-484"><a href="#cb113-484" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(dyear &gt; base_year, yes = 1, no = 0), # whether it is after the 2005 reform</span></span>
<span id="cb113-485"><a href="#cb113-485" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind = as.factor(ff_30ind),</span></span>
<span id="cb113-486"><a href="#cb113-486" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear)</span></span>
<span id="cb113-487"><a href="#cb113-487" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-488"><a href="#cb113-488" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;%</span></span>
<span id="cb113-489"><a href="#cb113-489" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage_ind ~ contract_intensity_ind2000:post_2005 | ff_30ind + dyear, data = ., cluster = c("ff_30ind"))</span></span>
<span id="cb113-490"><a href="#cb113-490" aria-hidden="true" tabindex="-1"></a><span class="in">) %&gt;%</span></span>
<span id="cb113-491"><a href="#cb113-491" aria-hidden="true" tabindex="-1"></a><span class="in">  knitr::kable(format = "html", caption = "DiD Results with Industry-level Contract Intensity", col.names = c("", paste("(", 1:2, ")", sep = ""))) %&gt;%</span></span>
<span id="cb113-492"><a href="#cb113-492" aria-hidden="true" tabindex="-1"></a><span class="in">  kableExtra::kable_styling(</span></span>
<span id="cb113-493"><a href="#cb113-493" aria-hidden="true" tabindex="-1"></a><span class="in">    font_size = 8,       # Smaller font (default is 16px)</span></span>
<span id="cb113-494"><a href="#cb113-494" aria-hidden="true" tabindex="-1"></a><span class="in">    full_width = FALSE,   # Table width fits content</span></span>
<span id="cb113-495"><a href="#cb113-495" aria-hidden="true" tabindex="-1"></a><span class="in">    bootstrap_options = c("striped", "condensed")</span></span>
<span id="cb113-496"><a href="#cb113-496" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb113-497"><a href="#cb113-497" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-498"><a href="#cb113-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-499"><a href="#cb113-499" aria-hidden="true" tabindex="-1"></a>However, the results show that the industry level evidence is not significant to support the hypothesis. In the regressions using industry-level contact intensities in year 2000 for grouping, the dependent variable is firm level book leverage in regression (1) and industry level median book leverage in regression (2). The coefficient estimates of the interaction term are both positive, which is the opposite of our main regressions. This indicates that the industry-level intensity may not be a good measure for our firm level analysis in @sec-s3-difference-in-difference-examination.</span>
<span id="cb113-500"><a href="#cb113-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-501"><a href="#cb113-501" aria-hidden="true" tabindex="-1"></a>For more firm-level analysis for different industries, please refer to @sec-a5-industry-heterogeneity.</span>
<span id="cb113-502"><a href="#cb113-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-503"><a href="#cb113-503" aria-hidden="true" tabindex="-1"></a><span class="fu">## Appendix {#sec-appendix}</span></span>
<span id="cb113-504"><a href="#cb113-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-505"><a href="#cb113-505" aria-hidden="true" tabindex="-1"></a>Here are additional tests results with alternative specifications.</span>
<span id="cb113-506"><a href="#cb113-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-507"><a href="#cb113-507" aria-hidden="true" tabindex="-1"></a><span class="fu">### A1. Results using different measures of "Net Rental Expenses" {#sec-a1-different-measures-of-net-rental-expenses}</span></span>
<span id="cb113-508"><a href="#cb113-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-509"><a href="#cb113-509" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a1-clean-prep, echo=TRUE}</span></span>
<span id="cb113-510"><a href="#cb113-510" aria-hidden="true" tabindex="-1"></a><span class="in">## create leverage variables </span></span>
<span id="cb113-511"><a href="#cb113-511" aria-hidden="true" tabindex="-1"></a><span class="in">data &lt;- compustat_na %&gt;% </span></span>
<span id="cb113-512"><a href="#cb113-512" aria-hidden="true" tabindex="-1"></a><span class="in">  # filter(at &gt; 0) %&gt;% </span></span>
<span id="cb113-513"><a href="#cb113-513" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(indfmt == "INDL") %&gt;% ## remove all financial firms </span></span>
<span id="cb113-514"><a href="#cb113-514" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-515"><a href="#cb113-515" aria-hidden="true" tabindex="-1"></a><span class="in">    ## leverage variables: </span></span>
<span id="cb113-516"><a href="#cb113-516" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = (dlc + dltt) / at, </span></span>
<span id="cb113-517"><a href="#cb113-517" aria-hidden="true" tabindex="-1"></a><span class="in">    debt_ebitda = (dlc + dltt) / ebitda, </span></span>
<span id="cb113-518"><a href="#cb113-518" aria-hidden="true" tabindex="-1"></a><span class="in">    ## treatment intensity: </span></span>
<span id="cb113-519"><a href="#cb113-519" aria-hidden="true" tabindex="-1"></a><span class="in">    # totalrent = mrc1 + mrc2 + mrc3 + mrc4 + mrc5 + mrct, # total rent w/o discount</span></span>
<span id="cb113-520"><a href="#cb113-520" aria-hidden="true" tabindex="-1"></a><span class="in">    contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb113-521"><a href="#cb113-521" aria-hidden="true" tabindex="-1"></a><span class="in">    # contract_intensity = (dclo + totalrent) / at, # executory contract intensity</span></span>
<span id="cb113-522"><a href="#cb113-522" aria-hidden="true" tabindex="-1"></a><span class="in">    ## other variables: </span></span>
<span id="cb113-523"><a href="#cb113-523" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.integer(substr(datadate, start = 1, stop = 4)) # data year</span></span>
<span id="cb113-524"><a href="#cb113-524" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-525"><a href="#cb113-525" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-526"><a href="#cb113-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-527"><a href="#cb113-527" aria-hidden="true" tabindex="-1"></a>In this part of the analysis, I use the definition of "Net Rental Expenses" in our paper, namely <span class="in">`Debt in Current Liabilities (Total) + 3 * xrent`</span> and use this to construct a different measure of contract intensity.</span>
<span id="cb113-528"><a href="#cb113-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-529"><a href="#cb113-529" aria-hidden="true" tabindex="-1"></a><span class="fu">#### A1.1. try-and-error with calender year `dyear` {#sec-a1a-try-and-error-with-calender-year-dyear}</span></span>
<span id="cb113-530"><a href="#cb113-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-531"><a href="#cb113-531" aria-hidden="true" tabindex="-1"></a>In this section, we first try to use the year information <span class="in">`dyear`</span> extracted from variable <span class="in">`datadate`</span> as the periods.</span>
<span id="cb113-532"><a href="#cb113-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-533"><a href="#cb113-533" aria-hidden="true" tabindex="-1"></a>On top of the base <span class="in">`data`</span>, we add several new variables in dataset <span class="in">`data_did`</span>:</span>
<span id="cb113-534"><a href="#cb113-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-535"><a href="#cb113-535" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`contract_intensity_2000`</span>: the contract intensity for each firm in year <span class="in">`dyear == 2000`</span>.</span>
<span id="cb113-536"><a href="#cb113-536" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`post_2005`</span>: an indicator equals to 1 if <span class="in">`dyear &gt; 2005`</span> and 0 otherwise.</span>
<span id="cb113-537"><a href="#cb113-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-538"><a href="#cb113-538" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a1a-did-data, echo=TRUE, results='hold'}</span></span>
<span id="cb113-539"><a href="#cb113-539" aria-hidden="true" tabindex="-1"></a><span class="in">data_firm &lt;- data %&gt;% </span></span>
<span id="cb113-540"><a href="#cb113-540" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear == 2000) %&gt;% # use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb113-541"><a href="#cb113-541" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, contract_intensity_2000 = contract_intensity) %&gt;% </span></span>
<span id="cb113-542"><a href="#cb113-542" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;% </span></span>
<span id="cb113-543"><a href="#cb113-543" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(contract_intensity_2000 = mean(contract_intensity_2000, na.rm = TRUE) ) %&gt;% </span></span>
<span id="cb113-544"><a href="#cb113-544" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() </span></span>
<span id="cb113-545"><a href="#cb113-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-546"><a href="#cb113-546" aria-hidden="true" tabindex="-1"></a><span class="in">FF_30ind &lt;- as_tibble(read.csv(file = "C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"))</span></span>
<span id="cb113-547"><a href="#cb113-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-548"><a href="#cb113-548" aria-hidden="true" tabindex="-1"></a><span class="in">data_did &lt;- data %&gt;% </span></span>
<span id="cb113-549"><a href="#cb113-549" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable </span></span>
<span id="cb113-550"><a href="#cb113-550" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm, by = join_by(gvkey) ) %&gt;% </span></span>
<span id="cb113-551"><a href="#cb113-551" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classifiaction </span></span>
<span id="cb113-552"><a href="#cb113-552" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;% </span></span>
<span id="cb113-553"><a href="#cb113-553" aria-hidden="true" tabindex="-1"></a><span class="in">  ## exclude certain industries </span></span>
<span id="cb113-554"><a href="#cb113-554" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb113-555"><a href="#cb113-555" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 20, # exclude Utiltiy (number 20) </span></span>
<span id="cb113-556"><a href="#cb113-556" aria-hidden="true" tabindex="-1"></a><span class="in">    !(sic &gt;= 6000 &amp; sic &lt;= 6199) # exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb113-557"><a href="#cb113-557" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-558"><a href="#cb113-558" aria-hidden="true" tabindex="-1"></a><span class="in">  ## pre- &amp; post- </span></span>
<span id="cb113-559"><a href="#cb113-559" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-560"><a href="#cb113-560" aria-hidden="true" tabindex="-1"></a><span class="in">    indexyear = (dyear - base_year), # year index with 2005 as base 0.</span></span>
<span id="cb113-561"><a href="#cb113-561" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(dyear &gt; base_year, yes = 1, no = 0)  # whether it is after the 2005 reform </span></span>
<span id="cb113-562"><a href="#cb113-562" aria-hidden="true" tabindex="-1"></a><span class="in">  ) # %&gt;% </span></span>
<span id="cb113-563"><a href="#cb113-563" aria-hidden="true" tabindex="-1"></a><span class="in">  # drop values outside the range:</span></span>
<span id="cb113-564"><a href="#cb113-564" aria-hidden="true" tabindex="-1"></a><span class="in">  # mutate(</span></span>
<span id="cb113-565"><a href="#cb113-565" aria-hidden="true" tabindex="-1"></a><span class="in">  #   book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 1), yes = book_leverage, no = NA),</span></span>
<span id="cb113-566"><a href="#cb113-566" aria-hidden="true" tabindex="-1"></a><span class="in">  #   debt_ebitda = ifelse(test = (debt_ebitda &gt;= 0 &amp; debt_ebitda &lt;= 15), yes = debt_ebitda, no = NA )</span></span>
<span id="cb113-567"><a href="#cb113-567" aria-hidden="true" tabindex="-1"></a><span class="in">  # ) </span></span>
<span id="cb113-568"><a href="#cb113-568" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-569"><a href="#cb113-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-570"><a href="#cb113-570" aria-hidden="true" tabindex="-1"></a>DiD Analysis:</span>
<span id="cb113-571"><a href="#cb113-571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-572"><a href="#cb113-572" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a1a-did-test, echo=TRUE, warning=FALSE, message=FALSE}</span></span>
<span id="cb113-573"><a href="#cb113-573" aria-hidden="true" tabindex="-1"></a><span class="in">data_did %&gt;% </span></span>
<span id="cb113-574"><a href="#cb113-574" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-575"><a href="#cb113-575" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-576"><a href="#cb113-576" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-577"><a href="#cb113-577" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-578"><a href="#cb113-578" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-579"><a href="#cb113-579" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-580"><a href="#cb113-580" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-581"><a href="#cb113-581" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-582"><a href="#cb113-582" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear, data = ., cluster = c("gvkey", "ff_30ind_name")) %&gt;% </span></span>
<span id="cb113-583"><a href="#cb113-583" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::etable()</span></span>
<span id="cb113-584"><a href="#cb113-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-585"><a href="#cb113-585" aria-hidden="true" tabindex="-1"></a><span class="in">data_did %&gt;% </span></span>
<span id="cb113-586"><a href="#cb113-586" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, indexyear, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-587"><a href="#cb113-587" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2000 &amp; dyear &lt;= 2007) %&gt;%</span></span>
<span id="cb113-588"><a href="#cb113-588" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-589"><a href="#cb113-589" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey) </span></span>
<span id="cb113-590"><a href="#cb113-590" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-591"><a href="#cb113-591" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-592"><a href="#cb113-592" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ i(indexyear, contract_intensity_2000, -1) | gvkey + indexyear, data = ., cluster = c("gvkey", "ff_30ind_name")) %&gt;% </span></span>
<span id="cb113-593"><a href="#cb113-593" aria-hidden="true" tabindex="-1"></a><span class="in">  iplot(., </span></span>
<span id="cb113-594"><a href="#cb113-594" aria-hidden="true" tabindex="-1"></a><span class="in">        xlab = paste("Time to treatment (0 is Year ", base_year, ")", sep = ""),</span></span>
<span id="cb113-595"><a href="#cb113-595" aria-hidden="true" tabindex="-1"></a><span class="in">        main = "Treatment Effect (TWFE): calendar year", </span></span>
<span id="cb113-596"><a href="#cb113-596" aria-hidden="true" tabindex="-1"></a><span class="in">        ref.line = FALSE,</span></span>
<span id="cb113-597"><a href="#cb113-597" aria-hidden="true" tabindex="-1"></a><span class="in">        ref.line.par = list(col = "red", lty = 2),</span></span>
<span id="cb113-598"><a href="#cb113-598" aria-hidden="true" tabindex="-1"></a><span class="in">        pt.join = FALSE</span></span>
<span id="cb113-599"><a href="#cb113-599" aria-hidden="true" tabindex="-1"></a><span class="in">        ); axis(1, at = -7:2); abline(v = 0.5, col = "red", lty = 2, lwd = 3) </span></span>
<span id="cb113-600"><a href="#cb113-600" aria-hidden="true" tabindex="-1"></a><span class="in">  # fixest::coefplot()</span></span>
<span id="cb113-601"><a href="#cb113-601" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-602"><a href="#cb113-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-603"><a href="#cb113-603" aria-hidden="true" tabindex="-1"></a><span class="fu">#### A1.2. try-and-error with calender year `fyear` {#sec-a1b-try-and-error-with-calender-year-fyear}</span></span>
<span id="cb113-604"><a href="#cb113-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-605"><a href="#cb113-605" aria-hidden="true" tabindex="-1"></a>In this section, we first try to use the year information <span class="in">`fyear`</span> extracted from variable <span class="in">`datadate`</span> as the periods.</span>
<span id="cb113-606"><a href="#cb113-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-607"><a href="#cb113-607" aria-hidden="true" tabindex="-1"></a>On top of the base <span class="in">`data`</span>, we add several new variables in dataset <span class="in">`data_did`</span>:</span>
<span id="cb113-608"><a href="#cb113-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-609"><a href="#cb113-609" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`contract_intensity_2000`</span>: the contract intensity for each firm in year <span class="in">`fyear == 2000`</span>.</span>
<span id="cb113-610"><a href="#cb113-610" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`post_2005`</span>: an indicator equals to 1 if <span class="in">`fyear &gt; 2005`</span> and 0 otherwise.</span>
<span id="cb113-611"><a href="#cb113-611" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-612"><a href="#cb113-612" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a1b-did-data, echo=TRUE, results='hold'}</span></span>
<span id="cb113-613"><a href="#cb113-613" aria-hidden="true" tabindex="-1"></a><span class="in">data_firm &lt;- data %&gt;% </span></span>
<span id="cb113-614"><a href="#cb113-614" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(fyear == 2000) %&gt;% # use `fyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb113-615"><a href="#cb113-615" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, contract_intensity_2000 = contract_intensity) </span></span>
<span id="cb113-616"><a href="#cb113-616" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb113-617"><a href="#cb113-617" aria-hidden="true" tabindex="-1"></a><span class="in">FF_30ind &lt;- as_tibble(read.csv(file = "C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"))</span></span>
<span id="cb113-618"><a href="#cb113-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-619"><a href="#cb113-619" aria-hidden="true" tabindex="-1"></a><span class="in">data_did &lt;- data %&gt;% </span></span>
<span id="cb113-620"><a href="#cb113-620" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable </span></span>
<span id="cb113-621"><a href="#cb113-621" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm, by = join_by(gvkey) ) %&gt;% </span></span>
<span id="cb113-622"><a href="#cb113-622" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classifiaction </span></span>
<span id="cb113-623"><a href="#cb113-623" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;% </span></span>
<span id="cb113-624"><a href="#cb113-624" aria-hidden="true" tabindex="-1"></a><span class="in">  ## exclude certain industries </span></span>
<span id="cb113-625"><a href="#cb113-625" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb113-626"><a href="#cb113-626" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 20, # exclude Utiltiy (number 20) </span></span>
<span id="cb113-627"><a href="#cb113-627" aria-hidden="true" tabindex="-1"></a><span class="in">    !(sic &gt;= 6000 &amp; sic &lt;= 6199) # exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb113-628"><a href="#cb113-628" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-629"><a href="#cb113-629" aria-hidden="true" tabindex="-1"></a><span class="in">  ## pre- &amp; post- </span></span>
<span id="cb113-630"><a href="#cb113-630" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-631"><a href="#cb113-631" aria-hidden="true" tabindex="-1"></a><span class="in">    indexyear = (fyear - base_year), # year index with 2005 as base 0.</span></span>
<span id="cb113-632"><a href="#cb113-632" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(fyear &gt; base_year, yes = 1, no = 0)  # whether it is after the 2005 reform </span></span>
<span id="cb113-633"><a href="#cb113-633" aria-hidden="true" tabindex="-1"></a><span class="in">  ) # %&gt;% </span></span>
<span id="cb113-634"><a href="#cb113-634" aria-hidden="true" tabindex="-1"></a><span class="in">  # drop values outside the range:</span></span>
<span id="cb113-635"><a href="#cb113-635" aria-hidden="true" tabindex="-1"></a><span class="in">  # mutate(</span></span>
<span id="cb113-636"><a href="#cb113-636" aria-hidden="true" tabindex="-1"></a><span class="in">  #   book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 1), yes = book_leverage, no = NA),</span></span>
<span id="cb113-637"><a href="#cb113-637" aria-hidden="true" tabindex="-1"></a><span class="in">  #   debt_ebitda = ifelse(test = (debt_ebitda &gt;= 0 &amp; debt_ebitda &lt;= 15), yes = debt_ebitda, no = NA )</span></span>
<span id="cb113-638"><a href="#cb113-638" aria-hidden="true" tabindex="-1"></a><span class="in">  # ) </span></span>
<span id="cb113-639"><a href="#cb113-639" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-640"><a href="#cb113-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-641"><a href="#cb113-641" aria-hidden="true" tabindex="-1"></a>DiD Analysis:</span>
<span id="cb113-642"><a href="#cb113-642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-643"><a href="#cb113-643" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a1b-did-test, echo=TRUE, warning=FALSE, message=FALSE}</span></span>
<span id="cb113-644"><a href="#cb113-644" aria-hidden="true" tabindex="-1"></a><span class="in">data_did %&gt;% </span></span>
<span id="cb113-645"><a href="#cb113-645" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, fyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-646"><a href="#cb113-646" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(fyear &gt;= 2002 &amp; fyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-647"><a href="#cb113-647" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-648"><a href="#cb113-648" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-649"><a href="#cb113-649" aria-hidden="true" tabindex="-1"></a><span class="in">    fyear = as.factor(fyear), </span></span>
<span id="cb113-650"><a href="#cb113-650" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-651"><a href="#cb113-651" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-652"><a href="#cb113-652" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-653"><a href="#cb113-653" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + fyear, data = ., cluster = c("gvkey", "ff_30ind_name")) %&gt;% </span></span>
<span id="cb113-654"><a href="#cb113-654" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::etable()</span></span>
<span id="cb113-655"><a href="#cb113-655" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-656"><a href="#cb113-656" aria-hidden="true" tabindex="-1"></a><span class="in">data_did %&gt;% </span></span>
<span id="cb113-657"><a href="#cb113-657" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, fyear, contract_intensity_2000, post_2005, indexyear, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-658"><a href="#cb113-658" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(fyear &gt;= 2000 &amp; fyear &lt;= 2007) %&gt;%</span></span>
<span id="cb113-659"><a href="#cb113-659" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-660"><a href="#cb113-660" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey) </span></span>
<span id="cb113-661"><a href="#cb113-661" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-662"><a href="#cb113-662" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-663"><a href="#cb113-663" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ i(indexyear, contract_intensity_2000, -1) | gvkey + indexyear, data = ., cluster = c("gvkey", "ff_30ind_name")) %&gt;% </span></span>
<span id="cb113-664"><a href="#cb113-664" aria-hidden="true" tabindex="-1"></a><span class="in">  iplot(., </span></span>
<span id="cb113-665"><a href="#cb113-665" aria-hidden="true" tabindex="-1"></a><span class="in">        xlab = paste("Time to treatment (0 is Year ", base_year, ")", sep = ""),</span></span>
<span id="cb113-666"><a href="#cb113-666" aria-hidden="true" tabindex="-1"></a><span class="in">        main = "Treatment Effect (TWFE): fiscal year", </span></span>
<span id="cb113-667"><a href="#cb113-667" aria-hidden="true" tabindex="-1"></a><span class="in">        ref.line = FALSE,</span></span>
<span id="cb113-668"><a href="#cb113-668" aria-hidden="true" tabindex="-1"></a><span class="in">        ref.line.par = list(col = "red", lty = 2),</span></span>
<span id="cb113-669"><a href="#cb113-669" aria-hidden="true" tabindex="-1"></a><span class="in">        pt.join = FALSE</span></span>
<span id="cb113-670"><a href="#cb113-670" aria-hidden="true" tabindex="-1"></a><span class="in">        ); axis(1, at = -7:2); abline(v = 0.5, col = "red", lty = 2, lwd = 3) </span></span>
<span id="cb113-671"><a href="#cb113-671" aria-hidden="true" tabindex="-1"></a><span class="in">  # fixest::coefplot() </span></span>
<span id="cb113-672"><a href="#cb113-672" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-673"><a href="#cb113-673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-674"><a href="#cb113-674" aria-hidden="true" tabindex="-1"></a><span class="fu">### A2. Results using data filters in the main paper {#sec-a2-results-using-data-filters-in-the-main-paper}</span></span>
<span id="cb113-675"><a href="#cb113-675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-676"><a href="#cb113-676" aria-hidden="true" tabindex="-1"></a>In this section, we restrict to observations with <span class="in">`Book leverage`</span> inside the <span class="sc">\[</span>0,1<span class="sc">\]</span> range over the full sample.</span>
<span id="cb113-677"><a href="#cb113-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-678"><a href="#cb113-678" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a2-did-data, echo=TRUE}</span></span>
<span id="cb113-679"><a href="#cb113-679" aria-hidden="true" tabindex="-1"></a><span class="in">## create leverage variables </span></span>
<span id="cb113-680"><a href="#cb113-680" aria-hidden="true" tabindex="-1"></a><span class="in">data &lt;- compustat_na %&gt;% </span></span>
<span id="cb113-681"><a href="#cb113-681" aria-hidden="true" tabindex="-1"></a><span class="in">  # filter(at &gt; 0) %&gt;% </span></span>
<span id="cb113-682"><a href="#cb113-682" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(indfmt == "INDL") %&gt;% ## remove all financial firms </span></span>
<span id="cb113-683"><a href="#cb113-683" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-684"><a href="#cb113-684" aria-hidden="true" tabindex="-1"></a><span class="in">    ## leverage variables: </span></span>
<span id="cb113-685"><a href="#cb113-685" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = (dlc + dltt) / at, </span></span>
<span id="cb113-686"><a href="#cb113-686" aria-hidden="true" tabindex="-1"></a><span class="in">    debt_ebitda = (dlc + dltt) / ebitda, </span></span>
<span id="cb113-687"><a href="#cb113-687" aria-hidden="true" tabindex="-1"></a><span class="in">    ## treatment intensity: </span></span>
<span id="cb113-688"><a href="#cb113-688" aria-hidden="true" tabindex="-1"></a><span class="in">    totalrent = mrc1 + mrc2 + mrc3 + mrc4 + mrc5 + mrct, # total rent w/o discount</span></span>
<span id="cb113-689"><a href="#cb113-689" aria-hidden="true" tabindex="-1"></a><span class="in">    # contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb113-690"><a href="#cb113-690" aria-hidden="true" tabindex="-1"></a><span class="in">    contract_intensity = (dclo + totalrent) / at, # executory contract intensity</span></span>
<span id="cb113-691"><a href="#cb113-691" aria-hidden="true" tabindex="-1"></a><span class="in">    ## other variables: </span></span>
<span id="cb113-692"><a href="#cb113-692" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.integer(substr(datadate, start = 1, stop = 4)) # data year</span></span>
<span id="cb113-693"><a href="#cb113-693" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-694"><a href="#cb113-694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-695"><a href="#cb113-695" aria-hidden="true" tabindex="-1"></a><span class="in">data_firm &lt;- data %&gt;% </span></span>
<span id="cb113-696"><a href="#cb113-696" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear == 2000) %&gt;% # use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb113-697"><a href="#cb113-697" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, contract_intensity_2000 = contract_intensity) %&gt;% </span></span>
<span id="cb113-698"><a href="#cb113-698" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;% </span></span>
<span id="cb113-699"><a href="#cb113-699" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(contract_intensity_2000 = mean(contract_intensity_2000, na.rm = TRUE) ) %&gt;% </span></span>
<span id="cb113-700"><a href="#cb113-700" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() </span></span>
<span id="cb113-701"><a href="#cb113-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-702"><a href="#cb113-702" aria-hidden="true" tabindex="-1"></a><span class="in">data_did &lt;- data %&gt;% </span></span>
<span id="cb113-703"><a href="#cb113-703" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable </span></span>
<span id="cb113-704"><a href="#cb113-704" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm, by = join_by(gvkey) ) %&gt;% </span></span>
<span id="cb113-705"><a href="#cb113-705" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classifiaction </span></span>
<span id="cb113-706"><a href="#cb113-706" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;% </span></span>
<span id="cb113-707"><a href="#cb113-707" aria-hidden="true" tabindex="-1"></a><span class="in">  ## exclude certain industries </span></span>
<span id="cb113-708"><a href="#cb113-708" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb113-709"><a href="#cb113-709" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 20, # exclude Utiltiy (number 20) </span></span>
<span id="cb113-710"><a href="#cb113-710" aria-hidden="true" tabindex="-1"></a><span class="in">    !(sic &gt;= 6000 &amp; sic &lt;= 6199) # exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb113-711"><a href="#cb113-711" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-712"><a href="#cb113-712" aria-hidden="true" tabindex="-1"></a><span class="in">  ## pre- &amp; post- </span></span>
<span id="cb113-713"><a href="#cb113-713" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-714"><a href="#cb113-714" aria-hidden="true" tabindex="-1"></a><span class="in">    indexyear = (dyear - base_year), # year index with 2005 as base 0.</span></span>
<span id="cb113-715"><a href="#cb113-715" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(dyear &gt; base_year, yes = 1, no = 0)  # whether it is after the 2005 reform </span></span>
<span id="cb113-716"><a href="#cb113-716" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-717"><a href="#cb113-717" aria-hidden="true" tabindex="-1"></a><span class="in">  # drop values outside the range:</span></span>
<span id="cb113-718"><a href="#cb113-718" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-719"><a href="#cb113-719" aria-hidden="true" tabindex="-1"></a><span class="in">   book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 1), yes = book_leverage, no = NA)</span></span>
<span id="cb113-720"><a href="#cb113-720" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-721"><a href="#cb113-721" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-722"><a href="#cb113-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-723"><a href="#cb113-723" aria-hidden="true" tabindex="-1"></a>First, we look at some summary statistics for the <span class="in">`book_leverage`</span> variable. </span>
<span id="cb113-724"><a href="#cb113-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-725"><a href="#cb113-725" aria-hidden="true" tabindex="-1"></a>Summary statistics for the <span class="in">`book_leverage`</span> variable: </span>
<span id="cb113-726"><a href="#cb113-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-727"><a href="#cb113-727" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a2-did-summary-stat, echo=TRUE}</span></span>
<span id="cb113-728"><a href="#cb113-728" aria-hidden="true" tabindex="-1"></a><span class="in">data_did %&gt;% </span></span>
<span id="cb113-729"><a href="#cb113-729" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-730"><a href="#cb113-730" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-731"><a href="#cb113-731" aria-hidden="true" tabindex="-1"></a><span class="in">  select(book_leverage) %&gt;% </span></span>
<span id="cb113-732"><a href="#cb113-732" aria-hidden="true" tabindex="-1"></a><span class="in">  # mutate(</span></span>
<span id="cb113-733"><a href="#cb113-733" aria-hidden="true" tabindex="-1"></a><span class="in">  #   book_leverage_1 = ifelse(book_leverage &gt;= 0 &amp; book_leverage &lt;= 1, yes = book_leverage, no = NA), </span></span>
<span id="cb113-734"><a href="#cb113-734" aria-hidden="true" tabindex="-1"></a><span class="in">  #   book_leverage_3 = ifelse(book_leverage &gt;= 0 &amp; book_leverage &lt;= 3, yes = book_leverage, no = NA), </span></span>
<span id="cb113-735"><a href="#cb113-735" aria-hidden="true" tabindex="-1"></a><span class="in">  #   book_leverage_5 = ifelse(book_leverage &gt;= 0 &amp; book_leverage &lt;= 5, yes = book_leverage, no = NA) </span></span>
<span id="cb113-736"><a href="#cb113-736" aria-hidden="true" tabindex="-1"></a><span class="in">  # ) %&gt;% </span></span>
<span id="cb113-737"><a href="#cb113-737" aria-hidden="true" tabindex="-1"></a><span class="in">  data.frame() %&gt;% </span></span>
<span id="cb113-738"><a href="#cb113-738" aria-hidden="true" tabindex="-1"></a><span class="in">  psych::describe(.) </span></span>
<span id="cb113-739"><a href="#cb113-739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-740"><a href="#cb113-740" aria-hidden="true" tabindex="-1"></a><span class="in">data %&gt;% </span></span>
<span id="cb113-741"><a href="#cb113-741" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, book_leverage, debt_ebitda) %&gt;% </span></span>
<span id="cb113-742"><a href="#cb113-742" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-743"><a href="#cb113-743" aria-hidden="true" tabindex="-1"></a><span class="in">  # select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-744"><a href="#cb113-744" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-745"><a href="#cb113-745" aria-hidden="true" tabindex="-1"></a><span class="in">  select(book_leverage) %&gt;% </span></span>
<span id="cb113-746"><a href="#cb113-746" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(book_leverage &gt;= 0 &amp; book_leverage &lt;= 3) %&gt;%</span></span>
<span id="cb113-747"><a href="#cb113-747" aria-hidden="true" tabindex="-1"></a><span class="in">  .$book_leverage %&gt;% </span></span>
<span id="cb113-748"><a href="#cb113-748" aria-hidden="true" tabindex="-1"></a><span class="in">  hist(., </span></span>
<span id="cb113-749"><a href="#cb113-749" aria-hidden="true" tabindex="-1"></a><span class="in">       prob = TRUE, # density plot</span></span>
<span id="cb113-750"><a href="#cb113-750" aria-hidden="true" tabindex="-1"></a><span class="in">       col = "#E1DEFC",  </span></span>
<span id="cb113-751"><a href="#cb113-751" aria-hidden="true" tabindex="-1"></a><span class="in">       main = "Density Histogram: raw data from Compustat NA (US only)", </span></span>
<span id="cb113-752"><a href="#cb113-752" aria-hidden="true" tabindex="-1"></a><span class="in">       xlab = "Book leverage (only show the region [0,3])",</span></span>
<span id="cb113-753"><a href="#cb113-753" aria-hidden="true" tabindex="-1"></a><span class="in">       ylab = "Density", </span></span>
<span id="cb113-754"><a href="#cb113-754" aria-hidden="true" tabindex="-1"></a><span class="in">       breaks = 50, xlim = c(0, 3) </span></span>
<span id="cb113-755"><a href="#cb113-755" aria-hidden="true" tabindex="-1"></a><span class="in">       )</span></span>
<span id="cb113-756"><a href="#cb113-756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-757"><a href="#cb113-757" aria-hidden="true" tabindex="-1"></a><span class="in">data_did %&gt;% </span></span>
<span id="cb113-758"><a href="#cb113-758" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, dlc, dltt, at, book_leverage, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-759"><a href="#cb113-759" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-760"><a href="#cb113-760" aria-hidden="true" tabindex="-1"></a><span class="in">  arrange(-book_leverage) %&gt;% </span></span>
<span id="cb113-761"><a href="#cb113-761" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() </span></span>
<span id="cb113-762"><a href="#cb113-762" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-763"><a href="#cb113-763" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-764"><a href="#cb113-764" aria-hidden="true" tabindex="-1"></a>DiD Analysis:</span>
<span id="cb113-765"><a href="#cb113-765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-766"><a href="#cb113-766" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a2-did-test, echo=TRUE, warning=FALSE, message=FALSE, fig.height=6, fig.width=8}</span></span>
<span id="cb113-767"><a href="#cb113-767" aria-hidden="true" tabindex="-1"></a><span class="in">etable(</span></span>
<span id="cb113-768"><a href="#cb113-768" aria-hidden="true" tabindex="-1"></a><span class="in">  `(1)` = data_did %&gt;% </span></span>
<span id="cb113-769"><a href="#cb113-769" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-770"><a href="#cb113-770" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-771"><a href="#cb113-771" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-772"><a href="#cb113-772" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-773"><a href="#cb113-773" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-774"><a href="#cb113-774" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-775"><a href="#cb113-775" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-776"><a href="#cb113-776" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-777"><a href="#cb113-777" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear, data = ., cluster = c("gvkey", "ff_30ind_name")), </span></span>
<span id="cb113-778"><a href="#cb113-778" aria-hidden="true" tabindex="-1"></a><span class="in">  `(2)` = data_did %&gt;% </span></span>
<span id="cb113-779"><a href="#cb113-779" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-780"><a href="#cb113-780" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-781"><a href="#cb113-781" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-782"><a href="#cb113-782" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-783"><a href="#cb113-783" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-784"><a href="#cb113-784" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-785"><a href="#cb113-785" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-786"><a href="#cb113-786" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-787"><a href="#cb113-787" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear + ff_30ind_name^dyear, data = ., cluster = c("gvkey", "ff_30ind_name")) </span></span>
<span id="cb113-788"><a href="#cb113-788" aria-hidden="true" tabindex="-1"></a><span class="in">) </span></span>
<span id="cb113-789"><a href="#cb113-789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-790"><a href="#cb113-790" aria-hidden="true" tabindex="-1"></a><span class="in">model_a2_a &lt;- data_did %&gt;% </span></span>
<span id="cb113-791"><a href="#cb113-791" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, indexyear, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-792"><a href="#cb113-792" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2001 &amp; dyear &lt;= 2007) %&gt;%</span></span>
<span id="cb113-793"><a href="#cb113-793" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-794"><a href="#cb113-794" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey) </span></span>
<span id="cb113-795"><a href="#cb113-795" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-796"><a href="#cb113-796" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-797"><a href="#cb113-797" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ i(indexyear, contract_intensity_2000, -4) | gvkey + indexyear, data = ., cluster = c("gvkey", "ff_30ind_name"))</span></span>
<span id="cb113-798"><a href="#cb113-798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-799"><a href="#cb113-799" aria-hidden="true" tabindex="-1"></a><span class="in">model_a2_b &lt;- data_did %&gt;% </span></span>
<span id="cb113-800"><a href="#cb113-800" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, indexyear, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-801"><a href="#cb113-801" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2001 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-802"><a href="#cb113-802" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-803"><a href="#cb113-803" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey) </span></span>
<span id="cb113-804"><a href="#cb113-804" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-805"><a href="#cb113-805" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-806"><a href="#cb113-806" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ i(indexyear, contract_intensity_2000, -4) | gvkey + indexyear + ff_30ind_name^indexyear, data = ., cluster = c("gvkey", "ff_30ind_name")) # with industry-year FE. </span></span>
<span id="cb113-807"><a href="#cb113-807" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-808"><a href="#cb113-808" aria-hidden="true" tabindex="-1"></a><span class="in">iplot(list(model_a2_a, model_a2_b), </span></span>
<span id="cb113-809"><a href="#cb113-809" aria-hidden="true" tabindex="-1"></a><span class="in">        xlab = paste("Time to treatment (0 is Year ", base_year, ")", sep = ""),</span></span>
<span id="cb113-810"><a href="#cb113-810" aria-hidden="true" tabindex="-1"></a><span class="in">        main = "Treatment Effect (TWFE): Book leverage in [0,1]", </span></span>
<span id="cb113-811"><a href="#cb113-811" aria-hidden="true" tabindex="-1"></a><span class="in">        ref.line = FALSE,</span></span>
<span id="cb113-812"><a href="#cb113-812" aria-hidden="true" tabindex="-1"></a><span class="in">        ref.line.par = list(col = "red", lty = 2),</span></span>
<span id="cb113-813"><a href="#cb113-813" aria-hidden="true" tabindex="-1"></a><span class="in">        pt.join = FALSE</span></span>
<span id="cb113-814"><a href="#cb113-814" aria-hidden="true" tabindex="-1"></a><span class="in">        ); axis(1, at = -7:2); abline(v = 0.5, col = "red", lty = 2, lwd = 3); legend("bottomleft", bty = "n", col = c(1, 2), pch = c(20, 17), legend = c("TWFE", "TWFE + Industry-Year FE"))</span></span>
<span id="cb113-815"><a href="#cb113-815" aria-hidden="true" tabindex="-1"></a><span class="in">  # fixest::coefplot() </span></span>
<span id="cb113-816"><a href="#cb113-816" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-817"><a href="#cb113-817" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-818"><a href="#cb113-818" aria-hidden="true" tabindex="-1"></a>Compare to results in @sec-s3a-try-and-error-with-calender-year-dyear, the coefficient estimate on the treatment in @sec-a2-results-using-data-filters-in-the-main-paper not only becomes insignificant, but also changes the direction of the impact.</span>
<span id="cb113-819"><a href="#cb113-819" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-820"><a href="#cb113-820" aria-hidden="true" tabindex="-1"></a><span class="fu">### A3. Sensitivity Analysis of Choosing 2000 {#sec-a3-sensitivity-analysis}</span></span>
<span id="cb113-821"><a href="#cb113-821" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-822"><a href="#cb113-822" aria-hidden="true" tabindex="-1"></a>In this subsection, we examine how sensitive the coefficient estimate is with respect to changes in the base year for determining the contract intensity of a firm. We still use <span class="in">`dyear`</span> as the year variable.</span>
<span id="cb113-823"><a href="#cb113-823" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-824"><a href="#cb113-824" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a3-did-data, echo=TRUE, message=FALSE, warning=FALSE}</span></span>
<span id="cb113-825"><a href="#cb113-825" aria-hidden="true" tabindex="-1"></a><span class="in">data_firm_wide &lt;- data %&gt;% </span></span>
<span id="cb113-826"><a href="#cb113-826" aria-hidden="true" tabindex="-1"></a><span class="in">  select(dyear, gvkey, contract_intensity) %&gt;% </span></span>
<span id="cb113-827"><a href="#cb113-827" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(dyear, gvkey) %&gt;% </span></span>
<span id="cb113-828"><a href="#cb113-828" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(contract_intensity = mean(contract_intensity, na.rm = TRUE) ) %&gt;% </span></span>
<span id="cb113-829"><a href="#cb113-829" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() %&gt;% </span></span>
<span id="cb113-830"><a href="#cb113-830" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &lt; 2002) %&gt;% </span></span>
<span id="cb113-831"><a href="#cb113-831" aria-hidden="true" tabindex="-1"></a><span class="in">  pivot_wider(names_from = dyear, values_from = contract_intensity) %&gt;% </span></span>
<span id="cb113-832"><a href="#cb113-832" aria-hidden="true" tabindex="-1"></a><span class="in">  rename_with(.fn = ~ ifelse(grepl(pattern = "\\d{4}", x = .x), paste0("contract_intensity_", .x), no = .x) )</span></span>
<span id="cb113-833"><a href="#cb113-833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-834"><a href="#cb113-834" aria-hidden="true" tabindex="-1"></a><span class="in">data_did_wide &lt;- data %&gt;% </span></span>
<span id="cb113-835"><a href="#cb113-835" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable </span></span>
<span id="cb113-836"><a href="#cb113-836" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm_wide, by = join_by(gvkey) ) %&gt;% </span></span>
<span id="cb113-837"><a href="#cb113-837" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classifiaction </span></span>
<span id="cb113-838"><a href="#cb113-838" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;% </span></span>
<span id="cb113-839"><a href="#cb113-839" aria-hidden="true" tabindex="-1"></a><span class="in">  ## exclude certain industries </span></span>
<span id="cb113-840"><a href="#cb113-840" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb113-841"><a href="#cb113-841" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 20, # exclude Utiltiy (number 20) </span></span>
<span id="cb113-842"><a href="#cb113-842" aria-hidden="true" tabindex="-1"></a><span class="in">    !(sic &gt;= 6000 &amp; sic &lt;= 6199) # exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb113-843"><a href="#cb113-843" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-844"><a href="#cb113-844" aria-hidden="true" tabindex="-1"></a><span class="in">  ## pre- &amp; post- </span></span>
<span id="cb113-845"><a href="#cb113-845" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-846"><a href="#cb113-846" aria-hidden="true" tabindex="-1"></a><span class="in">    indexyear = (dyear - base_year), # year index with 2005 as base 0.</span></span>
<span id="cb113-847"><a href="#cb113-847" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(dyear &gt; base_year, yes = 1, no = 0)  # whether it is after the 2005 reform</span></span>
<span id="cb113-848"><a href="#cb113-848" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-849"><a href="#cb113-849" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-850"><a href="#cb113-850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-851"><a href="#cb113-851" aria-hidden="true" tabindex="-1"></a>We construct a series of new column variables under the name of <span class="in">`contract_intensity_[year]`</span> with <span class="in">`dyear &lt; 2002`</span>.</span>
<span id="cb113-852"><a href="#cb113-852" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-853"><a href="#cb113-853" aria-hidden="true" tabindex="-1"></a>DiD Analysis:</span>
<span id="cb113-854"><a href="#cb113-854" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-855"><a href="#cb113-855" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a3-did-test, echo=TRUE, warning=FALSE, message=FALSE}</span></span>
<span id="cb113-856"><a href="#cb113-856" aria-hidden="true" tabindex="-1"></a><span class="in">#| column: page-right </span></span>
<span id="cb113-857"><a href="#cb113-857" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-858"><a href="#cb113-858" aria-hidden="true" tabindex="-1"></a><span class="in">reg_contract_intensity_list &lt;- list(); for (contract_base in names(data_firm_wide)[-1] ) {</span></span>
<span id="cb113-859"><a href="#cb113-859" aria-hidden="true" tabindex="-1"></a><span class="in">  ## format the regression</span></span>
<span id="cb113-860"><a href="#cb113-860" aria-hidden="true" tabindex="-1"></a><span class="in">  reg_raw_year &lt;- as.formula(paste("book_leverage ~ ", contract_base, ":post_2005 | gvkey + dyear", sep = "")) </span></span>
<span id="cb113-861"><a href="#cb113-861" aria-hidden="true" tabindex="-1"></a><span class="in">  ## use different base year(s) </span></span>
<span id="cb113-862"><a href="#cb113-862" aria-hidden="true" tabindex="-1"></a><span class="in">  reg_year &lt;- data_did_wide %&gt;% </span></span>
<span id="cb113-863"><a href="#cb113-863" aria-hidden="true" tabindex="-1"></a><span class="in">    select(gvkey, dyear, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name, (!!sym(contract_base)) ) %&gt;% </span></span>
<span id="cb113-864"><a href="#cb113-864" aria-hidden="true" tabindex="-1"></a><span class="in">    filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-865"><a href="#cb113-865" aria-hidden="true" tabindex="-1"></a><span class="in">    mutate(</span></span>
<span id="cb113-866"><a href="#cb113-866" aria-hidden="true" tabindex="-1"></a><span class="in">      gvkey = as.factor(gvkey), </span></span>
<span id="cb113-867"><a href="#cb113-867" aria-hidden="true" tabindex="-1"></a><span class="in">      dyear = as.factor(dyear) </span></span>
<span id="cb113-868"><a href="#cb113-868" aria-hidden="true" tabindex="-1"></a><span class="in">    ) %&gt;% </span></span>
<span id="cb113-869"><a href="#cb113-869" aria-hidden="true" tabindex="-1"></a><span class="in">    na.omit() %&gt;% </span></span>
<span id="cb113-870"><a href="#cb113-870" aria-hidden="true" tabindex="-1"></a><span class="in">    fixest::feols(fml = reg_raw_year, data = ., cluster = c("gvkey", "ff_30ind_name")) </span></span>
<span id="cb113-871"><a href="#cb113-871" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb113-872"><a href="#cb113-872" aria-hidden="true" tabindex="-1"></a><span class="in">  reg_contract_intensity_list[[contract_base]] &lt;- reg_year</span></span>
<span id="cb113-873"><a href="#cb113-873" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb113-874"><a href="#cb113-874" aria-hidden="true" tabindex="-1"></a><span class="in">  assign(x = paste("reg_", contract_base, sep = ""), reg_year) </span></span>
<span id="cb113-875"><a href="#cb113-875" aria-hidden="true" tabindex="-1"></a><span class="in">} </span></span>
<span id="cb113-876"><a href="#cb113-876" aria-hidden="true" tabindex="-1"></a><span class="in">## change the name of each did regressions: </span></span>
<span id="cb113-877"><a href="#cb113-877" aria-hidden="true" tabindex="-1"></a><span class="in">names(reg_contract_intensity_list) &lt;- str_replace_all(string = names(reg_contract_intensity_list), pattern = "contract_intensity_", replacement = "base: dyear=")</span></span>
<span id="cb113-878"><a href="#cb113-878" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-879"><a href="#cb113-879" aria-hidden="true" tabindex="-1"></a><span class="in">etable(reg_contract_intensity_list, vcov = "cluster") %&gt;% </span></span>
<span id="cb113-880"><a href="#cb113-880" aria-hidden="true" tabindex="-1"></a><span class="in">  knitr::kable(format = "html", caption = "DiD Results with Different Base Year for Contract Intensity") %&gt;% </span></span>
<span id="cb113-881"><a href="#cb113-881" aria-hidden="true" tabindex="-1"></a><span class="in">  kableExtra::kable_styling(</span></span>
<span id="cb113-882"><a href="#cb113-882" aria-hidden="true" tabindex="-1"></a><span class="in">    font_size = 8,       # Smaller font (default is 16px)</span></span>
<span id="cb113-883"><a href="#cb113-883" aria-hidden="true" tabindex="-1"></a><span class="in">    full_width = FALSE,   # Table width fits content </span></span>
<span id="cb113-884"><a href="#cb113-884" aria-hidden="true" tabindex="-1"></a><span class="in">    bootstrap_options = c("striped", "condensed")</span></span>
<span id="cb113-885"><a href="#cb113-885" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-886"><a href="#cb113-886" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-887"><a href="#cb113-887" aria-hidden="true" tabindex="-1"></a><span class="in">coefplot(</span></span>
<span id="cb113-888"><a href="#cb113-888" aria-hidden="true" tabindex="-1"></a><span class="in">  reg_contract_intensity_list, </span></span>
<span id="cb113-889"><a href="#cb113-889" aria-hidden="true" tabindex="-1"></a><span class="in">  horiz = TRUE</span></span>
<span id="cb113-890"><a href="#cb113-890" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-891"><a href="#cb113-891" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-892"><a href="#cb113-892" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-893"><a href="#cb113-893" aria-hidden="true" tabindex="-1"></a>From the regression results, we can see that the treatment effect remains negatively statistically significant at 1% level, if we choose 1999 or 2001 as the base year to measure the contract intensity characteristic of a firm. Choosing years before 1999 will make the treatment effect insignificant. This is understandable as firms characteristics before 1999 may not be a good measure for its characteristics between 2002 and 2007. Our results are robust to most of adjustments in the standard errors. In the base tests, results are invariant when we cluster standard errors at the firm level and also at both the firm and year level.</span>
<span id="cb113-894"><a href="#cb113-894" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-895"><a href="#cb113-895" aria-hidden="true" tabindex="-1"></a>However, the results are &lt;mark&gt;no longer significant when we use the heteroscedasticity-robust (HC1) corrected standard errors&lt;/mark&gt;, even when using 2000 as the base year for <span class="in">`contract_intensity`</span>. See the regression results below:</span>
<span id="cb113-896"><a href="#cb113-896" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-897"><a href="#cb113-897" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a3-did-test-robust, echo=TRUE, warning=TRUE, message=TRUE}</span></span>
<span id="cb113-898"><a href="#cb113-898" aria-hidden="true" tabindex="-1"></a><span class="in">#| column: page-right</span></span>
<span id="cb113-899"><a href="#cb113-899" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-900"><a href="#cb113-900" aria-hidden="true" tabindex="-1"></a><span class="in">etable(reg_contract_intensity_list, vcov = "HC1") %&gt;% </span></span>
<span id="cb113-901"><a href="#cb113-901" aria-hidden="true" tabindex="-1"></a><span class="in">  knitr::kable(format = "html", caption = "DiD Results with Different Base Years for Contract Intensity") %&gt;% </span></span>
<span id="cb113-902"><a href="#cb113-902" aria-hidden="true" tabindex="-1"></a><span class="in">  kableExtra::kable_styling(</span></span>
<span id="cb113-903"><a href="#cb113-903" aria-hidden="true" tabindex="-1"></a><span class="in">    font_size = 8,       # Smaller font (default is 16px)</span></span>
<span id="cb113-904"><a href="#cb113-904" aria-hidden="true" tabindex="-1"></a><span class="in">    full_width = FALSE,   # Table width fits content </span></span>
<span id="cb113-905"><a href="#cb113-905" aria-hidden="true" tabindex="-1"></a><span class="in">    bootstrap_options = c("striped", "condensed")</span></span>
<span id="cb113-906"><a href="#cb113-906" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb113-907"><a href="#cb113-907" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-908"><a href="#cb113-908" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-909"><a href="#cb113-909" aria-hidden="true" tabindex="-1"></a>The numbers in this test, however, are closer to the ones in Samuel's slides.</span>
<span id="cb113-910"><a href="#cb113-910" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-911"><a href="#cb113-911" aria-hidden="true" tabindex="-1"></a>In the last part, we re-run all analyses using <span class="in">`fyear`</span> as the year variable.</span>
<span id="cb113-912"><a href="#cb113-912" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-913"><a href="#cb113-913" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a3-did-fyear, echo=TRUE, warning=FALSE, message=FALSE}</span></span>
<span id="cb113-914"><a href="#cb113-914" aria-hidden="true" tabindex="-1"></a><span class="in">#| column: page-right </span></span>
<span id="cb113-915"><a href="#cb113-915" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-916"><a href="#cb113-916" aria-hidden="true" tabindex="-1"></a><span class="in">## data prep: </span></span>
<span id="cb113-917"><a href="#cb113-917" aria-hidden="true" tabindex="-1"></a><span class="in">data_firm_wide_fyear &lt;- data %&gt;% </span></span>
<span id="cb113-918"><a href="#cb113-918" aria-hidden="true" tabindex="-1"></a><span class="in">  select(fyear, gvkey, contract_intensity) %&gt;% </span></span>
<span id="cb113-919"><a href="#cb113-919" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(fyear &lt; 2002) %&gt;% </span></span>
<span id="cb113-920"><a href="#cb113-920" aria-hidden="true" tabindex="-1"></a><span class="in">  pivot_wider(names_from = fyear, values_from = contract_intensity) %&gt;% </span></span>
<span id="cb113-921"><a href="#cb113-921" aria-hidden="true" tabindex="-1"></a><span class="in">  rename_with(.fn = ~ ifelse(grepl(pattern = "\\d{4}", x = .x), paste0("contract_intensity_", .x), no = .x) )</span></span>
<span id="cb113-922"><a href="#cb113-922" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-923"><a href="#cb113-923" aria-hidden="true" tabindex="-1"></a><span class="in">data_did_wide_fyear &lt;- data %&gt;% </span></span>
<span id="cb113-924"><a href="#cb113-924" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable </span></span>
<span id="cb113-925"><a href="#cb113-925" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm_wide_fyear, by = join_by(gvkey) ) %&gt;% </span></span>
<span id="cb113-926"><a href="#cb113-926" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classifiaction </span></span>
<span id="cb113-927"><a href="#cb113-927" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;% </span></span>
<span id="cb113-928"><a href="#cb113-928" aria-hidden="true" tabindex="-1"></a><span class="in">  ## exclude certain industries </span></span>
<span id="cb113-929"><a href="#cb113-929" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb113-930"><a href="#cb113-930" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 20, # exclude Utiltiy (number 20) </span></span>
<span id="cb113-931"><a href="#cb113-931" aria-hidden="true" tabindex="-1"></a><span class="in">    !(sic &gt;= 6000 &amp; sic &lt;= 6199) # exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb113-932"><a href="#cb113-932" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-933"><a href="#cb113-933" aria-hidden="true" tabindex="-1"></a><span class="in">  ## pre- &amp; post- </span></span>
<span id="cb113-934"><a href="#cb113-934" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-935"><a href="#cb113-935" aria-hidden="true" tabindex="-1"></a><span class="in">    indexyear = (fyear - base_year), # year index with 2005 as base 0.</span></span>
<span id="cb113-936"><a href="#cb113-936" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(fyear &gt; base_year, yes = 1, no = 0)  # whether it is after the 2005 reform</span></span>
<span id="cb113-937"><a href="#cb113-937" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-938"><a href="#cb113-938" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-939"><a href="#cb113-939" aria-hidden="true" tabindex="-1"></a><span class="in">## did reg: </span></span>
<span id="cb113-940"><a href="#cb113-940" aria-hidden="true" tabindex="-1"></a><span class="in">reg_contract_intensity_list_fyear &lt;- list(); for (contract_base in names(data_firm_wide)[-1] ) {</span></span>
<span id="cb113-941"><a href="#cb113-941" aria-hidden="true" tabindex="-1"></a><span class="in">  ## format the regression</span></span>
<span id="cb113-942"><a href="#cb113-942" aria-hidden="true" tabindex="-1"></a><span class="in">  reg_raw_year &lt;- as.formula(paste("book_leverage ~ ", contract_base, ":post_2005 | gvkey + fyear", sep = "")) </span></span>
<span id="cb113-943"><a href="#cb113-943" aria-hidden="true" tabindex="-1"></a><span class="in">  ## use different base year(s) </span></span>
<span id="cb113-944"><a href="#cb113-944" aria-hidden="true" tabindex="-1"></a><span class="in">  reg_year &lt;- data_did_wide %&gt;% </span></span>
<span id="cb113-945"><a href="#cb113-945" aria-hidden="true" tabindex="-1"></a><span class="in">    select(gvkey, fyear, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name, (!!sym(contract_base)) ) %&gt;% </span></span>
<span id="cb113-946"><a href="#cb113-946" aria-hidden="true" tabindex="-1"></a><span class="in">    filter(fyear &gt;= 2002 &amp; fyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-947"><a href="#cb113-947" aria-hidden="true" tabindex="-1"></a><span class="in">    mutate(</span></span>
<span id="cb113-948"><a href="#cb113-948" aria-hidden="true" tabindex="-1"></a><span class="in">      gvkey = as.factor(gvkey), </span></span>
<span id="cb113-949"><a href="#cb113-949" aria-hidden="true" tabindex="-1"></a><span class="in">      fyear = as.factor(fyear) </span></span>
<span id="cb113-950"><a href="#cb113-950" aria-hidden="true" tabindex="-1"></a><span class="in">    ) %&gt;% </span></span>
<span id="cb113-951"><a href="#cb113-951" aria-hidden="true" tabindex="-1"></a><span class="in">    na.omit() %&gt;% </span></span>
<span id="cb113-952"><a href="#cb113-952" aria-hidden="true" tabindex="-1"></a><span class="in">    fixest::feols(fml = reg_raw_year, data = ., cluster = c("gvkey", "ff_30ind_name")) </span></span>
<span id="cb113-953"><a href="#cb113-953" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb113-954"><a href="#cb113-954" aria-hidden="true" tabindex="-1"></a><span class="in">  reg_contract_intensity_list_fyear[[contract_base]] &lt;- reg_year</span></span>
<span id="cb113-955"><a href="#cb113-955" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb113-956"><a href="#cb113-956" aria-hidden="true" tabindex="-1"></a><span class="in">  assign(x = paste("reg_", contract_base, sep = ""), reg_year) </span></span>
<span id="cb113-957"><a href="#cb113-957" aria-hidden="true" tabindex="-1"></a><span class="in">} </span></span>
<span id="cb113-958"><a href="#cb113-958" aria-hidden="true" tabindex="-1"></a><span class="in">## change the name of each did regressions: </span></span>
<span id="cb113-959"><a href="#cb113-959" aria-hidden="true" tabindex="-1"></a><span class="in">names(reg_contract_intensity_list_fyear) &lt;- str_replace_all(string = names(reg_contract_intensity_list_fyear), pattern = "contract_intensity_", replacement = "base: fyear=")</span></span>
<span id="cb113-960"><a href="#cb113-960" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-961"><a href="#cb113-961" aria-hidden="true" tabindex="-1"></a><span class="in">print("SE clustered at firm level: \n")</span></span>
<span id="cb113-962"><a href="#cb113-962" aria-hidden="true" tabindex="-1"></a><span class="in">etable(reg_contract_intensity_list_fyear, cluster = c("gvkey", "ff_30ind_name")) %&gt;%</span></span>
<span id="cb113-963"><a href="#cb113-963" aria-hidden="true" tabindex="-1"></a><span class="in">  knitr::kable(format = "html", caption = "DiD Results with Different Base Year for Contract Intensity") %&gt;% </span></span>
<span id="cb113-964"><a href="#cb113-964" aria-hidden="true" tabindex="-1"></a><span class="in">  kableExtra::kable_styling(</span></span>
<span id="cb113-965"><a href="#cb113-965" aria-hidden="true" tabindex="-1"></a><span class="in">    font_size = 8,       # Smaller font (default is 16px)</span></span>
<span id="cb113-966"><a href="#cb113-966" aria-hidden="true" tabindex="-1"></a><span class="in">    full_width = FALSE,   # Table width fits content </span></span>
<span id="cb113-967"><a href="#cb113-967" aria-hidden="true" tabindex="-1"></a><span class="in">    bootstrap_options = c("striped", "condensed")</span></span>
<span id="cb113-968"><a href="#cb113-968" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-969"><a href="#cb113-969" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-970"><a href="#cb113-970" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-971"><a href="#cb113-971" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a3-did-fyear2, echo=TRUE, warning=FALSE, message=FALSE}</span></span>
<span id="cb113-972"><a href="#cb113-972" aria-hidden="true" tabindex="-1"></a><span class="in">#| column: page-right</span></span>
<span id="cb113-973"><a href="#cb113-973" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-974"><a href="#cb113-974" aria-hidden="true" tabindex="-1"></a><span class="in">print("HC1 robust SE: \n")</span></span>
<span id="cb113-975"><a href="#cb113-975" aria-hidden="true" tabindex="-1"></a><span class="in">etable(reg_contract_intensity_list_fyear, vcov = "HC1") %&gt;% </span></span>
<span id="cb113-976"><a href="#cb113-976" aria-hidden="true" tabindex="-1"></a><span class="in">  knitr::kable(format = "html", caption = "DiD Results with Different Base Year for Contract Intensity") %&gt;% </span></span>
<span id="cb113-977"><a href="#cb113-977" aria-hidden="true" tabindex="-1"></a><span class="in">  kableExtra::kable_styling(</span></span>
<span id="cb113-978"><a href="#cb113-978" aria-hidden="true" tabindex="-1"></a><span class="in">    font_size = 8,       # Smaller font (default is 16px)</span></span>
<span id="cb113-979"><a href="#cb113-979" aria-hidden="true" tabindex="-1"></a><span class="in">    full_width = FALSE,   # Table width fits content </span></span>
<span id="cb113-980"><a href="#cb113-980" aria-hidden="true" tabindex="-1"></a><span class="in">    bootstrap_options = c("striped", "condensed")</span></span>
<span id="cb113-981"><a href="#cb113-981" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb113-982"><a href="#cb113-982" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-983"><a href="#cb113-983" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-984"><a href="#cb113-984" aria-hidden="true" tabindex="-1"></a>In this case, with HC1 standard errors (same as the default in STATA: <span class="in">`robust`</span>), only the coefficient using 2000 contract intensity is significant at 10% level, which is very close to the results in Samuel's slides.</span>
<span id="cb113-985"><a href="#cb113-985" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-986"><a href="#cb113-986" aria-hidden="true" tabindex="-1"></a>::: {#nte-clustering .callout-note .column-margin}</span>
<span id="cb113-987"><a href="#cb113-987" aria-hidden="true" tabindex="-1"></a>The reason for not using two-way clustering is that there are only 6 clusters at the time dimension. &lt;b&gt;Fewer than 10–20 clusters in a dimension can lead to biased standard errors (Cameron &amp; Miller, 2015)&lt;/b&gt;. With 6 years, two-way clustering would produce unreliable results.</span>
<span id="cb113-988"><a href="#cb113-988" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb113-989"><a href="#cb113-989" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-990"><a href="#cb113-990" aria-hidden="true" tabindex="-1"></a><span class="fu">### A4. Restrict to Firms w/o Missing Values {#sec-a4-firms-wo-missing}</span></span>
<span id="cb113-991"><a href="#cb113-991" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-992"><a href="#cb113-992" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a4-did, echo=TRUE, results='hold'}</span></span>
<span id="cb113-993"><a href="#cb113-993" aria-hidden="true" tabindex="-1"></a><span class="in">data_firm &lt;- data %&gt;% </span></span>
<span id="cb113-994"><a href="#cb113-994" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear == 2000) %&gt;% # use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb113-995"><a href="#cb113-995" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, contract_intensity_2000 = contract_intensity) %&gt;% </span></span>
<span id="cb113-996"><a href="#cb113-996" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;% </span></span>
<span id="cb113-997"><a href="#cb113-997" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(contract_intensity_2000 = mean(contract_intensity_2000, na.rm = TRUE) ) %&gt;% </span></span>
<span id="cb113-998"><a href="#cb113-998" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() </span></span>
<span id="cb113-999"><a href="#cb113-999" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1000"><a href="#cb113-1000" aria-hidden="true" tabindex="-1"></a><span class="in">FF_30ind &lt;- as_tibble(read.csv(file = "C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"))</span></span>
<span id="cb113-1001"><a href="#cb113-1001" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1002"><a href="#cb113-1002" aria-hidden="true" tabindex="-1"></a><span class="in">data_did &lt;- data %&gt;% </span></span>
<span id="cb113-1003"><a href="#cb113-1003" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable </span></span>
<span id="cb113-1004"><a href="#cb113-1004" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm, by = join_by(gvkey) ) %&gt;% </span></span>
<span id="cb113-1005"><a href="#cb113-1005" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classifiaction </span></span>
<span id="cb113-1006"><a href="#cb113-1006" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;% </span></span>
<span id="cb113-1007"><a href="#cb113-1007" aria-hidden="true" tabindex="-1"></a><span class="in">  ## exclude certain industries </span></span>
<span id="cb113-1008"><a href="#cb113-1008" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb113-1009"><a href="#cb113-1009" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 20, # exclude Utiltiy (number 20) </span></span>
<span id="cb113-1010"><a href="#cb113-1010" aria-hidden="true" tabindex="-1"></a><span class="in">    !(sic &gt;= 6000 &amp; sic &lt;= 6199) # exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb113-1011"><a href="#cb113-1011" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1012"><a href="#cb113-1012" aria-hidden="true" tabindex="-1"></a><span class="in">  ## pre- &amp; post- </span></span>
<span id="cb113-1013"><a href="#cb113-1013" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1014"><a href="#cb113-1014" aria-hidden="true" tabindex="-1"></a><span class="in">    indexyear = (dyear - base_year), # year index with 2005 as base 0.</span></span>
<span id="cb113-1015"><a href="#cb113-1015" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(dyear &gt; base_year, yes = 1, no = 0)  # whether it is after the 2005 reform </span></span>
<span id="cb113-1016"><a href="#cb113-1016" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-1017"><a href="#cb113-1017" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-1018"><a href="#cb113-1018" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1019"><a href="#cb113-1019" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Exclude IPO and Delisting </span></span>
<span id="cb113-1020"><a href="#cb113-1020" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1021"><a href="#cb113-1021" aria-hidden="true" tabindex="-1"></a>If we drop IPO and delisting firms from the sample, the results are as follows:</span>
<span id="cb113-1022"><a href="#cb113-1022" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1023"><a href="#cb113-1023" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a4-did-test, echo=TRUE, warning=FALSE, message=FALSE}</span></span>
<span id="cb113-1024"><a href="#cb113-1024" aria-hidden="true" tabindex="-1"></a><span class="in">data_did %&gt;% </span></span>
<span id="cb113-1025"><a href="#cb113-1025" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-1026"><a href="#cb113-1026" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1027"><a href="#cb113-1027" aria-hidden="true" tabindex="-1"></a><span class="in">  ## drop IPO and delisting firms</span></span>
<span id="cb113-1028"><a href="#cb113-1028" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;%</span></span>
<span id="cb113-1029"><a href="#cb113-1029" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1030"><a href="#cb113-1030" aria-hidden="true" tabindex="-1"></a><span class="in">    n_obs = n(), # number of observations for each firm</span></span>
<span id="cb113-1031"><a href="#cb113-1031" aria-hidden="true" tabindex="-1"></a><span class="in">    n_post = sum(post_2005, na.rm = TRUE) # number of obs after 2005</span></span>
<span id="cb113-1032"><a href="#cb113-1032" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-1033"><a href="#cb113-1033" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() %&gt;%</span></span>
<span id="cb113-1034"><a href="#cb113-1034" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(n_obs &gt; n_post &amp; n_post &gt; 0) %&gt;%</span></span>
<span id="cb113-1035"><a href="#cb113-1035" aria-hidden="true" tabindex="-1"></a><span class="in">  # clean variables</span></span>
<span id="cb113-1036"><a href="#cb113-1036" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1037"><a href="#cb113-1037" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1038"><a href="#cb113-1038" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-1039"><a href="#cb113-1039" aria-hidden="true" tabindex="-1"></a><span class="in">    ind = as.factor(ff_30ind_name), # industry </span></span>
<span id="cb113-1040"><a href="#cb113-1040" aria-hidden="true" tabindex="-1"></a><span class="in">    ind_time = as.factor(paste(ff_30ind_name, dyear, sep = " + ")), </span></span>
<span id="cb113-1041"><a href="#cb113-1041" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1042"><a href="#cb113-1042" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1043"><a href="#cb113-1043" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1044"><a href="#cb113-1044" aria-hidden="true" tabindex="-1"></a><span class="in">  ## adding industry*year FE does not change the results: + ind_time </span></span>
<span id="cb113-1045"><a href="#cb113-1045" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear, data = ., cluster = c("gvkey", "ff_30ind_name")) %&gt;% </span></span>
<span id="cb113-1046"><a href="#cb113-1046" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::etable()</span></span>
<span id="cb113-1047"><a href="#cb113-1047" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1048"><a href="#cb113-1048" aria-hidden="true" tabindex="-1"></a><span class="in">data_did %&gt;% </span></span>
<span id="cb113-1049"><a href="#cb113-1049" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, indexyear, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-1050"><a href="#cb113-1050" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2000 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1051"><a href="#cb113-1051" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;%</span></span>
<span id="cb113-1052"><a href="#cb113-1052" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1053"><a href="#cb113-1053" aria-hidden="true" tabindex="-1"></a><span class="in">    n_obs = n(), # number of observations for each firm</span></span>
<span id="cb113-1054"><a href="#cb113-1054" aria-hidden="true" tabindex="-1"></a><span class="in">    n_post = sum(post_2005, na.rm = TRUE) # number of obs after 2005</span></span>
<span id="cb113-1055"><a href="#cb113-1055" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-1056"><a href="#cb113-1056" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() %&gt;%</span></span>
<span id="cb113-1057"><a href="#cb113-1057" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(n_obs &gt; n_post &amp; n_post &gt; 0) %&gt;%</span></span>
<span id="cb113-1058"><a href="#cb113-1058" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1059"><a href="#cb113-1059" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey) </span></span>
<span id="cb113-1060"><a href="#cb113-1060" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1061"><a href="#cb113-1061" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1062"><a href="#cb113-1062" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ i(indexyear, contract_intensity_2000, -1) | gvkey + indexyear, data = ., cluster = c("gvkey", "ff_30ind_name")) %&gt;% </span></span>
<span id="cb113-1063"><a href="#cb113-1063" aria-hidden="true" tabindex="-1"></a><span class="in">  iplot(., </span></span>
<span id="cb113-1064"><a href="#cb113-1064" aria-hidden="true" tabindex="-1"></a><span class="in">        xlab = paste("Time to treatment (0 is Year ", base_year, ")", sep = ""),</span></span>
<span id="cb113-1065"><a href="#cb113-1065" aria-hidden="true" tabindex="-1"></a><span class="in">        main = "Treatment Effect (TWFE): ex. IPO and Delisting", </span></span>
<span id="cb113-1066"><a href="#cb113-1066" aria-hidden="true" tabindex="-1"></a><span class="in">        ref.line = FALSE,</span></span>
<span id="cb113-1067"><a href="#cb113-1067" aria-hidden="true" tabindex="-1"></a><span class="in">        ref.line.par = list(col = "red", lty = 2),</span></span>
<span id="cb113-1068"><a href="#cb113-1068" aria-hidden="true" tabindex="-1"></a><span class="in">        pt.join = FALSE</span></span>
<span id="cb113-1069"><a href="#cb113-1069" aria-hidden="true" tabindex="-1"></a><span class="in">        ); axis(1, at = -7:2); abline(v = 0.5, col = "red", lty = 2, lwd = 3) </span></span>
<span id="cb113-1070"><a href="#cb113-1070" aria-hidden="true" tabindex="-1"></a><span class="in">  # fixest::coefplot(sub = "base year: dyear = 2000") </span></span>
<span id="cb113-1071"><a href="#cb113-1071" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-1072"><a href="#cb113-1072" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1073"><a href="#cb113-1073" aria-hidden="true" tabindex="-1"></a>The results are similar to the baseline results in @sec-s3a-try-and-error-with-calender-year-dyear.</span>
<span id="cb113-1074"><a href="#cb113-1074" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1075"><a href="#cb113-1075" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Balanced Panel </span></span>
<span id="cb113-1076"><a href="#cb113-1076" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1077"><a href="#cb113-1077" aria-hidden="true" tabindex="-1"></a>If we restrict our sample to firms having observations in the full sample between 2002 and 2007, the results are as follows:</span>
<span id="cb113-1078"><a href="#cb113-1078" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1079"><a href="#cb113-1079" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a4-did-test2, echo=TRUE, warning=FALSE, message=FALSE, results='hold'}</span></span>
<span id="cb113-1080"><a href="#cb113-1080" aria-hidden="true" tabindex="-1"></a><span class="in">## baseline: </span></span>
<span id="cb113-1081"><a href="#cb113-1081" aria-hidden="true" tabindex="-1"></a><span class="in">cat("\n")</span></span>
<span id="cb113-1082"><a href="#cb113-1082" aria-hidden="true" tabindex="-1"></a><span class="in">cat("(1) Baseline:") </span></span>
<span id="cb113-1083"><a href="#cb113-1083" aria-hidden="true" tabindex="-1"></a><span class="in">cat("\n")</span></span>
<span id="cb113-1084"><a href="#cb113-1084" aria-hidden="true" tabindex="-1"></a><span class="in">model_a4_a &lt;- data_did %&gt;% </span></span>
<span id="cb113-1085"><a href="#cb113-1085" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-1086"><a href="#cb113-1086" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1087"><a href="#cb113-1087" aria-hidden="true" tabindex="-1"></a><span class="in">  ## drop IPO and delisting firms</span></span>
<span id="cb113-1088"><a href="#cb113-1088" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;%</span></span>
<span id="cb113-1089"><a href="#cb113-1089" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1090"><a href="#cb113-1090" aria-hidden="true" tabindex="-1"></a><span class="in">    n_obs = n(), # number of observations for each firm</span></span>
<span id="cb113-1091"><a href="#cb113-1091" aria-hidden="true" tabindex="-1"></a><span class="in">    n_post = sum(post_2005, na.rm = TRUE) # number of obs after 2005</span></span>
<span id="cb113-1092"><a href="#cb113-1092" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-1093"><a href="#cb113-1093" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() %&gt;%</span></span>
<span id="cb113-1094"><a href="#cb113-1094" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(n_obs == 6) %&gt;%</span></span>
<span id="cb113-1095"><a href="#cb113-1095" aria-hidden="true" tabindex="-1"></a><span class="in">  # clean variables</span></span>
<span id="cb113-1096"><a href="#cb113-1096" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1097"><a href="#cb113-1097" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1098"><a href="#cb113-1098" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-1099"><a href="#cb113-1099" aria-hidden="true" tabindex="-1"></a><span class="in">    ind = as.factor(ff_30ind_name), # industry </span></span>
<span id="cb113-1100"><a href="#cb113-1100" aria-hidden="true" tabindex="-1"></a><span class="in">    ind_time = as.factor(paste(ff_30ind_name, dyear, sep = " + ")), </span></span>
<span id="cb113-1101"><a href="#cb113-1101" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1102"><a href="#cb113-1102" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1103"><a href="#cb113-1103" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1104"><a href="#cb113-1104" aria-hidden="true" tabindex="-1"></a><span class="in">  ## adding industry*year FE does not change the results: + ind_time </span></span>
<span id="cb113-1105"><a href="#cb113-1105" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear, data = ., cluster = c("gvkey", "ff_30ind_name")) </span></span>
<span id="cb113-1106"><a href="#cb113-1106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1107"><a href="#cb113-1107" aria-hidden="true" tabindex="-1"></a><span class="in"># model_a4_a %&gt;% fixest::etable()</span></span>
<span id="cb113-1108"><a href="#cb113-1108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1109"><a href="#cb113-1109" aria-hidden="true" tabindex="-1"></a><span class="in">## baseline + industry*year FE: </span></span>
<span id="cb113-1110"><a href="#cb113-1110" aria-hidden="true" tabindex="-1"></a><span class="in">cat("\n")</span></span>
<span id="cb113-1111"><a href="#cb113-1111" aria-hidden="true" tabindex="-1"></a><span class="in">cat("(2) Baseline + Industry*Year FE:") </span></span>
<span id="cb113-1112"><a href="#cb113-1112" aria-hidden="true" tabindex="-1"></a><span class="in">cat("\n")</span></span>
<span id="cb113-1113"><a href="#cb113-1113" aria-hidden="true" tabindex="-1"></a><span class="in">model_a4_b &lt;- data_did %&gt;% </span></span>
<span id="cb113-1114"><a href="#cb113-1114" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-1115"><a href="#cb113-1115" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1116"><a href="#cb113-1116" aria-hidden="true" tabindex="-1"></a><span class="in">  ## drop IPO and delisting firms</span></span>
<span id="cb113-1117"><a href="#cb113-1117" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;%</span></span>
<span id="cb113-1118"><a href="#cb113-1118" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1119"><a href="#cb113-1119" aria-hidden="true" tabindex="-1"></a><span class="in">    n_obs = n(), # number of observations for each firm</span></span>
<span id="cb113-1120"><a href="#cb113-1120" aria-hidden="true" tabindex="-1"></a><span class="in">    n_post = sum(post_2005, na.rm = TRUE) # number of obs after 2005</span></span>
<span id="cb113-1121"><a href="#cb113-1121" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1122"><a href="#cb113-1122" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() %&gt;%</span></span>
<span id="cb113-1123"><a href="#cb113-1123" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(n_obs == 6) %&gt;%</span></span>
<span id="cb113-1124"><a href="#cb113-1124" aria-hidden="true" tabindex="-1"></a><span class="in">  # clean variables</span></span>
<span id="cb113-1125"><a href="#cb113-1125" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1126"><a href="#cb113-1126" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1127"><a href="#cb113-1127" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-1128"><a href="#cb113-1128" aria-hidden="true" tabindex="-1"></a><span class="in">    ind = as.factor(ff_30ind_name), # industry </span></span>
<span id="cb113-1129"><a href="#cb113-1129" aria-hidden="true" tabindex="-1"></a><span class="in">    ind_time = as.factor(paste(ff_30ind_name, dyear, sep = " + ")), </span></span>
<span id="cb113-1130"><a href="#cb113-1130" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1131"><a href="#cb113-1131" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1132"><a href="#cb113-1132" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1133"><a href="#cb113-1133" aria-hidden="true" tabindex="-1"></a><span class="in">  ## adding industry*year FE does not change the results: + ind_time </span></span>
<span id="cb113-1134"><a href="#cb113-1134" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear + ind^dyear, data = ., cluster = c("gvkey", "ff_30ind_name")) </span></span>
<span id="cb113-1135"><a href="#cb113-1135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1136"><a href="#cb113-1136" aria-hidden="true" tabindex="-1"></a><span class="in"># model_a4_b %&gt;% fixest::etable()</span></span>
<span id="cb113-1137"><a href="#cb113-1137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1138"><a href="#cb113-1138" aria-hidden="true" tabindex="-1"></a><span class="in">## baseline + constraints on the leverage: </span></span>
<span id="cb113-1139"><a href="#cb113-1139" aria-hidden="true" tabindex="-1"></a><span class="in">cat("\n")</span></span>
<span id="cb113-1140"><a href="#cb113-1140" aria-hidden="true" tabindex="-1"></a><span class="in">cat("(3) Baseline + Leverage Restrictions:") </span></span>
<span id="cb113-1141"><a href="#cb113-1141" aria-hidden="true" tabindex="-1"></a><span class="in">cat("\n")</span></span>
<span id="cb113-1142"><a href="#cb113-1142" aria-hidden="true" tabindex="-1"></a><span class="in">model_a4_c &lt;- data_did %&gt;% </span></span>
<span id="cb113-1143"><a href="#cb113-1143" aria-hidden="true" tabindex="-1"></a><span class="in">  # drop values outside the range:</span></span>
<span id="cb113-1144"><a href="#cb113-1144" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1145"><a href="#cb113-1145" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 1), yes = book_leverage, no = NA),</span></span>
<span id="cb113-1146"><a href="#cb113-1146" aria-hidden="true" tabindex="-1"></a><span class="in">    debt_ebitda = ifelse(test = (debt_ebitda &gt;= 0 &amp; debt_ebitda &lt;= 15), yes = debt_ebitda, no = NA )</span></span>
<span id="cb113-1147"><a href="#cb113-1147" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1148"><a href="#cb113-1148" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-1149"><a href="#cb113-1149" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1150"><a href="#cb113-1150" aria-hidden="true" tabindex="-1"></a><span class="in">  ## drop IPO and delisting firms</span></span>
<span id="cb113-1151"><a href="#cb113-1151" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;%</span></span>
<span id="cb113-1152"><a href="#cb113-1152" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1153"><a href="#cb113-1153" aria-hidden="true" tabindex="-1"></a><span class="in">    n_obs = n(), # number of observations for each firm</span></span>
<span id="cb113-1154"><a href="#cb113-1154" aria-hidden="true" tabindex="-1"></a><span class="in">    n_post = sum(post_2005, na.rm = TRUE) # number of obs after 2005</span></span>
<span id="cb113-1155"><a href="#cb113-1155" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-1156"><a href="#cb113-1156" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() %&gt;%</span></span>
<span id="cb113-1157"><a href="#cb113-1157" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(n_obs == 6) %&gt;%</span></span>
<span id="cb113-1158"><a href="#cb113-1158" aria-hidden="true" tabindex="-1"></a><span class="in">  # clean variables</span></span>
<span id="cb113-1159"><a href="#cb113-1159" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1160"><a href="#cb113-1160" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1161"><a href="#cb113-1161" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-1162"><a href="#cb113-1162" aria-hidden="true" tabindex="-1"></a><span class="in">    ind = as.factor(ff_30ind_name), # industry </span></span>
<span id="cb113-1163"><a href="#cb113-1163" aria-hidden="true" tabindex="-1"></a><span class="in">    ind_time = as.factor(paste(ff_30ind_name, dyear, sep = " + ")), </span></span>
<span id="cb113-1164"><a href="#cb113-1164" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1165"><a href="#cb113-1165" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1166"><a href="#cb113-1166" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1167"><a href="#cb113-1167" aria-hidden="true" tabindex="-1"></a><span class="in">  ## adding industry*year FE does not change the results: + ind_time </span></span>
<span id="cb113-1168"><a href="#cb113-1168" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear, data = ., cluster = c("gvkey", "ff_30ind_name")) </span></span>
<span id="cb113-1169"><a href="#cb113-1169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1170"><a href="#cb113-1170" aria-hidden="true" tabindex="-1"></a><span class="in"># model_a4_c %&gt;% fixest::etable()</span></span>
<span id="cb113-1171"><a href="#cb113-1171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1172"><a href="#cb113-1172" aria-hidden="true" tabindex="-1"></a><span class="in">## baseline + industry*year FE + constraints on the leverage: </span></span>
<span id="cb113-1173"><a href="#cb113-1173" aria-hidden="true" tabindex="-1"></a><span class="in">cat("\n")</span></span>
<span id="cb113-1174"><a href="#cb113-1174" aria-hidden="true" tabindex="-1"></a><span class="in">cat("(4) Baseline + industry*year FE + Leverage Restrictions:") </span></span>
<span id="cb113-1175"><a href="#cb113-1175" aria-hidden="true" tabindex="-1"></a><span class="in">cat("\n")</span></span>
<span id="cb113-1176"><a href="#cb113-1176" aria-hidden="true" tabindex="-1"></a><span class="in">model_a4_d &lt;- data_did %&gt;% </span></span>
<span id="cb113-1177"><a href="#cb113-1177" aria-hidden="true" tabindex="-1"></a><span class="in">  # drop values outside the range:</span></span>
<span id="cb113-1178"><a href="#cb113-1178" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1179"><a href="#cb113-1179" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 1), yes = book_leverage, no = NA),</span></span>
<span id="cb113-1180"><a href="#cb113-1180" aria-hidden="true" tabindex="-1"></a><span class="in">    debt_ebitda = ifelse(test = (debt_ebitda &gt;= 0 &amp; debt_ebitda &lt;= 15), yes = debt_ebitda, no = NA )</span></span>
<span id="cb113-1181"><a href="#cb113-1181" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1182"><a href="#cb113-1182" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-1183"><a href="#cb113-1183" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1184"><a href="#cb113-1184" aria-hidden="true" tabindex="-1"></a><span class="in">  ## drop IPO and delisting firms</span></span>
<span id="cb113-1185"><a href="#cb113-1185" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;%</span></span>
<span id="cb113-1186"><a href="#cb113-1186" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1187"><a href="#cb113-1187" aria-hidden="true" tabindex="-1"></a><span class="in">    n_obs = n(), # number of observations for each firm</span></span>
<span id="cb113-1188"><a href="#cb113-1188" aria-hidden="true" tabindex="-1"></a><span class="in">    n_post = sum(post_2005, na.rm = TRUE) # number of obs after 2005</span></span>
<span id="cb113-1189"><a href="#cb113-1189" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-1190"><a href="#cb113-1190" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() %&gt;%</span></span>
<span id="cb113-1191"><a href="#cb113-1191" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(n_obs == 6) %&gt;%</span></span>
<span id="cb113-1192"><a href="#cb113-1192" aria-hidden="true" tabindex="-1"></a><span class="in">  # clean variables</span></span>
<span id="cb113-1193"><a href="#cb113-1193" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1194"><a href="#cb113-1194" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1195"><a href="#cb113-1195" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-1196"><a href="#cb113-1196" aria-hidden="true" tabindex="-1"></a><span class="in">    ind = as.factor(ff_30ind_name), # industry </span></span>
<span id="cb113-1197"><a href="#cb113-1197" aria-hidden="true" tabindex="-1"></a><span class="in">    ind_time = as.factor(paste(ff_30ind_name, dyear, sep = " + ")), </span></span>
<span id="cb113-1198"><a href="#cb113-1198" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1199"><a href="#cb113-1199" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1200"><a href="#cb113-1200" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1201"><a href="#cb113-1201" aria-hidden="true" tabindex="-1"></a><span class="in">  ## adding industry*year FE does not change the results: + ind_time </span></span>
<span id="cb113-1202"><a href="#cb113-1202" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear + ind^dyear, data = ., cluster = c("gvkey", "ff_30ind_name")) </span></span>
<span id="cb113-1203"><a href="#cb113-1203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1204"><a href="#cb113-1204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1205"><a href="#cb113-1205" aria-hidden="true" tabindex="-1"></a><span class="in">cat("\n \n")</span></span>
<span id="cb113-1206"><a href="#cb113-1206" aria-hidden="true" tabindex="-1"></a><span class="in">etable(list(`(1) Full Sample` = model_a4_a, </span></span>
<span id="cb113-1207"><a href="#cb113-1207" aria-hidden="true" tabindex="-1"></a><span class="in">            `(2) Full Sample` = model_a4_b, </span></span>
<span id="cb113-1208"><a href="#cb113-1208" aria-hidden="true" tabindex="-1"></a><span class="in">            `(3) Filtered Sample` = model_a4_c, </span></span>
<span id="cb113-1209"><a href="#cb113-1209" aria-hidden="true" tabindex="-1"></a><span class="in">            `(4) Filtered Sample` = model_a4_d  </span></span>
<span id="cb113-1210"><a href="#cb113-1210" aria-hidden="true" tabindex="-1"></a><span class="in">            ), </span></span>
<span id="cb113-1211"><a href="#cb113-1211" aria-hidden="true" tabindex="-1"></a><span class="in">       cluster = c("gvkey", "ff_30ind_name"))</span></span>
<span id="cb113-1212"><a href="#cb113-1212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1213"><a href="#cb113-1213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1214"><a href="#cb113-1214" aria-hidden="true" tabindex="-1"></a><span class="in">## plot the coefficients pre- and post-treatment: </span></span>
<span id="cb113-1215"><a href="#cb113-1215" aria-hidden="true" tabindex="-1"></a><span class="in">data_did %&gt;% </span></span>
<span id="cb113-1216"><a href="#cb113-1216" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, indexyear, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-1217"><a href="#cb113-1217" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2000 &amp; dyear &lt;= 2007) %&gt;%</span></span>
<span id="cb113-1218"><a href="#cb113-1218" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;%</span></span>
<span id="cb113-1219"><a href="#cb113-1219" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1220"><a href="#cb113-1220" aria-hidden="true" tabindex="-1"></a><span class="in">    n_obs = sum(dyear &gt;= 2002 &amp; dyear &lt;= 2007), # number of observations for each firm</span></span>
<span id="cb113-1221"><a href="#cb113-1221" aria-hidden="true" tabindex="-1"></a><span class="in">    n_post = sum(post_2005, na.rm = TRUE) # number of obs after 2005</span></span>
<span id="cb113-1222"><a href="#cb113-1222" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-1223"><a href="#cb113-1223" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() %&gt;%</span></span>
<span id="cb113-1224"><a href="#cb113-1224" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(n_obs == 6) %&gt;%</span></span>
<span id="cb113-1225"><a href="#cb113-1225" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1226"><a href="#cb113-1226" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey) </span></span>
<span id="cb113-1227"><a href="#cb113-1227" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1228"><a href="#cb113-1228" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1229"><a href="#cb113-1229" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ i(indexyear, contract_intensity_2000, -1) | gvkey + indexyear, data = ., cluster = c("gvkey", "ff_30ind_name")) %&gt;% </span></span>
<span id="cb113-1230"><a href="#cb113-1230" aria-hidden="true" tabindex="-1"></a><span class="in">  iplot(., </span></span>
<span id="cb113-1231"><a href="#cb113-1231" aria-hidden="true" tabindex="-1"></a><span class="in">        xlab = paste("Time to treatment (0 is Year ", base_year, ")", sep = ""),</span></span>
<span id="cb113-1232"><a href="#cb113-1232" aria-hidden="true" tabindex="-1"></a><span class="in">        main = "Treatment Effect (TWFE): ex. observations with missing values", </span></span>
<span id="cb113-1233"><a href="#cb113-1233" aria-hidden="true" tabindex="-1"></a><span class="in">        ref.line = FALSE,</span></span>
<span id="cb113-1234"><a href="#cb113-1234" aria-hidden="true" tabindex="-1"></a><span class="in">        ref.line.par = list(col = "red", lty = 2),</span></span>
<span id="cb113-1235"><a href="#cb113-1235" aria-hidden="true" tabindex="-1"></a><span class="in">        pt.join = FALSE</span></span>
<span id="cb113-1236"><a href="#cb113-1236" aria-hidden="true" tabindex="-1"></a><span class="in">        ); axis(1, at = -7:2); abline(v = 0.5, col = "red", lty = 2, lwd = 3) </span></span>
<span id="cb113-1237"><a href="#cb113-1237" aria-hidden="true" tabindex="-1"></a><span class="in">  # fixest::coefplot(sub = "base year: dyear = 2000") </span></span>
<span id="cb113-1238"><a href="#cb113-1238" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-1239"><a href="#cb113-1239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1240"><a href="#cb113-1240" aria-hidden="true" tabindex="-1"></a>The results are robust to the sample selection.</span>
<span id="cb113-1241"><a href="#cb113-1241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1242"><a href="#cb113-1242" aria-hidden="true" tabindex="-1"></a><span class="fu">### A5. Do different industries behave differently? {#sec-a5-industry-heterogeneity}</span></span>
<span id="cb113-1243"><a href="#cb113-1243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1244"><a href="#cb113-1244" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a5-did-industry, echo=TRUE, fig.height=10, fig.width=15, warning=FALSE, message=FALSE}</span></span>
<span id="cb113-1245"><a href="#cb113-1245" aria-hidden="true" tabindex="-1"></a><span class="in">#| column: page-right </span></span>
<span id="cb113-1246"><a href="#cb113-1246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1247"><a href="#cb113-1247" aria-hidden="true" tabindex="-1"></a><span class="in">## create leverage variables </span></span>
<span id="cb113-1248"><a href="#cb113-1248" aria-hidden="true" tabindex="-1"></a><span class="in">data &lt;- compustat_na %&gt;% </span></span>
<span id="cb113-1249"><a href="#cb113-1249" aria-hidden="true" tabindex="-1"></a><span class="in">  # filter(at &gt; 0) %&gt;% </span></span>
<span id="cb113-1250"><a href="#cb113-1250" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(indfmt == "INDL") %&gt;% ## remove all financial firms </span></span>
<span id="cb113-1251"><a href="#cb113-1251" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1252"><a href="#cb113-1252" aria-hidden="true" tabindex="-1"></a><span class="in">    ## leverage variables: </span></span>
<span id="cb113-1253"><a href="#cb113-1253" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = (dlc + dltt) / at, </span></span>
<span id="cb113-1254"><a href="#cb113-1254" aria-hidden="true" tabindex="-1"></a><span class="in">    debt_ebitda = (dlc + dltt) / ebitda, </span></span>
<span id="cb113-1255"><a href="#cb113-1255" aria-hidden="true" tabindex="-1"></a><span class="in">    ## treatment intensity: </span></span>
<span id="cb113-1256"><a href="#cb113-1256" aria-hidden="true" tabindex="-1"></a><span class="in">    totalrent = mrc1 + mrc2 + mrc3 + mrc4 + mrc5 + mrct, # total rent w/o discount</span></span>
<span id="cb113-1257"><a href="#cb113-1257" aria-hidden="true" tabindex="-1"></a><span class="in">    # contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb113-1258"><a href="#cb113-1258" aria-hidden="true" tabindex="-1"></a><span class="in">    contract_intensity = (dclo + totalrent) / at, # executory contract intensity</span></span>
<span id="cb113-1259"><a href="#cb113-1259" aria-hidden="true" tabindex="-1"></a><span class="in">    ## other variables: </span></span>
<span id="cb113-1260"><a href="#cb113-1260" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.integer(substr(datadate, start = 1, stop = 4)) # data year</span></span>
<span id="cb113-1261"><a href="#cb113-1261" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-1262"><a href="#cb113-1262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1263"><a href="#cb113-1263" aria-hidden="true" tabindex="-1"></a><span class="in">data_firm &lt;- data %&gt;% </span></span>
<span id="cb113-1264"><a href="#cb113-1264" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear == 2000) %&gt;% # use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb113-1265"><a href="#cb113-1265" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, contract_intensity_2000 = contract_intensity) %&gt;% </span></span>
<span id="cb113-1266"><a href="#cb113-1266" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;% </span></span>
<span id="cb113-1267"><a href="#cb113-1267" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(contract_intensity_2000 = mean(contract_intensity_2000, na.rm = TRUE) ) %&gt;% </span></span>
<span id="cb113-1268"><a href="#cb113-1268" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() </span></span>
<span id="cb113-1269"><a href="#cb113-1269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1270"><a href="#cb113-1270" aria-hidden="true" tabindex="-1"></a><span class="in">FF_30ind &lt;- as_tibble(read.csv(file = "C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"))</span></span>
<span id="cb113-1271"><a href="#cb113-1271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1272"><a href="#cb113-1272" aria-hidden="true" tabindex="-1"></a><span class="in">data_did_withind &lt;- data %&gt;% </span></span>
<span id="cb113-1273"><a href="#cb113-1273" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable </span></span>
<span id="cb113-1274"><a href="#cb113-1274" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm, by = join_by(gvkey) ) %&gt;% </span></span>
<span id="cb113-1275"><a href="#cb113-1275" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classification </span></span>
<span id="cb113-1276"><a href="#cb113-1276" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;% </span></span>
<span id="cb113-1277"><a href="#cb113-1277" aria-hidden="true" tabindex="-1"></a><span class="in">  ## pre- &amp; post- </span></span>
<span id="cb113-1278"><a href="#cb113-1278" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1279"><a href="#cb113-1279" aria-hidden="true" tabindex="-1"></a><span class="in">    indexyear = (dyear - base_year), # year index with 2005 as base 0.</span></span>
<span id="cb113-1280"><a href="#cb113-1280" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(dyear &gt; base_year, yes = 1, no = 0)  # whether it is after the 2005 reform </span></span>
<span id="cb113-1281"><a href="#cb113-1281" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1282"><a href="#cb113-1282" aria-hidden="true" tabindex="-1"></a><span class="in">  ## remove some industries: </span></span>
<span id="cb113-1283"><a href="#cb113-1283" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb113-1284"><a href="#cb113-1284" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 20, # exclude Utiltiy (number 20) </span></span>
<span id="cb113-1285"><a href="#cb113-1285" aria-hidden="true" tabindex="-1"></a><span class="in">    !(sic &gt;= 6000 &amp; sic &lt;= 6199) # exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb113-1286"><a href="#cb113-1286" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-1287"><a href="#cb113-1287" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb113-1288"><a href="#cb113-1288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1289"><a href="#cb113-1289" aria-hidden="true" tabindex="-1"></a><span class="in">## did analysis: </span></span>
<span id="cb113-1290"><a href="#cb113-1290" aria-hidden="true" tabindex="-1"></a><span class="in">model_a5_average &lt;- data_did_withind %&gt;% </span></span>
<span id="cb113-1291"><a href="#cb113-1291" aria-hidden="true" tabindex="-1"></a><span class="in">      select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name, ff_30ind_desc, ff_30ind) %&gt;% </span></span>
<span id="cb113-1292"><a href="#cb113-1292" aria-hidden="true" tabindex="-1"></a><span class="in">      filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1293"><a href="#cb113-1293" aria-hidden="true" tabindex="-1"></a><span class="in">      mutate(</span></span>
<span id="cb113-1294"><a href="#cb113-1294" aria-hidden="true" tabindex="-1"></a><span class="in">        gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1295"><a href="#cb113-1295" aria-hidden="true" tabindex="-1"></a><span class="in">        dyear = as.factor(dyear), </span></span>
<span id="cb113-1296"><a href="#cb113-1296" aria-hidden="true" tabindex="-1"></a><span class="in">        ff_30ind = as.factor(paste(ff_30ind, ff_30ind_desc, sep = ": ")), </span></span>
<span id="cb113-1297"><a href="#cb113-1297" aria-hidden="true" tabindex="-1"></a><span class="in">        group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1298"><a href="#cb113-1298" aria-hidden="true" tabindex="-1"></a><span class="in">      ) %&gt;% </span></span>
<span id="cb113-1299"><a href="#cb113-1299" aria-hidden="true" tabindex="-1"></a><span class="in">      na.omit() %&gt;% </span></span>
<span id="cb113-1300"><a href="#cb113-1300" aria-hidden="true" tabindex="-1"></a><span class="in">      fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear + ff_30ind^dyear, data = ., cluster = c("gvkey", "ff_30ind"))</span></span>
<span id="cb113-1301"><a href="#cb113-1301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1302"><a href="#cb113-1302" aria-hidden="true" tabindex="-1"></a><span class="in">model_a5_average %&gt;% fixest::etable()</span></span>
<span id="cb113-1303"><a href="#cb113-1303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1304"><a href="#cb113-1304" aria-hidden="true" tabindex="-1"></a><span class="in">## did analysis for the treatment effects in each industry: </span></span>
<span id="cb113-1305"><a href="#cb113-1305" aria-hidden="true" tabindex="-1"></a><span class="in">did_withind_model &lt;- data_did_withind %&gt;% </span></span>
<span id="cb113-1306"><a href="#cb113-1306" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name, ff_30ind_desc, ff_30ind) %&gt;% </span></span>
<span id="cb113-1307"><a href="#cb113-1307" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1308"><a href="#cb113-1308" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1309"><a href="#cb113-1309" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1310"><a href="#cb113-1310" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-1311"><a href="#cb113-1311" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind = as.factor(paste(ff_30ind, ff_30ind_desc, sep = ": ")), </span></span>
<span id="cb113-1312"><a href="#cb113-1312" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1313"><a href="#cb113-1313" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1314"><a href="#cb113-1314" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1315"><a href="#cb113-1315" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005:ff_30ind | gvkey + dyear + ff_30ind^dyear, data = ., cluster = c("gvkey"))</span></span>
<span id="cb113-1316"><a href="#cb113-1316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1317"><a href="#cb113-1317" aria-hidden="true" tabindex="-1"></a><span class="in">did_withind_model %&gt;% fixest::etable()</span></span>
<span id="cb113-1318"><a href="#cb113-1318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1319"><a href="#cb113-1319" aria-hidden="true" tabindex="-1"></a><span class="in">fixest::coefplot(did_withind_model,</span></span>
<span id="cb113-1320"><a href="#cb113-1320" aria-hidden="true" tabindex="-1"></a><span class="in">                 order = str_extract(string = names(sort(coef(did_withind_model), decreasing = FALSE)), pattern = "(?&lt;=ind).*"), </span></span>
<span id="cb113-1321"><a href="#cb113-1321" aria-hidden="true" tabindex="-1"></a><span class="in">                 horiz = TRUE, </span></span>
<span id="cb113-1322"><a href="#cb113-1322" aria-hidden="true" tabindex="-1"></a><span class="in">                 drop = "Print", # remove the number 5: Printing &amp; Publishing</span></span>
<span id="cb113-1323"><a href="#cb113-1323" aria-hidden="true" tabindex="-1"></a><span class="in">                 main = "Treatment Effect Estimates for Fama-French 30 Industries", </span></span>
<span id="cb113-1324"><a href="#cb113-1324" aria-hidden="true" tabindex="-1"></a><span class="in">                 sub = "*Printing and Publishing (Industry 5) is excluded. Red dashed line indicates the average treatment effect."</span></span>
<span id="cb113-1325"><a href="#cb113-1325" aria-hidden="true" tabindex="-1"></a><span class="in">                 ); abline(v = model_a5_average$coefficients, col = 2, lty = 2, lwd = 3)</span></span>
<span id="cb113-1326"><a href="#cb113-1326" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-1327"><a href="#cb113-1327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1328"><a href="#cb113-1328" aria-hidden="true" tabindex="-1"></a>In this figure, we present the heterogeneous treatment effect of the 2005 policy on the firm leverage across different industries. We include the firm, year and the industry-year fixed effects in the difference-in-difference analysis. We can see that the treatment effect is negative and statistically significant in Business equipment (23), Healthcare (8), Petroleum and Nature Gas (19), Personal and Business Services (22). While the effect is positive and statistically significant in Automobiles and Trucks (15) and Aircraft, ships, and rail road equipment (16).</span>
<span id="cb113-1329"><a href="#cb113-1329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1330"><a href="#cb113-1330" aria-hidden="true" tabindex="-1"></a>::: {#nte-ind-obs .callout-note .column-margin collapse="TRUE"}</span>
<span id="cb113-1331"><a href="#cb113-1331" aria-hidden="true" tabindex="-1"></a>Number of observations in each industry</span>
<span id="cb113-1332"><a href="#cb113-1332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1333"><a href="#cb113-1333" aria-hidden="true" tabindex="-1"></a><span class="in">```{r ind-obs, echo=TRUE}</span></span>
<span id="cb113-1334"><a href="#cb113-1334" aria-hidden="true" tabindex="-1"></a><span class="in">data_did_withind %&gt;% </span></span>
<span id="cb113-1335"><a href="#cb113-1335" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;%  </span></span>
<span id="cb113-1336"><a href="#cb113-1336" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;%</span></span>
<span id="cb113-1337"><a href="#cb113-1337" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(ff_30ind) %&gt;% </span></span>
<span id="cb113-1338"><a href="#cb113-1338" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(n_obs = n(), ff_30ind_name = unique(ff_30ind_desc)) %&gt;%</span></span>
<span id="cb113-1339"><a href="#cb113-1339" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() %&gt;% </span></span>
<span id="cb113-1340"><a href="#cb113-1340" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(`n_per %` = round(n_obs / sum(n_obs) * 100, digits = 2)) %&gt;% </span></span>
<span id="cb113-1341"><a href="#cb113-1341" aria-hidden="true" tabindex="-1"></a><span class="in">  arrange(-n_obs) %&gt;% </span></span>
<span id="cb113-1342"><a href="#cb113-1342" aria-hidden="true" tabindex="-1"></a><span class="in">  gt() %&gt;% </span></span>
<span id="cb113-1343"><a href="#cb113-1343" aria-hidden="true" tabindex="-1"></a><span class="in">  tab_style(</span></span>
<span id="cb113-1344"><a href="#cb113-1344" aria-hidden="true" tabindex="-1"></a><span class="in">    style = cell_text(size = "x-small"),  # Reduce font size</span></span>
<span id="cb113-1345"><a href="#cb113-1345" aria-hidden="true" tabindex="-1"></a><span class="in">    locations = cells_column_labels(columns = everything()) # reduce the size of tab headers </span></span>
<span id="cb113-1346"><a href="#cb113-1346" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1347"><a href="#cb113-1347" aria-hidden="true" tabindex="-1"></a><span class="in">  tab_style(</span></span>
<span id="cb113-1348"><a href="#cb113-1348" aria-hidden="true" tabindex="-1"></a><span class="in">    style = cell_text(size = "x-small"),  # Reduce font size</span></span>
<span id="cb113-1349"><a href="#cb113-1349" aria-hidden="true" tabindex="-1"></a><span class="in">    locations = cells_body()</span></span>
<span id="cb113-1350"><a href="#cb113-1350" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-1351"><a href="#cb113-1351" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-1352"><a href="#cb113-1352" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb113-1353"><a href="#cb113-1353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1354"><a href="#cb113-1354" aria-hidden="true" tabindex="-1"></a>This heterogeneous treatment effect is consistent with our hypothesis. The changes in Section 365(d)(4) are mainly on the leases of non-residential real property and thus should have a significant negative impact on the industries with more non-residential real property leases, e.g. industry 8, 23, 22. Its impact on industries with a lot of executory contract unrelated to the real property (e.g. industry 15, 16) should be non-negative.</span>
<span id="cb113-1355"><a href="#cb113-1355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1356"><a href="#cb113-1356" aria-hidden="true" tabindex="-1"></a>In the figure, we remove the Industry 5 (Printing &amp; Publishing). Comparing to industries with positive treatment effects, industries with negative treatment effects compose the majority of observations in the sample. This is consistent with our main results in @sec-s3a-try-and-error-with-calender-year-dyear and in @sec-a4-firms-wo-missing.</span>
<span id="cb113-1357"><a href="#cb113-1357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1358"><a href="#cb113-1358" aria-hidden="true" tabindex="-1"></a>\pagebreak</span>
<span id="cb113-1359"><a href="#cb113-1359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1360"><a href="#cb113-1360" aria-hidden="true" tabindex="-1"></a><span class="fu">### A6. Re-run Main Tests with More Filters</span></span>
<span id="cb113-1361"><a href="#cb113-1361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1362"><a href="#cb113-1362" aria-hidden="true" tabindex="-1"></a>In @sec-a2-results-using-data-filters-in-the-main-paper, we find that restricting the dependent variable $\in <span class="co">[</span><span class="ot">0,1</span><span class="co">]</span>$ significantly impact the treatment effect estimate from the DiD analysis. We therefore re-do main analysis from previous sections.</span>
<span id="cb113-1363"><a href="#cb113-1363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1364"><a href="#cb113-1364" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Dataset without filters (i.e. baseline)</span></span>
<span id="cb113-1365"><a href="#cb113-1365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1366"><a href="#cb113-1366" aria-hidden="true" tabindex="-1"></a>In this setting, we do not put any filters on any variables in the regression. The result is exactly the same as in @sec-s3a-try-and-error-with-calender-year-dyear.</span>
<span id="cb113-1367"><a href="#cb113-1367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1368"><a href="#cb113-1368" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a6-did-no-filter, echo=TRUE, warning=FALSE, message=FALSE}</span></span>
<span id="cb113-1369"><a href="#cb113-1369" aria-hidden="true" tabindex="-1"></a><span class="in">rm(list = ls()[! (ls() %in% c("base_year", "compustat_na"))])</span></span>
<span id="cb113-1370"><a href="#cb113-1370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1371"><a href="#cb113-1371" aria-hidden="true" tabindex="-1"></a><span class="in">## create leverage variables </span></span>
<span id="cb113-1372"><a href="#cb113-1372" aria-hidden="true" tabindex="-1"></a><span class="in">data &lt;- compustat_na %&gt;% </span></span>
<span id="cb113-1373"><a href="#cb113-1373" aria-hidden="true" tabindex="-1"></a><span class="in">  # filter(at &gt; 0) %&gt;% </span></span>
<span id="cb113-1374"><a href="#cb113-1374" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(indfmt == "INDL") %&gt;% ## remove all financial firms</span></span>
<span id="cb113-1375"><a href="#cb113-1375" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1376"><a href="#cb113-1376" aria-hidden="true" tabindex="-1"></a><span class="in">    ## leverage variables: </span></span>
<span id="cb113-1377"><a href="#cb113-1377" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = (dlc + dltt) / at, </span></span>
<span id="cb113-1378"><a href="#cb113-1378" aria-hidden="true" tabindex="-1"></a><span class="in">    debt_ebitda = (dlc + dltt) / ebitda, </span></span>
<span id="cb113-1379"><a href="#cb113-1379" aria-hidden="true" tabindex="-1"></a><span class="in">    ## treatment intensity: </span></span>
<span id="cb113-1380"><a href="#cb113-1380" aria-hidden="true" tabindex="-1"></a><span class="in">    totalrent = mrc1 + mrc2 + mrc3 + mrc4 + mrc5 + mrct, # total rent w/o discount</span></span>
<span id="cb113-1381"><a href="#cb113-1381" aria-hidden="true" tabindex="-1"></a><span class="in">    # contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb113-1382"><a href="#cb113-1382" aria-hidden="true" tabindex="-1"></a><span class="in">    contract_intensity = (dclo + totalrent) / at, # executory contract intensity</span></span>
<span id="cb113-1383"><a href="#cb113-1383" aria-hidden="true" tabindex="-1"></a><span class="in">    # contract_intensity = (totalrent) / at, # executory contract intensity</span></span>
<span id="cb113-1384"><a href="#cb113-1384" aria-hidden="true" tabindex="-1"></a><span class="in">    ## other variables: </span></span>
<span id="cb113-1385"><a href="#cb113-1385" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.integer(substr(datadate, start = 1, stop = 4)) # data year </span></span>
<span id="cb113-1386"><a href="#cb113-1386" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-1387"><a href="#cb113-1387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1388"><a href="#cb113-1388" aria-hidden="true" tabindex="-1"></a><span class="in">data_firm &lt;- data %&gt;% </span></span>
<span id="cb113-1389"><a href="#cb113-1389" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear == 2000) %&gt;% # use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb113-1390"><a href="#cb113-1390" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, contract_intensity_2000 = contract_intensity) %&gt;% </span></span>
<span id="cb113-1391"><a href="#cb113-1391" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;% </span></span>
<span id="cb113-1392"><a href="#cb113-1392" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(contract_intensity_2000 = mean(contract_intensity_2000, na.rm = TRUE) ) %&gt;% </span></span>
<span id="cb113-1393"><a href="#cb113-1393" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() </span></span>
<span id="cb113-1394"><a href="#cb113-1394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1395"><a href="#cb113-1395" aria-hidden="true" tabindex="-1"></a><span class="in">FF_30ind &lt;- as_tibble(read.csv(file = "C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"))</span></span>
<span id="cb113-1396"><a href="#cb113-1396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1397"><a href="#cb113-1397" aria-hidden="true" tabindex="-1"></a><span class="in">data_did &lt;- data %&gt;% </span></span>
<span id="cb113-1398"><a href="#cb113-1398" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable </span></span>
<span id="cb113-1399"><a href="#cb113-1399" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm, by = join_by(gvkey) ) %&gt;% </span></span>
<span id="cb113-1400"><a href="#cb113-1400" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classification </span></span>
<span id="cb113-1401"><a href="#cb113-1401" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;% </span></span>
<span id="cb113-1402"><a href="#cb113-1402" aria-hidden="true" tabindex="-1"></a><span class="in">  ## exclude certain industries </span></span>
<span id="cb113-1403"><a href="#cb113-1403" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb113-1404"><a href="#cb113-1404" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 20, # exclude Utiltiy (number 20) </span></span>
<span id="cb113-1405"><a href="#cb113-1405" aria-hidden="true" tabindex="-1"></a><span class="in">    !(sic &gt;= 6000 &amp; sic &lt;= 6199) # exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb113-1406"><a href="#cb113-1406" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1407"><a href="#cb113-1407" aria-hidden="true" tabindex="-1"></a><span class="in">  ## pre- &amp; post- </span></span>
<span id="cb113-1408"><a href="#cb113-1408" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1409"><a href="#cb113-1409" aria-hidden="true" tabindex="-1"></a><span class="in">    indexyear = (dyear - base_year), # year index with 2005 as base 0.</span></span>
<span id="cb113-1410"><a href="#cb113-1410" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(dyear &gt; base_year, yes = 1, no = 0)  # whether it is after the 2005 reform </span></span>
<span id="cb113-1411"><a href="#cb113-1411" aria-hidden="true" tabindex="-1"></a><span class="in">  ) # %&gt;% </span></span>
<span id="cb113-1412"><a href="#cb113-1412" aria-hidden="true" tabindex="-1"></a><span class="in">  # # drop values outside the range:</span></span>
<span id="cb113-1413"><a href="#cb113-1413" aria-hidden="true" tabindex="-1"></a><span class="in">  # mutate(</span></span>
<span id="cb113-1414"><a href="#cb113-1414" aria-hidden="true" tabindex="-1"></a><span class="in">  #   book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 1), yes = book_leverage, no = NA),</span></span>
<span id="cb113-1415"><a href="#cb113-1415" aria-hidden="true" tabindex="-1"></a><span class="in">  #   debt_ebitda = ifelse(test = (debt_ebitda &gt;= 0 &amp; debt_ebitda &lt;= 15), yes = debt_ebitda, no = NA )</span></span>
<span id="cb113-1416"><a href="#cb113-1416" aria-hidden="true" tabindex="-1"></a><span class="in">  # )</span></span>
<span id="cb113-1417"><a href="#cb113-1417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1418"><a href="#cb113-1418" aria-hidden="true" tabindex="-1"></a><span class="in">etable(</span></span>
<span id="cb113-1419"><a href="#cb113-1419" aria-hidden="true" tabindex="-1"></a><span class="in">  `(1)` = data_did %&gt;% </span></span>
<span id="cb113-1420"><a href="#cb113-1420" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-1421"><a href="#cb113-1421" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1422"><a href="#cb113-1422" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1423"><a href="#cb113-1423" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1424"><a href="#cb113-1424" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-1425"><a href="#cb113-1425" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1426"><a href="#cb113-1426" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1427"><a href="#cb113-1427" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1428"><a href="#cb113-1428" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear, data = ., cluster = c("gvkey", "ff_30ind_name")), </span></span>
<span id="cb113-1429"><a href="#cb113-1429" aria-hidden="true" tabindex="-1"></a><span class="in">  `(2)` = data_did %&gt;% </span></span>
<span id="cb113-1430"><a href="#cb113-1430" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-1431"><a href="#cb113-1431" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1432"><a href="#cb113-1432" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1433"><a href="#cb113-1433" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1434"><a href="#cb113-1434" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-1435"><a href="#cb113-1435" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1436"><a href="#cb113-1436" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1437"><a href="#cb113-1437" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1438"><a href="#cb113-1438" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear + ff_30ind_name^dyear, data = ., cluster = c("gvkey", "ff_30ind_name")) </span></span>
<span id="cb113-1439"><a href="#cb113-1439" aria-hidden="true" tabindex="-1"></a><span class="in">) </span></span>
<span id="cb113-1440"><a href="#cb113-1440" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-1441"><a href="#cb113-1441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1442"><a href="#cb113-1442" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Dataset with filters on `at`</span></span>
<span id="cb113-1443"><a href="#cb113-1443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1444"><a href="#cb113-1444" aria-hidden="true" tabindex="-1"></a>For <span class="in">`at &gt; 0`</span>, the results are invariant.</span>
<span id="cb113-1445"><a href="#cb113-1445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1446"><a href="#cb113-1446" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a6-did-filter-at-0, echo=TRUE, warning=FALSE, message=FALSE}</span></span>
<span id="cb113-1447"><a href="#cb113-1447" aria-hidden="true" tabindex="-1"></a><span class="in">rm(list = ls()[! (ls() %in% c("base_year", "compustat_na"))])</span></span>
<span id="cb113-1448"><a href="#cb113-1448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1449"><a href="#cb113-1449" aria-hidden="true" tabindex="-1"></a><span class="in">## create leverage variables </span></span>
<span id="cb113-1450"><a href="#cb113-1450" aria-hidden="true" tabindex="-1"></a><span class="in">data &lt;- compustat_na %&gt;% </span></span>
<span id="cb113-1451"><a href="#cb113-1451" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(at &gt; 0) %&gt;% </span></span>
<span id="cb113-1452"><a href="#cb113-1452" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(indfmt == "INDL") %&gt;% ## remove all financial firms</span></span>
<span id="cb113-1453"><a href="#cb113-1453" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1454"><a href="#cb113-1454" aria-hidden="true" tabindex="-1"></a><span class="in">    ## leverage variables: </span></span>
<span id="cb113-1455"><a href="#cb113-1455" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = (dlc + dltt) / at, </span></span>
<span id="cb113-1456"><a href="#cb113-1456" aria-hidden="true" tabindex="-1"></a><span class="in">    debt_ebitda = (dlc + dltt) / ebitda, </span></span>
<span id="cb113-1457"><a href="#cb113-1457" aria-hidden="true" tabindex="-1"></a><span class="in">    ## treatment intensity: </span></span>
<span id="cb113-1458"><a href="#cb113-1458" aria-hidden="true" tabindex="-1"></a><span class="in">    totalrent = mrc1 + mrc2 + mrc3 + mrc4 + mrc5 + mrct, # total rent w/o discount</span></span>
<span id="cb113-1459"><a href="#cb113-1459" aria-hidden="true" tabindex="-1"></a><span class="in">    # contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb113-1460"><a href="#cb113-1460" aria-hidden="true" tabindex="-1"></a><span class="in">    contract_intensity = (dclo + totalrent) / at, # executory contract intensity</span></span>
<span id="cb113-1461"><a href="#cb113-1461" aria-hidden="true" tabindex="-1"></a><span class="in">    # contract_intensity = (totalrent) / at, # executory contract intensity</span></span>
<span id="cb113-1462"><a href="#cb113-1462" aria-hidden="true" tabindex="-1"></a><span class="in">    ## other variables: </span></span>
<span id="cb113-1463"><a href="#cb113-1463" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.integer(substr(datadate, start = 1, stop = 4)) # data year </span></span>
<span id="cb113-1464"><a href="#cb113-1464" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1465"><a href="#cb113-1465" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(book_leverage &gt;= 0)</span></span>
<span id="cb113-1466"><a href="#cb113-1466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1467"><a href="#cb113-1467" aria-hidden="true" tabindex="-1"></a><span class="in">data_firm &lt;- data %&gt;% </span></span>
<span id="cb113-1468"><a href="#cb113-1468" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear == 2000) %&gt;% # use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb113-1469"><a href="#cb113-1469" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, contract_intensity_2000 = contract_intensity) %&gt;% </span></span>
<span id="cb113-1470"><a href="#cb113-1470" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;% </span></span>
<span id="cb113-1471"><a href="#cb113-1471" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(contract_intensity_2000 = mean(contract_intensity_2000, na.rm = TRUE) ) %&gt;% </span></span>
<span id="cb113-1472"><a href="#cb113-1472" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() </span></span>
<span id="cb113-1473"><a href="#cb113-1473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1474"><a href="#cb113-1474" aria-hidden="true" tabindex="-1"></a><span class="in">FF_30ind &lt;- as_tibble(read.csv(file = "C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"))</span></span>
<span id="cb113-1475"><a href="#cb113-1475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1476"><a href="#cb113-1476" aria-hidden="true" tabindex="-1"></a><span class="in">data_did &lt;- data %&gt;% </span></span>
<span id="cb113-1477"><a href="#cb113-1477" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable </span></span>
<span id="cb113-1478"><a href="#cb113-1478" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm, by = join_by(gvkey) ) %&gt;% </span></span>
<span id="cb113-1479"><a href="#cb113-1479" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classification </span></span>
<span id="cb113-1480"><a href="#cb113-1480" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;% </span></span>
<span id="cb113-1481"><a href="#cb113-1481" aria-hidden="true" tabindex="-1"></a><span class="in">  ## exclude certain industries </span></span>
<span id="cb113-1482"><a href="#cb113-1482" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb113-1483"><a href="#cb113-1483" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 20, # exclude Utiltiy (number 20) </span></span>
<span id="cb113-1484"><a href="#cb113-1484" aria-hidden="true" tabindex="-1"></a><span class="in">    !(sic &gt;= 6000 &amp; sic &lt;= 6199) # exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb113-1485"><a href="#cb113-1485" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1486"><a href="#cb113-1486" aria-hidden="true" tabindex="-1"></a><span class="in">  ## pre- &amp; post- </span></span>
<span id="cb113-1487"><a href="#cb113-1487" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1488"><a href="#cb113-1488" aria-hidden="true" tabindex="-1"></a><span class="in">    indexyear = (dyear - base_year), # year index with 2005 as base 0.</span></span>
<span id="cb113-1489"><a href="#cb113-1489" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(dyear &gt; base_year, yes = 1, no = 0)  # whether it is after the 2005 reform </span></span>
<span id="cb113-1490"><a href="#cb113-1490" aria-hidden="true" tabindex="-1"></a><span class="in">  ) # %&gt;% </span></span>
<span id="cb113-1491"><a href="#cb113-1491" aria-hidden="true" tabindex="-1"></a><span class="in">  # # drop values outside the range:</span></span>
<span id="cb113-1492"><a href="#cb113-1492" aria-hidden="true" tabindex="-1"></a><span class="in">  # mutate(</span></span>
<span id="cb113-1493"><a href="#cb113-1493" aria-hidden="true" tabindex="-1"></a><span class="in">  #   book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 1), yes = book_leverage, no = NA),</span></span>
<span id="cb113-1494"><a href="#cb113-1494" aria-hidden="true" tabindex="-1"></a><span class="in">  #   debt_ebitda = ifelse(test = (debt_ebitda &gt;= 0 &amp; debt_ebitda &lt;= 15), yes = debt_ebitda, no = NA )</span></span>
<span id="cb113-1495"><a href="#cb113-1495" aria-hidden="true" tabindex="-1"></a><span class="in">  # )</span></span>
<span id="cb113-1496"><a href="#cb113-1496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1497"><a href="#cb113-1497" aria-hidden="true" tabindex="-1"></a><span class="in">etable(</span></span>
<span id="cb113-1498"><a href="#cb113-1498" aria-hidden="true" tabindex="-1"></a><span class="in">  `(1)` = data_did %&gt;% </span></span>
<span id="cb113-1499"><a href="#cb113-1499" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-1500"><a href="#cb113-1500" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1501"><a href="#cb113-1501" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1502"><a href="#cb113-1502" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1503"><a href="#cb113-1503" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-1504"><a href="#cb113-1504" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1505"><a href="#cb113-1505" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1506"><a href="#cb113-1506" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1507"><a href="#cb113-1507" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear, data = ., cluster = c("gvkey", "ff_30ind_name")), </span></span>
<span id="cb113-1508"><a href="#cb113-1508" aria-hidden="true" tabindex="-1"></a><span class="in">  `(2)` = data_did %&gt;% </span></span>
<span id="cb113-1509"><a href="#cb113-1509" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-1510"><a href="#cb113-1510" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1511"><a href="#cb113-1511" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1512"><a href="#cb113-1512" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1513"><a href="#cb113-1513" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-1514"><a href="#cb113-1514" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1515"><a href="#cb113-1515" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1516"><a href="#cb113-1516" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1517"><a href="#cb113-1517" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear + ff_30ind_name^dyear, data = ., cluster = c("gvkey", "ff_30ind_name")) </span></span>
<span id="cb113-1518"><a href="#cb113-1518" aria-hidden="true" tabindex="-1"></a><span class="in">) </span></span>
<span id="cb113-1519"><a href="#cb113-1519" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-1520"><a href="#cb113-1520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1521"><a href="#cb113-1521" aria-hidden="true" tabindex="-1"></a>For <span class="in">`at &gt; 0.05`</span>, the treatment effects are still negative, but no longer significant.</span>
<span id="cb113-1522"><a href="#cb113-1522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1523"><a href="#cb113-1523" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a6-did-filter-at-0.05, echo=TRUE, warning=FALSE, message=FALSE}</span></span>
<span id="cb113-1524"><a href="#cb113-1524" aria-hidden="true" tabindex="-1"></a><span class="in">rm(list = ls()[! (ls() %in% c("base_year", "compustat_na"))])</span></span>
<span id="cb113-1525"><a href="#cb113-1525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1526"><a href="#cb113-1526" aria-hidden="true" tabindex="-1"></a><span class="in">## create leverage variables </span></span>
<span id="cb113-1527"><a href="#cb113-1527" aria-hidden="true" tabindex="-1"></a><span class="in">data &lt;- compustat_na %&gt;% </span></span>
<span id="cb113-1528"><a href="#cb113-1528" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(at &gt; 0.05) %&gt;% </span></span>
<span id="cb113-1529"><a href="#cb113-1529" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(indfmt == "INDL") %&gt;% ## remove all financial firms</span></span>
<span id="cb113-1530"><a href="#cb113-1530" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1531"><a href="#cb113-1531" aria-hidden="true" tabindex="-1"></a><span class="in">    ## leverage variables: </span></span>
<span id="cb113-1532"><a href="#cb113-1532" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = (dlc + dltt) / at, </span></span>
<span id="cb113-1533"><a href="#cb113-1533" aria-hidden="true" tabindex="-1"></a><span class="in">    debt_ebitda = (dlc + dltt) / ebitda, </span></span>
<span id="cb113-1534"><a href="#cb113-1534" aria-hidden="true" tabindex="-1"></a><span class="in">    ## treatment intensity: </span></span>
<span id="cb113-1535"><a href="#cb113-1535" aria-hidden="true" tabindex="-1"></a><span class="in">    totalrent = mrc1 + mrc2 + mrc3 + mrc4 + mrc5 + mrct, # total rent w/o discount</span></span>
<span id="cb113-1536"><a href="#cb113-1536" aria-hidden="true" tabindex="-1"></a><span class="in">    # contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb113-1537"><a href="#cb113-1537" aria-hidden="true" tabindex="-1"></a><span class="in">    contract_intensity = (dclo + totalrent) / at, # executory contract intensity</span></span>
<span id="cb113-1538"><a href="#cb113-1538" aria-hidden="true" tabindex="-1"></a><span class="in">    # contract_intensity = (totalrent) / at, # executory contract intensity</span></span>
<span id="cb113-1539"><a href="#cb113-1539" aria-hidden="true" tabindex="-1"></a><span class="in">    ## other variables: </span></span>
<span id="cb113-1540"><a href="#cb113-1540" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.integer(substr(datadate, start = 1, stop = 4)) # data year </span></span>
<span id="cb113-1541"><a href="#cb113-1541" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1542"><a href="#cb113-1542" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(book_leverage &lt; Inf)</span></span>
<span id="cb113-1543"><a href="#cb113-1543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1544"><a href="#cb113-1544" aria-hidden="true" tabindex="-1"></a><span class="in">psych::describe(data.frame(book_leverage = data$book_leverage))</span></span>
<span id="cb113-1545"><a href="#cb113-1545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1546"><a href="#cb113-1546" aria-hidden="true" tabindex="-1"></a><span class="in">data_firm &lt;- data %&gt;% </span></span>
<span id="cb113-1547"><a href="#cb113-1547" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear == 2000) %&gt;% # use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb113-1548"><a href="#cb113-1548" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, contract_intensity_2000 = contract_intensity) %&gt;% </span></span>
<span id="cb113-1549"><a href="#cb113-1549" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;% </span></span>
<span id="cb113-1550"><a href="#cb113-1550" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(contract_intensity_2000 = mean(contract_intensity_2000, na.rm = TRUE) ) %&gt;% </span></span>
<span id="cb113-1551"><a href="#cb113-1551" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() </span></span>
<span id="cb113-1552"><a href="#cb113-1552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1553"><a href="#cb113-1553" aria-hidden="true" tabindex="-1"></a><span class="in">FF_30ind &lt;- as_tibble(read.csv(file = "C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"))</span></span>
<span id="cb113-1554"><a href="#cb113-1554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1555"><a href="#cb113-1555" aria-hidden="true" tabindex="-1"></a><span class="in">data_did &lt;- data %&gt;% </span></span>
<span id="cb113-1556"><a href="#cb113-1556" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable </span></span>
<span id="cb113-1557"><a href="#cb113-1557" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm, by = join_by(gvkey) ) %&gt;% </span></span>
<span id="cb113-1558"><a href="#cb113-1558" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classification </span></span>
<span id="cb113-1559"><a href="#cb113-1559" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;% </span></span>
<span id="cb113-1560"><a href="#cb113-1560" aria-hidden="true" tabindex="-1"></a><span class="in">  ## exclude certain industries </span></span>
<span id="cb113-1561"><a href="#cb113-1561" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb113-1562"><a href="#cb113-1562" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 20, # exclude Utiltiy (number 20) </span></span>
<span id="cb113-1563"><a href="#cb113-1563" aria-hidden="true" tabindex="-1"></a><span class="in">    !(sic &gt;= 6000 &amp; sic &lt;= 6199) # exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb113-1564"><a href="#cb113-1564" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1565"><a href="#cb113-1565" aria-hidden="true" tabindex="-1"></a><span class="in">  ## pre- &amp; post- </span></span>
<span id="cb113-1566"><a href="#cb113-1566" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1567"><a href="#cb113-1567" aria-hidden="true" tabindex="-1"></a><span class="in">    indexyear = (dyear - base_year), # year index with 2005 as base 0.</span></span>
<span id="cb113-1568"><a href="#cb113-1568" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(dyear &gt; base_year, yes = 1, no = 0)  # whether it is after the 2005 reform </span></span>
<span id="cb113-1569"><a href="#cb113-1569" aria-hidden="true" tabindex="-1"></a><span class="in">  ) # %&gt;% </span></span>
<span id="cb113-1570"><a href="#cb113-1570" aria-hidden="true" tabindex="-1"></a><span class="in">  # # drop values outside the range:</span></span>
<span id="cb113-1571"><a href="#cb113-1571" aria-hidden="true" tabindex="-1"></a><span class="in">  # mutate(</span></span>
<span id="cb113-1572"><a href="#cb113-1572" aria-hidden="true" tabindex="-1"></a><span class="in">  #   book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 1), yes = book_leverage, no = NA),</span></span>
<span id="cb113-1573"><a href="#cb113-1573" aria-hidden="true" tabindex="-1"></a><span class="in">  #   debt_ebitda = ifelse(test = (debt_ebitda &gt;= 0 &amp; debt_ebitda &lt;= 15), yes = debt_ebitda, no = NA )</span></span>
<span id="cb113-1574"><a href="#cb113-1574" aria-hidden="true" tabindex="-1"></a><span class="in">  # )</span></span>
<span id="cb113-1575"><a href="#cb113-1575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1576"><a href="#cb113-1576" aria-hidden="true" tabindex="-1"></a><span class="in">etable(</span></span>
<span id="cb113-1577"><a href="#cb113-1577" aria-hidden="true" tabindex="-1"></a><span class="in">  `(1)` = data_did %&gt;% </span></span>
<span id="cb113-1578"><a href="#cb113-1578" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-1579"><a href="#cb113-1579" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1580"><a href="#cb113-1580" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1581"><a href="#cb113-1581" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1582"><a href="#cb113-1582" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-1583"><a href="#cb113-1583" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1584"><a href="#cb113-1584" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1585"><a href="#cb113-1585" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1586"><a href="#cb113-1586" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear, data = ., cluster = c("gvkey", "ff_30ind_name")), </span></span>
<span id="cb113-1587"><a href="#cb113-1587" aria-hidden="true" tabindex="-1"></a><span class="in">  `(2)` = data_did %&gt;% </span></span>
<span id="cb113-1588"><a href="#cb113-1588" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-1589"><a href="#cb113-1589" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1590"><a href="#cb113-1590" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1591"><a href="#cb113-1591" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1592"><a href="#cb113-1592" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-1593"><a href="#cb113-1593" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1594"><a href="#cb113-1594" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1595"><a href="#cb113-1595" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1596"><a href="#cb113-1596" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear + ff_30ind_name^dyear, data = ., cluster = c("gvkey", "ff_30ind_name")) </span></span>
<span id="cb113-1597"><a href="#cb113-1597" aria-hidden="true" tabindex="-1"></a><span class="in">) </span></span>
<span id="cb113-1598"><a href="#cb113-1598" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-1599"><a href="#cb113-1599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1600"><a href="#cb113-1600" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Dataset with filters on `book_leverage`</span></span>
<span id="cb113-1601"><a href="#cb113-1601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1602"><a href="#cb113-1602" aria-hidden="true" tabindex="-1"></a>For <span class="in">`book_leverage ∈ [0,5]`</span>, the treatment effect estimates even turn into significantly positive values.</span>
<span id="cb113-1603"><a href="#cb113-1603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1604"><a href="#cb113-1604" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a6-did-filter-leverage-05, echo=TRUE, warning=FALSE, message=FALSE}</span></span>
<span id="cb113-1605"><a href="#cb113-1605" aria-hidden="true" tabindex="-1"></a><span class="in">rm(list = ls()[! (ls() %in% c("base_year", "compustat_na"))])</span></span>
<span id="cb113-1606"><a href="#cb113-1606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1607"><a href="#cb113-1607" aria-hidden="true" tabindex="-1"></a><span class="in">## create leverage variables </span></span>
<span id="cb113-1608"><a href="#cb113-1608" aria-hidden="true" tabindex="-1"></a><span class="in">data &lt;- compustat_na %&gt;% </span></span>
<span id="cb113-1609"><a href="#cb113-1609" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(at &gt; 0.05) %&gt;% </span></span>
<span id="cb113-1610"><a href="#cb113-1610" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(indfmt == "INDL") %&gt;% ## remove all financial firms</span></span>
<span id="cb113-1611"><a href="#cb113-1611" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1612"><a href="#cb113-1612" aria-hidden="true" tabindex="-1"></a><span class="in">    ## leverage variables: </span></span>
<span id="cb113-1613"><a href="#cb113-1613" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = (dlc + dltt) / at, </span></span>
<span id="cb113-1614"><a href="#cb113-1614" aria-hidden="true" tabindex="-1"></a><span class="in">    debt_ebitda = (dlc + dltt) / ebitda, </span></span>
<span id="cb113-1615"><a href="#cb113-1615" aria-hidden="true" tabindex="-1"></a><span class="in">    ## treatment intensity: </span></span>
<span id="cb113-1616"><a href="#cb113-1616" aria-hidden="true" tabindex="-1"></a><span class="in">    totalrent = mrc1 + mrc2 + mrc3 + mrc4 + mrc5 + mrct, # total rent w/o discount</span></span>
<span id="cb113-1617"><a href="#cb113-1617" aria-hidden="true" tabindex="-1"></a><span class="in">    # contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb113-1618"><a href="#cb113-1618" aria-hidden="true" tabindex="-1"></a><span class="in">    contract_intensity = (dclo + totalrent) / at, # executory contract intensity</span></span>
<span id="cb113-1619"><a href="#cb113-1619" aria-hidden="true" tabindex="-1"></a><span class="in">    # contract_intensity = (totalrent) / at, # executory contract intensity</span></span>
<span id="cb113-1620"><a href="#cb113-1620" aria-hidden="true" tabindex="-1"></a><span class="in">    ## other variables: </span></span>
<span id="cb113-1621"><a href="#cb113-1621" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.integer(substr(datadate, start = 1, stop = 4)) # data year </span></span>
<span id="cb113-1622"><a href="#cb113-1622" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1623"><a href="#cb113-1623" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(book_leverage &lt; Inf)</span></span>
<span id="cb113-1624"><a href="#cb113-1624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1625"><a href="#cb113-1625" aria-hidden="true" tabindex="-1"></a><span class="in">psych::describe(data.frame(book_leverage = data$book_leverage))</span></span>
<span id="cb113-1626"><a href="#cb113-1626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1627"><a href="#cb113-1627" aria-hidden="true" tabindex="-1"></a><span class="in">data_firm &lt;- data %&gt;% </span></span>
<span id="cb113-1628"><a href="#cb113-1628" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear == 2000) %&gt;% # use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb113-1629"><a href="#cb113-1629" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, contract_intensity_2000 = contract_intensity) %&gt;% </span></span>
<span id="cb113-1630"><a href="#cb113-1630" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;% </span></span>
<span id="cb113-1631"><a href="#cb113-1631" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(contract_intensity_2000 = mean(contract_intensity_2000, na.rm = TRUE) ) %&gt;% </span></span>
<span id="cb113-1632"><a href="#cb113-1632" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() </span></span>
<span id="cb113-1633"><a href="#cb113-1633" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1634"><a href="#cb113-1634" aria-hidden="true" tabindex="-1"></a><span class="in">FF_30ind &lt;- as_tibble(read.csv(file = "C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"))</span></span>
<span id="cb113-1635"><a href="#cb113-1635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1636"><a href="#cb113-1636" aria-hidden="true" tabindex="-1"></a><span class="in">data_did &lt;- data %&gt;% </span></span>
<span id="cb113-1637"><a href="#cb113-1637" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable </span></span>
<span id="cb113-1638"><a href="#cb113-1638" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm, by = join_by(gvkey) ) %&gt;% </span></span>
<span id="cb113-1639"><a href="#cb113-1639" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classification </span></span>
<span id="cb113-1640"><a href="#cb113-1640" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;% </span></span>
<span id="cb113-1641"><a href="#cb113-1641" aria-hidden="true" tabindex="-1"></a><span class="in">  ## exclude certain industries </span></span>
<span id="cb113-1642"><a href="#cb113-1642" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb113-1643"><a href="#cb113-1643" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 20, # exclude Utiltiy (number 20) </span></span>
<span id="cb113-1644"><a href="#cb113-1644" aria-hidden="true" tabindex="-1"></a><span class="in">    !(sic &gt;= 6000 &amp; sic &lt;= 6199) # exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb113-1645"><a href="#cb113-1645" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1646"><a href="#cb113-1646" aria-hidden="true" tabindex="-1"></a><span class="in">  ## pre- &amp; post- </span></span>
<span id="cb113-1647"><a href="#cb113-1647" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1648"><a href="#cb113-1648" aria-hidden="true" tabindex="-1"></a><span class="in">    indexyear = (dyear - base_year), # year index with 2005 as base 0.</span></span>
<span id="cb113-1649"><a href="#cb113-1649" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(dyear &gt; base_year, yes = 1, no = 0)  # whether it is after the 2005 reform </span></span>
<span id="cb113-1650"><a href="#cb113-1650" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1651"><a href="#cb113-1651" aria-hidden="true" tabindex="-1"></a><span class="in">  # drop values outside the range:</span></span>
<span id="cb113-1652"><a href="#cb113-1652" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1653"><a href="#cb113-1653" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 5), yes = book_leverage, no = NA) </span></span>
<span id="cb113-1654"><a href="#cb113-1654" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb113-1655"><a href="#cb113-1655" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1656"><a href="#cb113-1656" aria-hidden="true" tabindex="-1"></a><span class="in">etable(</span></span>
<span id="cb113-1657"><a href="#cb113-1657" aria-hidden="true" tabindex="-1"></a><span class="in">  `(1)` = data_did %&gt;% </span></span>
<span id="cb113-1658"><a href="#cb113-1658" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-1659"><a href="#cb113-1659" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1660"><a href="#cb113-1660" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1661"><a href="#cb113-1661" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1662"><a href="#cb113-1662" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-1663"><a href="#cb113-1663" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1664"><a href="#cb113-1664" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1665"><a href="#cb113-1665" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1666"><a href="#cb113-1666" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear, data = ., cluster = c("gvkey", "ff_30ind_name")), </span></span>
<span id="cb113-1667"><a href="#cb113-1667" aria-hidden="true" tabindex="-1"></a><span class="in">  `(2)` = data_did %&gt;% </span></span>
<span id="cb113-1668"><a href="#cb113-1668" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-1669"><a href="#cb113-1669" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1670"><a href="#cb113-1670" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1671"><a href="#cb113-1671" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1672"><a href="#cb113-1672" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-1673"><a href="#cb113-1673" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1674"><a href="#cb113-1674" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1675"><a href="#cb113-1675" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1676"><a href="#cb113-1676" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear + ff_30ind_name^dyear, data = ., cluster = c("gvkey", "ff_30ind_name")) </span></span>
<span id="cb113-1677"><a href="#cb113-1677" aria-hidden="true" tabindex="-1"></a><span class="in">) </span></span>
<span id="cb113-1678"><a href="#cb113-1678" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-1679"><a href="#cb113-1679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1680"><a href="#cb113-1680" aria-hidden="true" tabindex="-1"></a>For <span class="in">`book_leverage ∈ [0,3]`</span>, the treatment effect estimates are still positive, but not statistically significant anymore.</span>
<span id="cb113-1681"><a href="#cb113-1681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1682"><a href="#cb113-1682" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a6-did-filter-leverage-03, echo=TRUE, warning=FALSE, message=FALSE}</span></span>
<span id="cb113-1683"><a href="#cb113-1683" aria-hidden="true" tabindex="-1"></a><span class="in">rm(list = ls()[! (ls() %in% c("base_year", "compustat_na"))])</span></span>
<span id="cb113-1684"><a href="#cb113-1684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1685"><a href="#cb113-1685" aria-hidden="true" tabindex="-1"></a><span class="in">## create leverage variables </span></span>
<span id="cb113-1686"><a href="#cb113-1686" aria-hidden="true" tabindex="-1"></a><span class="in">data &lt;- compustat_na %&gt;% </span></span>
<span id="cb113-1687"><a href="#cb113-1687" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(at &gt; 0.05) %&gt;% </span></span>
<span id="cb113-1688"><a href="#cb113-1688" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(indfmt == "INDL") %&gt;% ## remove all financial firms</span></span>
<span id="cb113-1689"><a href="#cb113-1689" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1690"><a href="#cb113-1690" aria-hidden="true" tabindex="-1"></a><span class="in">    ## leverage variables: </span></span>
<span id="cb113-1691"><a href="#cb113-1691" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = (dlc + dltt) / at, </span></span>
<span id="cb113-1692"><a href="#cb113-1692" aria-hidden="true" tabindex="-1"></a><span class="in">    debt_ebitda = (dlc + dltt) / ebitda, </span></span>
<span id="cb113-1693"><a href="#cb113-1693" aria-hidden="true" tabindex="-1"></a><span class="in">    ## treatment intensity: </span></span>
<span id="cb113-1694"><a href="#cb113-1694" aria-hidden="true" tabindex="-1"></a><span class="in">    totalrent = mrc1 + mrc2 + mrc3 + mrc4 + mrc5 + mrct, # total rent w/o discount</span></span>
<span id="cb113-1695"><a href="#cb113-1695" aria-hidden="true" tabindex="-1"></a><span class="in">    # contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb113-1696"><a href="#cb113-1696" aria-hidden="true" tabindex="-1"></a><span class="in">    contract_intensity = (dclo + totalrent) / at, # executory contract intensity</span></span>
<span id="cb113-1697"><a href="#cb113-1697" aria-hidden="true" tabindex="-1"></a><span class="in">    # contract_intensity = (totalrent) / at, # executory contract intensity</span></span>
<span id="cb113-1698"><a href="#cb113-1698" aria-hidden="true" tabindex="-1"></a><span class="in">    ## other variables: </span></span>
<span id="cb113-1699"><a href="#cb113-1699" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.integer(substr(datadate, start = 1, stop = 4)) # data year </span></span>
<span id="cb113-1700"><a href="#cb113-1700" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1701"><a href="#cb113-1701" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(book_leverage &lt; Inf)</span></span>
<span id="cb113-1702"><a href="#cb113-1702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1703"><a href="#cb113-1703" aria-hidden="true" tabindex="-1"></a><span class="in">psych::describe(data.frame(book_leverage = data$book_leverage))</span></span>
<span id="cb113-1704"><a href="#cb113-1704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1705"><a href="#cb113-1705" aria-hidden="true" tabindex="-1"></a><span class="in">data_firm &lt;- data %&gt;% </span></span>
<span id="cb113-1706"><a href="#cb113-1706" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear == 2000) %&gt;% # use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb113-1707"><a href="#cb113-1707" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, contract_intensity_2000 = contract_intensity) %&gt;% </span></span>
<span id="cb113-1708"><a href="#cb113-1708" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;% </span></span>
<span id="cb113-1709"><a href="#cb113-1709" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(contract_intensity_2000 = mean(contract_intensity_2000, na.rm = TRUE) ) %&gt;% </span></span>
<span id="cb113-1710"><a href="#cb113-1710" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() </span></span>
<span id="cb113-1711"><a href="#cb113-1711" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1712"><a href="#cb113-1712" aria-hidden="true" tabindex="-1"></a><span class="in">FF_30ind &lt;- as_tibble(read.csv(file = "C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"))</span></span>
<span id="cb113-1713"><a href="#cb113-1713" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1714"><a href="#cb113-1714" aria-hidden="true" tabindex="-1"></a><span class="in">data_did &lt;- data %&gt;% </span></span>
<span id="cb113-1715"><a href="#cb113-1715" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable </span></span>
<span id="cb113-1716"><a href="#cb113-1716" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm, by = join_by(gvkey) ) %&gt;% </span></span>
<span id="cb113-1717"><a href="#cb113-1717" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classification </span></span>
<span id="cb113-1718"><a href="#cb113-1718" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;% </span></span>
<span id="cb113-1719"><a href="#cb113-1719" aria-hidden="true" tabindex="-1"></a><span class="in">  ## exclude certain industries </span></span>
<span id="cb113-1720"><a href="#cb113-1720" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb113-1721"><a href="#cb113-1721" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 20, # exclude Utiltiy (number 20) </span></span>
<span id="cb113-1722"><a href="#cb113-1722" aria-hidden="true" tabindex="-1"></a><span class="in">    !(sic &gt;= 6000 &amp; sic &lt;= 6199) # exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb113-1723"><a href="#cb113-1723" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1724"><a href="#cb113-1724" aria-hidden="true" tabindex="-1"></a><span class="in">  ## pre- &amp; post- </span></span>
<span id="cb113-1725"><a href="#cb113-1725" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1726"><a href="#cb113-1726" aria-hidden="true" tabindex="-1"></a><span class="in">    indexyear = (dyear - base_year), # year index with 2005 as base 0.</span></span>
<span id="cb113-1727"><a href="#cb113-1727" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(dyear &gt; base_year, yes = 1, no = 0)  # whether it is after the 2005 reform </span></span>
<span id="cb113-1728"><a href="#cb113-1728" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1729"><a href="#cb113-1729" aria-hidden="true" tabindex="-1"></a><span class="in">  # drop values outside the range:</span></span>
<span id="cb113-1730"><a href="#cb113-1730" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1731"><a href="#cb113-1731" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 3), yes = book_leverage, no = NA) </span></span>
<span id="cb113-1732"><a href="#cb113-1732" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb113-1733"><a href="#cb113-1733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1734"><a href="#cb113-1734" aria-hidden="true" tabindex="-1"></a><span class="in">etable(</span></span>
<span id="cb113-1735"><a href="#cb113-1735" aria-hidden="true" tabindex="-1"></a><span class="in">  `(1)` = data_did %&gt;% </span></span>
<span id="cb113-1736"><a href="#cb113-1736" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-1737"><a href="#cb113-1737" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1738"><a href="#cb113-1738" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1739"><a href="#cb113-1739" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1740"><a href="#cb113-1740" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-1741"><a href="#cb113-1741" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1742"><a href="#cb113-1742" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1743"><a href="#cb113-1743" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1744"><a href="#cb113-1744" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear, data = ., cluster = c("gvkey", "ff_30ind_name")), </span></span>
<span id="cb113-1745"><a href="#cb113-1745" aria-hidden="true" tabindex="-1"></a><span class="in">  `(2)` = data_did %&gt;% </span></span>
<span id="cb113-1746"><a href="#cb113-1746" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-1747"><a href="#cb113-1747" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1748"><a href="#cb113-1748" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1749"><a href="#cb113-1749" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1750"><a href="#cb113-1750" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-1751"><a href="#cb113-1751" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1752"><a href="#cb113-1752" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1753"><a href="#cb113-1753" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1754"><a href="#cb113-1754" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear + ff_30ind_name^dyear, data = ., cluster = c("gvkey", "ff_30ind_name")) </span></span>
<span id="cb113-1755"><a href="#cb113-1755" aria-hidden="true" tabindex="-1"></a><span class="in">) </span></span>
<span id="cb113-1756"><a href="#cb113-1756" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-1757"><a href="#cb113-1757" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1758"><a href="#cb113-1758" aria-hidden="true" tabindex="-1"></a>For <span class="in">`book_leverage ∈ [0,1]`</span>, the treatment effect estimates are indifferent from zero.</span>
<span id="cb113-1759"><a href="#cb113-1759" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1760"><a href="#cb113-1760" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a6-did-filter-leverage-01, echo=TRUE, warning=FALSE, message=FALSE}</span></span>
<span id="cb113-1761"><a href="#cb113-1761" aria-hidden="true" tabindex="-1"></a><span class="in">rm(list = ls()[! (ls() %in% c("base_year", "compustat_na"))])</span></span>
<span id="cb113-1762"><a href="#cb113-1762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1763"><a href="#cb113-1763" aria-hidden="true" tabindex="-1"></a><span class="in">## create leverage variables </span></span>
<span id="cb113-1764"><a href="#cb113-1764" aria-hidden="true" tabindex="-1"></a><span class="in">data &lt;- compustat_na %&gt;% </span></span>
<span id="cb113-1765"><a href="#cb113-1765" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(at &gt; 0.05) %&gt;% </span></span>
<span id="cb113-1766"><a href="#cb113-1766" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(indfmt == "INDL") %&gt;% ## remove all financial firms</span></span>
<span id="cb113-1767"><a href="#cb113-1767" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1768"><a href="#cb113-1768" aria-hidden="true" tabindex="-1"></a><span class="in">    ## leverage variables: </span></span>
<span id="cb113-1769"><a href="#cb113-1769" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = (dlc + dltt) / at, </span></span>
<span id="cb113-1770"><a href="#cb113-1770" aria-hidden="true" tabindex="-1"></a><span class="in">    debt_ebitda = (dlc + dltt) / ebitda, </span></span>
<span id="cb113-1771"><a href="#cb113-1771" aria-hidden="true" tabindex="-1"></a><span class="in">    ## treatment intensity: </span></span>
<span id="cb113-1772"><a href="#cb113-1772" aria-hidden="true" tabindex="-1"></a><span class="in">    totalrent = mrc1 + mrc2 + mrc3 + mrc4 + mrc5 + mrct, # total rent w/o discount</span></span>
<span id="cb113-1773"><a href="#cb113-1773" aria-hidden="true" tabindex="-1"></a><span class="in">    # contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb113-1774"><a href="#cb113-1774" aria-hidden="true" tabindex="-1"></a><span class="in">    contract_intensity = (dclo + totalrent) / at, # executory contract intensity</span></span>
<span id="cb113-1775"><a href="#cb113-1775" aria-hidden="true" tabindex="-1"></a><span class="in">    # contract_intensity = (totalrent) / at, # executory contract intensity</span></span>
<span id="cb113-1776"><a href="#cb113-1776" aria-hidden="true" tabindex="-1"></a><span class="in">    ## other variables: </span></span>
<span id="cb113-1777"><a href="#cb113-1777" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.integer(substr(datadate, start = 1, stop = 4)) # data year </span></span>
<span id="cb113-1778"><a href="#cb113-1778" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1779"><a href="#cb113-1779" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(book_leverage &lt; Inf)</span></span>
<span id="cb113-1780"><a href="#cb113-1780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1781"><a href="#cb113-1781" aria-hidden="true" tabindex="-1"></a><span class="in">psych::describe(data.frame(book_leverage = data$book_leverage))</span></span>
<span id="cb113-1782"><a href="#cb113-1782" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1783"><a href="#cb113-1783" aria-hidden="true" tabindex="-1"></a><span class="in">data_firm &lt;- data %&gt;% </span></span>
<span id="cb113-1784"><a href="#cb113-1784" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear == 2000) %&gt;% # use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb113-1785"><a href="#cb113-1785" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, contract_intensity_2000 = contract_intensity) %&gt;% </span></span>
<span id="cb113-1786"><a href="#cb113-1786" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;% </span></span>
<span id="cb113-1787"><a href="#cb113-1787" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(contract_intensity_2000 = mean(contract_intensity_2000, na.rm = TRUE) ) %&gt;% </span></span>
<span id="cb113-1788"><a href="#cb113-1788" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() </span></span>
<span id="cb113-1789"><a href="#cb113-1789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1790"><a href="#cb113-1790" aria-hidden="true" tabindex="-1"></a><span class="in">FF_30ind &lt;- as_tibble(read.csv(file = "C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"))</span></span>
<span id="cb113-1791"><a href="#cb113-1791" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1792"><a href="#cb113-1792" aria-hidden="true" tabindex="-1"></a><span class="in">data_did &lt;- data %&gt;% </span></span>
<span id="cb113-1793"><a href="#cb113-1793" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable </span></span>
<span id="cb113-1794"><a href="#cb113-1794" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm, by = join_by(gvkey) ) %&gt;% </span></span>
<span id="cb113-1795"><a href="#cb113-1795" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classification </span></span>
<span id="cb113-1796"><a href="#cb113-1796" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;% </span></span>
<span id="cb113-1797"><a href="#cb113-1797" aria-hidden="true" tabindex="-1"></a><span class="in">  ## exclude certain industries </span></span>
<span id="cb113-1798"><a href="#cb113-1798" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb113-1799"><a href="#cb113-1799" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 20, # exclude Utiltiy (number 20) </span></span>
<span id="cb113-1800"><a href="#cb113-1800" aria-hidden="true" tabindex="-1"></a><span class="in">    !(sic &gt;= 6000 &amp; sic &lt;= 6199) # exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb113-1801"><a href="#cb113-1801" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1802"><a href="#cb113-1802" aria-hidden="true" tabindex="-1"></a><span class="in">  ## pre- &amp; post- </span></span>
<span id="cb113-1803"><a href="#cb113-1803" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1804"><a href="#cb113-1804" aria-hidden="true" tabindex="-1"></a><span class="in">    indexyear = (dyear - base_year), # year index with 2005 as base 0.</span></span>
<span id="cb113-1805"><a href="#cb113-1805" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(dyear &gt; base_year, yes = 1, no = 0)  # whether it is after the 2005 reform </span></span>
<span id="cb113-1806"><a href="#cb113-1806" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1807"><a href="#cb113-1807" aria-hidden="true" tabindex="-1"></a><span class="in">  # drop values outside the range:</span></span>
<span id="cb113-1808"><a href="#cb113-1808" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1809"><a href="#cb113-1809" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 1), yes = book_leverage, no = NA) </span></span>
<span id="cb113-1810"><a href="#cb113-1810" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb113-1811"><a href="#cb113-1811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1812"><a href="#cb113-1812" aria-hidden="true" tabindex="-1"></a><span class="in">etable(</span></span>
<span id="cb113-1813"><a href="#cb113-1813" aria-hidden="true" tabindex="-1"></a><span class="in">  `(1)` = data_did %&gt;% </span></span>
<span id="cb113-1814"><a href="#cb113-1814" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-1815"><a href="#cb113-1815" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1816"><a href="#cb113-1816" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1817"><a href="#cb113-1817" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1818"><a href="#cb113-1818" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-1819"><a href="#cb113-1819" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1820"><a href="#cb113-1820" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1821"><a href="#cb113-1821" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1822"><a href="#cb113-1822" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear, data = ., cluster = c("gvkey", "ff_30ind_name")), </span></span>
<span id="cb113-1823"><a href="#cb113-1823" aria-hidden="true" tabindex="-1"></a><span class="in">  `(2)` = data_did %&gt;% </span></span>
<span id="cb113-1824"><a href="#cb113-1824" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-1825"><a href="#cb113-1825" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1826"><a href="#cb113-1826" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1827"><a href="#cb113-1827" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1828"><a href="#cb113-1828" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-1829"><a href="#cb113-1829" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1830"><a href="#cb113-1830" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1831"><a href="#cb113-1831" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1832"><a href="#cb113-1832" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear + ff_30ind_name^dyear, data = ., cluster = c("gvkey", "ff_30ind_name")) </span></span>
<span id="cb113-1833"><a href="#cb113-1833" aria-hidden="true" tabindex="-1"></a><span class="in">) </span></span>
<span id="cb113-1834"><a href="#cb113-1834" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-1835"><a href="#cb113-1835" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1836"><a href="#cb113-1836" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Treatment Effects across Industries</span></span>
<span id="cb113-1837"><a href="#cb113-1837" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1838"><a href="#cb113-1838" aria-hidden="true" tabindex="-1"></a>If we use all observations in the dataset, the results are the same as those in @sec-a5-industry-heterogeneity.</span>
<span id="cb113-1839"><a href="#cb113-1839" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1840"><a href="#cb113-1840" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a6-did-industry-all, echo=TRUE, fig.height=10, fig.width=15, warning=FALSE, message=FALSE}</span></span>
<span id="cb113-1841"><a href="#cb113-1841" aria-hidden="true" tabindex="-1"></a><span class="in">#| column: page-right </span></span>
<span id="cb113-1842"><a href="#cb113-1842" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1843"><a href="#cb113-1843" aria-hidden="true" tabindex="-1"></a><span class="in">## create leverage variables </span></span>
<span id="cb113-1844"><a href="#cb113-1844" aria-hidden="true" tabindex="-1"></a><span class="in">data &lt;- compustat_na %&gt;% </span></span>
<span id="cb113-1845"><a href="#cb113-1845" aria-hidden="true" tabindex="-1"></a><span class="in">  # filter(at &gt; 0) %&gt;% </span></span>
<span id="cb113-1846"><a href="#cb113-1846" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(indfmt == "INDL") %&gt;% ## remove all financial firms </span></span>
<span id="cb113-1847"><a href="#cb113-1847" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1848"><a href="#cb113-1848" aria-hidden="true" tabindex="-1"></a><span class="in">    ## leverage variables: </span></span>
<span id="cb113-1849"><a href="#cb113-1849" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = (dlc + dltt) / at, </span></span>
<span id="cb113-1850"><a href="#cb113-1850" aria-hidden="true" tabindex="-1"></a><span class="in">    debt_ebitda = (dlc + dltt) / ebitda, </span></span>
<span id="cb113-1851"><a href="#cb113-1851" aria-hidden="true" tabindex="-1"></a><span class="in">    ## treatment intensity: </span></span>
<span id="cb113-1852"><a href="#cb113-1852" aria-hidden="true" tabindex="-1"></a><span class="in">    totalrent = mrc1 + mrc2 + mrc3 + mrc4 + mrc5 + mrct, # total rent w/o discount</span></span>
<span id="cb113-1853"><a href="#cb113-1853" aria-hidden="true" tabindex="-1"></a><span class="in">    # contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb113-1854"><a href="#cb113-1854" aria-hidden="true" tabindex="-1"></a><span class="in">    contract_intensity = (dclo + totalrent) / at, # executory contract intensity</span></span>
<span id="cb113-1855"><a href="#cb113-1855" aria-hidden="true" tabindex="-1"></a><span class="in">    ## other variables: </span></span>
<span id="cb113-1856"><a href="#cb113-1856" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.integer(substr(datadate, start = 1, stop = 4)) # data year</span></span>
<span id="cb113-1857"><a href="#cb113-1857" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-1858"><a href="#cb113-1858" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1859"><a href="#cb113-1859" aria-hidden="true" tabindex="-1"></a><span class="in">data_firm &lt;- data %&gt;% </span></span>
<span id="cb113-1860"><a href="#cb113-1860" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear == 2000) %&gt;% # use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb113-1861"><a href="#cb113-1861" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, contract_intensity_2000 = contract_intensity) %&gt;% </span></span>
<span id="cb113-1862"><a href="#cb113-1862" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;% </span></span>
<span id="cb113-1863"><a href="#cb113-1863" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(contract_intensity_2000 = mean(contract_intensity_2000, na.rm = TRUE) ) %&gt;% </span></span>
<span id="cb113-1864"><a href="#cb113-1864" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() </span></span>
<span id="cb113-1865"><a href="#cb113-1865" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1866"><a href="#cb113-1866" aria-hidden="true" tabindex="-1"></a><span class="in">FF_30ind &lt;- as_tibble(read.csv(file = "C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"))</span></span>
<span id="cb113-1867"><a href="#cb113-1867" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1868"><a href="#cb113-1868" aria-hidden="true" tabindex="-1"></a><span class="in">data_did_withind &lt;- data %&gt;% </span></span>
<span id="cb113-1869"><a href="#cb113-1869" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable </span></span>
<span id="cb113-1870"><a href="#cb113-1870" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm, by = join_by(gvkey) ) %&gt;% </span></span>
<span id="cb113-1871"><a href="#cb113-1871" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classification </span></span>
<span id="cb113-1872"><a href="#cb113-1872" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;% </span></span>
<span id="cb113-1873"><a href="#cb113-1873" aria-hidden="true" tabindex="-1"></a><span class="in">  ## pre- &amp; post- </span></span>
<span id="cb113-1874"><a href="#cb113-1874" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1875"><a href="#cb113-1875" aria-hidden="true" tabindex="-1"></a><span class="in">    indexyear = (dyear - base_year), # year index with 2005 as base 0.</span></span>
<span id="cb113-1876"><a href="#cb113-1876" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(dyear &gt; base_year, yes = 1, no = 0)  # whether it is after the 2005 reform </span></span>
<span id="cb113-1877"><a href="#cb113-1877" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1878"><a href="#cb113-1878" aria-hidden="true" tabindex="-1"></a><span class="in">  ## remove some industries: </span></span>
<span id="cb113-1879"><a href="#cb113-1879" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb113-1880"><a href="#cb113-1880" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 20, # exclude Utiltiy (number 20) </span></span>
<span id="cb113-1881"><a href="#cb113-1881" aria-hidden="true" tabindex="-1"></a><span class="in">    !(sic &gt;= 6000 &amp; sic &lt;= 6199) # exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb113-1882"><a href="#cb113-1882" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-1883"><a href="#cb113-1883" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb113-1884"><a href="#cb113-1884" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1885"><a href="#cb113-1885" aria-hidden="true" tabindex="-1"></a><span class="in">## did analysis: </span></span>
<span id="cb113-1886"><a href="#cb113-1886" aria-hidden="true" tabindex="-1"></a><span class="in">model_a5_average &lt;- data_did_withind %&gt;% </span></span>
<span id="cb113-1887"><a href="#cb113-1887" aria-hidden="true" tabindex="-1"></a><span class="in">      select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name, ff_30ind_desc, ff_30ind) %&gt;% </span></span>
<span id="cb113-1888"><a href="#cb113-1888" aria-hidden="true" tabindex="-1"></a><span class="in">      filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1889"><a href="#cb113-1889" aria-hidden="true" tabindex="-1"></a><span class="in">      mutate(</span></span>
<span id="cb113-1890"><a href="#cb113-1890" aria-hidden="true" tabindex="-1"></a><span class="in">        gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1891"><a href="#cb113-1891" aria-hidden="true" tabindex="-1"></a><span class="in">        dyear = as.factor(dyear), </span></span>
<span id="cb113-1892"><a href="#cb113-1892" aria-hidden="true" tabindex="-1"></a><span class="in">        ff_30ind = as.factor(paste(ff_30ind, ff_30ind_desc, sep = ": ")), </span></span>
<span id="cb113-1893"><a href="#cb113-1893" aria-hidden="true" tabindex="-1"></a><span class="in">        group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1894"><a href="#cb113-1894" aria-hidden="true" tabindex="-1"></a><span class="in">      ) %&gt;% </span></span>
<span id="cb113-1895"><a href="#cb113-1895" aria-hidden="true" tabindex="-1"></a><span class="in">      na.omit() %&gt;% </span></span>
<span id="cb113-1896"><a href="#cb113-1896" aria-hidden="true" tabindex="-1"></a><span class="in">      fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear + sic^dyear, data = ., cluster = c("gvkey", "ff_30ind_name"))</span></span>
<span id="cb113-1897"><a href="#cb113-1897" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1898"><a href="#cb113-1898" aria-hidden="true" tabindex="-1"></a><span class="in">model_a5_average %&gt;% fixest::etable()</span></span>
<span id="cb113-1899"><a href="#cb113-1899" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1900"><a href="#cb113-1900" aria-hidden="true" tabindex="-1"></a><span class="in">## did analysis for the treatment effects in each industry: </span></span>
<span id="cb113-1901"><a href="#cb113-1901" aria-hidden="true" tabindex="-1"></a><span class="in">did_withind_model &lt;- data_did_withind %&gt;% </span></span>
<span id="cb113-1902"><a href="#cb113-1902" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name, ff_30ind_desc, ff_30ind) %&gt;% </span></span>
<span id="cb113-1903"><a href="#cb113-1903" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1904"><a href="#cb113-1904" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1905"><a href="#cb113-1905" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1906"><a href="#cb113-1906" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-1907"><a href="#cb113-1907" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind = as.factor(paste(ff_30ind, ff_30ind_desc, sep = ": ")), </span></span>
<span id="cb113-1908"><a href="#cb113-1908" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1909"><a href="#cb113-1909" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1910"><a href="#cb113-1910" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-1911"><a href="#cb113-1911" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005:ff_30ind | gvkey + dyear + ff_30ind^dyear, data = ., cluster = c("gvkey"))</span></span>
<span id="cb113-1912"><a href="#cb113-1912" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1913"><a href="#cb113-1913" aria-hidden="true" tabindex="-1"></a><span class="in">did_withind_model %&gt;% fixest::etable()</span></span>
<span id="cb113-1914"><a href="#cb113-1914" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1915"><a href="#cb113-1915" aria-hidden="true" tabindex="-1"></a><span class="in">fixest::coefplot(did_withind_model,</span></span>
<span id="cb113-1916"><a href="#cb113-1916" aria-hidden="true" tabindex="-1"></a><span class="in">                 order = str_extract(string = names(sort(coef(did_withind_model), decreasing = FALSE)), pattern = "(?&lt;=ind).*"), </span></span>
<span id="cb113-1917"><a href="#cb113-1917" aria-hidden="true" tabindex="-1"></a><span class="in">                 horiz = TRUE, </span></span>
<span id="cb113-1918"><a href="#cb113-1918" aria-hidden="true" tabindex="-1"></a><span class="in">                 drop = "Print", # remove the number 5: Printing &amp; Publishing</span></span>
<span id="cb113-1919"><a href="#cb113-1919" aria-hidden="true" tabindex="-1"></a><span class="in">                 main = "", </span></span>
<span id="cb113-1920"><a href="#cb113-1920" aria-hidden="true" tabindex="-1"></a><span class="in">                 sub = ""</span></span>
<span id="cb113-1921"><a href="#cb113-1921" aria-hidden="true" tabindex="-1"></a><span class="in">                 ); </span></span>
<span id="cb113-1922"><a href="#cb113-1922" aria-hidden="true" tabindex="-1"></a><span class="in">title(main = expression(bold("Treatment Effect Estimates for Fama-French 30 Industries")), adj = 0.2); </span></span>
<span id="cb113-1923"><a href="#cb113-1923" aria-hidden="true" tabindex="-1"></a><span class="in">mtext("*Printing and Publishing (Industry 5) is excluded. Red dashed line indicates the average treatment effect.", side = 1, line = 4, adj = 0); </span></span>
<span id="cb113-1924"><a href="#cb113-1924" aria-hidden="true" tabindex="-1"></a><span class="in">abline(v = model_a5_average$coefficients, col = 2, lty = 2, lwd = 3)</span></span>
<span id="cb113-1925"><a href="#cb113-1925" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-1926"><a href="#cb113-1926" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1927"><a href="#cb113-1927" aria-hidden="true" tabindex="-1"></a>For the dataset with filters on <span class="in">`book_leverage ∈ [0,1]`</span>, we re-run all the tests.</span>
<span id="cb113-1928"><a href="#cb113-1928" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1929"><a href="#cb113-1929" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a6-did-industry-01, echo=TRUE, fig.height=10, fig.width=15, warning=FALSE, message=FALSE}</span></span>
<span id="cb113-1930"><a href="#cb113-1930" aria-hidden="true" tabindex="-1"></a><span class="in">#| column: page-right</span></span>
<span id="cb113-1931"><a href="#cb113-1931" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1932"><a href="#cb113-1932" aria-hidden="true" tabindex="-1"></a><span class="in">## create leverage variables </span></span>
<span id="cb113-1933"><a href="#cb113-1933" aria-hidden="true" tabindex="-1"></a><span class="in">data &lt;- compustat_na %&gt;% </span></span>
<span id="cb113-1934"><a href="#cb113-1934" aria-hidden="true" tabindex="-1"></a><span class="in">  # filter(at &gt; 0) %&gt;% </span></span>
<span id="cb113-1935"><a href="#cb113-1935" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(indfmt == "INDL") %&gt;% ## remove all financial firms </span></span>
<span id="cb113-1936"><a href="#cb113-1936" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1937"><a href="#cb113-1937" aria-hidden="true" tabindex="-1"></a><span class="in">    ## leverage variables: </span></span>
<span id="cb113-1938"><a href="#cb113-1938" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = (dlc + dltt) / at, </span></span>
<span id="cb113-1939"><a href="#cb113-1939" aria-hidden="true" tabindex="-1"></a><span class="in">    debt_ebitda = (dlc + dltt) / ebitda, </span></span>
<span id="cb113-1940"><a href="#cb113-1940" aria-hidden="true" tabindex="-1"></a><span class="in">    ## treatment intensity: </span></span>
<span id="cb113-1941"><a href="#cb113-1941" aria-hidden="true" tabindex="-1"></a><span class="in">    totalrent = mrc1 + mrc2 + mrc3 + mrc4 + mrc5 + mrct, # total rent w/o discount</span></span>
<span id="cb113-1942"><a href="#cb113-1942" aria-hidden="true" tabindex="-1"></a><span class="in">    # contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb113-1943"><a href="#cb113-1943" aria-hidden="true" tabindex="-1"></a><span class="in">    contract_intensity = (dclo + totalrent) / at, # executory contract intensity</span></span>
<span id="cb113-1944"><a href="#cb113-1944" aria-hidden="true" tabindex="-1"></a><span class="in">    ## other variables: </span></span>
<span id="cb113-1945"><a href="#cb113-1945" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.integer(substr(datadate, start = 1, stop = 4)) # data year</span></span>
<span id="cb113-1946"><a href="#cb113-1946" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-1947"><a href="#cb113-1947" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1948"><a href="#cb113-1948" aria-hidden="true" tabindex="-1"></a><span class="in">data_firm &lt;- data %&gt;% </span></span>
<span id="cb113-1949"><a href="#cb113-1949" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear == 2000) %&gt;% # use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb113-1950"><a href="#cb113-1950" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, contract_intensity_2000 = contract_intensity) %&gt;% </span></span>
<span id="cb113-1951"><a href="#cb113-1951" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;% </span></span>
<span id="cb113-1952"><a href="#cb113-1952" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(contract_intensity_2000 = mean(contract_intensity_2000, na.rm = TRUE) ) %&gt;% </span></span>
<span id="cb113-1953"><a href="#cb113-1953" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() </span></span>
<span id="cb113-1954"><a href="#cb113-1954" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1955"><a href="#cb113-1955" aria-hidden="true" tabindex="-1"></a><span class="in">FF_30ind &lt;- as_tibble(read.csv(file = "C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"))</span></span>
<span id="cb113-1956"><a href="#cb113-1956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1957"><a href="#cb113-1957" aria-hidden="true" tabindex="-1"></a><span class="in">data_did_withind2 &lt;- data %&gt;% </span></span>
<span id="cb113-1958"><a href="#cb113-1958" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable </span></span>
<span id="cb113-1959"><a href="#cb113-1959" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm, by = join_by(gvkey) ) %&gt;% </span></span>
<span id="cb113-1960"><a href="#cb113-1960" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classification </span></span>
<span id="cb113-1961"><a href="#cb113-1961" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;% </span></span>
<span id="cb113-1962"><a href="#cb113-1962" aria-hidden="true" tabindex="-1"></a><span class="in">  ## pre- &amp; post- </span></span>
<span id="cb113-1963"><a href="#cb113-1963" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1964"><a href="#cb113-1964" aria-hidden="true" tabindex="-1"></a><span class="in">    indexyear = (dyear - base_year), # year index with 2005 as base 0.</span></span>
<span id="cb113-1965"><a href="#cb113-1965" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(dyear &gt; base_year, yes = 1, no = 0)  # whether it is after the 2005 reform </span></span>
<span id="cb113-1966"><a href="#cb113-1966" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1967"><a href="#cb113-1967" aria-hidden="true" tabindex="-1"></a><span class="in">  ## remove some industries: </span></span>
<span id="cb113-1968"><a href="#cb113-1968" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb113-1969"><a href="#cb113-1969" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 20, # exclude Utiltiy (number 20) </span></span>
<span id="cb113-1970"><a href="#cb113-1970" aria-hidden="true" tabindex="-1"></a><span class="in">    !(sic &gt;= 6000 &amp; sic &lt;= 6199) # exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb113-1971"><a href="#cb113-1971" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-1972"><a href="#cb113-1972" aria-hidden="true" tabindex="-1"></a><span class="in">  # drop values outside the range:</span></span>
<span id="cb113-1973"><a href="#cb113-1973" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-1974"><a href="#cb113-1974" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 1), yes = book_leverage, no = NA) </span></span>
<span id="cb113-1975"><a href="#cb113-1975" aria-hidden="true" tabindex="-1"></a><span class="in">  ) # %&gt;% </span></span>
<span id="cb113-1976"><a href="#cb113-1976" aria-hidden="true" tabindex="-1"></a><span class="in">  # ## keep only firms with all observations over the full period. </span></span>
<span id="cb113-1977"><a href="#cb113-1977" aria-hidden="true" tabindex="-1"></a><span class="in">  # group_by(gvkey) %&gt;% </span></span>
<span id="cb113-1978"><a href="#cb113-1978" aria-hidden="true" tabindex="-1"></a><span class="in">  # mutate(</span></span>
<span id="cb113-1979"><a href="#cb113-1979" aria-hidden="true" tabindex="-1"></a><span class="in">  #   n_obs = n(), # number of observations for each firm</span></span>
<span id="cb113-1980"><a href="#cb113-1980" aria-hidden="true" tabindex="-1"></a><span class="in">  #   n_post = sum(post_2005, na.rm = TRUE) # number of obs after 2005</span></span>
<span id="cb113-1981"><a href="#cb113-1981" aria-hidden="true" tabindex="-1"></a><span class="in">  # ) %&gt;%</span></span>
<span id="cb113-1982"><a href="#cb113-1982" aria-hidden="true" tabindex="-1"></a><span class="in">  # ungroup() %&gt;%</span></span>
<span id="cb113-1983"><a href="#cb113-1983" aria-hidden="true" tabindex="-1"></a><span class="in">  # filter(n_obs &gt; n_post &amp; n_post &gt; 0)</span></span>
<span id="cb113-1984"><a href="#cb113-1984" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1985"><a href="#cb113-1985" aria-hidden="true" tabindex="-1"></a><span class="in">## did analysis: </span></span>
<span id="cb113-1986"><a href="#cb113-1986" aria-hidden="true" tabindex="-1"></a><span class="in">model_a5_average2 &lt;- data_did_withind2 %&gt;% </span></span>
<span id="cb113-1987"><a href="#cb113-1987" aria-hidden="true" tabindex="-1"></a><span class="in">      select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name, ff_30ind_desc, ff_30ind) %&gt;% </span></span>
<span id="cb113-1988"><a href="#cb113-1988" aria-hidden="true" tabindex="-1"></a><span class="in">      filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-1989"><a href="#cb113-1989" aria-hidden="true" tabindex="-1"></a><span class="in">      mutate(</span></span>
<span id="cb113-1990"><a href="#cb113-1990" aria-hidden="true" tabindex="-1"></a><span class="in">        gvkey = as.factor(gvkey), </span></span>
<span id="cb113-1991"><a href="#cb113-1991" aria-hidden="true" tabindex="-1"></a><span class="in">        dyear = as.factor(dyear), </span></span>
<span id="cb113-1992"><a href="#cb113-1992" aria-hidden="true" tabindex="-1"></a><span class="in">        ff_30ind = as.factor(paste(ff_30ind, ff_30ind_desc, sep = ": ")), </span></span>
<span id="cb113-1993"><a href="#cb113-1993" aria-hidden="true" tabindex="-1"></a><span class="in">        group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-1994"><a href="#cb113-1994" aria-hidden="true" tabindex="-1"></a><span class="in">      ) %&gt;% </span></span>
<span id="cb113-1995"><a href="#cb113-1995" aria-hidden="true" tabindex="-1"></a><span class="in">      na.omit() %&gt;% </span></span>
<span id="cb113-1996"><a href="#cb113-1996" aria-hidden="true" tabindex="-1"></a><span class="in">      fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear + ff_30ind^dyear, data = ., cluster = c("gvkey", "ff_30ind_name"))</span></span>
<span id="cb113-1997"><a href="#cb113-1997" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-1998"><a href="#cb113-1998" aria-hidden="true" tabindex="-1"></a><span class="in">model_a5_average2 %&gt;% fixest::etable() </span></span>
<span id="cb113-1999"><a href="#cb113-1999" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2000"><a href="#cb113-2000" aria-hidden="true" tabindex="-1"></a><span class="in">## did analysis for the treatment effects in each industry: </span></span>
<span id="cb113-2001"><a href="#cb113-2001" aria-hidden="true" tabindex="-1"></a><span class="in">did_withind_model2 &lt;- data_did_withind2 %&gt;% </span></span>
<span id="cb113-2002"><a href="#cb113-2002" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name, ff_30ind_desc, ff_30ind) %&gt;% </span></span>
<span id="cb113-2003"><a href="#cb113-2003" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-2004"><a href="#cb113-2004" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-2005"><a href="#cb113-2005" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-2006"><a href="#cb113-2006" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear), </span></span>
<span id="cb113-2007"><a href="#cb113-2007" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind = as.factor(paste(ff_30ind, ff_30ind_desc, sep = ": ")), </span></span>
<span id="cb113-2008"><a href="#cb113-2008" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-2009"><a href="#cb113-2009" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-2010"><a href="#cb113-2010" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-2011"><a href="#cb113-2011" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005:ff_30ind | gvkey + dyear + ff_30ind^dyear, data = ., cluster = c("gvkey"))</span></span>
<span id="cb113-2012"><a href="#cb113-2012" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2013"><a href="#cb113-2013" aria-hidden="true" tabindex="-1"></a><span class="in">did_withind_model2 %&gt;% fixest::etable()</span></span>
<span id="cb113-2014"><a href="#cb113-2014" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2015"><a href="#cb113-2015" aria-hidden="true" tabindex="-1"></a><span class="in">fixest::coefplot(did_withind_model2,</span></span>
<span id="cb113-2016"><a href="#cb113-2016" aria-hidden="true" tabindex="-1"></a><span class="in">                 order = str_extract(string = names(sort(coef(did_withind_model2), decreasing = FALSE)), pattern = "(?&lt;=ind).*"), </span></span>
<span id="cb113-2017"><a href="#cb113-2017" aria-hidden="true" tabindex="-1"></a><span class="in">                 horiz = TRUE, </span></span>
<span id="cb113-2018"><a href="#cb113-2018" aria-hidden="true" tabindex="-1"></a><span class="in">                 drop = "Print", # remove the number 5: Printing &amp; Publishing</span></span>
<span id="cb113-2019"><a href="#cb113-2019" aria-hidden="true" tabindex="-1"></a><span class="in">                 main = "", </span></span>
<span id="cb113-2020"><a href="#cb113-2020" aria-hidden="true" tabindex="-1"></a><span class="in">                 sub = ""</span></span>
<span id="cb113-2021"><a href="#cb113-2021" aria-hidden="true" tabindex="-1"></a><span class="in">                 ); </span></span>
<span id="cb113-2022"><a href="#cb113-2022" aria-hidden="true" tabindex="-1"></a><span class="in">title(main = expression(bold("Treatment Effect Estimates for Fama-French 30 Industries (Book leverage" %in% "[0,1])")), adj = 0.2); </span></span>
<span id="cb113-2023"><a href="#cb113-2023" aria-hidden="true" tabindex="-1"></a><span class="in">mtext("*Printing and Publishing (Industry 5) is excluded. Red dashed line indicates the average treatment effect.", side = 1, line = 4, adj = 0); </span></span>
<span id="cb113-2024"><a href="#cb113-2024" aria-hidden="true" tabindex="-1"></a><span class="in">abline(v = model_a5_average2$coefficients, col = 2, lty = 2, lwd = 3)</span></span>
<span id="cb113-2025"><a href="#cb113-2025" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-2026"><a href="#cb113-2026" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2027"><a href="#cb113-2027" aria-hidden="true" tabindex="-1"></a>The industry-by-industry estimates show that observations for <span class="in">`ff_30ind == 8, 22, 23`</span> (Healthcare, Medical Equipment, Pharmaceutical Products; Personal and Business Services; Business Equipment) are significantly reduced and this contributes to the change in the average treatment effect estimate in @sec-a2-results-using-data-filters-in-the-main-paper. </span>
<span id="cb113-2028"><a href="#cb113-2028" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2029"><a href="#cb113-2029" aria-hidden="true" tabindex="-1"></a>--- </span>
<span id="cb113-2030"><a href="#cb113-2030" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2031"><a href="#cb113-2031" aria-hidden="true" tabindex="-1"></a>We also compare the treatment effects from the two samples: </span>
<span id="cb113-2032"><a href="#cb113-2032" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2033"><a href="#cb113-2033" aria-hidden="true" tabindex="-1"></a>as the coefficient estimates for industry 5 are too large, they are excluded in the following graph. </span>
<span id="cb113-2034"><a href="#cb113-2034" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2035"><a href="#cb113-2035" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a6-did-industry-compare, echo=TRUE, fig.height=10, fig.width=15, warning=FALSE, message=FALSE}</span></span>
<span id="cb113-2036"><a href="#cb113-2036" aria-hidden="true" tabindex="-1"></a><span class="in">#| column: page-right </span></span>
<span id="cb113-2037"><a href="#cb113-2037" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2038"><a href="#cb113-2038" aria-hidden="true" tabindex="-1"></a><span class="in">fixest::coefplot(list(did_withind_model, did_withind_model2), </span></span>
<span id="cb113-2039"><a href="#cb113-2039" aria-hidden="true" tabindex="-1"></a><span class="in">                 order = paste("ind", sort(as.numeric(str_extract(names(coef(did_withind_model2)), pattern = "(?&lt;=ind)[^:]+"))), ":", sep = ""), </span></span>
<span id="cb113-2040"><a href="#cb113-2040" aria-hidden="true" tabindex="-1"></a><span class="in">                 horiz = TRUE, </span></span>
<span id="cb113-2041"><a href="#cb113-2041" aria-hidden="true" tabindex="-1"></a><span class="in">                 drop = "Print", # remove the number 5: Printing &amp; Publishing</span></span>
<span id="cb113-2042"><a href="#cb113-2042" aria-hidden="true" tabindex="-1"></a><span class="in">                 main = "", </span></span>
<span id="cb113-2043"><a href="#cb113-2043" aria-hidden="true" tabindex="-1"></a><span class="in">                 sub = "", sep = 0.3</span></span>
<span id="cb113-2044"><a href="#cb113-2044" aria-hidden="true" tabindex="-1"></a><span class="in">                 ); </span></span>
<span id="cb113-2045"><a href="#cb113-2045" aria-hidden="true" tabindex="-1"></a><span class="in">title(main = expression(bold("Treatment Effect Estimates for Fama-French 30 Industries")), adj = 0.2); </span></span>
<span id="cb113-2046"><a href="#cb113-2046" aria-hidden="true" tabindex="-1"></a><span class="in">mtext("*Printing and Publishing (Industry 5) is excluded. Red dashed line indicates the average treatment effect.", side = 1, line = 4, adj = 0); </span></span>
<span id="cb113-2047"><a href="#cb113-2047" aria-hidden="true" tabindex="-1"></a><span class="in">legend("bottomleft", bty = "n", col = c(1, 2), pch = c(20, 17), </span></span>
<span id="cb113-2048"><a href="#cb113-2048" aria-hidden="true" tabindex="-1"></a><span class="in">       legend = c("Full Sample", expression("Book leverage" %in% "[0,1]")))</span></span>
<span id="cb113-2049"><a href="#cb113-2049" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-2050"><a href="#cb113-2050" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2051"><a href="#cb113-2051" aria-hidden="true" tabindex="-1"></a>We also check the impact of this filter, <span class="in">`book_leverage ∈ [0,1]`</span>, on the sample. The left table below gives the number of firm-year observations for each industry in the full sample and the right one gives the number of observations for each industry in the filter sample. We can see a decrease in the number of observations in the three industries, 8, 22 and 23, after applying the filter. These three industries happen to be the ones contribute most to the average treatment effect. </span>
<span id="cb113-2052"><a href="#cb113-2052" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2053"><a href="#cb113-2053" aria-hidden="true" tabindex="-1"></a><span class="in">```{r ind-obs-compare, echo=TRUE} </span></span>
<span id="cb113-2054"><a href="#cb113-2054" aria-hidden="true" tabindex="-1"></a><span class="in">#| column: page-right </span></span>
<span id="cb113-2055"><a href="#cb113-2055" aria-hidden="true" tabindex="-1"></a><span class="in">#| layout-ncol: 2</span></span>
<span id="cb113-2056"><a href="#cb113-2056" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2057"><a href="#cb113-2057" aria-hidden="true" tabindex="-1"></a><span class="in">tbl_count1 &lt;- data %&gt;% </span></span>
<span id="cb113-2058"><a href="#cb113-2058" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable </span></span>
<span id="cb113-2059"><a href="#cb113-2059" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm, by = join_by(gvkey) ) %&gt;% </span></span>
<span id="cb113-2060"><a href="#cb113-2060" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classification </span></span>
<span id="cb113-2061"><a href="#cb113-2061" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;% </span></span>
<span id="cb113-2062"><a href="#cb113-2062" aria-hidden="true" tabindex="-1"></a><span class="in">  ## remove some industries: </span></span>
<span id="cb113-2063"><a href="#cb113-2063" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb113-2064"><a href="#cb113-2064" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 20, # exclude Utiltiy (number 20) </span></span>
<span id="cb113-2065"><a href="#cb113-2065" aria-hidden="true" tabindex="-1"></a><span class="in">    !(sic &gt;= 6000 &amp; sic &lt;= 6199) # exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb113-2066"><a href="#cb113-2066" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-2067"><a href="#cb113-2067" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;%  </span></span>
<span id="cb113-2068"><a href="#cb113-2068" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;%</span></span>
<span id="cb113-2069"><a href="#cb113-2069" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(ff_30ind) %&gt;% </span></span>
<span id="cb113-2070"><a href="#cb113-2070" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(n_obs = n(), ff_30ind_name = unique(ff_30ind_desc)) %&gt;%</span></span>
<span id="cb113-2071"><a href="#cb113-2071" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() %&gt;% </span></span>
<span id="cb113-2072"><a href="#cb113-2072" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(`n_per %` = round(n_obs / sum(n_obs) * 100, digits = 2)) %&gt;% </span></span>
<span id="cb113-2073"><a href="#cb113-2073" aria-hidden="true" tabindex="-1"></a><span class="in">  arrange(-n_obs) %&gt;% </span></span>
<span id="cb113-2074"><a href="#cb113-2074" aria-hidden="true" tabindex="-1"></a><span class="in">  gt() %&gt;% </span></span>
<span id="cb113-2075"><a href="#cb113-2075" aria-hidden="true" tabindex="-1"></a><span class="in">  tab_spanner(</span></span>
<span id="cb113-2076"><a href="#cb113-2076" aria-hidden="true" tabindex="-1"></a><span class="in">    label = "(1) Full Sample",</span></span>
<span id="cb113-2077"><a href="#cb113-2077" aria-hidden="true" tabindex="-1"></a><span class="in">    columns = c(n_obs, `n_per %`)</span></span>
<span id="cb113-2078"><a href="#cb113-2078" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-2079"><a href="#cb113-2079" aria-hidden="true" tabindex="-1"></a><span class="in">  tab_style(</span></span>
<span id="cb113-2080"><a href="#cb113-2080" aria-hidden="true" tabindex="-1"></a><span class="in">    style = cell_text(size = "x-small"),  # Reduce font size</span></span>
<span id="cb113-2081"><a href="#cb113-2081" aria-hidden="true" tabindex="-1"></a><span class="in">    locations = cells_column_labels(columns = everything()) # reduce the size of tab headers </span></span>
<span id="cb113-2082"><a href="#cb113-2082" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-2083"><a href="#cb113-2083" aria-hidden="true" tabindex="-1"></a><span class="in">  tab_style(</span></span>
<span id="cb113-2084"><a href="#cb113-2084" aria-hidden="true" tabindex="-1"></a><span class="in">    style = cell_text(size = "x-small"),  # Reduce font size</span></span>
<span id="cb113-2085"><a href="#cb113-2085" aria-hidden="true" tabindex="-1"></a><span class="in">    locations = cells_body()</span></span>
<span id="cb113-2086"><a href="#cb113-2086" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-2087"><a href="#cb113-2087" aria-hidden="true" tabindex="-1"></a><span class="in">tbl_count1</span></span>
<span id="cb113-2088"><a href="#cb113-2088" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2089"><a href="#cb113-2089" aria-hidden="true" tabindex="-1"></a><span class="in">tbl_count2 &lt;- data_did_withind2 %&gt;% </span></span>
<span id="cb113-2090"><a href="#cb113-2090" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;%  </span></span>
<span id="cb113-2091"><a href="#cb113-2091" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;%</span></span>
<span id="cb113-2092"><a href="#cb113-2092" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(ff_30ind) %&gt;% </span></span>
<span id="cb113-2093"><a href="#cb113-2093" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(n_obs = n(), ff_30ind_name = unique(ff_30ind_desc)) %&gt;%</span></span>
<span id="cb113-2094"><a href="#cb113-2094" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() %&gt;% </span></span>
<span id="cb113-2095"><a href="#cb113-2095" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(`n_per %` = round(n_obs / sum(n_obs) * 100, digits = 2)) %&gt;% </span></span>
<span id="cb113-2096"><a href="#cb113-2096" aria-hidden="true" tabindex="-1"></a><span class="in">  arrange(-n_obs) %&gt;% </span></span>
<span id="cb113-2097"><a href="#cb113-2097" aria-hidden="true" tabindex="-1"></a><span class="in">  gt() %&gt;% </span></span>
<span id="cb113-2098"><a href="#cb113-2098" aria-hidden="true" tabindex="-1"></a><span class="in">  tab_spanner(</span></span>
<span id="cb113-2099"><a href="#cb113-2099" aria-hidden="true" tabindex="-1"></a><span class="in">    label = html("(2) book leverage &amp;isin; [0,1]"), </span></span>
<span id="cb113-2100"><a href="#cb113-2100" aria-hidden="true" tabindex="-1"></a><span class="in">    columns = c(n_obs, `n_per %`)</span></span>
<span id="cb113-2101"><a href="#cb113-2101" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-2102"><a href="#cb113-2102" aria-hidden="true" tabindex="-1"></a><span class="in">  tab_style(</span></span>
<span id="cb113-2103"><a href="#cb113-2103" aria-hidden="true" tabindex="-1"></a><span class="in">    style = cell_text(size = "x-small"),  # Reduce font size</span></span>
<span id="cb113-2104"><a href="#cb113-2104" aria-hidden="true" tabindex="-1"></a><span class="in">    locations = cells_column_labels(columns = everything()) # reduce the size of tab headers </span></span>
<span id="cb113-2105"><a href="#cb113-2105" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-2106"><a href="#cb113-2106" aria-hidden="true" tabindex="-1"></a><span class="in">  tab_style(</span></span>
<span id="cb113-2107"><a href="#cb113-2107" aria-hidden="true" tabindex="-1"></a><span class="in">    style = cell_text(size = "x-small"),  # Reduce font size</span></span>
<span id="cb113-2108"><a href="#cb113-2108" aria-hidden="true" tabindex="-1"></a><span class="in">    locations = cells_body()</span></span>
<span id="cb113-2109"><a href="#cb113-2109" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-2110"><a href="#cb113-2110" aria-hidden="true" tabindex="-1"></a><span class="in">tbl_count2 </span></span>
<span id="cb113-2111"><a href="#cb113-2111" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-2112"><a href="#cb113-2112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2113"><a href="#cb113-2113" aria-hidden="true" tabindex="-1"></a>To further validate our conjecture that the filter affecting different industries unequally, we remove all firms which contain <span class="in">`book_leverage`</span> outside the <span class="co">[</span><span class="ot">0,1</span><span class="co">]</span> range. We re-do the main analysis and the industry level analysis on a balanced panel: </span>
<span id="cb113-2114"><a href="#cb113-2114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2115"><a href="#cb113-2115" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a6-did-industry-01-balance, echo=TRUE, fig.height=10, fig.width=15, warning=FALSE, message=FALSE}</span></span>
<span id="cb113-2116"><a href="#cb113-2116" aria-hidden="true" tabindex="-1"></a><span class="in">#| column: page-right</span></span>
<span id="cb113-2117"><a href="#cb113-2117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2118"><a href="#cb113-2118" aria-hidden="true" tabindex="-1"></a><span class="in">## create leverage variables </span></span>
<span id="cb113-2119"><a href="#cb113-2119" aria-hidden="true" tabindex="-1"></a><span class="in">data &lt;- compustat_na %&gt;% </span></span>
<span id="cb113-2120"><a href="#cb113-2120" aria-hidden="true" tabindex="-1"></a><span class="in">  # filter(at &gt; 0) %&gt;% </span></span>
<span id="cb113-2121"><a href="#cb113-2121" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(indfmt == "INDL") %&gt;% ## remove all financial firms </span></span>
<span id="cb113-2122"><a href="#cb113-2122" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-2123"><a href="#cb113-2123" aria-hidden="true" tabindex="-1"></a><span class="in">    ## leverage variables: </span></span>
<span id="cb113-2124"><a href="#cb113-2124" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = (dlc + dltt) / at, </span></span>
<span id="cb113-2125"><a href="#cb113-2125" aria-hidden="true" tabindex="-1"></a><span class="in">    debt_ebitda = (dlc + dltt) / ebitda, </span></span>
<span id="cb113-2126"><a href="#cb113-2126" aria-hidden="true" tabindex="-1"></a><span class="in">    ## treatment intensity: </span></span>
<span id="cb113-2127"><a href="#cb113-2127" aria-hidden="true" tabindex="-1"></a><span class="in">    totalrent = mrc1 + mrc2 + mrc3 + mrc4 + mrc5 + mrct, # total rent w/o discount</span></span>
<span id="cb113-2128"><a href="#cb113-2128" aria-hidden="true" tabindex="-1"></a><span class="in">    # contract_intensity = (dclo + xrent * 3) / at, # executory contract intensity</span></span>
<span id="cb113-2129"><a href="#cb113-2129" aria-hidden="true" tabindex="-1"></a><span class="in">    contract_intensity = (dclo + totalrent) / at, # executory contract intensity</span></span>
<span id="cb113-2130"><a href="#cb113-2130" aria-hidden="true" tabindex="-1"></a><span class="in">    ## other variables: </span></span>
<span id="cb113-2131"><a href="#cb113-2131" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.integer(substr(datadate, start = 1, stop = 4)) # data year</span></span>
<span id="cb113-2132"><a href="#cb113-2132" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-2133"><a href="#cb113-2133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2134"><a href="#cb113-2134" aria-hidden="true" tabindex="-1"></a><span class="in">data_firm &lt;- data %&gt;% </span></span>
<span id="cb113-2135"><a href="#cb113-2135" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear == 2000) %&gt;% # use `dyear` may create multiple observations for the same firm. E.g. filter(gvkey == 23535, dyear == 2005) </span></span>
<span id="cb113-2136"><a href="#cb113-2136" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, contract_intensity_2000 = contract_intensity) %&gt;% </span></span>
<span id="cb113-2137"><a href="#cb113-2137" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;% </span></span>
<span id="cb113-2138"><a href="#cb113-2138" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(contract_intensity_2000 = mean(contract_intensity_2000, na.rm = TRUE) ) %&gt;% </span></span>
<span id="cb113-2139"><a href="#cb113-2139" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() </span></span>
<span id="cb113-2140"><a href="#cb113-2140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2141"><a href="#cb113-2141" aria-hidden="true" tabindex="-1"></a><span class="in">FF_30ind &lt;- as_tibble(read.csv(file = "C:/Users/13613/OneDrive - Handelshögskolan i Stockholm/Projects_2024/BeckerJosephsonXu_2025/AFA_meeting_response/Data/ff_30ind.csv"))</span></span>
<span id="cb113-2142"><a href="#cb113-2142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2143"><a href="#cb113-2143" aria-hidden="true" tabindex="-1"></a><span class="in">data_did_withind3 &lt;- data %&gt;% </span></span>
<span id="cb113-2144"><a href="#cb113-2144" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable </span></span>
<span id="cb113-2145"><a href="#cb113-2145" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm, by = join_by(gvkey) ) %&gt;% </span></span>
<span id="cb113-2146"><a href="#cb113-2146" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classification </span></span>
<span id="cb113-2147"><a href="#cb113-2147" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;% </span></span>
<span id="cb113-2148"><a href="#cb113-2148" aria-hidden="true" tabindex="-1"></a><span class="in">  ## pre- &amp; post- </span></span>
<span id="cb113-2149"><a href="#cb113-2149" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-2150"><a href="#cb113-2150" aria-hidden="true" tabindex="-1"></a><span class="in">    indexyear = (dyear - base_year), # year index with 2005 as base 0.</span></span>
<span id="cb113-2151"><a href="#cb113-2151" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(dyear &gt; base_year, yes = 1, no = 0)  # whether it is after the 2005 reform </span></span>
<span id="cb113-2152"><a href="#cb113-2152" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-2153"><a href="#cb113-2153" aria-hidden="true" tabindex="-1"></a><span class="in">  ## remove some industries: </span></span>
<span id="cb113-2154"><a href="#cb113-2154" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb113-2155"><a href="#cb113-2155" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 20, # exclude Utiltiy (number 20) </span></span>
<span id="cb113-2156"><a href="#cb113-2156" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 5, # exclude (number 5) </span></span>
<span id="cb113-2157"><a href="#cb113-2157" aria-hidden="true" tabindex="-1"></a><span class="in">    fic == "USA", </span></span>
<span id="cb113-2158"><a href="#cb113-2158" aria-hidden="true" tabindex="-1"></a><span class="in">    !(sic &gt;= 6000 &amp; sic &lt;= 6199) # exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb113-2159"><a href="#cb113-2159" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-2160"><a href="#cb113-2160" aria-hidden="true" tabindex="-1"></a><span class="in">  # drop values outside the range:</span></span>
<span id="cb113-2161"><a href="#cb113-2161" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-2162"><a href="#cb113-2162" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 1), yes = book_leverage, no = NA) </span></span>
<span id="cb113-2163"><a href="#cb113-2163" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-2164"><a href="#cb113-2164" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb113-2165"><a href="#cb113-2165" aria-hidden="true" tabindex="-1"></a><span class="in">## did analysis: </span></span>
<span id="cb113-2166"><a href="#cb113-2166" aria-hidden="true" tabindex="-1"></a><span class="in">data_did_withind3 %&gt;% </span></span>
<span id="cb113-2167"><a href="#cb113-2167" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-2168"><a href="#cb113-2168" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-2169"><a href="#cb113-2169" aria-hidden="true" tabindex="-1"></a><span class="in">  ## keep only firms with all observations over the full period.</span></span>
<span id="cb113-2170"><a href="#cb113-2170" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-2171"><a href="#cb113-2171" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;%</span></span>
<span id="cb113-2172"><a href="#cb113-2172" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-2173"><a href="#cb113-2173" aria-hidden="true" tabindex="-1"></a><span class="in">    n_obs = n(), # number of observations for each firm</span></span>
<span id="cb113-2174"><a href="#cb113-2174" aria-hidden="true" tabindex="-1"></a><span class="in">    n_post = sum(post_2005, na.rm = TRUE) # number of obs after 2005</span></span>
<span id="cb113-2175"><a href="#cb113-2175" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-2176"><a href="#cb113-2176" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() %&gt;%</span></span>
<span id="cb113-2177"><a href="#cb113-2177" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(n_obs &gt;= 6) %&gt;% </span></span>
<span id="cb113-2178"><a href="#cb113-2178" aria-hidden="true" tabindex="-1"></a><span class="in">  ## re-clean  </span></span>
<span id="cb113-2179"><a href="#cb113-2179" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-2180"><a href="#cb113-2180" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey) </span></span>
<span id="cb113-2181"><a href="#cb113-2181" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-2182"><a href="#cb113-2182" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-2183"><a href="#cb113-2183" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear + ff_30ind^dyear, data = ., cluster = c("gvkey", "ff_30ind_name")) %&gt;% </span></span>
<span id="cb113-2184"><a href="#cb113-2184" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::etable()</span></span>
<span id="cb113-2185"><a href="#cb113-2185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2186"><a href="#cb113-2186" aria-hidden="true" tabindex="-1"></a><span class="in">## did analysis for the treatment effects in each industry: </span></span>
<span id="cb113-2187"><a href="#cb113-2187" aria-hidden="true" tabindex="-1"></a><span class="in">did_withind_model3 &lt;- data_did_withind3 %&gt;% </span></span>
<span id="cb113-2188"><a href="#cb113-2188" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name, ff_30ind_desc, ff_30ind) %&gt;% </span></span>
<span id="cb113-2189"><a href="#cb113-2189" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-2190"><a href="#cb113-2190" aria-hidden="true" tabindex="-1"></a><span class="in">  ## keep only firms with all observations over the full period.</span></span>
<span id="cb113-2191"><a href="#cb113-2191" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-2192"><a href="#cb113-2192" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;%</span></span>
<span id="cb113-2193"><a href="#cb113-2193" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-2194"><a href="#cb113-2194" aria-hidden="true" tabindex="-1"></a><span class="in">    n_obs = n(), # number of observations for each firm</span></span>
<span id="cb113-2195"><a href="#cb113-2195" aria-hidden="true" tabindex="-1"></a><span class="in">    n_post = sum(post_2005, na.rm = TRUE) # number of obs after 2005</span></span>
<span id="cb113-2196"><a href="#cb113-2196" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-2197"><a href="#cb113-2197" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() %&gt;%</span></span>
<span id="cb113-2198"><a href="#cb113-2198" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(n_obs &gt;= 6) %&gt;% </span></span>
<span id="cb113-2199"><a href="#cb113-2199" aria-hidden="true" tabindex="-1"></a><span class="in">  ## </span></span>
<span id="cb113-2200"><a href="#cb113-2200" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-2201"><a href="#cb113-2201" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey), </span></span>
<span id="cb113-2202"><a href="#cb113-2202" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind = as.factor(paste(ff_30ind, ff_30ind_desc, sep = ": ")), </span></span>
<span id="cb113-2203"><a href="#cb113-2203" aria-hidden="true" tabindex="-1"></a><span class="in">    group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-2204"><a href="#cb113-2204" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-2205"><a href="#cb113-2205" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-2206"><a href="#cb113-2206" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005:ff_30ind | gvkey + dyear + ff_30ind^dyear, data = ., cluster = c("gvkey"))</span></span>
<span id="cb113-2207"><a href="#cb113-2207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2208"><a href="#cb113-2208" aria-hidden="true" tabindex="-1"></a><span class="in">model_a5_average3 &lt;- data_did_withind3 %&gt;% </span></span>
<span id="cb113-2209"><a href="#cb113-2209" aria-hidden="true" tabindex="-1"></a><span class="in">      select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind_name, ff_30ind_desc, ff_30ind) %&gt;% </span></span>
<span id="cb113-2210"><a href="#cb113-2210" aria-hidden="true" tabindex="-1"></a><span class="in">      filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-2211"><a href="#cb113-2211" aria-hidden="true" tabindex="-1"></a><span class="in">      ## keep only firms with all observations over the full period.</span></span>
<span id="cb113-2212"><a href="#cb113-2212" aria-hidden="true" tabindex="-1"></a><span class="in">      na.omit() %&gt;% </span></span>
<span id="cb113-2213"><a href="#cb113-2213" aria-hidden="true" tabindex="-1"></a><span class="in">      group_by(gvkey) %&gt;%</span></span>
<span id="cb113-2214"><a href="#cb113-2214" aria-hidden="true" tabindex="-1"></a><span class="in">      mutate(</span></span>
<span id="cb113-2215"><a href="#cb113-2215" aria-hidden="true" tabindex="-1"></a><span class="in">        n_obs = n(), # number of observations for each firm</span></span>
<span id="cb113-2216"><a href="#cb113-2216" aria-hidden="true" tabindex="-1"></a><span class="in">        n_post = sum(post_2005, na.rm = TRUE) # number of obs after 2005</span></span>
<span id="cb113-2217"><a href="#cb113-2217" aria-hidden="true" tabindex="-1"></a><span class="in">      ) %&gt;%</span></span>
<span id="cb113-2218"><a href="#cb113-2218" aria-hidden="true" tabindex="-1"></a><span class="in">      ungroup() %&gt;%</span></span>
<span id="cb113-2219"><a href="#cb113-2219" aria-hidden="true" tabindex="-1"></a><span class="in">      filter(n_obs &gt;= 6) %&gt;% </span></span>
<span id="cb113-2220"><a href="#cb113-2220" aria-hidden="true" tabindex="-1"></a><span class="in">      ## </span></span>
<span id="cb113-2221"><a href="#cb113-2221" aria-hidden="true" tabindex="-1"></a><span class="in">      mutate(</span></span>
<span id="cb113-2222"><a href="#cb113-2222" aria-hidden="true" tabindex="-1"></a><span class="in">        gvkey = as.factor(gvkey), </span></span>
<span id="cb113-2223"><a href="#cb113-2223" aria-hidden="true" tabindex="-1"></a><span class="in">        ff_30ind = as.factor(paste(ff_30ind, ff_30ind_desc, sep = ": ")), </span></span>
<span id="cb113-2224"><a href="#cb113-2224" aria-hidden="true" tabindex="-1"></a><span class="in">        group = contract_intensity_2000 &gt; median(contract_intensity_2000, na.rm = TRUE) </span></span>
<span id="cb113-2225"><a href="#cb113-2225" aria-hidden="true" tabindex="-1"></a><span class="in">      ) %&gt;% </span></span>
<span id="cb113-2226"><a href="#cb113-2226" aria-hidden="true" tabindex="-1"></a><span class="in">      na.omit() %&gt;% </span></span>
<span id="cb113-2227"><a href="#cb113-2227" aria-hidden="true" tabindex="-1"></a><span class="in">      fixest::feols(fml = book_leverage ~ contract_intensity_2000:post_2005 | gvkey + dyear + sic^dyear, data = ., cluster = c("gvkey", "ff_30ind_name"))</span></span>
<span id="cb113-2228"><a href="#cb113-2228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2229"><a href="#cb113-2229" aria-hidden="true" tabindex="-1"></a><span class="in">did_withind_model3 %&gt;% fixest::etable()</span></span>
<span id="cb113-2230"><a href="#cb113-2230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2231"><a href="#cb113-2231" aria-hidden="true" tabindex="-1"></a><span class="in">fixest::coefplot(did_withind_model3,</span></span>
<span id="cb113-2232"><a href="#cb113-2232" aria-hidden="true" tabindex="-1"></a><span class="in">                 order = str_extract(string = names(sort(coef(did_withind_model3), decreasing = FALSE)), pattern = "(?&lt;=ind).*"), </span></span>
<span id="cb113-2233"><a href="#cb113-2233" aria-hidden="true" tabindex="-1"></a><span class="in">                 horiz = TRUE, </span></span>
<span id="cb113-2234"><a href="#cb113-2234" aria-hidden="true" tabindex="-1"></a><span class="in">                 drop = "Print", # remove the number 5: Printing &amp; Publishing</span></span>
<span id="cb113-2235"><a href="#cb113-2235" aria-hidden="true" tabindex="-1"></a><span class="in">                 main = "", </span></span>
<span id="cb113-2236"><a href="#cb113-2236" aria-hidden="true" tabindex="-1"></a><span class="in">                 sub = ""</span></span>
<span id="cb113-2237"><a href="#cb113-2237" aria-hidden="true" tabindex="-1"></a><span class="in">                 ); </span></span>
<span id="cb113-2238"><a href="#cb113-2238" aria-hidden="true" tabindex="-1"></a><span class="in">title(main = expression(bold("Treatment Effect Estimates for Fama-French 30 Industries (Book leverage" %in% "[0,1] &amp; Balanced Panel)")), adj = 0.2); </span></span>
<span id="cb113-2239"><a href="#cb113-2239" aria-hidden="true" tabindex="-1"></a><span class="in">mtext("*Printing and Publishing (Industry 5) is excluded. Red dashed line indicates the average treatment effect.", side = 1, line = 4, adj = 0); </span></span>
<span id="cb113-2240"><a href="#cb113-2240" aria-hidden="true" tabindex="-1"></a><span class="in">abline(v = model_a5_average3$coefficients, col = 2, lty = 2, lwd = 3)</span></span>
<span id="cb113-2241"><a href="#cb113-2241" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb113-2242"><a href="#cb113-2242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2243"><a href="#cb113-2243" aria-hidden="true" tabindex="-1"></a>The average treatment effect estimate is negative but insignificant in the filtered sample. In particular, we have seen a large change in the treatment effect estimate in industries 8 and 23. As these industries consist of most of the observations in our sample (over 25\%), this significantly reduce the magnitude of the average treatment effect estimate in the sample and make it insignificant.  </span>
<span id="cb113-2244"><a href="#cb113-2244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2245"><a href="#cb113-2245" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb113-2246"><a href="#cb113-2246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2247"><a href="#cb113-2247" aria-hidden="true" tabindex="-1"></a>In this subsection, let's look into the dynamics of those excluded observations: </span>
<span id="cb113-2248"><a href="#cb113-2248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2249"><a href="#cb113-2249" aria-hidden="true" tabindex="-1"></a><span class="in">```{r a6-testground, echo=TRUE}</span></span>
<span id="cb113-2250"><a href="#cb113-2250" aria-hidden="true" tabindex="-1"></a><span class="in">## data prep: </span></span>
<span id="cb113-2251"><a href="#cb113-2251" aria-hidden="true" tabindex="-1"></a><span class="in">data_did_withind3 &lt;- data %&gt;% </span></span>
<span id="cb113-2252"><a href="#cb113-2252" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the grouping variable </span></span>
<span id="cb113-2253"><a href="#cb113-2253" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = data_firm, by = join_by(gvkey) ) %&gt;% </span></span>
<span id="cb113-2254"><a href="#cb113-2254" aria-hidden="true" tabindex="-1"></a><span class="in">  ## merge the FF 30 industry classification </span></span>
<span id="cb113-2255"><a href="#cb113-2255" aria-hidden="true" tabindex="-1"></a><span class="in">  left_join(y = FF_30ind, by = join_by(sic)) %&gt;% </span></span>
<span id="cb113-2256"><a href="#cb113-2256" aria-hidden="true" tabindex="-1"></a><span class="in">  ## pre- &amp; post- </span></span>
<span id="cb113-2257"><a href="#cb113-2257" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-2258"><a href="#cb113-2258" aria-hidden="true" tabindex="-1"></a><span class="in">    indexyear = (dyear - base_year), # year index with 2005 as base 0.</span></span>
<span id="cb113-2259"><a href="#cb113-2259" aria-hidden="true" tabindex="-1"></a><span class="in">    post_2005 = ifelse(dyear &gt; base_year, yes = 1, no = 0)  # whether it is after the 2005 reform </span></span>
<span id="cb113-2260"><a href="#cb113-2260" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-2261"><a href="#cb113-2261" aria-hidden="true" tabindex="-1"></a><span class="in">  ## remove some industries: </span></span>
<span id="cb113-2262"><a href="#cb113-2262" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb113-2263"><a href="#cb113-2263" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 20, # exclude Utiltiy (number 20) </span></span>
<span id="cb113-2264"><a href="#cb113-2264" aria-hidden="true" tabindex="-1"></a><span class="in">    ff_30ind != 5, # exclude (number 5) </span></span>
<span id="cb113-2265"><a href="#cb113-2265" aria-hidden="true" tabindex="-1"></a><span class="in">    !(sic &gt;= 6000 &amp; sic &lt;= 6199) # exclude banks under Banking, Insurance, Real Estate, Trading (number 29)</span></span>
<span id="cb113-2266"><a href="#cb113-2266" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-2267"><a href="#cb113-2267" aria-hidden="true" tabindex="-1"></a><span class="in">  # drop values outside the range:</span></span>
<span id="cb113-2268"><a href="#cb113-2268" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-2269"><a href="#cb113-2269" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage_filter = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 1), yes = book_leverage, no = NA) </span></span>
<span id="cb113-2270"><a href="#cb113-2270" aria-hidden="true" tabindex="-1"></a><span class="in">  ) </span></span>
<span id="cb113-2271"><a href="#cb113-2271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2272"><a href="#cb113-2272" aria-hidden="true" tabindex="-1"></a><span class="in">data_did_withind3 %&gt;% </span></span>
<span id="cb113-2273"><a href="#cb113-2273" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(is.na(book_leverage_filter)) %&gt;% </span></span>
<span id="cb113-2274"><a href="#cb113-2274" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2000 &amp; dyear &lt;= 2007 &amp; !is.na(book_leverage) &amp; !is.na(contract_intensity_2000)) %&gt;% </span></span>
<span id="cb113-2275"><a href="#cb113-2275" aria-hidden="true" tabindex="-1"></a><span class="in">  select(conm, tic, </span></span>
<span id="cb113-2276"><a href="#cb113-2276" aria-hidden="true" tabindex="-1"></a><span class="in">         # tic, cik, fic, </span></span>
<span id="cb113-2277"><a href="#cb113-2277" aria-hidden="true" tabindex="-1"></a><span class="in">         dyear, </span></span>
<span id="cb113-2278"><a href="#cb113-2278" aria-hidden="true" tabindex="-1"></a><span class="in">         # fyear, datadate,</span></span>
<span id="cb113-2279"><a href="#cb113-2279" aria-hidden="true" tabindex="-1"></a><span class="in">         ci_2000 = contract_intensity_2000, book_leverage, </span></span>
<span id="cb113-2280"><a href="#cb113-2280" aria-hidden="true" tabindex="-1"></a><span class="in">         at, dlc, dltt, ff_30ind_name) </span></span>
<span id="cb113-2281"><a href="#cb113-2281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2282"><a href="#cb113-2282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2283"><a href="#cb113-2283" aria-hidden="true" tabindex="-1"></a><span class="in">## boxplot </span></span>
<span id="cb113-2284"><a href="#cb113-2284" aria-hidden="true" tabindex="-1"></a><span class="in">data_did_withind3 %&gt;% </span></span>
<span id="cb113-2285"><a href="#cb113-2285" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind, ff_30ind_name, book_leverage_filter) %&gt;% </span></span>
<span id="cb113-2286"><a href="#cb113-2286" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-2287"><a href="#cb113-2287" aria-hidden="true" tabindex="-1"></a><span class="in">  ## keep only firms with all observations over the full period.</span></span>
<span id="cb113-2288"><a href="#cb113-2288" aria-hidden="true" tabindex="-1"></a><span class="in">  # na.omit() %&gt;% </span></span>
<span id="cb113-2289"><a href="#cb113-2289" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;%</span></span>
<span id="cb113-2290"><a href="#cb113-2290" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-2291"><a href="#cb113-2291" aria-hidden="true" tabindex="-1"></a><span class="in">    n_obs = sum(!is.na(book_leverage_filter)), # number of non-NA observations for each firm </span></span>
<span id="cb113-2292"><a href="#cb113-2292" aria-hidden="true" tabindex="-1"></a><span class="in">    n_post = sum(post_2005, na.rm = TRUE) # number of obs after 2005</span></span>
<span id="cb113-2293"><a href="#cb113-2293" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-2294"><a href="#cb113-2294" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() %&gt;%</span></span>
<span id="cb113-2295"><a href="#cb113-2295" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(n_obs &lt; 6) %&gt;% </span></span>
<span id="cb113-2296"><a href="#cb113-2296" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-2297"><a href="#cb113-2297" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear)</span></span>
<span id="cb113-2298"><a href="#cb113-2298" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-2299"><a href="#cb113-2299" aria-hidden="true" tabindex="-1"></a><span class="in">  ggplot(data = ., aes(x = dyear, y = book_leverage)) +</span></span>
<span id="cb113-2300"><a href="#cb113-2300" aria-hidden="true" tabindex="-1"></a><span class="in">  ## box plot</span></span>
<span id="cb113-2301"><a href="#cb113-2301" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_boxplot(notch = FALSE, outlier.shape = 4) +</span></span>
<span id="cb113-2302"><a href="#cb113-2302" aria-hidden="true" tabindex="-1"></a><span class="in">  ## add dot plot</span></span>
<span id="cb113-2303"><a href="#cb113-2303" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_dotplot(binaxis = "y",</span></span>
<span id="cb113-2304"><a href="#cb113-2304" aria-hidden="true" tabindex="-1"></a><span class="in">               binwidth = 1/50,</span></span>
<span id="cb113-2305"><a href="#cb113-2305" aria-hidden="true" tabindex="-1"></a><span class="in">               position = position_jitter(width = 0, height = 0.1, seed = 123),</span></span>
<span id="cb113-2306"><a href="#cb113-2306" aria-hidden="true" tabindex="-1"></a><span class="in">               stackdir = "center",</span></span>
<span id="cb113-2307"><a href="#cb113-2307" aria-hidden="true" tabindex="-1"></a><span class="in">               dotsize = 0.3) </span></span>
<span id="cb113-2308"><a href="#cb113-2308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2309"><a href="#cb113-2309" aria-hidden="true" tabindex="-1"></a><span class="in">## violin </span></span>
<span id="cb113-2310"><a href="#cb113-2310" aria-hidden="true" tabindex="-1"></a><span class="in">data_did_withind3 %&gt;% </span></span>
<span id="cb113-2311"><a href="#cb113-2311" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-2312"><a href="#cb113-2312" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-2313"><a href="#cb113-2313" aria-hidden="true" tabindex="-1"></a><span class="in">  ## keep only firms with all observations over the full period.</span></span>
<span id="cb113-2314"><a href="#cb113-2314" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-2315"><a href="#cb113-2315" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;%</span></span>
<span id="cb113-2316"><a href="#cb113-2316" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-2317"><a href="#cb113-2317" aria-hidden="true" tabindex="-1"></a><span class="in">    n_obs = n(), # number of observations for each firm</span></span>
<span id="cb113-2318"><a href="#cb113-2318" aria-hidden="true" tabindex="-1"></a><span class="in">    n_post = sum(post_2005, na.rm = TRUE) # number of obs after 2005</span></span>
<span id="cb113-2319"><a href="#cb113-2319" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-2320"><a href="#cb113-2320" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() %&gt;%</span></span>
<span id="cb113-2321"><a href="#cb113-2321" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(n_obs &lt; 6) %&gt;% </span></span>
<span id="cb113-2322"><a href="#cb113-2322" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-2323"><a href="#cb113-2323" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear)</span></span>
<span id="cb113-2324"><a href="#cb113-2324" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-2325"><a href="#cb113-2325" aria-hidden="true" tabindex="-1"></a><span class="in">  ggplot(data = ., aes(x = dyear, y = book_leverage)) + </span></span>
<span id="cb113-2326"><a href="#cb113-2326" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_violin()</span></span>
<span id="cb113-2327"><a href="#cb113-2327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2328"><a href="#cb113-2328" aria-hidden="true" tabindex="-1"></a><span class="in">## density </span></span>
<span id="cb113-2329"><a href="#cb113-2329" aria-hidden="true" tabindex="-1"></a><span class="in">data_did_withind3 %&gt;% </span></span>
<span id="cb113-2330"><a href="#cb113-2330" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-2331"><a href="#cb113-2331" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-2332"><a href="#cb113-2332" aria-hidden="true" tabindex="-1"></a><span class="in">  ## keep only firms with all observations over the full period.</span></span>
<span id="cb113-2333"><a href="#cb113-2333" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-2334"><a href="#cb113-2334" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;%</span></span>
<span id="cb113-2335"><a href="#cb113-2335" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-2336"><a href="#cb113-2336" aria-hidden="true" tabindex="-1"></a><span class="in">    n_obs = n(), # number of observations for each firm</span></span>
<span id="cb113-2337"><a href="#cb113-2337" aria-hidden="true" tabindex="-1"></a><span class="in">    n_post = sum(post_2005, na.rm = TRUE) # number of obs after 2005</span></span>
<span id="cb113-2338"><a href="#cb113-2338" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-2339"><a href="#cb113-2339" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() %&gt;%</span></span>
<span id="cb113-2340"><a href="#cb113-2340" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(n_obs &lt; 6) %&gt;% </span></span>
<span id="cb113-2341"><a href="#cb113-2341" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-2342"><a href="#cb113-2342" aria-hidden="true" tabindex="-1"></a><span class="in">    dyear = as.factor(dyear)</span></span>
<span id="cb113-2343"><a href="#cb113-2343" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-2344"><a href="#cb113-2344" aria-hidden="true" tabindex="-1"></a><span class="in">  ggplot(., aes(x = book_leverage, color = factor(dyear)) ) + </span></span>
<span id="cb113-2345"><a href="#cb113-2345" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_density(alpha = 0.3) + </span></span>
<span id="cb113-2346"><a href="#cb113-2346" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(x = "Book Leverage", y = "Density", title = "Density Plot of Book Leverage by Year") +</span></span>
<span id="cb113-2347"><a href="#cb113-2347" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_minimal() +</span></span>
<span id="cb113-2348"><a href="#cb113-2348" aria-hidden="true" tabindex="-1"></a><span class="in">  theme(legend.title = element_blank())</span></span>
<span id="cb113-2349"><a href="#cb113-2349" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb113-2350"><a href="#cb113-2350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2351"><a href="#cb113-2351" aria-hidden="true" tabindex="-1"></a><span class="in">cat("More tests: use `debt_ebitda` ratio as the dependent variable ")</span></span>
<span id="cb113-2352"><a href="#cb113-2352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2353"><a href="#cb113-2353" aria-hidden="true" tabindex="-1"></a><span class="in">## did analysis: </span></span>
<span id="cb113-2354"><a href="#cb113-2354" aria-hidden="true" tabindex="-1"></a><span class="in">data_did_withind %&gt;% </span></span>
<span id="cb113-2355"><a href="#cb113-2355" aria-hidden="true" tabindex="-1"></a><span class="in">  select(gvkey, dyear, contract_intensity_2000, post_2005, book_leverage, debt_ebitda, sic, ff_30ind, ff_30ind_name) %&gt;% </span></span>
<span id="cb113-2356"><a href="#cb113-2356" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-2357"><a href="#cb113-2357" aria-hidden="true" tabindex="-1"></a><span class="in">    book_leverage = ifelse(test = (book_leverage &gt;= 0 &amp; book_leverage &lt;= 1), yes = book_leverage, no = NA),</span></span>
<span id="cb113-2358"><a href="#cb113-2358" aria-hidden="true" tabindex="-1"></a><span class="in">    debt_ebitda = ifelse(test = (debt_ebitda &gt;= 0 &amp; debt_ebitda &lt;= 15), yes = debt_ebitda, no = NA )</span></span>
<span id="cb113-2359"><a href="#cb113-2359" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-2360"><a href="#cb113-2360" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(dyear &gt;= 2002 &amp; dyear &lt;= 2007) %&gt;% </span></span>
<span id="cb113-2361"><a href="#cb113-2361" aria-hidden="true" tabindex="-1"></a><span class="in">  ## keep only firms with all observations over the full period.</span></span>
<span id="cb113-2362"><a href="#cb113-2362" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-2363"><a href="#cb113-2363" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(gvkey) %&gt;%</span></span>
<span id="cb113-2364"><a href="#cb113-2364" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-2365"><a href="#cb113-2365" aria-hidden="true" tabindex="-1"></a><span class="in">    n_obs = n(), # number of observations for each firm</span></span>
<span id="cb113-2366"><a href="#cb113-2366" aria-hidden="true" tabindex="-1"></a><span class="in">    n_post = sum(post_2005, na.rm = TRUE) # number of obs after 2005</span></span>
<span id="cb113-2367"><a href="#cb113-2367" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb113-2368"><a href="#cb113-2368" aria-hidden="true" tabindex="-1"></a><span class="in">  ungroup() %&gt;%</span></span>
<span id="cb113-2369"><a href="#cb113-2369" aria-hidden="true" tabindex="-1"></a><span class="in">  # filter(n_obs == 6) %&gt;% </span></span>
<span id="cb113-2370"><a href="#cb113-2370" aria-hidden="true" tabindex="-1"></a><span class="in">  ## re-clean  </span></span>
<span id="cb113-2371"><a href="#cb113-2371" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb113-2372"><a href="#cb113-2372" aria-hidden="true" tabindex="-1"></a><span class="in">    gvkey = as.factor(gvkey) </span></span>
<span id="cb113-2373"><a href="#cb113-2373" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;% </span></span>
<span id="cb113-2374"><a href="#cb113-2374" aria-hidden="true" tabindex="-1"></a><span class="in">  na.omit() %&gt;% </span></span>
<span id="cb113-2375"><a href="#cb113-2375" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::feols(fml = debt_ebitda ~ contract_intensity_2000:post_2005 | gvkey + dyear + ff_30ind^dyear, data = ., cluster = c("gvkey", "ff_30ind_name")) %&gt;% </span></span>
<span id="cb113-2376"><a href="#cb113-2376" aria-hidden="true" tabindex="-1"></a><span class="in">  fixest::etable() </span></span>
<span id="cb113-2377"><a href="#cb113-2377" aria-hidden="true" tabindex="-1"></a><span class="in">```</span> </span>
<span id="cb113-2378"><a href="#cb113-2378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2379"><a href="#cb113-2379" aria-hidden="true" tabindex="-1"></a>There seems to be a shift. </span>
<span id="cb113-2380"><a href="#cb113-2380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2381"><a href="#cb113-2381" aria-hidden="true" tabindex="-1"></a>::: {#imp-industry-analysis .callout-important}</span>
<span id="cb113-2382"><a href="#cb113-2382" aria-hidden="true" tabindex="-1"></a>Use **TNIC** or other **word classification techniques** to identify firms more likely to have a lot of non-residential lease contracts. </span>
<span id="cb113-2383"><a href="#cb113-2383" aria-hidden="true" tabindex="-1"></a>::: </span>
<span id="cb113-2384"><a href="#cb113-2384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2385"><a href="#cb113-2385" aria-hidden="true" tabindex="-1"></a>--- </span>
<span id="cb113-2386"><a href="#cb113-2386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2387"><a href="#cb113-2387" aria-hidden="true" tabindex="-1"></a><span class="fu">### EndNotes </span></span></code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>