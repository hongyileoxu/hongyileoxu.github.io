<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Hongyi Xu">
<meta name="dcterms.date" content="2024-06-07">

<title>DealScan Renegotiation Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="DealScan_Data_Renegotiation_files/libs/clipboard/clipboard.min.js"></script>
<script src="DealScan_Data_Renegotiation_files/libs/quarto-html/quarto.js"></script>
<script src="DealScan_Data_Renegotiation_files/libs/quarto-html/popper.min.js"></script>
<script src="DealScan_Data_Renegotiation_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="DealScan_Data_Renegotiation_files/libs/quarto-html/anchor.min.js"></script>
<link href="DealScan_Data_Renegotiation_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="DealScan_Data_Renegotiation_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="DealScan_Data_Renegotiation_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="DealScan_Data_Renegotiation_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="DealScan_Data_Renegotiation_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="DealScan_Data_Renegotiation_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="DealScan_Data_Renegotiation_files/libs/viz-1.8.2/viz.js"></script>
<link href="DealScan_Data_Renegotiation_files/libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="DealScan_Data_Renegotiation_files/libs/grViz-binding-1.0.11/grViz.js"></script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sec-s1.-objective" id="toc-sec-s1.-objective" class="nav-link active" data-scroll-target="#sec-s1.-objective">S1. Objective</a></li>
  <li><a href="#sec-s2.-examples" id="toc-sec-s2.-examples" class="nav-link" data-scroll-target="#sec-s2.-examples">S2. Examples</a></li>
  <li><a href="#sec-s2.-data-sources" id="toc-sec-s2.-data-sources" class="nav-link" data-scroll-target="#sec-s2.-data-sources">S2. Data sources</a></li>
  <li><a href="#sec-s3.-dealscan-data-preview" id="toc-sec-s3.-dealscan-data-preview" class="nav-link" data-scroll-target="#sec-s3.-dealscan-data-preview">S3. DealScan Data Preview</a>
  <ul class="collapse">
  <li><a href="#sec-s3.1-deal-purposes" id="toc-sec-s3.1-deal-purposes" class="nav-link" data-scroll-target="#sec-s3.1-deal-purposes">s3.1 Deal Purposes</a></li>
  <li><a href="#sec-s3.2-amendaments-and-refinancing" id="toc-sec-s3.2-amendaments-and-refinancing" class="nav-link" data-scroll-target="#sec-s3.2-amendaments-and-refinancing">s3.2 Amendaments and Refinancing</a></li>
  <li><a href="#s3.3-follow-roberts-2015" id="toc-s3.3-follow-roberts-2015" class="nav-link" data-scroll-target="#s3.3-follow-roberts-2015">s3.3 Follow Roberts (2015)</a></li>
  </ul></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section">————————————————————————</a>
  <ul class="collapse">
  <li><a href="#s3.4-covenants-preview" id="toc-s3.4-covenants-preview" class="nav-link" data-scroll-target="#s3.4-covenants-preview">s3.4 Covenants Preview</a></li>
  <li><a href="#s3.5-leverage-covenants" id="toc-s3.5-leverage-covenants" class="nav-link" data-scroll-target="#s3.5-leverage-covenants">s3.5 Leverage Covenants</a></li>
  <li><a href="#definitions" id="toc-definitions" class="nav-link" data-scroll-target="#definitions">Definitions</a></li>
  </ul></li>
  <li><a href="#sec-s4.-future-notes" id="toc-sec-s4.-future-notes" class="nav-link" data-scroll-target="#sec-s4.-future-notes">S4. Future Notes</a></li>
  <li><a href="#sec-reference" id="toc-sec-reference" class="nav-link" data-scroll-target="#sec-reference">Reference</a></li>
  <li><a href="#to-do-list" id="toc-to-do-list" class="nav-link" data-scroll-target="#to-do-list">To-do list:</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">DealScan Renegotiation Data</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Hongyi Xu </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 7, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<style type="text/css">
body, td {
   font-size: 16px;
}
code.r{
  font-size: 12px;
}
pre {
  font-size: 12px
}
</style>
<section id="sec-s1.-objective" class="level2">
<h2 class="anchored" data-anchor-id="sec-s1.-objective">S1. Objective</h2>
<p>This file follows the creation of the link table update the end of 2023. <a href="https://livehhsse-my.sharepoint.com/:f:/r/personal/65570_student_hhs_se/Documents/Projects_2024/Dealscan_LinkTable/DealScan_Link_Table_Compustat_Jun2024?csf=1&amp;web=1&amp;e=n68lWi">The file</a> is called <a href="https://livehhsse-my.sharepoint.com/:u:/r/personal/65570_student_hhs_se/Documents/Projects_2024/Dealscan_LinkTable/DealScan_Link_Table_Compustat_Jun2024/Link_table_2024.RData?csf=1&amp;web=1&amp;e=PvzxRC">Link_table_2024.RData</a>. The manual document can be found in file “DealScan_Link_Table_Compustat.html”.</p>
<p>The purpose of this document is to document the flow of logic in identifying amendaments/renegotiations/refinancing of exiting syndicated loan contracts in the LPC DealScan data.</p>
</section>
<section id="sec-s2.-examples" class="level2">
<h2 class="anchored" data-anchor-id="sec-s2.-examples">S2. Examples</h2>
<p><a href="https://wrds-www.wharton.upenn.edu/pages/support/manuals-and-overviews/thomson-reuters/wrds-reuters-dealscan/wrds-overview-on-dealscan-loanconnector/#linking-with-other-databases">An updated manual</a> about DealScan in WRDS. - <font size="2">updated Nov 2021</font></p>
<ul>
<li>Example 1: <em>Starwood Hotels &amp; Resorts Worldwide</em> (Borrower_Id=‘9514’)
<ul>
<li><p>Apr 20, 2010: <a href="https://www.sec.gov/Archives/edgar/data/316206/000129993310001593/htm_37246.htm">8-K for the new credit agreement</a></p></li>
<li><p>November 30, 2012: <a href="https://www.sec.gov/Archives/edgar/data/316206/000119312512491462/d449323d8k.htm">8-K for the refinancing deal</a></p></li>
<li><p>The deal is identified as a “refinancing” deal because in the “Item 1.01 Entry into a Material Definitive Agreement”, it says:</p>
<blockquote class="blockquote">
<p>… The Credit Agreement is a $1.75 billion revolving credit facility, which refinanced the existing $1.50 billion Credit Agreement dated April 20, 2010, as amended (the “2010 Credit Facility”), that would have matured in November 2013.</p>
</blockquote></li>
<li><p>Note that the firm is acquired by <em>Marriott International Inc</em> (Borrower_Id=‘18487’) in 2016.</p></li>
<li><p><code>LPC_Deal_ID</code> and<code>LPC_Tranche_ID</code> are kept even after refinancing.</p></li>
<li><p>To track changes/amendments: <code>Deal_Amended</code>, <code>Tranche_Amended</code>, and <code>Tranche_O_A</code>.</p>
<ul>
<li><code>Trance_O_A</code>: <em>Origination</em>, <em>Amendment 1</em>, etc.</li>
</ul></li>
<li><p>To track refinancing: <code>Deal_Refinancing</code> and <code>Tranche_Refinancing</code>.</p></li>
</ul></li>
</ul>
<!-- Selected Variables: -->
<!-- LPC_Deal_ID, LPC_Tranche_ID, -->
<!-- Deal_Active, Deal_Active_Date, Deal_Amended, Deal_Refinancing, Deal_Amount, -->
<!-- Tranche_Amended, Tranche_O_A, Tranche_Active_Date, Tranche_Refinancing, Tranche_Amount -->
</section>
<section id="sec-s2.-data-sources" class="level2">
<h2 class="anchored" data-anchor-id="sec-s2.-data-sources">S2. Data sources</h2>
<p><span style="color: red;">LPC DealScan</span> from WRDS.</p>
</section>
<section id="sec-s3.-dealscan-data-preview" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="sec-s3.-dealscan-data-preview">S3. DealScan Data Preview</h2>
<section id="sec-s3.1-deal-purposes" class="level3">
<h3 class="anchored" data-anchor-id="sec-s3.1-deal-purposes">s3.1 Deal Purposes</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## build up and clean the dataset </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># DealScan &lt;- fread("hi0yvqzhxowsqnpf.csv") </span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># save(DealScan, file = "DealScan.Rdata")</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># DealScan_borrower &lt;- DealScan %&gt;%</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(- grep(pattern = "Lend|Role", x = names(.), value = T) ) %&gt;% </span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   unique()</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># save(DealScan_borrower, file = "DealScan_borrower.Rdata")</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># load("DealScan.Rdata") </span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"DealScan_borrower.Rdata"</span>) <span class="co"># for data only with </span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(DealScan_borrower)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># ## Here is one example: </span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co"># b_9514 &lt;- DealScan_borrower %&gt;% </span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(Borrower_Id == 9514)</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co"># b_9514 %&gt;% </span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(LPC_Deal_ID, LPC_Tranche_ID, </span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="co">#          Deal_Active, Deal_Active_Date, Deal_Amended, Deal_Refinancing, Deal_Amount,</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co">#          Tranche_Amended, Tranche_O_A, Tranche_Active_Date, Tranche_Refinancing, Tranche_Amount) %&gt;% </span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="co">#   unique() %&gt;% </span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co">#   arrange(Deal_Active_Date, Tranche_Active_Date) %&gt;% </span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="co">#   View("b_9514") </span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="co"># DealScan_borrower %&gt;% </span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(LPC_Tranche_ID == 52511)</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="co"># ## Summary stats for the deals: </span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Deal_summary &lt;- DealScan_borrower %&gt;% </span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(LPC_Deal_ID, LPC_Tranche_ID) %&gt;% </span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="co">#   summarise(LPC_Tranche_Num = n(), </span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="co">#             Tranche_First = min(Tranche_Active_Date), </span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="co">#             Tranche_Last = max(Tranche_Active_Date),</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="co">#             ) %&gt;% </span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="co">#   ungroup() </span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Deal_summary %&gt;% head(20)</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="do">### Look into the deal purpose. </span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>dt.Deal_Purpose <span class="ot">&lt;-</span> DealScan_borrower <span class="sc">%&gt;%</span> </span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">"Purpose"</span>, <span class="at">x =</span> <span class="fu">names</span>(.), <span class="at">value =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lapply</span>(<span class="at">X =</span> ., <span class="at">FUN =</span> <span class="cf">function</span>(x) <span class="fu">unique</span>(x)) <span class="sc">%&gt;%</span> </span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.table</span>(.)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in as.data.table.list(.): Item 1 has 41 rows but longest item has 87738;
recycled with remainder.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in as.data.table.list(.): Item 4 has 43 rows but longest item has 87738;
recycled with remainder.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in as.data.table.list(.): Item 5 has 37 rows but longest item has 87738;
recycled with remainder.</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>dt.Deal_Purpose<span class="sc">$</span>Deal_Purpose <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="do">### Look into the number of deals under each purpose</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>Deal_Purpose_Type <span class="ot">&lt;-</span> DealScan_borrower <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Deal_Purpose) <span class="sc">%&gt;%</span> </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Deal_Purpose_Type_Num =</span> <span class="fu">length</span>(<span class="fu">unique</span>(LPC_Deal_ID))) <span class="sc">%&gt;%</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>Deal_Purpose_Type_Num) <span class="sc">%&gt;%</span> </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Deal_Purpose =</span> <span class="fu">paste</span>(<span class="fu">format</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Deal_Purpose), <span class="at">width =</span> <span class="dv">2</span>), Deal_Purpose, <span class="at">sep =</span> <span class="st">"-"</span>), </span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">Deal_Purpose_Type_Prc =</span> Deal_Purpose_Type_Num <span class="sc">/</span> <span class="fu">sum</span>(Deal_Purpose_Type_Num)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>plt.deal_purpose <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Deal_Purpose_Type) <span class="sc">+</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">reorder</span>(Deal_Purpose, Deal_Purpose_Type_Num), <span class="at">x =</span> <span class="fu">log10</span>(Deal_Purpose_Type_Num)), <span class="at">fill =</span> <span class="st">"#076fa2"</span>,</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>           <span class="at">width =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.9</span>)) <span class="sc">+</span> </span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">5.3</span>),</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">6</span>, <span class="at">by =</span> <span class="dv">1</span>), </span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="fl">0.01</span>, <span class="dv">0</span>), <span class="co"># The horizontal axis does not extend to either side</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="st">"top"</span>  <span class="co"># Labels are located on the top</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># The vertical axis only extends upwards</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_discrete</span>(<span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>))) <span class="sc">+</span> </span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Set background color to white</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>),</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Set the color and the width of the grid lines for the horizontal axis</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major.x =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"#A8BAC4"</span>, <span class="at">linewidth =</span> <span class="fl">0.3</span>),</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove tick marks by setting their length to 0</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.length =</span> <span class="fu">unit</span>(<span class="dv">0</span>, <span class="st">"mm"</span>),</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove the title for both axes</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Only left line of the vertical axis is painted in black</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line.y.left =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"black"</span>),</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove labels from the vertical axis</span></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># But customize labels for the horizontal axis</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"Courier"</span>, <span class="at">size =</span> <span class="dv">10</span>) <span class="co"># "Econ Sans Cnd";  "Comic Sans MS"</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> <span class="fu">geom_shadowtext</span>(</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> <span class="fu">subset</span>(Deal_Purpose_Type, <span class="fu">log10</span>(Deal_Purpose_Type_Num) <span class="sc">&lt;</span> <span class="dv">3</span>),</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="fu">log10</span>(Deal_Purpose_Type_Num), <span class="at">y =</span> Deal_Purpose, <span class="at">label =</span> Deal_Purpose),</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>, </span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_x =</span> <span class="fl">0.1</span>,</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"#076fa2"</span>,</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">bg.colour =</span> <span class="st">"white"</span>,</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">bg.r =</span> <span class="fl">0.2</span>,</span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Courier"</span>,</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>  )  <span class="sc">+</span> <span class="fu">geom_text</span>(</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> Deal_Purpose_Type,</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="fu">log10</span>(Deal_Purpose_Type_Num), <span class="at">y =</span> Deal_Purpose, <span class="at">label =</span> <span class="fu">sapply</span>(<span class="at">X =</span> Deal_Purpose_Type_Prc<span class="sc">*</span><span class="dv">100</span>, <span class="at">FUN =</span> <span class="cf">function</span>(x) {<span class="fu">paste</span>(<span class="fu">ifelse</span>(<span class="fu">round</span>(x, <span class="at">digits =</span> <span class="dv">2</span>) <span class="sc">==</span> <span class="dv">0</span>, <span class="fu">round</span>(x, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(x, <span class="at">digits =</span> <span class="dv">2</span>)), <span class="st">"%"</span> , <span class="at">sep =</span> <span class="st">""</span>)}) ), </span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>, </span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_x =</span> <span class="sc">-</span><span class="fl">0.3</span>,</span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"white"</span>,</span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Courier"</span>,</span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span></span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>  )  <span class="sc">+</span> </span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> <span class="fu">subset</span>(Deal_Purpose_Type, <span class="fu">log10</span>(Deal_Purpose_Type_Num) <span class="sc">&gt;=</span> <span class="dv">3</span>), </span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="dv">0</span>, <span class="at">y =</span> Deal_Purpose, <span class="at">label =</span> Deal_Purpose),  <span class="co"># paste("&lt;b&gt;", Deal_Purpose, "&lt;/b&gt;", sep = "")), </span></span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>, </span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_x =</span> <span class="fl">0.3</span>,</span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"white"</span>,</span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Courier"</span>,</span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span></span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a>plt.deal_purpose <span class="sc">+</span> <span class="fu">labs</span>(</span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"Deal Purpose: activated between"</span>, <span class="fu">paste</span>(<span class="fu">range</span>(DealScan_borrower<span class="sc">$</span>Tranche_Active_Date), <span class="at">collapse =</span> <span class="st">" and "</span>)),</span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Number of Deals for Each Deal Purpose (from WRDS DealScan)"</span></span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">"Comic Sans MS"</span>, </span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a>      <span class="at">face =</span> <span class="st">"bold"</span>,</span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">15</span></span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a>    ), </span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(</span>
<span id="cb5-81"><a href="#cb5-81" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">"Comic Sans MS"</span>,</span>
<span id="cb5-82"><a href="#cb5-82" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">10</span></span>
<span id="cb5-83"><a href="#cb5-83" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-84"><a href="#cb5-84" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb5-85"><a href="#cb5-85" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(</span>
<span id="cb5-86"><a href="#cb5-86" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"text"</span>, </span>
<span id="cb5-87"><a href="#cb5-87" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Sample Size: "</span>, <span class="fu">format</span>(<span class="fu">sum</span>(Deal_Purpose_Type<span class="sc">$</span>Deal_Purpose_Type_Num), <span class="at">big.mark =</span> <span class="st">","</span>), <span class="at">sep =</span> <span class="st">""</span>), <span class="co"># , "\n updated: ", date()</span></span>
<span id="cb5-88"><a href="#cb5-88" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fl">4.5</span>, <span class="at">y =</span> <span class="dv">2</span>, </span>
<span id="cb5-89"><a href="#cb5-89" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"#076fa2"</span>, </span>
<span id="cb5-90"><a href="#cb5-90" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Courier"</span>,</span>
<span id="cb5-91"><a href="#cb5-91" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">2.5</span></span>
<span id="cb5-92"><a href="#cb5-92" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="DealScan_Data_Renegotiation_files/figure-html/dealscan-1.png" class="img-fluid" width="960"></p>
</div>
</div>
<p>In the above codes, I first use <code>LPC_Deal_ID</code> to identify each unique deal and then group by variable <code>Deal_Purpose</code> to calculate the number of deals for each purpose. I store the number of deals for each purpose in the dataset <code>Deal_Purpose_Type</code> and the above plot. The total number of deal observations is 261007.</p>
<ol type="1">
<li>The most frequent purpose is named under the <code>General Purpose</code> and the second and third most frequent purposes are <code>Working Capital</code> and <code>Refinancing</code>. Deals under these three purposes collectively account for around 63% percentage of all the deals in the sample.</li>
<li>Another big chunk is in the capital investments: real estate, equipment, construction, aircraft &amp; ship, telecom, hardware, etc.</li>
<li>Another part is the trade finance - no. 11, 13, 21.</li>
<li>SPV (Project Finance), M&amp;A, LBO (all different buyouts), Takeover.</li>
<li>Recapitalization (dividend, share repurchase, cash distribution).</li>
<li>Takeover defense is there but not frequent.</li>
</ol>
</section>
<section id="sec-s3.2-amendaments-and-refinancing" class="level3">
<h3 class="anchored" data-anchor-id="sec-s3.2-amendaments-and-refinancing">s3.2 Amendaments and Refinancing</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>LPC_def <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"LPC_variable_def.csv"</span>, <span class="at">header =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">header_id =</span> <span class="fu">cumsum</span>(<span class="fu">nchar</span>(V2) <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">*</span> (<span class="fu">nchar</span>(V1) <span class="sc">&gt;</span> <span class="dv">0</span>), </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">header_true =</span> (<span class="fu">nchar</span>(V1) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">&amp;</span> (<span class="fu">nchar</span>(V2) <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># LPC_def %&gt;% head(30) %&gt;% View()</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>LPC_def_class <span class="ot">&lt;-</span> LPC_def <span class="sc">%&gt;%</span> <span class="co"># the list of variables under each class. </span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(header_true <span class="sc">==</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">header =</span> V1, header_id) <span class="sc">%&gt;%</span> </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(LPC_def, <span class="at">by =</span> <span class="st">"header_id"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(header, header_id, <span class="at">variable =</span> V1) <span class="sc">%&gt;%</span> </span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(header <span class="sc">!=</span> variable) <span class="sc">%&gt;%</span> </span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">clean_strings</span>(variable), </span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">unique_key_1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(.)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>all_names <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(<span class="fu">str_replace</span>(<span class="fu">names</span>(DealScan_borrower), <span class="at">pattern =</span> <span class="st">"_"</span>, <span class="at">replacement =</span> <span class="st">" "</span>) <span class="sc">%&gt;%</span> <span class="fu">clean_strings</span>()) </span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>all_names<span class="sc">$</span>unique_key_2 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">names</span>(DealScan_borrower))</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>fuzzy_result <span class="ot">&lt;-</span> <span class="fu">merge_plus</span>(<span class="at">data1 =</span> LPC_def_class, </span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>                          <span class="at">data2 =</span> all_names,</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>                          <span class="at">by.x =</span> <span class="st">"variable"</span>,</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>                          <span class="at">by.y =</span> <span class="st">"V1"</span>, <span class="at">match_type =</span> <span class="st">"fuzzy"</span>, </span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>                          <span class="at">fuzzy_settings =</span> <span class="fu">build_fuzzy_settings</span>(<span class="at">maxDist =</span> .<span class="dv">8</span>),</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>                          <span class="at">unique_key_1 =</span> <span class="st">"unique_key_1"</span>,</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>                          <span class="at">unique_key_2 =</span> <span class="st">"unique_key_2"</span>)</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Results from fuzzy matching the names from LPC DealScan and WRDS DealScan: </span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Results from fuzzy matching the names from LPC DealScan and WRDS DealScan: </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>fuzzy_result<span class="sc">$</span>match_evaluation</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   tier matches in_tier_unique_1 in_tier_unique_2 pct_matched_1 pct_matched_2
1:  all     205              205              179             1     0.9675676
   new_unique_1 new_unique_2
1:          205          179</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>fuzzy_result<span class="sc">$</span>matches</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     unique_key_2 unique_key_1    header header_id                  variable
  1:            1            2 Borrower          1             borrower name
  2:            2            1 Borrower          1               borrower id
  3:            3            3 Borrower          1      additional borrowers
  4:            4            4 Borrower          1                    ticker
  5:            5            5 Borrower          1                   perm id
 ---                                                                        
201:          183          201 Law Firm         27             law firm name
202:          183          202 Law Firm         27   law firm lender primary
203:          184          204 Law Firm         27 law firm borrower primary
204:          185          203 Law Firm         27     law firm lender other
205:          185          205 Law Firm         27   law firm borrower other
                            V1 tier
  1:             borrower name  all
  2:               borrower id  all
  3:      additional borrowers  all
  4:                    ticker  all
  5:                   perm id  all
 ---                               
201:             law firm name  all
202:             law firm name  all
203: law firm borrower primary  all
204:   law firm borrower other  all
205:   law firm borrower other  all</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># all_names &lt;- names(DealScan_borrower) </span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># all_names.id &lt;- all_names %&gt;% </span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "I[dD]", x = ., value = T)</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co"># all_names.borrower &lt;- all_names %&gt;% </span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "I[dD]", x = ., value = T, invert = T) %&gt;% </span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "Borrower", x = ., ignore.case = T, value = T)</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co"># all_names.deal &lt;- all_names %&gt;% </span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "I[dD]|Borrower", x = ., ignore.case = T, value = T, invert = T) %&gt;% </span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "Deal", x = ., ignore.case = T, value = T)</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co"># all_names.tranche &lt;- all_names %&gt;% </span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "Deal|I[dD]|Borrower", x = ., ignore.case = T, value = T, invert = T) %&gt;% </span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "Tranche", x = ., ignore.case = T, value = T)</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co"># regex_number_of &lt;- all_names %&gt;% </span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "Tranche|Deal|I[dD]|Borrower", x = ., ignore.case = T, value = T, invert = T) %&gt;% </span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "Number", x = ., ignore.case = T, value = T) %&gt;%</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a><span class="co">#   str_replace(pattern = "Number_of_", replacement = "") %&gt;% </span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a><span class="co">#   str_replace(pattern = "s$", replacement = "") %&gt;% </span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a><span class="co">#   paste(collapse = "|")</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a><span class="co"># all_names %&gt;% </span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "Tranche|Deal|I[dD]|Borrower", x = ., ignore.case = T, value = T, invert = T) %&gt;% </span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "Number", x = ., ignore.case = T, value = T)</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a><span class="co"># all_names.lenders &lt;- all_names %&gt;% </span></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "Tranche|Deal|I[dD]|Borrower", x = ., ignore.case = T, value = T, invert = T) %&gt;% </span></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = regex_number_of, x = ., ignore.case = T, value = T)</span></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a><span class="co"># ## the set of </span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a><span class="co"># all_names_remain &lt;- setdiff(all_names, c(all_names.borrower, all_names.deal, all_names.id, all_names.lenders, all_names.tranche))</span></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a><span class="co"># ## the Call protection: </span></span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a><span class="co"># grep(pattern = "call", x = all_names_remain, ignore.case = T, value = T)</span></span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a><span class="co"># all_names.borrower_info &lt;- all_names_remain[1:17]</span></span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a><span class="co"># all_names_remain[-c(1:17)]</span></span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a><span class="co"># DealScan_borrower</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The name of each variable is defined in <a href="https://wrds-www.wharton.upenn.edu/documents/1560/Loan_Connector_FTP_User_Guide_and_Fact_Sheet.xlsx">Loan Connector FTP User Guide and Fact Sheet</a>. Through the fuzzy matching, I can match most of the variables in <code>DealScan_borrower</code> to that file.</p>
<!-- Start the work: June 5, 2024 -->
<p>In the next code block, I will look into amendments/refinancing <span style="color: red;">for firms operating in US</span>. The date for each step in the syndication process is crucial.</p>
<p>Definition of Variables:</p>
<ul>
<li>Deal/Tranche Identifier: <code>LPC_Deal_ID</code>, <code>LPC_Tranche_ID</code>;</li>
<li>Size of Deal/Tranche: <code>Deal_Amount</code>, <code>Tranche_Amount</code></li>
<li>Amend/Refinancing Flag: <code>Deal_Amended</code>, <code>Tranche_Amended</code>, <code>Tranche_O_A</code>, <code>Deal_Refinancing</code>, <code>Tranche_Refinancing</code>, <code>Amend_Extend_Flag</code>;
<ul>
<li><code>Amend_Extend_Flag</code>: For analytic purposes, LPC defines an amend and extend during instances when a portion of the lending group wishes not to extend out their commitments. Thus only a percentage of the original overall commitment amount would get extended and that portion would get flagged as amend &amp; extend volume (Yes/No).</li>
</ul></li>
<li>Maturity Time: <code>Tranche_Maturity_Date</code>, <code>Tenor_Maturity</code>;</li>
<li>Deal (re-)Starting Time: <code>Deal_Active_Date</code>, <code>Deal_Input_Date</code>, <code>Tranche_Active_Date</code>.</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="do">## construct the dataset for the deal/tranche amendments or refinancing. </span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>dt.Deal_Amend_Refin <span class="ot">&lt;-</span> DealScan_borrower <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">"United States"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">grep</span>(<span class="at">x =</span> <span class="fu">names</span>(.), <span class="at">pattern =</span> <span class="st">"LPC"</span>, <span class="at">value =</span> T), </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>         <span class="fu">grep</span>(<span class="at">x =</span> <span class="fu">names</span>(.), <span class="at">pattern =</span> <span class="st">"Amend"</span>, <span class="at">value =</span> T), </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>         <span class="fu">grep</span>(<span class="at">x =</span> <span class="fu">names</span>(.), <span class="at">pattern =</span> <span class="st">"Refinanc|Tranche_O_A"</span>, <span class="at">value =</span> T), </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>         <span class="fu">grep</span>(<span class="at">x =</span> <span class="fu">names</span>(.), <span class="at">pattern =</span> <span class="st">"Matur"</span>, <span class="at">ignore.case =</span> T, <span class="at">value =</span> T), </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Deal_Amount"</span>, <span class="st">"Tranche_Amount"</span>, </span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Deal_Active_Date"</span>, <span class="st">"Deal_Input_Date"</span>, <span class="st">"Tranche_Active_Date"</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Variable names: </span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Variable names: </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dt.Deal_Amend_Refin) <span class="co"># check the selected variables </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "LPC_Deal_ID"           "LPC_Tranche_ID"        "Deal_Amended"         
 [4] "Amend_Extend_Flag"     "Tranche_Amended"       "Deal_Refinancing"     
 [7] "Tranche_O_A"           "Tranche_Refinancing"   "Tranche_Maturity_Date"
[10] "Tenor_Maturity"        "Deal_Amount"           "Tranche_Amount"       
[13] "Deal_Active_Date"      "Deal_Input_Date"       "Tranche_Active_Date"  </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="do">## some examples: </span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co"># dt.Deal_Amend_Refin %&gt;% head(30) %&gt;% View("dt.Deal_Amend_Refin")</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># dt.Deal_Amend_Refin %&gt;% </span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   arrange(LPC_Tranche_ID) %&gt;% </span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(LPC_Deal_ID == 21561) %&gt;% View("dt.Deal_Amend_Refin")</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="do">## calculate the frequency of deal amend/refinancing in the dataset - ex. "Origination"</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>dt.Deal_Amend_Refin.freq <span class="ot">&lt;-</span> dt.Deal_Amend_Refin <span class="sc">%&gt;%</span> </span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(LPC_Deal_ID, LPC_Tranche_ID) <span class="sc">%&gt;%</span> <span class="do">## for each deal-tranche IDs over its life-cycle. </span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    <span class="do">### frequency of tranche amendments - ex. "Origination" </span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">Tranche_Change_Freq =</span> <span class="fu">length</span>(<span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">"Orig"</span>, <span class="at">x =</span> <span class="fu">unique</span>(Tranche_O_A), <span class="at">value =</span> T, <span class="at">invert =</span> T )), </span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    <span class="do">### number of different deal size / tranche size </span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">Tranche_Size =</span> <span class="fu">mean</span>(Tranche_Amount, <span class="at">na.rm =</span> T),  </span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>    <span class="do">### deal origination year  </span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">Deal_Start_ym =</span> <span class="fu">as.yearmon</span>(<span class="fu">unique</span>(Deal_Active_Date))</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Change_Freq_Positive =</span> <span class="fu">ifelse</span>(Tranche_Change_Freq <span class="sc">&gt;</span> <span class="dv">0</span>, Tranche_Change_Freq, <span class="cn">NA</span>), <span class="co"># keep only observations with deal/tranche modifications </span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">Year_groups =</span> <span class="fu">cut</span>(<span class="fu">as.numeric</span>(Deal_Start_ym), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1950</span>, <span class="dv">2000</span>, <span class="dv">2010</span>, <span class="dv">2020</span>, <span class="dv">2030</span>),</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>                           <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Pre-2000"</span>, <span class="st">"2000-2010"</span>, <span class="st">"2010-2020"</span>, <span class="st">"Post-2020"</span>) ) <span class="co"># create decade groups </span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>         )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'LPC_Deal_ID', 'LPC_Tranche_ID'. You can
override using the `.groups` argument.</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Data preview: </span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Data preview: </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>dt.Deal_Amend_Refin.freq <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">20</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 7
   LPC_Deal_ID LPC_Tranche_ID Tranche_Change_Freq Tranche_Size Deal_Start_ym
         &lt;int&gt;          &lt;int&gt;               &lt;int&gt;        &lt;dbl&gt; &lt;yearmon&gt;    
 1           2              3                   2          450 Oct 1996     
 2           2              5                   2          300 Oct 1996     
 3           2            594                   2          750 Oct 1996     
 4           2            595                   2          500 Oct 1996     
 5           3          52511                   6          100 Jun 1997     
 6           3          53306                   6          100 Jun 1997     
 7           4          52015                   2          560 Nov 1998     
 8           4          52145                   2          300 Nov 1998     
 9           4          52955                   2          400 Nov 1998     
10           4          53307                   2          200 Nov 1998     
11           4          54154                   2          190 Nov 1998     
12           5          52249                   2          100 May 2000     
13           5          52616                   2          450 May 2000     
14           5          53308                   2          500 May 2000     
15           6          52250                   0          700 Nov 1997     
16           6          53086                   0          550 Nov 1997     
17           7          52146                   0           80 Sep 1997     
18           7          52512                   0           45 Sep 1997     
19           7          52834                   0          110 Sep 1997     
20           8          52147                   4          500 Oct 1997     
# ℹ 2 more variables: Change_Freq_Positive &lt;int&gt;, Year_groups &lt;fct&gt;</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="do">### double check</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># dt.Deal_Amend_Refin %&gt;% filter(LPC_Deal_ID == 7)</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># DealScan_borrower %&gt;% filter(LPC_Deal_ID == 7)</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># DealScan_borrower %&gt;% filter(Borrower_Id == 228)</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="do">### visualization </span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dt.Deal_Amend_Refin.freq)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "LPC_Deal_ID"          "LPC_Tranche_ID"       "Tranche_Change_Freq" 
[4] "Tranche_Size"         "Deal_Start_ym"        "Change_Freq_Positive"
[7] "Year_groups"         </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### number of unique deal / deal-tranche </span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(dt.Deal_Amend_Refin.freq[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>], <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> <span class="cf">function</span>(x) <span class="fu">length</span>(<span class="fu">unique</span>(x)) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   LPC_Deal_ID LPC_Tranche_ID 
        110448         173570 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(<span class="fu">names</span>(dt.Deal_Amend_Refin.freq))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### frequency</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>dt.Deal_Amend_Refin.plot <span class="ot">&lt;-</span> dt.Deal_Amend_Refin.freq <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Change_Freq_Positive, Year_groups) <span class="sc">%&gt;%</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year_groups) <span class="sc">%&gt;%</span> </span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">share_in_yeargroup =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n, <span class="at">na.rm =</span> T) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Change_Freq_Positive'. You can override
using the `.groups` argument.</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> <span class="fu">na.omit</span>(dt.Deal_Amend_Refin.plot), <span class="fu">aes</span>(<span class="at">fill =</span> Year_groups, <span class="at">x =</span> Change_Freq_Positive, <span class="at">y =</span> n) ) <span class="sc">+</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">"stack"</span>, <span class="at">stat=</span><span class="st">"identity"</span>) <span class="co"># + </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="DealScan_Data_Renegotiation_files/figure-html/amend_refinance-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># scale_y_continuous(name = "Number of Deal-Tranche", trans='log10')</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">na.omit</span>(dt.Deal_Amend_Refin.plot), <span class="fu">aes</span>(<span class="at">fill=</span>Year_groups, <span class="at">y=</span>n, <span class="at">x=</span>Change_Freq_Positive)) <span class="sc">+</span> </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">"dodge"</span>, <span class="at">stat=</span><span class="st">"identity"</span>) <span class="sc">+</span> </span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Number of Deal-Tranche w/ Amendments"</span>) <span class="sc">+</span> </span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Frequency of Amendments"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="DealScan_Data_Renegotiation_files/figure-html/amend_refinance-2.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">na.omit</span>(dt.Deal_Amend_Refin.plot), <span class="fu">aes</span>(<span class="at">fill=</span>Year_groups, <span class="at">y=</span>share_in_yeargroup, <span class="at">x=</span>Change_Freq_Positive)) <span class="sc">+</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">"dodge"</span>, <span class="at">stat=</span><span class="st">"identity"</span>) <span class="sc">+</span> </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Number of Deal-Tranche w/ Amendments"</span>) <span class="sc">+</span> </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Frequency of Amendments"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="DealScan_Data_Renegotiation_files/figure-html/amend_refinance-3.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### number of deal-tranche (1 to 10)</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>fig_amend_count <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">na.omit</span>(<span class="fu">filter</span>(dt.Deal_Amend_Refin.plot, Change_Freq_Positive <span class="sc">&lt;=</span> <span class="dv">10</span>)), <span class="fu">aes</span>(<span class="at">fill=</span>Year_groups, <span class="at">y=</span>n, <span class="at">x=</span>Change_Freq_Positive)) <span class="sc">+</span> </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">"dodge"</span>, <span class="at">stat=</span><span class="st">"identity"</span>) <span class="sc">+</span> </span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># scale_y_continuous(name = "Number of Deal-Tranche w/ Amendments") + </span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Frequency of Amendments"</span>, <span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">+</span> </span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of Deal-Tranches w/ Amendments"</span>, </span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Number of Deal-Tranche w/ Amendments"</span>, </span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Origination Year Groups"</span>) <span class="sc">+</span> </span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_economist</span>(</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_size =</span> <span class="dv">10</span>,</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_family =</span> <span class="st">"Courier"</span>,</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">horizontal =</span> <span class="cn">TRUE</span>,</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">dkpanel =</span> <span class="cn">FALSE</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove labels from the vertical axis</span></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">vjust=</span><span class="dv">3</span>),</span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">1</span>),</span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Title format</span></span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">"Comic Sans MS"</span>, </span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">face =</span> <span class="st">"bold"</span>,</span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="fl">13.5</span>, <span class="at">hjust =</span> <span class="dv">0</span> <span class="co"># shift the </span></span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a>    ), </span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Subtitle format </span></span>
<span id="cb34-28"><a href="#cb34-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(</span>
<span id="cb34-29"><a href="#cb34-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">"Comic Sans MS"</span>,</span>
<span id="cb34-30"><a href="#cb34-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">12</span>, <span class="at">hjust =</span> <span class="dv">0</span></span>
<span id="cb34-31"><a href="#cb34-31" aria-hidden="true" tabindex="-1"></a>    ), </span>
<span id="cb34-32"><a href="#cb34-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># plot.title.position = "plot",</span></span>
<span id="cb34-33"><a href="#cb34-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>), <span class="co">#change font size of legend text</span></span>
<span id="cb34-34"><a href="#cb34-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>), <span class="co">#change font size of legend title   </span></span>
<span id="cb34-35"><a href="#cb34-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>, </span>
<span id="cb34-36"><a href="#cb34-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="fl">0.3</span>, <span class="st">'cm'</span>) <span class="co"># change the size of the legend key - the blocks</span></span>
<span id="cb34-37"><a href="#cb34-37" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb34-38"><a href="#cb34-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-39"><a href="#cb34-39" aria-hidden="true" tabindex="-1"></a><span class="do">#### share of deal-tranche within each year group (1 to 10)</span></span>
<span id="cb34-40"><a href="#cb34-40" aria-hidden="true" tabindex="-1"></a>fig_amend_share <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">na.omit</span>(<span class="fu">filter</span>(dt.Deal_Amend_Refin.plot, Change_Freq_Positive <span class="sc">&lt;=</span> <span class="dv">10</span>)), <span class="fu">aes</span>(<span class="at">fill=</span>Year_groups, <span class="at">y=</span>share_in_yeargroup, <span class="at">x=</span>Change_Freq_Positive)) <span class="sc">+</span> </span>
<span id="cb34-41"><a href="#cb34-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">"dodge"</span>, <span class="at">stat=</span><span class="st">"identity"</span>) <span class="sc">+</span> </span>
<span id="cb34-42"><a href="#cb34-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># scale_y_continuous(name = ) + </span></span>
<span id="cb34-43"><a href="#cb34-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Frequency of Amendments"</span>, <span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">+</span> </span>
<span id="cb34-44"><a href="#cb34-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Share of Deal-Tranches w/ Amendments within Origination-year Group"</span>, </span>
<span id="cb34-45"><a href="#cb34-45" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Percentage of Deal-Tranche w/ Amendments (%)"</span>, </span>
<span id="cb34-46"><a href="#cb34-46" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Origination Year Groups"</span>) <span class="sc">+</span> </span>
<span id="cb34-47"><a href="#cb34-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_economist</span>(</span>
<span id="cb34-48"><a href="#cb34-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_size =</span> <span class="dv">10</span>,</span>
<span id="cb34-49"><a href="#cb34-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_family =</span> <span class="st">"Courier"</span>,</span>
<span id="cb34-50"><a href="#cb34-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">horizontal =</span> <span class="cn">TRUE</span>,</span>
<span id="cb34-51"><a href="#cb34-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">dkpanel =</span> <span class="cn">FALSE</span></span>
<span id="cb34-52"><a href="#cb34-52" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb34-53"><a href="#cb34-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb34-54"><a href="#cb34-54" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove labels from the vertical axis</span></span>
<span id="cb34-55"><a href="#cb34-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb34-56"><a href="#cb34-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">vjust=</span><span class="dv">3</span>),</span>
<span id="cb34-57"><a href="#cb34-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">1</span>),</span>
<span id="cb34-58"><a href="#cb34-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb34-59"><a href="#cb34-59" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Title format</span></span>
<span id="cb34-60"><a href="#cb34-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb34-61"><a href="#cb34-61" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">"Comic Sans MS"</span>, </span>
<span id="cb34-62"><a href="#cb34-62" aria-hidden="true" tabindex="-1"></a>      <span class="at">face =</span> <span class="st">"bold"</span>,</span>
<span id="cb34-63"><a href="#cb34-63" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="fl">13.5</span>, <span class="at">hjust =</span> <span class="dv">0</span> <span class="co"># shift the </span></span>
<span id="cb34-64"><a href="#cb34-64" aria-hidden="true" tabindex="-1"></a>    ), </span>
<span id="cb34-65"><a href="#cb34-65" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Subtitle format </span></span>
<span id="cb34-66"><a href="#cb34-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(</span>
<span id="cb34-67"><a href="#cb34-67" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">"Comic Sans MS"</span>,</span>
<span id="cb34-68"><a href="#cb34-68" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">12</span>, <span class="at">hjust =</span> <span class="dv">0</span></span>
<span id="cb34-69"><a href="#cb34-69" aria-hidden="true" tabindex="-1"></a>    ), </span>
<span id="cb34-70"><a href="#cb34-70" aria-hidden="true" tabindex="-1"></a>    <span class="co"># plot.title.position = "plot",</span></span>
<span id="cb34-71"><a href="#cb34-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>), <span class="co">#change font size of legend text</span></span>
<span id="cb34-72"><a href="#cb34-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>), <span class="co">#change font size of legend title   </span></span>
<span id="cb34-73"><a href="#cb34-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>, </span>
<span id="cb34-74"><a href="#cb34-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="fl">0.3</span>, <span class="st">'cm'</span>) <span class="co"># change the size of the legend key - the blocks</span></span>
<span id="cb34-75"><a href="#cb34-75" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb34-76"><a href="#cb34-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-77"><a href="#cb34-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-78"><a href="#cb34-78" aria-hidden="true" tabindex="-1"></a>cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(fig_amend_count, fig_amend_share, <span class="at">ncol =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="DealScan_Data_Renegotiation_files/figure-html/amend_refinance-4.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(na.omit(dt.Deal_Amend_Refin.plot), aes(fill=Year_groups, y=n, x=Change_Freq_Positive)) + </span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_bar(position="dodge", stat="identity") + </span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   scale_y_continuous(name = "Number of Deal-Tranche w/ Amendments") + </span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   scale_x_continuous(name = "Frequency of Amendments")</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(dt.Deal_Amend_Refin.freq<span class="sc">$</span>Change_Freq_Positive, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  0%  25%  50%  75% 100% 
   1    1    1    3   36 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(dt.Deal_Amend_Refin.freq<span class="sc">$</span>Tranche_Size, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     0%     25%     50%     75%    100% 
      0      25      75     210 1450000 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> <span class="fu">log10</span>(dt.Deal_Amend_Refin.freq<span class="sc">$</span>Tranche_Size), <span class="at">y =</span> dt.Deal_Amend_Refin.freq<span class="sc">$</span>Change_Freq_Positive, <span class="at">col =</span> dt.Deal_Amend_Refin.freq<span class="sc">$</span>Year_groups)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="DealScan_Data_Renegotiation_files/figure-html/amend_refinance-5.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># legend("topright", col = dt.Deal_Amend_Refin.freq$Year_groups, legend = dt.Deal_Amend_Refin.freq$Year_groups, lty = 1:4, cex = 1)</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(dt.Deal_Amend_Refin.freq <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="st">"Tranche_Change_Freq"</span>, <span class="st">"Change_Freq_Positive"</span>), <span class="at">IQR =</span> T) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                     vars      n mean   sd median trimmed mad min max range
Tranche_Change_Freq     1 173999 0.53 1.29      0    0.21   0   0  36    36
Change_Freq_Positive    2  43870 2.10 1.81      1    1.72   0   1  36    35
                     skew kurtosis   se IQR
Tranche_Change_Freq  4.84    48.64 0.00   1
Change_Freq_Positive 3.72    31.21 0.01   2</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(dt.Deal_Amend_Refin.freq <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Year_groups <span class="sc">!=</span> <span class="st">"Post-2020"</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="st">"Tranche_Change_Freq"</span>, <span class="st">"Change_Freq_Positive"</span>), <span class="at">IQR =</span> T) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                     vars      n mean   sd median trimmed mad min max range
Tranche_Change_Freq     1 155457 0.54 1.33      0    0.21   0   0  36    36
Change_Freq_Positive    2  38101 2.19 1.90      1    1.79   0   1  36    35
                     skew kurtosis   se IQR
Tranche_Change_Freq  4.83    47.43 0.00   0
Change_Freq_Positive 3.58    29.07 0.01   2</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>dt.Deal_Amend_Refin.freq <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(LPC_Deal_ID) <span class="sc">%&gt;%</span> </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Deal_Change_Freq =</span> <span class="fu">max</span>(Tranche_Change_Freq)) <span class="sc">%&gt;%</span> </span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="fu">describe</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                 vars      n      mean       sd median  trimmed      mad min
LPC_Deal_ID         1 110448 129520.46 79671.48 121980 124537.1 84471.88   2
Deal_Change_Freq    2 110448      0.41     1.21      0      0.1     0.00   0
                    max  range skew kurtosis     se
LPC_Deal_ID      323649 323647 0.45    -0.60 239.73
Deal_Change_Freq     36     36 5.24    47.79   0.00</code></pre>
</div>
</div>
<p>Among all 173,999 unique Deal-Tranche observations, 43,870 of those have recorded amendments to their Deal-Tranches. Among deals experienced amendments, each Deal-Tranche is amended on average 2.1 times and this seems to be quite stable to the origination time of the Deal-Tranche. This is somewhat consistent with the idea that the renegotiation is not rare.</p>
<div class="alert alert-dismissible alert-info">
<button type="button" class="btn-close" data-bs-dismiss="alert">
</button>
<p><strong>Heads up!</strong> However, one thing to be noted is <a href="##sec-s3.2-amendaments-and-refinancing" class="alert-link">the renegotiation with the good or bad news are not distinguished</a> in the above statistics..</p>
</div>
</section>
<section id="s3.3-follow-roberts-2015" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="s3.3-follow-roberts-2015">s3.3 Follow Roberts (2015)</h3>
<p>For Table B1, I extract the loan information and path for Aeroflex Inc.&nbsp;(<code>Borrower_Id</code> = 8532) from the dataset <code>DealScan_borrower</code>. <a href="https://www.sec.gov/edgar/browse/?CIK=0000002601">Company SEC Filings</a></p>
<div class="cell page-columns page-full">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>DealScan_Aeroflex <span class="ot">&lt;-</span> DealScan_borrower <span class="sc">%&gt;%</span> </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Borrower_Id <span class="sc">==</span> <span class="dv">8532</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>DealScan_Aeroflex <span class="sc">%&gt;%</span> </span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">names</span>(dt.Deal_Amend_Refin), Deal_Input_Date, Tranche_Type, Deal_Purpose) <span class="sc">%&gt;%</span> </span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="at">pattern =</span> <span class="st">"Orig"</span>, <span class="at">x =</span> Tranche_O_A, <span class="at">ignore.case =</span> F)) <span class="sc">%&gt;%</span> <span class="co"># keep only observations at origination </span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Deal_Active_Date, Tranche_Active_Date, Tranche_Maturity_Date) <span class="sc">%&gt;%</span> </span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span> <span class="fu">str_replace</span>(<span class="at">string =</span> .x, <span class="at">pattern =</span> <span class="st">"_"</span>, <span class="at">replacement =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">id =</span> <span class="st">'table_id'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># cols_label(fn = ~ str_replace(string = ., pattern = "_", replacement = "\n") ) %&gt;% </span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Table 1. Panel A: Aeroflex Inc. Deal Originations"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(<span class="at">table.font.size =</span> <span class="dv">10</span>, <span class="at">heading.align =</span> <span class="st">'left'</span> ) <span class="sc">%&gt;%</span> </span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>( <span class="co"># update the font size for table cells. </span></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">size =</span> <span class="fu">px</span>(<span class="dv">10</span>) ),</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display column-page">

<div id="table_id" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#table_id table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#table_id thead, #table_id tbody, #table_id tfoot, #table_id tr, #table_id td, #table_id th {
  border-style: none;
}

#table_id p {
  margin: 0;
  padding: 0;
}

#table_id .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 10px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#table_id .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#table_id .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#table_id .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#table_id .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#table_id .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#table_id .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#table_id .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#table_id .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#table_id .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#table_id .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#table_id .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#table_id .gt_spanner_row {
  border-bottom-style: hidden;
}

#table_id .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#table_id .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#table_id .gt_from_md > :first-child {
  margin-top: 0;
}

#table_id .gt_from_md > :last-child {
  margin-bottom: 0;
}

#table_id .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#table_id .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#table_id .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#table_id .gt_row_group_first td {
  border-top-width: 2px;
}

#table_id .gt_row_group_first th {
  border-top-width: 2px;
}

#table_id .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#table_id .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#table_id .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#table_id .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#table_id .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#table_id .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#table_id .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#table_id .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#table_id .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#table_id .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#table_id .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#table_id .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#table_id .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#table_id .gt_left {
  text-align: left;
}

#table_id .gt_center {
  text-align: center;
}

#table_id .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#table_id .gt_font_normal {
  font-weight: normal;
}

#table_id .gt_font_bold {
  font-weight: bold;
}

#table_id .gt_font_italic {
  font-style: italic;
}

#table_id .gt_super {
  font-size: 65%;
}

#table_id .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#table_id .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#table_id .gt_indent_1 {
  text-indent: 5px;
}

#table_id .gt_indent_2 {
  text-indent: 10px;
}

#table_id .gt_indent_3 {
  text-indent: 15px;
}

#table_id .gt_indent_4 {
  text-indent: 20px;
}

#table_id .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="17" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">Table 1. Panel A: Aeroflex Inc. Deal Originations</td>
    </tr>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="LPC
Deal_ID">LPC
Deal_ID</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="LPC
Tranche_ID">LPC
Tranche_ID</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Deal
Amended">Deal
Amended</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Amend
Extend_Flag">Amend
Extend_Flag</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Tranche
Amended">Tranche
Amended</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Deal
Refinancing">Deal
Refinancing</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Tranche
O_A">Tranche
O_A</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Tranche
Refinancing">Tranche
Refinancing</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Tranche
Maturity_Date">Tranche
Maturity_Date</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Tenor
Maturity">Tenor
Maturity</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Deal
Amount">Deal
Amount</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Tranche
Amount">Tranche
Amount</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Deal
Active_Date">Deal
Active_Date</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Deal
Input_Date">Deal
Input_Date</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Tranche
Active_Date">Tranche
Active_Date</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Tranche
Type">Tranche
Type</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Deal
Purpose">Deal
Purpose</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="LPC
Deal_ID" class="gt_row gt_right" style="font-size: 10px;">128721</td>
<td headers="LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">273100</td>
<td headers="Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">1999-03-31</td>
<td headers="Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">36</td>
<td headers="Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">20.00</td>
<td headers="Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">16.00</td>
<td headers="Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1996-03-15</td>
<td headers="Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">1998-09-09</td>
<td headers="Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1996-03-15</td>
<td headers="Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose/Refinance</td></tr>
    <tr><td headers="LPC
Deal_ID" class="gt_row gt_right" style="font-size: 10px;">128721</td>
<td headers="LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">224767</td>
<td headers="Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2000-09-30</td>
<td headers="Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">54</td>
<td headers="Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">20.00</td>
<td headers="Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">4.00</td>
<td headers="Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1996-03-15</td>
<td headers="Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">1998-09-09</td>
<td headers="Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1996-03-15</td>
<td headers="Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan</td>
<td headers="Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose/Refinance</td></tr>
    <tr><td headers="LPC
Deal_ID" class="gt_row gt_right" style="font-size: 10px;">143473</td>
<td headers="LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">185023</td>
<td headers="Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2002-12-31</td>
<td headers="Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">46</td>
<td headers="Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">47.48</td>
<td headers="Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">20.00</td>
<td headers="Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1999-02-25</td>
<td headers="Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">1999-03-10</td>
<td headers="Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1999-02-25</td>
<td headers="Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan</td>
<td headers="Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose/Refinance</td></tr>
    <tr><td headers="LPC
Deal_ID" class="gt_row gt_right" style="font-size: 10px;">143473</td>
<td headers="LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">186036</td>
<td headers="Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2002-12-31</td>
<td headers="Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">46</td>
<td headers="Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">47.48</td>
<td headers="Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">23.00</td>
<td headers="Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1999-02-25</td>
<td headers="Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">1999-03-10</td>
<td headers="Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1999-02-25</td>
<td headers="Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose/Refinance</td></tr>
    <tr><td headers="LPC
Deal_ID" class="gt_row gt_right" style="font-size: 10px;">143473</td>
<td headers="LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">278055</td>
<td headers="Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2008-04-30</td>
<td headers="Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">110</td>
<td headers="Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">47.48</td>
<td headers="Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">4.48</td>
<td headers="Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1999-02-25</td>
<td headers="Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">1999-03-10</td>
<td headers="Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1999-02-25</td>
<td headers="Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose/Refinance</td></tr>
    <tr><td headers="LPC
Deal_ID" class="gt_row gt_right" style="font-size: 10px;">42818</td>
<td headers="LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">98794</td>
<td headers="Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2007-02-14</td>
<td headers="Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">48</td>
<td headers="Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">53.23</td>
<td headers="Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">50.00</td>
<td headers="Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2003-02-14</td>
<td headers="Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2003-02-28</td>
<td headers="Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2003-02-14</td>
<td headers="Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Working capital</td></tr>
    <tr><td headers="LPC
Deal_ID" class="gt_row gt_right" style="font-size: 10px;">42818</td>
<td headers="LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">83949</td>
<td headers="Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2008-04-30</td>
<td headers="Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">62</td>
<td headers="Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">53.23</td>
<td headers="Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">3.23</td>
<td headers="Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2003-02-14</td>
<td headers="Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2003-02-28</td>
<td headers="Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2003-02-14</td>
<td headers="Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan</td>
<td headers="Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Working capital</td></tr>
    <tr><td headers="LPC
Deal_ID" class="gt_row gt_right" style="font-size: 10px;">151556</td>
<td headers="LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">197238</td>
<td headers="Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2011-03-21</td>
<td headers="Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">60</td>
<td headers="Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">100.00</td>
<td headers="Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">100.00</td>
<td headers="Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2006-03-21</td>
<td headers="Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2006-03-22</td>
<td headers="Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2006-03-21</td>
<td headers="Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Working capital</td></tr>
    <tr><td headers="LPC
Deal_ID" class="gt_row gt_right" style="font-size: 10px;">57853</td>
<td headers="LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">108980</td>
<td headers="Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">NA</td>
<td headers="Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">NA</td>
<td headers="Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">780.00</td>
<td headers="Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">245.00</td>
<td headers="Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-04-13</td>
<td headers="Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2007-03-30</td>
<td headers="Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-04-13</td>
<td headers="Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan</td>
<td headers="Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Leveraged Buyout</td></tr>
    <tr><td headers="LPC
Deal_ID" class="gt_row gt_right" style="font-size: 10px;">57853</td>
<td headers="LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">230824</td>
<td headers="Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">NA</td>
<td headers="Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">NA</td>
<td headers="Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">780.00</td>
<td headers="Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">475.00</td>
<td headers="Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-04-13</td>
<td headers="Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2007-03-30</td>
<td headers="Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-04-13</td>
<td headers="Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan B</td>
<td headers="Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Leveraged Buyout</td></tr>
    <tr><td headers="LPC
Deal_ID" class="gt_row gt_right" style="font-size: 10px;">57853</td>
<td headers="LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">98546</td>
<td headers="Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">NA</td>
<td headers="Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">NA</td>
<td headers="Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">780.00</td>
<td headers="Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">60.00</td>
<td headers="Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-04-13</td>
<td headers="Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2007-03-30</td>
<td headers="Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-04-13</td>
<td headers="Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Leveraged Buyout</td></tr>
    <tr><td headers="LPC
Deal_ID" class="gt_row gt_right" style="font-size: 10px;">16163</td>
<td headers="LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">35910</td>
<td headers="Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2013-08-15</td>
<td headers="Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">72</td>
<td headers="Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">575.00</td>
<td headers="Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">50.00</td>
<td headers="Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-08-15</td>
<td headers="Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2007-06-25</td>
<td headers="Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-08-15</td>
<td headers="Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Leveraged Buyout</td></tr>
    <tr><td headers="LPC
Deal_ID" class="gt_row gt_right" style="font-size: 10px;">16163</td>
<td headers="LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">35911</td>
<td headers="Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2014-08-15</td>
<td headers="Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">84</td>
<td headers="Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">575.00</td>
<td headers="Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">400.00</td>
<td headers="Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-08-15</td>
<td headers="Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2007-06-25</td>
<td headers="Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-08-15</td>
<td headers="Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan B</td>
<td headers="Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Leveraged Buyout</td></tr>
    <tr><td headers="LPC
Deal_ID" class="gt_row gt_right" style="font-size: 10px;">16163</td>
<td headers="LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">36226</td>
<td headers="Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2014-08-15</td>
<td headers="Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">84</td>
<td headers="Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">575.00</td>
<td headers="Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">125.00</td>
<td headers="Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-08-15</td>
<td headers="Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2007-06-25</td>
<td headers="Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-08-15</td>
<td headers="Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan C</td>
<td headers="Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Leveraged Buyout</td></tr>
    <tr><td headers="LPC
Deal_ID" class="gt_row gt_right" style="font-size: 10px;">16164</td>
<td headers="LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">43063</td>
<td headers="Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2016-12-31</td>
<td headers="Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">67</td>
<td headers="Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">669.12</td>
<td headers="Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">75.00</td>
<td headers="Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2011-05-09</td>
<td headers="Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2011-04-27</td>
<td headers="Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2011-05-09</td>
<td headers="Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose</td></tr>
    <tr><td headers="LPC
Deal_ID" class="gt_row gt_right" style="font-size: 10px;">16164</td>
<td headers="LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">43064</td>
<td headers="Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2018-12-31</td>
<td headers="Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">91</td>
<td headers="Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">669.12</td>
<td headers="Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">725.00</td>
<td headers="Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2011-05-09</td>
<td headers="Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2011-04-27</td>
<td headers="Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2011-05-09</td>
<td headers="Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan B</td>
<td headers="Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>This table is consistent with Table B1 Panel A in Roberts (2015):</p>
<ul>
<li>The identifier <code>(LPC_Deal_ID, LPC_Tranche_ID)</code> maps to <code>(Package ID, Facility ID)</code>.</li>
<li>The identifier <code>Tranche_Type</code> maps to <code>Loan type</code>.</li>
<li>The date information - <code>Deal_Active_Date</code> maps to <code>Event date</code>.</li>
<li><code>Tranche_Maturity_Date</code> maps to <code>Maturity date</code>.</li>
<li><code>Tranche_Amount</code> maps to <code>Amount (millions)</code>.</li>
<li><code>Tranche_O_A</code> maps to <code>Event</code>.</li>
</ul>
<!-- Start the work: June 6, 2024 -->
<section id="s3.3a-example-from-borrower-borrower_id-8532" class="level4 page-columns page-full">
<h4 class="anchored" data-anchor-id="s3.3a-example-from-borrower-borrower_id-8532">s3.3a Example from borrower (<code>Borrower_Id</code> = 8532)</h4>
<p>The next step is to construct the life-cycle / loan path as in Table B1 Panel B.</p>
<p>E.g. This deal (<code>LPC_Deal_ID</code> = 151556, <code>LPC_Tranche_ID</code> = 197238) can be found in <a href="https://www.sec.gov/Archives/edgar/data/2601/000093221406000138/0000932214-06-000138.txt">this filing</a>.</p>
<ul>
<li><p>This <a href="https://www.sec.gov/Archives/edgar/data/2601/000093221406000138/0000932214-06-000138.txt">deal</a> is originated at March 21, 2006.</p></li>
<li><p><a href="https://www.sec.gov/edgar/search/?r=el#exhibit10-1.txt">The amendment</a> is made at August 28, 2006. The amended document says that</p>
<blockquote class="blockquote">
<p>… WHEREAS, <mark>the Borrowers has requested an amendment to the Credit Agreement</mark>; and WHEREAS, the Lenders are willing to agree to such amendments, subject to the terms and conditions set forth herein; …</p>
</blockquote>
<ul>
<li><p>This seems that if the borrower request an amendment, it can be approved by the syndicate.</p></li>
<li><p>This amendment happened in around 5 months after the loan origination.</p></li>
</ul>
<div id="imp-amend" class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Who initiates the renegotiation process?
</div>
</div>
<div class="callout-body-container callout-body">
<p>I only observe the successful renegotiations and potentially can also identify who initiates this process. This may create selection bias in your analysis. Need to think about how will this issue create upward/downward bias in your results.</p>
</div>
</div>
<ul>
<li>The syndicte has four banks and the cost of renegotiation might be small? &amp; What is usually the fees/expenses for renegotiations?</li>
</ul></li>
</ul>

<div class="no-row-height column-margin column-container"><div id="tip-syndicate" class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
How to detect the relationship lending?
</div>
</div>
<div class="callout-body-container callout-body">
<p>One tip to detect such lending relationship might be a scrap and search for the person and his/her title along the loan path and also for a single firm’s loan pool.</p>
</div>
</div></div><p>Different types of term loans:</p>
<ul>
<li>Term loan (also Term Loan A): This layer of debt is typically amortized evenly over 5 to 7 years. Just like a mortgage.</li>
<li>Term loan B (also TLB): This layer of debt usually involves nominal amortization (repayment) over 5 to 8 years, with a large bullet payment in the last year. Term Loan B allows borrowers to defer repayment of a large portion of the loan, but is more costly to borrowers than Term Loan A.
<ul>
<li>TLB proceeds can be used in various ways, including for refinancing, acquisitions and general corporate use.</li>
<li>The first two types generally are secured loans.</li>
<li>Repayment can be made and is generally required at a premium to face value.</li>
</ul></li>
<li>Term loan C (also TLC): TLC proceeds are used to fund cash collateral accounts that support letters of credit—a letter from a bank guaranteeing that a seller of goods or services will receive payment in full and on time, even if the buyer defaults.
<ul>
<li>TLC debt, however, may only be used to provide collateral for letters of credit.</li>
<li>Since TLCs are specifically raised to provide cash collateral, which must be available in an account to support letters of credit, they also do not amortize.</li>
<li>TLB is senior than TLC debt.</li>
<li>The idea is to use long-term debt to hedge the short-term liquidity/cash needs. TLC plays such a role for this specific purpose. It is a risky debt; however, very strict covenants and purposes are imposed to mitigate risk-shifting by the manager.</li>
<li><a href="https://debtexplorer.whitecase.com/leveraged-finance-commentary/term-loan-c-in-the-spotlight">A nice article about TLC debt</a>.</li>
</ul></li>
<li>Revolver/Line: Revolving Credit Facility, which is basically a credit card for the borrower. There are two costs associated with revolving lines of credit: (1) the interest rate charged on the revolver’s drawn balance, and (2) an undrawn commitment fee.</li>
</ul>
</section>
<section id="q-what-happens-to-the-loan-path" class="level4 page-columns page-full">
<h4 class="anchored" data-anchor-id="q-what-happens-to-the-loan-path">Q: What happens to the loan path?</h4>
<div class="cell page-columns page-full">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>DealScan_Aeroflex <span class="sc">%&gt;%</span> </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">names</span>(dt.Deal_Amend_Refin), Deal_Input_Date, Tranche_Type, Deal_Purpose) <span class="sc">%&gt;%</span> </span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Tranche_O_A_round =</span> <span class="fu">replace_na</span>(<span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(<span class="at">string =</span> Tranche_O_A, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">d+$"</span>)) , <span class="at">replace =</span> <span class="dv">0</span> ), </span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">LPC_Deal_ID =</span> <span class="fu">paste</span>(<span class="st">"Deal: "</span>, LPC_Deal_ID, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span> </span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(LPC_Deal_ID, LPC_Tranche_ID) <span class="sc">%&gt;%</span> </span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Deal_Active_Date) <span class="sc">%&gt;%</span> </span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># check whether there exists tranche amendment in the dataset </span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Amend_Flag_check =</span> <span class="fu">max</span>(Tranche_O_A_round) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span> <span class="fu">str_replace</span>(<span class="at">string =</span> .x, <span class="at">pattern =</span> <span class="st">"_"</span>, <span class="at">replacement =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">id =</span> <span class="st">'table_id'</span>, <span class="at">groupname_col =</span> <span class="st">"LPC</span><span class="sc">\n</span><span class="st">Deal_ID"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># cols_label(fn = ~ str_replace(string = ., pattern = "_", replacement = "\n") ) %&gt;% </span></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Table 1. Panel B: Aeroflex Inc. Deal-Tranche Level Loan Path"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(<span class="at">table.font.size =</span> <span class="dv">10</span>, <span class="at">heading.align =</span> <span class="st">'left'</span> ) <span class="sc">%&gt;%</span> </span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>( <span class="co"># update the font size for table cells. </span></span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">size =</span> <span class="fu">px</span>(<span class="dv">10</span>)),</span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">style =</span> <span class="st">"italic"</span>, <span class="at">color =</span> <span class="st">'red'</span>), </span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(</span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">columns =</span> <span class="st">"LPC</span><span class="sc">\n</span><span class="st">Tranche_ID"</span>, </span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a>      <span class="at">rows =</span>  <span class="st">`</span><span class="at">Amend</span><span class="sc">\n</span><span class="at">Flag_check</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="dv">0</span></span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_hide</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"Tranche</span><span class="sc">\n</span><span class="st">O_A_round"</span>, <span class="st">"Amend</span><span class="sc">\n</span><span class="st">Flag_check"</span>) ) <span class="co"># hide columns </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display column-page">

<div id="table_id" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#table_id table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#table_id thead, #table_id tbody, #table_id tfoot, #table_id tr, #table_id td, #table_id th {
  border-style: none;
}

#table_id p {
  margin: 0;
  padding: 0;
}

#table_id .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 10px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#table_id .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#table_id .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#table_id .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#table_id .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#table_id .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#table_id .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#table_id .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#table_id .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#table_id .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#table_id .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#table_id .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#table_id .gt_spanner_row {
  border-bottom-style: hidden;
}

#table_id .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#table_id .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#table_id .gt_from_md > :first-child {
  margin-top: 0;
}

#table_id .gt_from_md > :last-child {
  margin-bottom: 0;
}

#table_id .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#table_id .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#table_id .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#table_id .gt_row_group_first td {
  border-top-width: 2px;
}

#table_id .gt_row_group_first th {
  border-top-width: 2px;
}

#table_id .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#table_id .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#table_id .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#table_id .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#table_id .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#table_id .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#table_id .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#table_id .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#table_id .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#table_id .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#table_id .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#table_id .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#table_id .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#table_id .gt_left {
  text-align: left;
}

#table_id .gt_center {
  text-align: center;
}

#table_id .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#table_id .gt_font_normal {
  font-weight: normal;
}

#table_id .gt_font_bold {
  font-weight: bold;
}

#table_id .gt_font_italic {
  font-style: italic;
}

#table_id .gt_super {
  font-size: 65%;
}

#table_id .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#table_id .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#table_id .gt_indent_1 {
  text-indent: 5px;
}

#table_id .gt_indent_2 {
  text-indent: 10px;
}

#table_id .gt_indent_3 {
  text-indent: 15px;
}

#table_id .gt_indent_4 {
  text-indent: 20px;
}

#table_id .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="16" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">Table 1. Panel B: Aeroflex Inc. Deal-Tranche Level Loan Path</td>
    </tr>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="LPC
Tranche_ID">LPC
Tranche_ID</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Deal
Amended">Deal
Amended</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Amend
Extend_Flag">Amend
Extend_Flag</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Tranche
Amended">Tranche
Amended</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Deal
Refinancing">Deal
Refinancing</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Tranche
O_A">Tranche
O_A</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Tranche
Refinancing">Tranche
Refinancing</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Tranche
Maturity_Date">Tranche
Maturity_Date</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Tenor
Maturity">Tenor
Maturity</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Deal
Amount">Deal
Amount</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Tranche
Amount">Tranche
Amount</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Deal
Active_Date">Deal
Active_Date</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Deal
Input_Date">Deal
Input_Date</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Tranche
Active_Date">Tranche
Active_Date</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Tranche
Type">Tranche
Type</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Deal
Purpose">Deal
Purpose</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr class="gt_group_heading_row">
      <th colspan="16" class="gt_group_heading" scope="colgroup" id="Deal: 128721">Deal: 128721</th>
    </tr>
    <tr class="gt_row_group_first"><td headers="Deal: 128721  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">224767</td>
<td headers="Deal: 128721  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 128721  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 128721  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 128721  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 128721  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 128721  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Deal: 128721  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2000-09-30</td>
<td headers="Deal: 128721  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">54</td>
<td headers="Deal: 128721  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">20.00</td>
<td headers="Deal: 128721  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">4.00</td>
<td headers="Deal: 128721  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1996-03-15</td>
<td headers="Deal: 128721  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">1998-09-09</td>
<td headers="Deal: 128721  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1996-03-15</td>
<td headers="Deal: 128721  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan</td>
<td headers="Deal: 128721  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose/Refinance</td></tr>
    <tr><td headers="Deal: 128721  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">273100</td>
<td headers="Deal: 128721  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 128721  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 128721  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 128721  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 128721  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 128721  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Deal: 128721  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">1999-03-31</td>
<td headers="Deal: 128721  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">36</td>
<td headers="Deal: 128721  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">20.00</td>
<td headers="Deal: 128721  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">16.00</td>
<td headers="Deal: 128721  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1996-03-15</td>
<td headers="Deal: 128721  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">1998-09-09</td>
<td headers="Deal: 128721  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1996-03-15</td>
<td headers="Deal: 128721  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal: 128721  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose/Refinance</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="16" class="gt_group_heading" scope="colgroup" id="Deal: 143473">Deal: 143473</th>
    </tr>
    <tr class="gt_row_group_first"><td headers="Deal: 143473  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">185023</td>
<td headers="Deal: 143473  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 143473  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 143473  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 143473  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 143473  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 143473  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Deal: 143473  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2002-12-31</td>
<td headers="Deal: 143473  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">46</td>
<td headers="Deal: 143473  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">47.48</td>
<td headers="Deal: 143473  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">20.00</td>
<td headers="Deal: 143473  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1999-02-25</td>
<td headers="Deal: 143473  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">1999-03-10</td>
<td headers="Deal: 143473  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1999-02-25</td>
<td headers="Deal: 143473  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan</td>
<td headers="Deal: 143473  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose/Refinance</td></tr>
    <tr><td headers="Deal: 143473  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">186036</td>
<td headers="Deal: 143473  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 143473  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 143473  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 143473  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 143473  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 143473  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Deal: 143473  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2002-12-31</td>
<td headers="Deal: 143473  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">46</td>
<td headers="Deal: 143473  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">47.48</td>
<td headers="Deal: 143473  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">23.00</td>
<td headers="Deal: 143473  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1999-02-25</td>
<td headers="Deal: 143473  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">1999-03-10</td>
<td headers="Deal: 143473  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1999-02-25</td>
<td headers="Deal: 143473  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal: 143473  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose/Refinance</td></tr>
    <tr><td headers="Deal: 143473  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">278055</td>
<td headers="Deal: 143473  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 143473  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 143473  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 143473  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 143473  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 143473  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Deal: 143473  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2008-04-30</td>
<td headers="Deal: 143473  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">110</td>
<td headers="Deal: 143473  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">47.48</td>
<td headers="Deal: 143473  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">4.48</td>
<td headers="Deal: 143473  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1999-02-25</td>
<td headers="Deal: 143473  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">1999-03-10</td>
<td headers="Deal: 143473  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1999-02-25</td>
<td headers="Deal: 143473  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal: 143473  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose/Refinance</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="16" class="gt_group_heading" scope="colgroup" id="Deal: 42818">Deal: 42818</th>
    </tr>
    <tr class="gt_row_group_first"><td headers="Deal: 42818  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">83949</td>
<td headers="Deal: 42818  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 42818  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 42818  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 42818  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 42818  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 42818  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Deal: 42818  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2008-04-30</td>
<td headers="Deal: 42818  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">62</td>
<td headers="Deal: 42818  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">53.23</td>
<td headers="Deal: 42818  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">3.23</td>
<td headers="Deal: 42818  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2003-02-14</td>
<td headers="Deal: 42818  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2003-02-28</td>
<td headers="Deal: 42818  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2003-02-14</td>
<td headers="Deal: 42818  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan</td>
<td headers="Deal: 42818  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Working capital</td></tr>
    <tr><td headers="Deal: 42818  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">98794</td>
<td headers="Deal: 42818  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 42818  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 42818  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 42818  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 42818  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 42818  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Deal: 42818  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2007-02-14</td>
<td headers="Deal: 42818  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">48</td>
<td headers="Deal: 42818  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">53.23</td>
<td headers="Deal: 42818  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">50.00</td>
<td headers="Deal: 42818  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2003-02-14</td>
<td headers="Deal: 42818  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2003-02-28</td>
<td headers="Deal: 42818  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2003-02-14</td>
<td headers="Deal: 42818  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal: 42818  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Working capital</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="16" class="gt_group_heading" scope="colgroup" id="Deal: 151556">Deal: 151556</th>
    </tr>
    <tr class="gt_row_group_first"><td headers="Deal: 151556  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px; color: #FF0000; font-style: italic;">197238</td>
<td headers="Deal: 151556  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 151556  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 151556  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 151556  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 151556  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 151556  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Deal: 151556  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2011-03-21</td>
<td headers="Deal: 151556  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">60</td>
<td headers="Deal: 151556  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">100.00</td>
<td headers="Deal: 151556  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">100.00</td>
<td headers="Deal: 151556  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2006-03-21</td>
<td headers="Deal: 151556  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2006-03-22</td>
<td headers="Deal: 151556  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2006-03-21</td>
<td headers="Deal: 151556  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal: 151556  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Working capital</td></tr>
    <tr><td headers="Deal: 151556  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px; color: #FF0000; font-style: italic;">197238</td>
<td headers="Deal: 151556  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 151556  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 151556  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 151556  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 151556  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Amendment 1</td>
<td headers="Deal: 151556  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Deal: 151556  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2011-03-21</td>
<td headers="Deal: 151556  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">55</td>
<td headers="Deal: 151556  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">100.00</td>
<td headers="Deal: 151556  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">100.00</td>
<td headers="Deal: 151556  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2006-03-21</td>
<td headers="Deal: 151556  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2006-08-28</td>
<td headers="Deal: 151556  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2006-08-28</td>
<td headers="Deal: 151556  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal: 151556  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Working capital</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="16" class="gt_group_heading" scope="colgroup" id="Deal: 57853">Deal: 57853</th>
    </tr>
    <tr class="gt_row_group_first"><td headers="Deal: 57853  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">108980</td>
<td headers="Deal: 57853  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 57853  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 57853  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 57853  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 57853  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 57853  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Deal: 57853  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">NA</td>
<td headers="Deal: 57853  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">NA</td>
<td headers="Deal: 57853  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">780.00</td>
<td headers="Deal: 57853  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">245.00</td>
<td headers="Deal: 57853  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-04-13</td>
<td headers="Deal: 57853  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2007-03-30</td>
<td headers="Deal: 57853  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-04-13</td>
<td headers="Deal: 57853  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan</td>
<td headers="Deal: 57853  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Leveraged Buyout</td></tr>
    <tr><td headers="Deal: 57853  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">230824</td>
<td headers="Deal: 57853  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 57853  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 57853  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 57853  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 57853  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 57853  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Deal: 57853  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">NA</td>
<td headers="Deal: 57853  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">NA</td>
<td headers="Deal: 57853  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">780.00</td>
<td headers="Deal: 57853  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">475.00</td>
<td headers="Deal: 57853  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-04-13</td>
<td headers="Deal: 57853  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2007-03-30</td>
<td headers="Deal: 57853  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-04-13</td>
<td headers="Deal: 57853  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan B</td>
<td headers="Deal: 57853  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Leveraged Buyout</td></tr>
    <tr><td headers="Deal: 57853  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">98546</td>
<td headers="Deal: 57853  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 57853  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 57853  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 57853  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 57853  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 57853  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Deal: 57853  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">NA</td>
<td headers="Deal: 57853  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">NA</td>
<td headers="Deal: 57853  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">780.00</td>
<td headers="Deal: 57853  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">60.00</td>
<td headers="Deal: 57853  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-04-13</td>
<td headers="Deal: 57853  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2007-03-30</td>
<td headers="Deal: 57853  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-04-13</td>
<td headers="Deal: 57853  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal: 57853  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Leveraged Buyout</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="16" class="gt_group_heading" scope="colgroup" id="Deal: 16163">Deal: 16163</th>
    </tr>
    <tr class="gt_row_group_first"><td headers="Deal: 16163  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">35910</td>
<td headers="Deal: 16163  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 16163  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 16163  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 16163  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16163  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 16163  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Deal: 16163  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2013-08-15</td>
<td headers="Deal: 16163  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">72</td>
<td headers="Deal: 16163  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">575.00</td>
<td headers="Deal: 16163  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">50.00</td>
<td headers="Deal: 16163  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-08-15</td>
<td headers="Deal: 16163  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2007-06-25</td>
<td headers="Deal: 16163  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-08-15</td>
<td headers="Deal: 16163  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal: 16163  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Leveraged Buyout</td></tr>
    <tr><td headers="Deal: 16163  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">35911</td>
<td headers="Deal: 16163  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 16163  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 16163  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 16163  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16163  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 16163  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Deal: 16163  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2014-08-15</td>
<td headers="Deal: 16163  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">84</td>
<td headers="Deal: 16163  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">575.00</td>
<td headers="Deal: 16163  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">400.00</td>
<td headers="Deal: 16163  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-08-15</td>
<td headers="Deal: 16163  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2007-06-25</td>
<td headers="Deal: 16163  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-08-15</td>
<td headers="Deal: 16163  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan B</td>
<td headers="Deal: 16163  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Leveraged Buyout</td></tr>
    <tr><td headers="Deal: 16163  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">36226</td>
<td headers="Deal: 16163  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 16163  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 16163  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 16163  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16163  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 16163  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Deal: 16163  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2014-08-15</td>
<td headers="Deal: 16163  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">84</td>
<td headers="Deal: 16163  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">575.00</td>
<td headers="Deal: 16163  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">125.00</td>
<td headers="Deal: 16163  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-08-15</td>
<td headers="Deal: 16163  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2007-06-25</td>
<td headers="Deal: 16163  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2007-08-15</td>
<td headers="Deal: 16163  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan C</td>
<td headers="Deal: 16163  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Leveraged Buyout</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="16" class="gt_group_heading" scope="colgroup" id="Deal: 16164">Deal: 16164</th>
    </tr>
    <tr class="gt_row_group_first"><td headers="Deal: 16164  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px; color: #FF0000; font-style: italic;">43063</td>
<td headers="Deal: 16164  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 16164  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 16164  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2016-12-31</td>
<td headers="Deal: 16164  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">67</td>
<td headers="Deal: 16164  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">669.12</td>
<td headers="Deal: 16164  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">75.00</td>
<td headers="Deal: 16164  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2011-05-09</td>
<td headers="Deal: 16164  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2011-04-27</td>
<td headers="Deal: 16164  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2011-05-09</td>
<td headers="Deal: 16164  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal: 16164  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose</td></tr>
    <tr><td headers="Deal: 16164  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px; color: #FF0000; font-style: italic;">43063</td>
<td headers="Deal: 16164  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 16164  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Amendment 1</td>
<td headers="Deal: 16164  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2016-12-31</td>
<td headers="Deal: 16164  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">55</td>
<td headers="Deal: 16164  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">669.12</td>
<td headers="Deal: 16164  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">75.00</td>
<td headers="Deal: 16164  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2011-05-09</td>
<td headers="Deal: 16164  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2012-05-25</td>
<td headers="Deal: 16164  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2012-05-25</td>
<td headers="Deal: 16164  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal: 16164  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose</td></tr>
    <tr><td headers="Deal: 16164  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px; color: #FF0000; font-style: italic;">43063</td>
<td headers="Deal: 16164  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 16164  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Amendment 2</td>
<td headers="Deal: 16164  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2017-11-28</td>
<td headers="Deal: 16164  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">54</td>
<td headers="Deal: 16164  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">669.12</td>
<td headers="Deal: 16164  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">57.12</td>
<td headers="Deal: 16164  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2011-05-09</td>
<td headers="Deal: 16164  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2013-05-14</td>
<td headers="Deal: 16164  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2013-05-28</td>
<td headers="Deal: 16164  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal: 16164  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose</td></tr>
    <tr><td headers="Deal: 16164  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px; color: #FF0000; font-style: italic;">43064</td>
<td headers="Deal: 16164  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 16164  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 16164  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2018-12-31</td>
<td headers="Deal: 16164  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">91</td>
<td headers="Deal: 16164  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">669.12</td>
<td headers="Deal: 16164  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">725.00</td>
<td headers="Deal: 16164  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2011-05-09</td>
<td headers="Deal: 16164  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2011-04-27</td>
<td headers="Deal: 16164  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2011-05-09</td>
<td headers="Deal: 16164  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan B</td>
<td headers="Deal: 16164  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose</td></tr>
    <tr><td headers="Deal: 16164  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px; color: #FF0000; font-style: italic;">43064</td>
<td headers="Deal: 16164  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 16164  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Amendment 1</td>
<td headers="Deal: 16164  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2018-12-31</td>
<td headers="Deal: 16164  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">79</td>
<td headers="Deal: 16164  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">669.12</td>
<td headers="Deal: 16164  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">725.00</td>
<td headers="Deal: 16164  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2011-05-09</td>
<td headers="Deal: 16164  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2012-05-25</td>
<td headers="Deal: 16164  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2012-05-25</td>
<td headers="Deal: 16164  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan B</td>
<td headers="Deal: 16164  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose</td></tr>
    <tr><td headers="Deal: 16164  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px; color: #FF0000; font-style: italic;">43064</td>
<td headers="Deal: 16164  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 16164  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Amendment 2</td>
<td headers="Deal: 16164  Tranche
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 16164  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2019-11-28</td>
<td headers="Deal: 16164  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">78</td>
<td headers="Deal: 16164  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">669.12</td>
<td headers="Deal: 16164  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">612.00</td>
<td headers="Deal: 16164  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2011-05-09</td>
<td headers="Deal: 16164  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">2013-05-14</td>
<td headers="Deal: 16164  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">2013-05-28</td>
<td headers="Deal: 16164  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan B</td>
<td headers="Deal: 16164  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>Consistent with Roberts (2015), most of deal-tranche observations in DealScan are not consistent with their SEC filings. In other words, the loan path in the DealScan data is rather incomplete. For instance, the tranche (<code>LPC_Deal_ID</code> = 128721, <code>LPC_Tranche_ID</code> = 224767) only appears once in DealScan and is classified as an “Origination” + “Refinancing” deal. However, the SEC filings from Table B1 Panel B in Roberts (2015) shows a total 8 observations along the loan path. The observation recorded in DealScan is not an origination and is classified as an “Amended/Restate” event in Roberts dataset. Therefore, the renegotiation frequency is significantly different from the actual ones and the full dataset may not be granular enough.</p>
<p>Another way to better identify the connection between different deals, and tranches in particular, is to look into variable <code>Deal_Remark</code>. Some examples below:</p>
<div class="cell page-columns page-full">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>DealScan_Aeroflex <span class="sc">%&gt;%</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">names</span>(dt.Deal_Amend_Refin), Deal_Input_Date, Tranche_Type, Deal_Purpose, </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>         <span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">"Remark"</span>, <span class="at">x =</span> <span class="fu">names</span>(.), <span class="at">value =</span> T)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span> </span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Tranche_O_A_round =</span> <span class="fu">replace_na</span>(<span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(<span class="at">string =</span> Tranche_O_A, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">d+$"</span>)) , <span class="at">replace =</span> <span class="dv">0</span> ), </span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">LPC_Deal_ID =</span> <span class="fu">paste</span>(<span class="st">"Deal: "</span>, LPC_Deal_ID, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span> </span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(LPC_Deal_ID, LPC_Tranche_ID) <span class="sc">%&gt;%</span> </span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Deal_Active_Date) <span class="sc">%&gt;%</span> </span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># check whether there exists tranche amendment in the dataset </span></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Amend_Flag_check =</span> <span class="fu">max</span>(Tranche_O_A_round) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(LPC_Deal_ID <span class="sc">==</span> <span class="st">"Deal: 128721"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span> <span class="fu">str_replace</span>(<span class="at">string =</span> .x, <span class="at">pattern =</span> <span class="st">"_"</span>, <span class="at">replacement =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">id =</span> <span class="st">'table_id'</span>, <span class="at">groupname_col =</span> <span class="st">"LPC</span><span class="sc">\n</span><span class="st">Deal_ID"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># cols_label(fn = ~ str_replace(string = ., pattern = "_", replacement = "\n") ) %&gt;% </span></span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Table 1. Panel C: Aeroflex Inc. Deal-Tranche Level Loan Path"</span>, </span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a>             <span class="at">subtitle =</span> <span class="st">"w/ additional information in remarks"</span></span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">%&gt;%</span> </span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(<span class="at">table.font.size =</span> <span class="dv">10</span>, <span class="at">heading.align =</span> <span class="st">'left'</span> ) <span class="sc">%&gt;%</span> </span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>( <span class="co"># update the font size for table cells. </span></span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">size =</span> <span class="fu">px</span>(<span class="dv">10</span>)),</span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()</span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">style =</span> <span class="st">"italic"</span>, <span class="at">color =</span> <span class="st">'red'</span>), </span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(</span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">columns =</span> <span class="st">"LPC</span><span class="sc">\n</span><span class="st">Tranche_ID"</span>, </span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">rows =</span>  <span class="st">`</span><span class="at">Amend</span><span class="sc">\n</span><span class="at">Flag_check</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="dv">0</span></span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb48-32"><a href="#cb48-32" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb48-33"><a href="#cb48-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_width</span>(<span class="fu">ends_with</span>(<span class="st">"Remark"</span>) <span class="sc">~</span> <span class="fu">px</span>(<span class="dv">800</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb48-34"><a href="#cb48-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_hide</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"Tranche</span><span class="sc">\n</span><span class="st">O_A_round"</span>, <span class="st">"Amend</span><span class="sc">\n</span><span class="st">Flag_check"</span>) ) <span class="co"># hide columns </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display column-screen-inset">

<div id="table_id" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#table_id table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#table_id thead, #table_id tbody, #table_id tfoot, #table_id tr, #table_id td, #table_id th {
  border-style: none;
}

#table_id p {
  margin: 0;
  padding: 0;
}

#table_id .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 10px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#table_id .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#table_id .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#table_id .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#table_id .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#table_id .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#table_id .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#table_id .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#table_id .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#table_id .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#table_id .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#table_id .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#table_id .gt_spanner_row {
  border-bottom-style: hidden;
}

#table_id .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#table_id .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#table_id .gt_from_md > :first-child {
  margin-top: 0;
}

#table_id .gt_from_md > :last-child {
  margin-bottom: 0;
}

#table_id .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#table_id .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#table_id .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#table_id .gt_row_group_first td {
  border-top-width: 2px;
}

#table_id .gt_row_group_first th {
  border-top-width: 2px;
}

#table_id .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#table_id .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#table_id .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#table_id .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#table_id .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#table_id .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#table_id .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#table_id .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#table_id .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#table_id .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#table_id .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#table_id .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#table_id .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#table_id .gt_left {
  text-align: left;
}

#table_id .gt_center {
  text-align: center;
}

#table_id .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#table_id .gt_font_normal {
  font-weight: normal;
}

#table_id .gt_font_bold {
  font-weight: bold;
}

#table_id .gt_font_italic {
  font-style: italic;
}

#table_id .gt_super {
  font-size: 65%;
}

#table_id .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#table_id .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#table_id .gt_indent_1 {
  text-indent: 5px;
}

#table_id .gt_indent_2 {
  text-indent: 10px;
}

#table_id .gt_indent_3 {
  text-indent: 15px;
}

#table_id .gt_indent_4 {
  text-indent: 20px;
}

#table_id .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" style="table-layout: fixed;" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <colgroup>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col style="width:800px;">
    <col style="width:800px;">
    <col style="width:800px;">
    <col style="width:800px;">
  </colgroup>
  <thead>
    <tr class="gt_heading">
      <td colspan="20" class="gt_heading gt_title gt_font_normal" style="">Table 1. Panel C: Aeroflex Inc. Deal-Tranche Level Loan Path</td>
    </tr>
    <tr class="gt_heading">
      <td colspan="20" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">w/ additional information in remarks</td>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="LPC
Tranche_ID">LPC
Tranche_ID</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Deal
Amended">Deal
Amended</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Amend
Extend_Flag">Amend
Extend_Flag</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Tranche
Amended">Tranche
Amended</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Deal
Refinancing">Deal
Refinancing</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Tranche
O_A">Tranche
O_A</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Tranche
Refinancing">Tranche
Refinancing</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Tranche
Maturity_Date">Tranche
Maturity_Date</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Tenor
Maturity">Tenor
Maturity</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Deal
Amount">Deal
Amount</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Tranche
Amount">Tranche
Amount</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Deal
Active_Date">Deal
Active_Date</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Deal
Input_Date">Deal
Input_Date</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Tranche
Active_Date">Tranche
Active_Date</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Tranche
Type">Tranche
Type</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Deal
Purpose">Deal
Purpose</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Purpose
Remark">Purpose
Remark</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Deal
Remark">Deal
Remark</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Tranche
Remark">Tranche
Remark</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Performance
Pricing_Remark">Performance
Pricing_Remark</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr class="gt_group_heading_row">
      <th colspan="20" class="gt_group_heading" scope="colgroup" id="Deal: 128721">Deal: 128721</th>
    </tr>
    <tr class="gt_row_group_first"><td headers="Deal: 128721  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">224767</td>
<td headers="Deal: 128721  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 128721  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 128721  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 128721  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 128721  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 128721  Tranche
Refinancing" class="gt_row gt_right" style="font-size: 10px;"></td>
<td headers="Deal: 128721  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">2000-09-30</td>
<td headers="Deal: 128721  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">54</td>
<td headers="Deal: 128721  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">20</td>
<td headers="Deal: 128721  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">4</td>
<td headers="Deal: 128721  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1996-03-15</td>
<td headers="Deal: 128721  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">1998-09-09</td>
<td headers="Deal: 128721  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1996-03-15</td>
<td headers="Deal: 128721  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan</td>
<td headers="Deal: 128721  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose/Refinance</td>
<td headers="Deal: 128721  Purpose
Remark" class="gt_row gt_right" style="font-size: 10px;"></td>
<td headers="Deal: 128721  Deal
Remark" class="gt_row gt_left" style="font-size: 10px;">Background:  Credit amends and restates a $8M agreement dated 4/11/94.  Co. was formerly known as ARX Inc.  Credit is also arranged for a number of subsids and backs the acquisition of MIC Technology.  Pricing:  (See grid).</td>
<td headers="Deal: 128721  Tranche
Remark" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Deal: 128721  Performance
Pricing_Remark" class="gt_row gt_left" style="font-size: 10px;">Pricing is as indicated thru 6/30/96, tied to co.'s debt to EBITDA ratio thereafter.</td></tr>
    <tr><td headers="Deal: 128721  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">273100</td>
<td headers="Deal: 128721  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 128721  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 128721  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 128721  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 128721  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 128721  Tranche
Refinancing" class="gt_row gt_right" style="font-size: 10px;"></td>
<td headers="Deal: 128721  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">1999-03-31</td>
<td headers="Deal: 128721  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">36</td>
<td headers="Deal: 128721  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">20</td>
<td headers="Deal: 128721  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">16</td>
<td headers="Deal: 128721  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1996-03-15</td>
<td headers="Deal: 128721  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">1998-09-09</td>
<td headers="Deal: 128721  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1996-03-15</td>
<td headers="Deal: 128721  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal: 128721  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose/Refinance</td>
<td headers="Deal: 128721  Purpose
Remark" class="gt_row gt_right" style="font-size: 10px;"></td>
<td headers="Deal: 128721  Deal
Remark" class="gt_row gt_left" style="font-size: 10px;">Background:  Credit amends and restates a $8M agreement dated 4/11/94.  Co. was formerly known as ARX Inc.  Credit is also arranged for a number of subsids and backs the acquisition of MIC Technology.  Pricing:  (See grid).</td>
<td headers="Deal: 128721  Tranche
Remark" class="gt_row gt_left" style="font-size: 10px;">Option:  $2M LC sublimit.  Security:  Borrow. base = 80% of elig. receivs. plus 40% of elig. invent.</td>
<td headers="Deal: 128721  Performance
Pricing_Remark" class="gt_row gt_left" style="font-size: 10px;">Pricing is as indicated thru 6/30/96, tied to co.'s debt to EBITDA ratio thereafter.</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>You can see the ample information covered in the <code>Deal_Remark</code> and <code>Tranche_Remark</code> section.</p>
<p>To connect to loan contracts preceding these ones, I recovered the loans originated under the same entity but under a different name. These are loans from ARX Inc.&nbsp;(<code>Borrower_Id = 31224</code>):</p>
<div class="cell page-columns page-full">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>DealScan_borrower <span class="sc">%&gt;%</span> </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Borrower_Id <span class="sc">==</span> <span class="dv">31224</span>) <span class="sc">%&gt;%</span> <span class="do">## now is the DealScan_ARX </span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">names</span>(dt.Deal_Amend_Refin), Deal_Input_Date, Tranche_Type, Deal_Purpose, </span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>         <span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">"Remark"</span>, <span class="at">x =</span> <span class="fu">names</span>(.), <span class="at">value =</span> T)</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span> </span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Tranche_O_A_round =</span> <span class="fu">replace_na</span>(<span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(<span class="at">string =</span> Tranche_O_A, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">d+$"</span>)) , <span class="at">replace =</span> <span class="dv">0</span> ), </span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">LPC_Deal_ID =</span> <span class="fu">paste</span>(<span class="st">"Deal: "</span>, LPC_Deal_ID, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span> </span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(LPC_Deal_ID, LPC_Tranche_ID) <span class="sc">%&gt;%</span> </span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Deal_Active_Date) <span class="sc">%&gt;%</span> </span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># check whether there exists tranche amendment in the dataset </span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Amend_Flag_check =</span> <span class="fu">max</span>(Tranche_O_A_round) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span> <span class="fu">str_replace</span>(<span class="at">string =</span> .x, <span class="at">pattern =</span> <span class="st">"_"</span>, <span class="at">replacement =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">id =</span> <span class="st">'table_id'</span>, <span class="at">groupname_col =</span> <span class="st">"LPC</span><span class="sc">\n</span><span class="st">Deal_ID"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># cols_label(fn = ~ str_replace(string = ., pattern = "_", replacement = "\n") ) %&gt;% </span></span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Table 1. Panel D: ARX Inc. Deal-Tranche Level Loan Path"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(<span class="at">table.font.size =</span> <span class="dv">10</span>, <span class="at">heading.align =</span> <span class="st">'left'</span> ) <span class="sc">%&gt;%</span> </span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>( <span class="co"># update the font size for table cells. </span></span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">size =</span> <span class="fu">px</span>(<span class="dv">10</span>)),</span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()</span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb49-25"><a href="#cb49-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">style =</span> <span class="st">"italic"</span>, <span class="at">color =</span> <span class="st">'red'</span>), </span>
<span id="cb49-26"><a href="#cb49-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(</span>
<span id="cb49-27"><a href="#cb49-27" aria-hidden="true" tabindex="-1"></a>      <span class="at">columns =</span> <span class="st">"LPC</span><span class="sc">\n</span><span class="st">Tranche_ID"</span>, </span>
<span id="cb49-28"><a href="#cb49-28" aria-hidden="true" tabindex="-1"></a>      <span class="at">rows =</span>  <span class="st">`</span><span class="at">Amend</span><span class="sc">\n</span><span class="at">Flag_check</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="dv">0</span></span>
<span id="cb49-29"><a href="#cb49-29" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb49-30"><a href="#cb49-30" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb49-31"><a href="#cb49-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_width</span>(<span class="fu">ends_with</span>(<span class="st">"Remark"</span>) <span class="sc">~</span> <span class="fu">px</span>(<span class="dv">800</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb49-32"><a href="#cb49-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_hide</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"Tranche</span><span class="sc">\n</span><span class="st">O_A_round"</span>, <span class="st">"Amend</span><span class="sc">\n</span><span class="st">Flag_check"</span>) ) <span class="co"># hide columns </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display column-screen-inset">

<div id="table_id" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#table_id table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#table_id thead, #table_id tbody, #table_id tfoot, #table_id tr, #table_id td, #table_id th {
  border-style: none;
}

#table_id p {
  margin: 0;
  padding: 0;
}

#table_id .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 10px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#table_id .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#table_id .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#table_id .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#table_id .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#table_id .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#table_id .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#table_id .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#table_id .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#table_id .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#table_id .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#table_id .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#table_id .gt_spanner_row {
  border-bottom-style: hidden;
}

#table_id .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#table_id .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#table_id .gt_from_md > :first-child {
  margin-top: 0;
}

#table_id .gt_from_md > :last-child {
  margin-bottom: 0;
}

#table_id .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#table_id .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#table_id .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#table_id .gt_row_group_first td {
  border-top-width: 2px;
}

#table_id .gt_row_group_first th {
  border-top-width: 2px;
}

#table_id .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#table_id .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#table_id .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#table_id .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#table_id .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#table_id .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#table_id .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#table_id .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#table_id .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#table_id .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#table_id .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#table_id .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#table_id .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#table_id .gt_left {
  text-align: left;
}

#table_id .gt_center {
  text-align: center;
}

#table_id .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#table_id .gt_font_normal {
  font-weight: normal;
}

#table_id .gt_font_bold {
  font-weight: bold;
}

#table_id .gt_font_italic {
  font-style: italic;
}

#table_id .gt_super {
  font-size: 65%;
}

#table_id .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#table_id .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#table_id .gt_indent_1 {
  text-indent: 5px;
}

#table_id .gt_indent_2 {
  text-indent: 10px;
}

#table_id .gt_indent_3 {
  text-indent: 15px;
}

#table_id .gt_indent_4 {
  text-indent: 20px;
}

#table_id .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" style="table-layout: fixed;" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <colgroup>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col>
    <col style="width:800px;">
    <col style="width:800px;">
    <col style="width:800px;">
    <col style="width:800px;">
  </colgroup>
  <thead>
    <tr class="gt_heading">
      <td colspan="20" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">Table 1. Panel D: ARX Inc. Deal-Tranche Level Loan Path</td>
    </tr>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="LPC
Tranche_ID">LPC
Tranche_ID</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Deal
Amended">Deal
Amended</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Amend
Extend_Flag">Amend
Extend_Flag</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Tranche
Amended">Tranche
Amended</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Deal
Refinancing">Deal
Refinancing</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Tranche
O_A">Tranche
O_A</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Tranche
Refinancing">Tranche
Refinancing</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Tranche
Maturity_Date">Tranche
Maturity_Date</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Tenor
Maturity">Tenor
Maturity</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Deal
Amount">Deal
Amount</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Tranche
Amount">Tranche
Amount</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Deal
Active_Date">Deal
Active_Date</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Deal
Input_Date">Deal
Input_Date</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Tranche
Active_Date">Tranche
Active_Date</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Tranche
Type">Tranche
Type</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Deal
Purpose">Deal
Purpose</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Purpose
Remark">Purpose
Remark</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Deal
Remark">Deal
Remark</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Tranche
Remark">Tranche
Remark</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Performance
Pricing_Remark">Performance
Pricing_Remark</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr class="gt_group_heading_row">
      <th colspan="20" class="gt_group_heading" scope="colgroup" id="Deal: 91747">Deal: 91747</th>
    </tr>
    <tr class="gt_row_group_first"><td headers="Deal: 91747  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">171206</td>
<td headers="Deal: 91747  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 91747  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 91747  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 91747  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">Yes</td>
<td headers="Deal: 91747  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 91747  Tranche
Refinancing" class="gt_row gt_right" style="font-size: 10px;"></td>
<td headers="Deal: 91747  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">1996-03-31</td>
<td headers="Deal: 91747  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">83</td>
<td headers="Deal: 91747  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">40.0</td>
<td headers="Deal: 91747  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">40.0</td>
<td headers="Deal: 91747  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1989-04-24</td>
<td headers="Deal: 91747  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">1989-11-02</td>
<td headers="Deal: 91747  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1989-04-24</td>
<td headers="Deal: 91747  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Term Loan</td>
<td headers="Deal: 91747  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">General Purpose/Refinance</td>
<td headers="Deal: 91747  Purpose
Remark" class="gt_row gt_right" style="font-size: 10px;"></td>
<td headers="Deal: 91747  Deal
Remark" class="gt_row gt_left" style="font-size: 10px;">Commit. was reduced from $50M and pricing increased from P, LIB+75 in an amendment dated11/27/90.  The credit reduces further to $33.5M.</td>
<td headers="Deal: 91747  Tranche
Remark" class="gt_row gt_left" style="font-size: 10px;">Indicated LIB pricing is for interest periods of less than 6 mos., LIB+250 for interest periods &gt; 6 mos. Key Financial Ratios: min. current ratio of 3:1; min. quick ratio of 1.5:1; min. interest coverage ratio of 1.5:1. Credit converts to a 4-yr. term loan.</td>
<td headers="Deal: 91747  Performance
Pricing_Remark" class="gt_row gt_left" style="font-size: 10px;"></td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="20" class="gt_group_heading" scope="colgroup" id="Deal: 78408">Deal: 78408</th>
    </tr>
    <tr class="gt_row_group_first"><td headers="Deal: 78408  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">141738</td>
<td headers="Deal: 78408  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 78408  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 78408  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 78408  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 78408  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 78408  Tranche
Refinancing" class="gt_row gt_right" style="font-size: 10px;"></td>
<td headers="Deal: 78408  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">1994-07-31</td>
<td headers="Deal: 78408  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">33</td>
<td headers="Deal: 78408  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">38.5</td>
<td headers="Deal: 78408  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">23.5</td>
<td headers="Deal: 78408  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1991-10-10</td>
<td headers="Deal: 78408  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">1991-10-23</td>
<td headers="Deal: 78408  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1991-10-10</td>
<td headers="Deal: 78408  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal: 78408  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Working capital</td>
<td headers="Deal: 78408  Purpose
Remark" class="gt_row gt_right" style="font-size: 10px;"></td>
<td headers="Deal: 78408  Deal
Remark" class="gt_row gt_left" style="font-size: 10px;">Credit is also for several of the co.'s affiliates.  Credit amends and restates a prior agreement.  Revolver commit. was reduced from $38.5M and $15M of outstands. were converted to term loans.  Overdue pricing is P+300.  Credit is prepaid with 100% of the net proceeds of any lease or disposition of assets &gt; $250K, 25% used to reduce the revolver and 75% to reduce the term loan to $6M.  Credit is prepaid with 75% of securities sales.  Agent collects unspecified fees.  Indicated upfr. fee is a restructuring fee.  Banks may make assigns.  Elig. assignees:  banks having total assets &gt; or = $1B, and S&amp;Ls and financial institutions with total assets &gt; or = $500M.  Assign. min.:  $5M.  Key Financial Ratios:  max. total consol. liab. to tang. net worth ratio decreasing from 4.45:1 thru 9/30/91 to 2.6:1 after 6/29/94; min. consol. operating income to gross interest expense ratio of 1:1 thru 6/30/93, 1.5:1 thereafter.</td>
<td headers="Deal: 78408  Tranche
Remark" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Deal: 78408  Performance
Pricing_Remark" class="gt_row gt_left" style="font-size: 10px;"></td></tr>
    <tr><td headers="Deal: 78408  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">245103</td>
<td headers="Deal: 78408  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 78408  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 78408  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 78408  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 78408  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 78408  Tranche
Refinancing" class="gt_row gt_right" style="font-size: 10px;"></td>
<td headers="Deal: 78408  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">1994-07-31</td>
<td headers="Deal: 78408  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">33</td>
<td headers="Deal: 78408  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">38.5</td>
<td headers="Deal: 78408  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">15.0</td>
<td headers="Deal: 78408  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1991-10-10</td>
<td headers="Deal: 78408  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">1991-10-23</td>
<td headers="Deal: 78408  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1991-10-10</td>
<td headers="Deal: 78408  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan</td>
<td headers="Deal: 78408  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Working capital</td>
<td headers="Deal: 78408  Purpose
Remark" class="gt_row gt_right" style="font-size: 10px;"></td>
<td headers="Deal: 78408  Deal
Remark" class="gt_row gt_left" style="font-size: 10px;">Credit is also for several of the co.'s affiliates.  Credit amends and restates a prior agreement.  Revolver commit. was reduced from $38.5M and $15M of outstands. were converted to term loans.  Overdue pricing is P+300.  Credit is prepaid with 100% of the net proceeds of any lease or disposition of assets &gt; $250K, 25% used to reduce the revolver and 75% to reduce the term loan to $6M.  Credit is prepaid with 75% of securities sales.  Agent collects unspecified fees.  Indicated upfr. fee is a restructuring fee.  Banks may make assigns.  Elig. assignees:  banks having total assets &gt; or = $1B, and S&amp;Ls and financial institutions with total assets &gt; or = $500M.  Assign. min.:  $5M.  Key Financial Ratios:  max. total consol. liab. to tang. net worth ratio decreasing from 4.45:1 thru 9/30/91 to 2.6:1 after 6/29/94; min. consol. operating income to gross interest expense ratio of 1:1 thru 6/30/93, 1.5:1 thereafter.</td>
<td headers="Deal: 78408  Tranche
Remark" class="gt_row gt_left" style="font-size: 10px;">Credit is repaid in qtrly. installs. of $500K ea. beg. 9/30/91 to reduce the term loan to $6M; thereafter, installs. will be used to reduce revolver, with the excess again used to reduce the term loan.</td>
<td headers="Deal: 78408  Performance
Pricing_Remark" class="gt_row gt_left" style="font-size: 10px;"></td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="20" class="gt_group_heading" scope="colgroup" id="Deal: 53953">Deal: 53953</th>
    </tr>
    <tr class="gt_row_group_first"><td headers="Deal: 53953  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">105809</td>
<td headers="Deal: 53953  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 53953  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 53953  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 53953  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 53953  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 53953  Tranche
Refinancing" class="gt_row gt_right" style="font-size: 10px;"></td>
<td headers="Deal: 53953  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">1997-03-31</td>
<td headers="Deal: 53953  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">35</td>
<td headers="Deal: 53953  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">20.0</td>
<td headers="Deal: 53953  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">16.0</td>
<td headers="Deal: 53953  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1994-04-11</td>
<td headers="Deal: 53953  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">1994-10-12</td>
<td headers="Deal: 53953  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1994-04-11</td>
<td headers="Deal: 53953  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Revolver/Line &gt;= 1 Yr.</td>
<td headers="Deal: 53953  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Working capital</td>
<td headers="Deal: 53953  Purpose
Remark" class="gt_row gt_right" style="font-size: 10px;"></td>
<td headers="Deal: 53953  Deal
Remark" class="gt_row gt_left" style="font-size: 10px;">Background:  Credit amends and restates a $38.5M agreement dated 10/10/91 and is also arranged for various affiliates.  Pricing:  (See grid).  Overdue fee = 300 bps.  Prepayments:  Asset sales &gt; $100,000, 100%.  Assignments:  Banks consent required.  Assign. min. = $4M.  Key Financial Ratios:  Max. consol. effective leverage ratio decreasing from 1.5:1 to 1.4:1; min. consol. interest coverage ratio of 1.75:1; min. consol. debt service coverage ratio of 1.25:1.</td>
<td headers="Deal: 53953  Tranche
Remark" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Deal: 53953  Performance
Pricing_Remark" class="gt_row gt_left" style="font-size: 10px;">Pricing:  As indicated thru 6/30/94; tied to above grid thereafter.</td></tr>
    <tr><td headers="Deal: 53953  LPC
Tranche_ID" class="gt_row gt_right" style="font-size: 10px;">83591</td>
<td headers="Deal: 53953  Deal
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 53953  Amend
Extend_Flag" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 53953  Tranche
Amended" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 53953  Deal
Refinancing" class="gt_row gt_left" style="font-size: 10px;">No</td>
<td headers="Deal: 53953  Tranche
O_A" class="gt_row gt_left" style="font-size: 10px;">Origination</td>
<td headers="Deal: 53953  Tranche
Refinancing" class="gt_row gt_right" style="font-size: 10px;"></td>
<td headers="Deal: 53953  Tranche
Maturity_Date" class="gt_row gt_center" style="font-size: 10px;">1997-03-31</td>
<td headers="Deal: 53953  Tenor
Maturity" class="gt_row gt_right" style="font-size: 10px;">35</td>
<td headers="Deal: 53953  Deal
Amount" class="gt_row gt_right" style="font-size: 10px;">20.0</td>
<td headers="Deal: 53953  Tranche
Amount" class="gt_row gt_right" style="font-size: 10px;">4.0</td>
<td headers="Deal: 53953  Deal
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1994-04-11</td>
<td headers="Deal: 53953  Deal
Input_Date" class="gt_row gt_center" style="font-size: 10px;">1994-10-12</td>
<td headers="Deal: 53953  Tranche
Active_Date" class="gt_row gt_center" style="font-size: 10px;">1994-04-11</td>
<td headers="Deal: 53953  Tranche
Type" class="gt_row gt_left" style="font-size: 10px;">Term Loan</td>
<td headers="Deal: 53953  Deal
Purpose" class="gt_row gt_left" style="font-size: 10px;">Working capital</td>
<td headers="Deal: 53953  Purpose
Remark" class="gt_row gt_right" style="font-size: 10px;"></td>
<td headers="Deal: 53953  Deal
Remark" class="gt_row gt_left" style="font-size: 10px;">Background:  Credit amends and restates a $38.5M agreement dated 10/10/91 and is also arranged for various affiliates.  Pricing:  (See grid).  Overdue fee = 300 bps.  Prepayments:  Asset sales &gt; $100,000, 100%.  Assignments:  Banks consent required.  Assign. min. = $4M.  Key Financial Ratios:  Max. consol. effective leverage ratio decreasing from 1.5:1 to 1.4:1; min. consol. interest coverage ratio of 1.75:1; min. consol. debt service coverage ratio of 1.25:1.</td>
<td headers="Deal: 53953  Tranche
Remark" class="gt_row gt_left" style="font-size: 10px;"></td>
<td headers="Deal: 53953  Performance
Pricing_Remark" class="gt_row gt_left" style="font-size: 10px;">Pricing:  As indicated thru 6/30/94; tied to above grid thereafter.</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>Although this is far from perfect in recording the life-cycle of the loan, it is not as sparse as I thought previously. Also, the frequency of renegotiation needs to be recalculated, with around 25% of the “Origination”s to be reclassified as “Amend/Restate”.</p>

<div class="no-row-height column-margin column-container"><div id="tip-loan-path" class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
The correct way to recover loan path for a unique firm!
</div>
</div>
<div class="callout-body-container callout-body">
<p>A thorough look into the DealScan dataset shows that the issue of incomplete loan path presented in Roberts (2015) may not be as severe as what he suggested. The huge amount of missing observations comes from the ignoring that the company has a different name, and so a different <code>Borrower_Id</code>, in the dataset. The Aeroflex Inc.&nbsp;is previously known as ARX Inc.&nbsp;(<code>gvkey</code> = 1056).</p>
<p>We can recover past observations from <code>Borrower_Id = 31224</code> (rather than <code>8532</code>). However, in order to recover the exact loan path and connects the evolution of each tranche under the same deal, we need to use variable <code>Deal_Remark</code> and extract textual information and match previous deals.</p>
</div>
</div></div><p>However, this should not be an issue for my project.</p>
<ol type="1">
<li><p>First, my focus is on the firm-level observations and the dependent variable in the first step is whether a renegotiation happens.</p></li>
<li><p>Second, to identify an amendment/restatement/refinancing, I should use the <code>Deal_Refinancing</code> rather than the <code>Origination</code> variable. While the majority (60%) of tranche observations classified as <code>Origination</code> has “No” for all other identifiers, around 25% of tranche observations in those has “Yes” for <code>Deal_Refinancing</code>. This is exactly the case we saw in the example above. &gt; updated <span class="citation" data-cites="tip-loan-path">@tip-loan-path</span></p></li>
</ol>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># to identify different types of contracts which are defined as "Origination". </span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>DealScan_borrower <span class="sc">%&gt;%</span> </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="at">pattern =</span> <span class="st">"Orig"</span>, <span class="at">x =</span> Tranche_O_A)) <span class="sc">%&gt;%</span> <span class="co"># only keep tranches classified as "Origination"</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Deal_Amended, Tranche_Amended, Deal_Refinancing, Tranche_Refinancing) <span class="sc">%&gt;%</span> </span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="co"># count the number of each types </span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percentage =</span> (n <span class="sc">/</span> <span class="fu">sum</span>(n))) <span class="sc">%&gt;%</span> </span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Table 2: WRDS DealScan Deal-Tranche Level Loan Events"</span>, </span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">subtitle =</span> <span class="st">"Subgroup: `Tranche_O_A` = Origination"</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">%&gt;%</span> </span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(<span class="at">table.font.size =</span> <span class="dv">11</span>, <span class="at">heading.align =</span> <span class="st">'left'</span> ) <span class="sc">%&gt;%</span> </span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>( <span class="co"># update the font size for table cells. </span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">size =</span> <span class="fu">px</span>(<span class="dv">11</span>)),</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(<span class="at">columns =</span> percentage, <span class="at">decimals =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="pyuufvriyn" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#pyuufvriyn table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#pyuufvriyn thead, #pyuufvriyn tbody, #pyuufvriyn tfoot, #pyuufvriyn tr, #pyuufvriyn td, #pyuufvriyn th {
  border-style: none;
}

#pyuufvriyn p {
  margin: 0;
  padding: 0;
}

#pyuufvriyn .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 11px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#pyuufvriyn .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#pyuufvriyn .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#pyuufvriyn .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#pyuufvriyn .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pyuufvriyn .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pyuufvriyn .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pyuufvriyn .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#pyuufvriyn .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#pyuufvriyn .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#pyuufvriyn .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#pyuufvriyn .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#pyuufvriyn .gt_spanner_row {
  border-bottom-style: hidden;
}

#pyuufvriyn .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#pyuufvriyn .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#pyuufvriyn .gt_from_md > :first-child {
  margin-top: 0;
}

#pyuufvriyn .gt_from_md > :last-child {
  margin-bottom: 0;
}

#pyuufvriyn .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#pyuufvriyn .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#pyuufvriyn .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#pyuufvriyn .gt_row_group_first td {
  border-top-width: 2px;
}

#pyuufvriyn .gt_row_group_first th {
  border-top-width: 2px;
}

#pyuufvriyn .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pyuufvriyn .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#pyuufvriyn .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#pyuufvriyn .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pyuufvriyn .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pyuufvriyn .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#pyuufvriyn .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#pyuufvriyn .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#pyuufvriyn .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pyuufvriyn .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pyuufvriyn .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pyuufvriyn .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pyuufvriyn .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pyuufvriyn .gt_left {
  text-align: left;
}

#pyuufvriyn .gt_center {
  text-align: center;
}

#pyuufvriyn .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#pyuufvriyn .gt_font_normal {
  font-weight: normal;
}

#pyuufvriyn .gt_font_bold {
  font-weight: bold;
}

#pyuufvriyn .gt_font_italic {
  font-style: italic;
}

#pyuufvriyn .gt_super {
  font-size: 65%;
}

#pyuufvriyn .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#pyuufvriyn .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#pyuufvriyn .gt_indent_1 {
  text-indent: 5px;
}

#pyuufvriyn .gt_indent_2 {
  text-indent: 10px;
}

#pyuufvriyn .gt_indent_3 {
  text-indent: 15px;
}

#pyuufvriyn .gt_indent_4 {
  text-indent: 20px;
}

#pyuufvriyn .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="6" class="gt_heading gt_title gt_font_normal" style="">Table 2: WRDS DealScan Deal-Tranche Level Loan Events</td>
    </tr>
    <tr class="gt_heading">
      <td colspan="6" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">Subgroup: `Tranche_O_A` = Origination</td>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Deal_Amended">Deal_Amended</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Tranche_Amended">Tranche_Amended</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Deal_Refinancing">Deal_Refinancing</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Tranche_Refinancing">Tranche_Refinancing</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="percentage">percentage</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;"></td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">240423</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">62.95%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">2573</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">0.67%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">2079</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">0.54%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;"></td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">68556</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">17.95%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">72</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">0.02%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">27318</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">7.15%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;"></td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">568</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">0.15%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">11</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">0.00%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">3</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">0.00%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;"></td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">450</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">0.12%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">82</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">0.02%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;"></td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">19375</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">5.07%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">544</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">0.14%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">233</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">0.06%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;"></td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">15319</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">4.01%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">28</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">0.01%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">4304</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">1.13%</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># to identify different types of contracts which are defined as "Amendment 1". </span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>DealScan_borrower <span class="sc">%&gt;%</span> </span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="at">pattern =</span> <span class="st">"Amendment"</span>, <span class="at">x =</span> Tranche_O_A)) <span class="sc">%&gt;%</span> <span class="co"># only keep tranches classified as "Origination"</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Deal_Amended, Tranche_Amended, Deal_Refinancing, Tranche_Refinancing) <span class="sc">%&gt;%</span> </span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="co"># count the number of each types </span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percentage =</span> (n <span class="sc">/</span> <span class="fu">sum</span>(n))) <span class="sc">%&gt;%</span> </span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Table 2b: WRDS DealScan Deal-Tranche Level Loan Events"</span>, </span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">subtitle =</span> <span class="st">"Subgroup: `Tranche_O_A` = Amendment(s)"</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">%&gt;%</span> </span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(<span class="at">table.font.size =</span> <span class="dv">11</span>, <span class="at">heading.align =</span> <span class="st">'left'</span> ) <span class="sc">%&gt;%</span> </span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>( <span class="co"># update the font size for table cells. </span></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">size =</span> <span class="fu">px</span>(<span class="dv">11</span>)),</span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()</span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(<span class="at">columns =</span> percentage, <span class="at">decimals =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="xzetcvlxjk" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#xzetcvlxjk table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#xzetcvlxjk thead, #xzetcvlxjk tbody, #xzetcvlxjk tfoot, #xzetcvlxjk tr, #xzetcvlxjk td, #xzetcvlxjk th {
  border-style: none;
}

#xzetcvlxjk p {
  margin: 0;
  padding: 0;
}

#xzetcvlxjk .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 11px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xzetcvlxjk .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#xzetcvlxjk .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xzetcvlxjk .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xzetcvlxjk .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xzetcvlxjk .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xzetcvlxjk .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xzetcvlxjk .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xzetcvlxjk .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xzetcvlxjk .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xzetcvlxjk .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xzetcvlxjk .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xzetcvlxjk .gt_spanner_row {
  border-bottom-style: hidden;
}

#xzetcvlxjk .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#xzetcvlxjk .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xzetcvlxjk .gt_from_md > :first-child {
  margin-top: 0;
}

#xzetcvlxjk .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xzetcvlxjk .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xzetcvlxjk .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xzetcvlxjk .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xzetcvlxjk .gt_row_group_first td {
  border-top-width: 2px;
}

#xzetcvlxjk .gt_row_group_first th {
  border-top-width: 2px;
}

#xzetcvlxjk .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xzetcvlxjk .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xzetcvlxjk .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xzetcvlxjk .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xzetcvlxjk .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xzetcvlxjk .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xzetcvlxjk .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#xzetcvlxjk .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xzetcvlxjk .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xzetcvlxjk .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xzetcvlxjk .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xzetcvlxjk .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xzetcvlxjk .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xzetcvlxjk .gt_left {
  text-align: left;
}

#xzetcvlxjk .gt_center {
  text-align: center;
}

#xzetcvlxjk .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xzetcvlxjk .gt_font_normal {
  font-weight: normal;
}

#xzetcvlxjk .gt_font_bold {
  font-weight: bold;
}

#xzetcvlxjk .gt_font_italic {
  font-style: italic;
}

#xzetcvlxjk .gt_super {
  font-size: 65%;
}

#xzetcvlxjk .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#xzetcvlxjk .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xzetcvlxjk .gt_indent_1 {
  text-indent: 5px;
}

#xzetcvlxjk .gt_indent_2 {
  text-indent: 10px;
}

#xzetcvlxjk .gt_indent_3 {
  text-indent: 15px;
}

#xzetcvlxjk .gt_indent_4 {
  text-indent: 20px;
}

#xzetcvlxjk .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="6" class="gt_heading gt_title gt_font_normal" style="">Table 2b: WRDS DealScan Deal-Tranche Level Loan Events</td>
    </tr>
    <tr class="gt_heading">
      <td colspan="6" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">Subgroup: `Tranche_O_A` = Amendment(s)</td>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Deal_Amended">Deal_Amended</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Tranche_Amended">Tranche_Amended</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Deal_Refinancing">Deal_Refinancing</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Tranche_Refinancing">Tranche_Refinancing</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="percentage">percentage</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;"></td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;"></td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">4173</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">3.47%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;"></td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">24</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">0.02%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;"></td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">47</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">0.04%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;"></td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;"></td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">2507</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">2.09%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;"></td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">3</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">0.00%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;"></td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">826</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">0.69%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;"></td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">34180</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">28.44%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">911</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">0.76%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">2247</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">1.87%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;"></td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">52319</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">43.53%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;">No</td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">652</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">0.54%</td></tr>
    <tr><td headers="Deal_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Amended" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Deal_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="Tranche_Refinancing" class="gt_row gt_left" style="font-size: 11px;">Yes</td>
<td headers="n" class="gt_row gt_right" style="font-size: 11px;">22294</td>
<td headers="percentage" class="gt_row gt_right" style="font-size: 11px;">18.55%</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Third, I won’t expect that renegotiations happen extremely frequency, not at each month. Thus, if some terms are changed, e.g.&nbsp;spreads and deal/tranche amounts, I can validate these changes from the balance sheet.</li>
</ol>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>dt.DealScan_Aeroflex <span class="ot">&lt;-</span> DealScan_Aeroflex <span class="sc">%&gt;%</span> </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="fu">names</span>(dt.Deal_Amend_Refin), Deal_Input_Date, Tranche_Type, Deal_Purpose) <span class="sc">%&gt;%</span> </span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Tranche_O_A_round =</span> <span class="fu">replace_na</span>(<span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(<span class="at">string =</span> Tranche_O_A, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">d+$"</span>)) , <span class="at">replace =</span> <span class="dv">0</span> ), </span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">LPC_Deal_ID =</span> <span class="fu">paste</span>(<span class="st">"Deal: "</span>, LPC_Deal_ID, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(LPC_Deal_ID, LPC_Tranche_ID) <span class="sc">%&gt;%</span> </span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(Deal_Active_Date) <span class="sc">%&gt;%</span> </span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># check whether there exists tranche amendment in the dataset </span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Amend_Flag_check =</span> <span class="fu">max</span>(Tranche_O_A_round) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(LPC_Deal_ID, LPC_Tranche_ID, Deal_Refinancing, Tranche_Amount, Tranche_Active_Date, Tranche_Type)  </span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt.DealScan_Aeroflex, <span class="fu">aes</span>(<span class="at">x =</span> Tranche_Active_Date)) <span class="sc">+</span> </span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">fill =</span> LPC_Deal_ID)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="DealScan_Data_Renegotiation_files/figure-html/roberts_2015_B1_flowchat-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>DiagrammeR<span class="sc">::</span><span class="fu">grViz</span>(<span class="st">"digraph {</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="st">  graph [layout = dot, rankdir = TB]</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="st">  node [shape = rectangle]        </span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="st">  rec1 [label = 'Deal: 128721'] </span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="st">  rec2 [label = 'Deal: 143473']</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="st">  rec3 [label = 'Deal: 42818']</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="st">  rec4 [label = 'Deal: 151556']</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a><span class="st">  # edge definitions with the node IDs</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a><span class="st">  rec1 -&gt; rec2 -&gt; rec3 -&gt; rec4 </span></span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a><span class="st">  }"</span>,</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">height =</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-a657ef1e909ad4901599" style="width:100%;height:290px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-a657ef1e909ad4901599">{"x":{"diagram":"digraph {\n  graph [layout = dot, rankdir = TB]\n  \n  node [shape = rectangle]        \n  rec1 [label = \"Deal: 128721\"] \n  rec2 [label = \"Deal: 143473\"]\n  rec3 [label = \"Deal: 42818\"]\n  rec4 [label = \"Deal: 151556\"]\n  \n  # edge definitions with the node IDs\n  rec1 -> rec2 -> rec3 -> rec4 \n  \n  }","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="sec-to-do-list" class="level4">
<h4 class="anchored" data-anchor-id="sec-to-do-list">A List for the following tasks: June 7, 2024</h4>
<ul class="task-list">
<li><input type="checkbox">Use <code>Deal_Remark</code> to extract information about <code>Event</code> and <code>Network</code> information. The variable <code>Network</code> will be defined as the loan deal preceding the current one. These information can be extracted from <mark>Table 1. Panel D</mark>.</li>
<li><input type="checkbox">Re-generate the loan paths for each firm.</li>
</ul>
</section>
</section>
</section>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section">————————————————————————</h2>
<section id="s3.4-covenants-preview" class="level3">
<h3 class="anchored" data-anchor-id="s3.4-covenants-preview">s3.4 Covenants Preview</h3>
<p>Look into the type of covenants.</p>
</section>
<section id="s3.5-leverage-covenants" class="level3">
<h3 class="anchored" data-anchor-id="s3.5-leverage-covenants">s3.5 Leverage Covenants</h3>
<p>Look into the changes in covenants related to the leverage restrictions &amp;/ spread and fees.</p>
</section>
<section id="definitions" class="level3">
<h3 class="anchored" data-anchor-id="definitions">Definitions</h3>
</section>
</section>
<section id="sec-s4.-future-notes" class="level2">
<h2 class="anchored" data-anchor-id="sec-s4.-future-notes">S4. Future Notes</h2>
</section>
<section id="sec-reference" class="level2">
<h2 class="anchored" data-anchor-id="sec-reference">Reference</h2>
<ul>
<li>Roberts, M.R., 2015. The role of dynamic renegotiation and asymmetric information in financial contracting. Journal of Financial Economics 116, 61–81. https://doi.org/10.1016/j.jfineco.2014.11.013</li>
<li><a href="https://quarto.org/docs/output-formats/html-themes.html#dark-mode">HTML Themes</a>
<ul>
<li><a href="https://quarto.org/docs/authoring/callouts.html">Callout Blocks</a> &gt; e.g. <span class="citation" data-cites="imp-amend">@imp-amend</span></li>
<li><a href="https://quarto.org/docs/authoring/article-layout.html">Layout</a></li>
</ul></li>
<li><a href="https://gt.albert-rapp.de/styling#sec-theming"><code>gt()</code> Cell Style</a></li>
<li><a href="https://rich-iannone.github.io/DiagrammeR/"><code>DiagrammeR</code>: Network and Flowchat</a></li>
</ul>
</section>
<section id="to-do-list" class="level2">
<h2 class="anchored" data-anchor-id="to-do-list">To-do list:</h2>
<ul>
<li><a href="@sec-to-do-list">June 7, 2024</a></li>
</ul>
<!-- ## Notes  -->
<!-- color: <span style="color: red;"> text </span> // {style="color: red;"} -->
<!-- ## Quarto -->

<!-- Quarto enables you to weave together content and executable code into a finished document. To learn more about Quarto see <https://quarto.org>. -->
<!-- ## Running Code -->
<!-- When you click the **Render** button a document will be generated that includes both content and the output of embedded code. You can embed code like this: -->
<!-- ```{r} -->
<!-- 1 + 1 -->
<!-- ``` -->

<!-- You can add options to executable code like this -->
<!-- ```{r} -->
<!-- #| echo: false -->
<!-- 2 * 2 -->
<!-- ``` -->
<!-- The `echo: false` option disables the printing of code (only output is displayed). -->
<!-- -->

</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb54" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "DealScan Renegotiation Data"</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Hongyi Xu"</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> today </span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="co">    theme: flatly</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true </span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-summary: "Show the code"</span></span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a><span class="co">    html-math-method: katex</span></span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-location: left </span></span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a><span class="in">```{=html}</span></span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;style type="text/css"&gt;</span></span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a><span class="in">body, td {</span></span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a><span class="in">   font-size: 16px;</span></span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a><span class="in">code.r{</span></span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a><span class="in">  font-size: 12px;</span></span>
<span id="cb54-24"><a href="#cb54-24" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb54-25"><a href="#cb54-25" aria-hidden="true" tabindex="-1"></a><span class="in">pre {</span></span>
<span id="cb54-26"><a href="#cb54-26" aria-hidden="true" tabindex="-1"></a><span class="in">  font-size: 12px</span></span>
<span id="cb54-27"><a href="#cb54-27" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb54-28"><a href="#cb54-28" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/style&gt;</span></span>
<span id="cb54-29"><a href="#cb54-29" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-30"><a href="#cb54-30" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb54-31"><a href="#cb54-31" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>) </span>
<span id="cb54-32"><a href="#cb54-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-33"><a href="#cb54-33" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"~/Library/CloudStorage/OneDrive-HandelshögskolaniStockholm/Projects_2024/Dealscan_LinkTable/DealScan_Data_Renegotiations_Jun2024"</span>)</span>
<span id="cb54-34"><a href="#cb54-34" aria-hidden="true" tabindex="-1"></a><span class="fu">list.files</span>(<span class="at">pattern =</span> <span class="st">".csv"</span>)</span>
<span id="cb54-35"><a href="#cb54-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-36"><a href="#cb54-36" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb54-37"><a href="#cb54-37" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb54-38"><a href="#cb54-38" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb54-39"><a href="#cb54-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-40"><a href="#cb54-40" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb54-41"><a href="#cb54-41" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb54-42"><a href="#cb54-42" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shadowtext)</span>
<span id="cb54-43"><a href="#cb54-43" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(egg)</span>
<span id="cb54-44"><a href="#cb54-44" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb54-45"><a href="#cb54-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-46"><a href="#cb54-46" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(psych)</span>
<span id="cb54-47"><a href="#cb54-47" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(zoo)</span>
<span id="cb54-48"><a href="#cb54-48" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fedmatch)</span>
<span id="cb54-49"><a href="#cb54-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-50"><a href="#cb54-50" aria-hidden="true" tabindex="-1"></a><span class="co"># library(arrow)</span></span>
<span id="cb54-51"><a href="#cb54-51" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-52"><a href="#cb54-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-53"><a href="#cb54-53" aria-hidden="true" tabindex="-1"></a><span class="fu">## S1. Objective {#sec-s1.-objective}</span></span>
<span id="cb54-54"><a href="#cb54-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-55"><a href="#cb54-55" aria-hidden="true" tabindex="-1"></a>This file follows the creation of the link table update the end of 2023. <span class="co">[</span><span class="ot">The file</span><span class="co">](https://livehhsse-my.sharepoint.com/:f:/r/personal/65570_student_hhs_se/Documents/Projects_2024/Dealscan_LinkTable/DealScan_Link_Table_Compustat_Jun2024?csf=1&amp;web=1&amp;e=n68lWi)</span> is called <span class="co">[</span><span class="ot">Link_table_2024.RData</span><span class="co">](https://livehhsse-my.sharepoint.com/:u:/r/personal/65570_student_hhs_se/Documents/Projects_2024/Dealscan_LinkTable/DealScan_Link_Table_Compustat_Jun2024/Link_table_2024.RData?csf=1&amp;web=1&amp;e=PvzxRC)</span>. The manual document can be found in file "DealScan_Link_Table_Compustat.html".</span>
<span id="cb54-56"><a href="#cb54-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-57"><a href="#cb54-57" aria-hidden="true" tabindex="-1"></a>The purpose of this document is to document the flow of logic in identifying amendaments/renegotiations/refinancing of exiting syndicated loan contracts in the LPC DealScan data.</span>
<span id="cb54-58"><a href="#cb54-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-59"><a href="#cb54-59" aria-hidden="true" tabindex="-1"></a><span class="fu">## S2. Examples {#sec-s2.-examples}</span></span>
<span id="cb54-60"><a href="#cb54-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-61"><a href="#cb54-61" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">An updated manual</span><span class="co">](https://wrds-www.wharton.upenn.edu/pages/support/manuals-and-overviews/thomson-reuters/wrds-reuters-dealscan/wrds-overview-on-dealscan-loanconnector/#linking-with-other-databases)</span> about DealScan in WRDS. - <span class="kw">&lt;font</span> <span class="er">size</span><span class="ot">=</span><span class="st">"2"</span><span class="kw">&gt;</span>updated Nov 2021<span class="kw">&lt;/font&gt;</span></span>
<span id="cb54-62"><a href="#cb54-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-63"><a href="#cb54-63" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Example 1: *Starwood Hotels &amp; Resorts Worldwide* (Borrower_Id='9514')</span>
<span id="cb54-64"><a href="#cb54-64" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Apr 20, 2010: <span class="co">[</span><span class="ot">8-K for the new credit agreement</span><span class="co">](https://www.sec.gov/Archives/edgar/data/316206/000129993310001593/htm_37246.htm)</span></span>
<span id="cb54-65"><a href="#cb54-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-66"><a href="#cb54-66" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>November 30, 2012: <span class="co">[</span><span class="ot">8-K for the refinancing deal</span><span class="co">](https://www.sec.gov/Archives/edgar/data/316206/000119312512491462/d449323d8k.htm)</span></span>
<span id="cb54-67"><a href="#cb54-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-68"><a href="#cb54-68" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>The deal is identified as a "refinancing" deal because in the "Item 1.01 Entry into a Material Definitive Agreement", it says:</span>
<span id="cb54-69"><a href="#cb54-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-70"><a href="#cb54-70" aria-hidden="true" tabindex="-1"></a><span class="at">        &gt; ... The Credit Agreement is a \$1.75 billion revolving credit facility, which refinanced the existing \$1.50 billion Credit Agreement dated April 20, 2010, as amended (the "2010 Credit Facility"), that would have matured in November 2013.</span></span>
<span id="cb54-71"><a href="#cb54-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-72"><a href="#cb54-72" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Note that the firm is acquired by *Marriott International Inc* (Borrower_Id='18487') in 2016.</span>
<span id="cb54-73"><a href="#cb54-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-74"><a href="#cb54-74" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`LPC_Deal_ID`</span> and<span class="in">`LPC_Tranche_ID`</span> are kept even after refinancing.</span>
<span id="cb54-75"><a href="#cb54-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-76"><a href="#cb54-76" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>To track changes/amendments: <span class="in">`Deal_Amended`</span>, <span class="in">`Tranche_Amended`</span>, and <span class="in">`Tranche_O_A`</span>.</span>
<span id="cb54-77"><a href="#cb54-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-78"><a href="#cb54-78" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`Trance_O_A`</span>: *Origination*, *Amendment 1*, etc.</span>
<span id="cb54-79"><a href="#cb54-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-80"><a href="#cb54-80" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>To track refinancing: <span class="in">`Deal_Refinancing`</span> and <span class="in">`Tranche_Refinancing`</span>.</span>
<span id="cb54-81"><a href="#cb54-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-82"><a href="#cb54-82" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- Selected Variables: --&gt;</span></span>
<span id="cb54-83"><a href="#cb54-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-84"><a href="#cb54-84" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- LPC_Deal_ID, LPC_Tranche_ID, --&gt;</span></span>
<span id="cb54-85"><a href="#cb54-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-86"><a href="#cb54-86" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- Deal_Active, Deal_Active_Date, Deal_Amended, Deal_Refinancing, Deal_Amount, --&gt;</span></span>
<span id="cb54-87"><a href="#cb54-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-88"><a href="#cb54-88" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- Tranche_Amended, Tranche_O_A, Tranche_Active_Date, Tranche_Refinancing, Tranche_Amount --&gt;</span></span>
<span id="cb54-89"><a href="#cb54-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-90"><a href="#cb54-90" aria-hidden="true" tabindex="-1"></a><span class="fu">## S2. Data sources {#sec-s2.-data-sources}</span></span>
<span id="cb54-91"><a href="#cb54-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-92"><a href="#cb54-92" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">LPC DealScan</span><span class="co">]</span>{style="color: red;"} from WRDS.</span>
<span id="cb54-93"><a href="#cb54-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-94"><a href="#cb54-94" aria-hidden="true" tabindex="-1"></a><span class="fu">## S3. DealScan Data Preview {#sec-s3.-dealscan-data-preview}</span></span>
<span id="cb54-95"><a href="#cb54-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-96"><a href="#cb54-96" aria-hidden="true" tabindex="-1"></a><span class="fu">### s3.1 Deal Purposes {#sec-s3.1-deal-purposes}</span></span>
<span id="cb54-97"><a href="#cb54-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-98"><a href="#cb54-98" aria-hidden="true" tabindex="-1"></a><span class="in">```{r dealscan, echo=TRUE, results='hide', fig.width=10,fig.height=8}</span></span>
<span id="cb54-99"><a href="#cb54-99" aria-hidden="true" tabindex="-1"></a><span class="do">## build up and clean the dataset </span></span>
<span id="cb54-100"><a href="#cb54-100" aria-hidden="true" tabindex="-1"></a><span class="co"># DealScan &lt;- fread("hi0yvqzhxowsqnpf.csv") </span></span>
<span id="cb54-101"><a href="#cb54-101" aria-hidden="true" tabindex="-1"></a><span class="co"># save(DealScan, file = "DealScan.Rdata")</span></span>
<span id="cb54-102"><a href="#cb54-102" aria-hidden="true" tabindex="-1"></a><span class="co"># DealScan_borrower &lt;- DealScan %&gt;%</span></span>
<span id="cb54-103"><a href="#cb54-103" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(- grep(pattern = "Lend|Role", x = names(.), value = T) ) %&gt;% </span></span>
<span id="cb54-104"><a href="#cb54-104" aria-hidden="true" tabindex="-1"></a><span class="co">#   unique()</span></span>
<span id="cb54-105"><a href="#cb54-105" aria-hidden="true" tabindex="-1"></a><span class="co"># save(DealScan_borrower, file = "DealScan_borrower.Rdata")</span></span>
<span id="cb54-106"><a href="#cb54-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-107"><a href="#cb54-107" aria-hidden="true" tabindex="-1"></a><span class="co"># load("DealScan.Rdata") </span></span>
<span id="cb54-108"><a href="#cb54-108" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"DealScan_borrower.Rdata"</span>) <span class="co"># for data only with </span></span>
<span id="cb54-109"><a href="#cb54-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-110"><a href="#cb54-110" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(DealScan_borrower)</span>
<span id="cb54-111"><a href="#cb54-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-112"><a href="#cb54-112" aria-hidden="true" tabindex="-1"></a><span class="co"># ## Here is one example: </span></span>
<span id="cb54-113"><a href="#cb54-113" aria-hidden="true" tabindex="-1"></a><span class="co"># b_9514 &lt;- DealScan_borrower %&gt;% </span></span>
<span id="cb54-114"><a href="#cb54-114" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(Borrower_Id == 9514)</span></span>
<span id="cb54-115"><a href="#cb54-115" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb54-116"><a href="#cb54-116" aria-hidden="true" tabindex="-1"></a><span class="co"># b_9514 %&gt;% </span></span>
<span id="cb54-117"><a href="#cb54-117" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(LPC_Deal_ID, LPC_Tranche_ID, </span></span>
<span id="cb54-118"><a href="#cb54-118" aria-hidden="true" tabindex="-1"></a><span class="co">#          Deal_Active, Deal_Active_Date, Deal_Amended, Deal_Refinancing, Deal_Amount,</span></span>
<span id="cb54-119"><a href="#cb54-119" aria-hidden="true" tabindex="-1"></a><span class="co">#          Tranche_Amended, Tranche_O_A, Tranche_Active_Date, Tranche_Refinancing, Tranche_Amount) %&gt;% </span></span>
<span id="cb54-120"><a href="#cb54-120" aria-hidden="true" tabindex="-1"></a><span class="co">#   unique() %&gt;% </span></span>
<span id="cb54-121"><a href="#cb54-121" aria-hidden="true" tabindex="-1"></a><span class="co">#   arrange(Deal_Active_Date, Tranche_Active_Date) %&gt;% </span></span>
<span id="cb54-122"><a href="#cb54-122" aria-hidden="true" tabindex="-1"></a><span class="co">#   View("b_9514") </span></span>
<span id="cb54-123"><a href="#cb54-123" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb54-124"><a href="#cb54-124" aria-hidden="true" tabindex="-1"></a><span class="co"># DealScan_borrower %&gt;% </span></span>
<span id="cb54-125"><a href="#cb54-125" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(LPC_Tranche_ID == 52511)</span></span>
<span id="cb54-126"><a href="#cb54-126" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb54-127"><a href="#cb54-127" aria-hidden="true" tabindex="-1"></a><span class="co"># ## Summary stats for the deals: </span></span>
<span id="cb54-128"><a href="#cb54-128" aria-hidden="true" tabindex="-1"></a><span class="co"># Deal_summary &lt;- DealScan_borrower %&gt;% </span></span>
<span id="cb54-129"><a href="#cb54-129" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(LPC_Deal_ID, LPC_Tranche_ID) %&gt;% </span></span>
<span id="cb54-130"><a href="#cb54-130" aria-hidden="true" tabindex="-1"></a><span class="co">#   summarise(LPC_Tranche_Num = n(), </span></span>
<span id="cb54-131"><a href="#cb54-131" aria-hidden="true" tabindex="-1"></a><span class="co">#             Tranche_First = min(Tranche_Active_Date), </span></span>
<span id="cb54-132"><a href="#cb54-132" aria-hidden="true" tabindex="-1"></a><span class="co">#             Tranche_Last = max(Tranche_Active_Date),</span></span>
<span id="cb54-133"><a href="#cb54-133" aria-hidden="true" tabindex="-1"></a><span class="co">#             ) %&gt;% </span></span>
<span id="cb54-134"><a href="#cb54-134" aria-hidden="true" tabindex="-1"></a><span class="co">#   ungroup() </span></span>
<span id="cb54-135"><a href="#cb54-135" aria-hidden="true" tabindex="-1"></a><span class="co"># Deal_summary %&gt;% head(20)</span></span>
<span id="cb54-136"><a href="#cb54-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-137"><a href="#cb54-137" aria-hidden="true" tabindex="-1"></a><span class="do">### Look into the deal purpose. </span></span>
<span id="cb54-138"><a href="#cb54-138" aria-hidden="true" tabindex="-1"></a>dt.Deal_Purpose <span class="ot">&lt;-</span> DealScan_borrower <span class="sc">%&gt;%</span> </span>
<span id="cb54-139"><a href="#cb54-139" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">"Purpose"</span>, <span class="at">x =</span> <span class="fu">names</span>(.), <span class="at">value =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb54-140"><a href="#cb54-140" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-141"><a href="#cb54-141" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lapply</span>(<span class="at">X =</span> ., <span class="at">FUN =</span> <span class="cf">function</span>(x) <span class="fu">unique</span>(x)) <span class="sc">%&gt;%</span> </span>
<span id="cb54-142"><a href="#cb54-142" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.table</span>(.)</span>
<span id="cb54-143"><a href="#cb54-143" aria-hidden="true" tabindex="-1"></a>dt.Deal_Purpose<span class="sc">$</span>Deal_Purpose <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb54-144"><a href="#cb54-144" aria-hidden="true" tabindex="-1"></a><span class="do">### Look into the number of deals under each purpose</span></span>
<span id="cb54-145"><a href="#cb54-145" aria-hidden="true" tabindex="-1"></a>Deal_Purpose_Type <span class="ot">&lt;-</span> DealScan_borrower <span class="sc">%&gt;%</span> </span>
<span id="cb54-146"><a href="#cb54-146" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Deal_Purpose) <span class="sc">%&gt;%</span> </span>
<span id="cb54-147"><a href="#cb54-147" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Deal_Purpose_Type_Num =</span> <span class="fu">length</span>(<span class="fu">unique</span>(LPC_Deal_ID))) <span class="sc">%&gt;%</span> </span>
<span id="cb54-148"><a href="#cb54-148" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-149"><a href="#cb54-149" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>Deal_Purpose_Type_Num) <span class="sc">%&gt;%</span> </span>
<span id="cb54-150"><a href="#cb54-150" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Deal_Purpose =</span> <span class="fu">paste</span>(<span class="fu">format</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Deal_Purpose), <span class="at">width =</span> <span class="dv">2</span>), Deal_Purpose, <span class="at">sep =</span> <span class="st">"-"</span>), </span>
<span id="cb54-151"><a href="#cb54-151" aria-hidden="true" tabindex="-1"></a>         <span class="at">Deal_Purpose_Type_Prc =</span> Deal_Purpose_Type_Num <span class="sc">/</span> <span class="fu">sum</span>(Deal_Purpose_Type_Num)</span>
<span id="cb54-152"><a href="#cb54-152" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb54-153"><a href="#cb54-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-154"><a href="#cb54-154" aria-hidden="true" tabindex="-1"></a>plt.deal_purpose <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Deal_Purpose_Type) <span class="sc">+</span></span>
<span id="cb54-155"><a href="#cb54-155" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">reorder</span>(Deal_Purpose, Deal_Purpose_Type_Num), <span class="at">x =</span> <span class="fu">log10</span>(Deal_Purpose_Type_Num)), <span class="at">fill =</span> <span class="st">"#076fa2"</span>,</span>
<span id="cb54-156"><a href="#cb54-156" aria-hidden="true" tabindex="-1"></a>           <span class="at">width =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.9</span>)) <span class="sc">+</span> </span>
<span id="cb54-157"><a href="#cb54-157" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb54-158"><a href="#cb54-158" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">5.3</span>),</span>
<span id="cb54-159"><a href="#cb54-159" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">6</span>, <span class="at">by =</span> <span class="dv">1</span>), </span>
<span id="cb54-160"><a href="#cb54-160" aria-hidden="true" tabindex="-1"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="fl">0.01</span>, <span class="dv">0</span>), <span class="co"># The horizontal axis does not extend to either side</span></span>
<span id="cb54-161"><a href="#cb54-161" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="st">"top"</span>  <span class="co"># Labels are located on the top</span></span>
<span id="cb54-162"><a href="#cb54-162" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb54-163"><a href="#cb54-163" aria-hidden="true" tabindex="-1"></a>  <span class="co"># The vertical axis only extends upwards</span></span>
<span id="cb54-164"><a href="#cb54-164" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_discrete</span>(<span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>))) <span class="sc">+</span> </span>
<span id="cb54-165"><a href="#cb54-165" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb54-166"><a href="#cb54-166" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Set background color to white</span></span>
<span id="cb54-167"><a href="#cb54-167" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>),</span>
<span id="cb54-168"><a href="#cb54-168" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Set the color and the width of the grid lines for the horizontal axis</span></span>
<span id="cb54-169"><a href="#cb54-169" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major.x =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"#A8BAC4"</span>, <span class="at">linewidth =</span> <span class="fl">0.3</span>),</span>
<span id="cb54-170"><a href="#cb54-170" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove tick marks by setting their length to 0</span></span>
<span id="cb54-171"><a href="#cb54-171" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.length =</span> <span class="fu">unit</span>(<span class="dv">0</span>, <span class="st">"mm"</span>),</span>
<span id="cb54-172"><a href="#cb54-172" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove the title for both axes</span></span>
<span id="cb54-173"><a href="#cb54-173" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb54-174"><a href="#cb54-174" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Only left line of the vertical axis is painted in black</span></span>
<span id="cb54-175"><a href="#cb54-175" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line.y.left =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"black"</span>),</span>
<span id="cb54-176"><a href="#cb54-176" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove labels from the vertical axis</span></span>
<span id="cb54-177"><a href="#cb54-177" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb54-178"><a href="#cb54-178" aria-hidden="true" tabindex="-1"></a>    <span class="co"># But customize labels for the horizontal axis</span></span>
<span id="cb54-179"><a href="#cb54-179" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"Courier"</span>, <span class="at">size =</span> <span class="dv">10</span>) <span class="co"># "Econ Sans Cnd";  "Comic Sans MS"</span></span>
<span id="cb54-180"><a href="#cb54-180" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> <span class="fu">geom_shadowtext</span>(</span>
<span id="cb54-181"><a href="#cb54-181" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> <span class="fu">subset</span>(Deal_Purpose_Type, <span class="fu">log10</span>(Deal_Purpose_Type_Num) <span class="sc">&lt;</span> <span class="dv">3</span>),</span>
<span id="cb54-182"><a href="#cb54-182" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="fu">log10</span>(Deal_Purpose_Type_Num), <span class="at">y =</span> Deal_Purpose, <span class="at">label =</span> Deal_Purpose),</span>
<span id="cb54-183"><a href="#cb54-183" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>, </span>
<span id="cb54-184"><a href="#cb54-184" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb54-185"><a href="#cb54-185" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_x =</span> <span class="fl">0.1</span>,</span>
<span id="cb54-186"><a href="#cb54-186" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"#076fa2"</span>,</span>
<span id="cb54-187"><a href="#cb54-187" aria-hidden="true" tabindex="-1"></a>    <span class="at">bg.colour =</span> <span class="st">"white"</span>,</span>
<span id="cb54-188"><a href="#cb54-188" aria-hidden="true" tabindex="-1"></a>    <span class="at">bg.r =</span> <span class="fl">0.2</span>,</span>
<span id="cb54-189"><a href="#cb54-189" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Courier"</span>,</span>
<span id="cb54-190"><a href="#cb54-190" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span></span>
<span id="cb54-191"><a href="#cb54-191" aria-hidden="true" tabindex="-1"></a>  )  <span class="sc">+</span> <span class="fu">geom_text</span>(</span>
<span id="cb54-192"><a href="#cb54-192" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> Deal_Purpose_Type,</span>
<span id="cb54-193"><a href="#cb54-193" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="fu">log10</span>(Deal_Purpose_Type_Num), <span class="at">y =</span> Deal_Purpose, <span class="at">label =</span> <span class="fu">sapply</span>(<span class="at">X =</span> Deal_Purpose_Type_Prc<span class="sc">*</span><span class="dv">100</span>, <span class="at">FUN =</span> <span class="cf">function</span>(x) {<span class="fu">paste</span>(<span class="fu">ifelse</span>(<span class="fu">round</span>(x, <span class="at">digits =</span> <span class="dv">2</span>) <span class="sc">==</span> <span class="dv">0</span>, <span class="fu">round</span>(x, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(x, <span class="at">digits =</span> <span class="dv">2</span>)), <span class="st">"%"</span> , <span class="at">sep =</span> <span class="st">""</span>)}) ), </span>
<span id="cb54-194"><a href="#cb54-194" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>, </span>
<span id="cb54-195"><a href="#cb54-195" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb54-196"><a href="#cb54-196" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_x =</span> <span class="sc">-</span><span class="fl">0.3</span>,</span>
<span id="cb54-197"><a href="#cb54-197" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"white"</span>,</span>
<span id="cb54-198"><a href="#cb54-198" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Courier"</span>,</span>
<span id="cb54-199"><a href="#cb54-199" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span></span>
<span id="cb54-200"><a href="#cb54-200" aria-hidden="true" tabindex="-1"></a>  )  <span class="sc">+</span> </span>
<span id="cb54-201"><a href="#cb54-201" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb54-202"><a href="#cb54-202" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> <span class="fu">subset</span>(Deal_Purpose_Type, <span class="fu">log10</span>(Deal_Purpose_Type_Num) <span class="sc">&gt;=</span> <span class="dv">3</span>), </span>
<span id="cb54-203"><a href="#cb54-203" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="dv">0</span>, <span class="at">y =</span> Deal_Purpose, <span class="at">label =</span> Deal_Purpose),  <span class="co"># paste("&lt;b&gt;", Deal_Purpose, "&lt;/b&gt;", sep = "")), </span></span>
<span id="cb54-204"><a href="#cb54-204" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>, </span>
<span id="cb54-205"><a href="#cb54-205" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb54-206"><a href="#cb54-206" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_x =</span> <span class="fl">0.3</span>,</span>
<span id="cb54-207"><a href="#cb54-207" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"white"</span>,</span>
<span id="cb54-208"><a href="#cb54-208" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Courier"</span>,</span>
<span id="cb54-209"><a href="#cb54-209" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span></span>
<span id="cb54-210"><a href="#cb54-210" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb54-211"><a href="#cb54-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-212"><a href="#cb54-212" aria-hidden="true" tabindex="-1"></a>plt.deal_purpose <span class="sc">+</span> <span class="fu">labs</span>(</span>
<span id="cb54-213"><a href="#cb54-213" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"Deal Purpose: activated between"</span>, <span class="fu">paste</span>(<span class="fu">range</span>(DealScan_borrower<span class="sc">$</span>Tranche_Active_Date), <span class="at">collapse =</span> <span class="st">" and "</span>)),</span>
<span id="cb54-214"><a href="#cb54-214" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Number of Deals for Each Deal Purpose (from WRDS DealScan)"</span></span>
<span id="cb54-215"><a href="#cb54-215" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb54-216"><a href="#cb54-216" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb54-217"><a href="#cb54-217" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb54-218"><a href="#cb54-218" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">"Comic Sans MS"</span>, </span>
<span id="cb54-219"><a href="#cb54-219" aria-hidden="true" tabindex="-1"></a>      <span class="at">face =</span> <span class="st">"bold"</span>,</span>
<span id="cb54-220"><a href="#cb54-220" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">15</span></span>
<span id="cb54-221"><a href="#cb54-221" aria-hidden="true" tabindex="-1"></a>    ), </span>
<span id="cb54-222"><a href="#cb54-222" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(</span>
<span id="cb54-223"><a href="#cb54-223" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">"Comic Sans MS"</span>,</span>
<span id="cb54-224"><a href="#cb54-224" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">10</span></span>
<span id="cb54-225"><a href="#cb54-225" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb54-226"><a href="#cb54-226" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb54-227"><a href="#cb54-227" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(</span>
<span id="cb54-228"><a href="#cb54-228" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"text"</span>, </span>
<span id="cb54-229"><a href="#cb54-229" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Sample Size: "</span>, <span class="fu">format</span>(<span class="fu">sum</span>(Deal_Purpose_Type<span class="sc">$</span>Deal_Purpose_Type_Num), <span class="at">big.mark =</span> <span class="st">","</span>), <span class="at">sep =</span> <span class="st">""</span>), <span class="co"># , "\n updated: ", date()</span></span>
<span id="cb54-230"><a href="#cb54-230" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fl">4.5</span>, <span class="at">y =</span> <span class="dv">2</span>, </span>
<span id="cb54-231"><a href="#cb54-231" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"#076fa2"</span>, </span>
<span id="cb54-232"><a href="#cb54-232" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Courier"</span>,</span>
<span id="cb54-233"><a href="#cb54-233" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">2.5</span></span>
<span id="cb54-234"><a href="#cb54-234" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb54-235"><a href="#cb54-235" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-236"><a href="#cb54-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-237"><a href="#cb54-237" aria-hidden="true" tabindex="-1"></a>In the above codes, I first use <span class="in">`LPC_Deal_ID`</span> to identify each unique deal and then group by variable <span class="in">`Deal_Purpose`</span> to calculate the number of deals for each purpose. I store the number of deals for each purpose in the dataset <span class="in">`Deal_Purpose_Type`</span> and the above plot. The total number of deal observations is 261007.</span>
<span id="cb54-238"><a href="#cb54-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-239"><a href="#cb54-239" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>The most frequent purpose is named under the <span class="in">`General Purpose`</span> and the second and third most frequent purposes are <span class="in">`Working Capital`</span> and <span class="in">`Refinancing`</span>. Deals under these three purposes collectively account for around 63% percentage of all the deals in the sample.</span>
<span id="cb54-240"><a href="#cb54-240" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Another big chunk is in the capital investments: real estate, equipment, construction, aircraft &amp; ship, telecom, hardware, etc.</span>
<span id="cb54-241"><a href="#cb54-241" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Another part is the trade finance - no. 11, 13, 21.</span>
<span id="cb54-242"><a href="#cb54-242" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>SPV (Project Finance), M&amp;A, LBO (all different buyouts), Takeover.</span>
<span id="cb54-243"><a href="#cb54-243" aria-hidden="true" tabindex="-1"></a><span class="ss">5.  </span>Recapitalization (dividend, share repurchase, cash distribution).</span>
<span id="cb54-244"><a href="#cb54-244" aria-hidden="true" tabindex="-1"></a><span class="ss">6.  </span>Takeover defense is there but not frequent.</span>
<span id="cb54-245"><a href="#cb54-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-246"><a href="#cb54-246" aria-hidden="true" tabindex="-1"></a><span class="fu">### s3.2 Amendaments and Refinancing {#sec-s3.2-amendaments-and-refinancing}</span></span>
<span id="cb54-247"><a href="#cb54-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-248"><a href="#cb54-248" aria-hidden="true" tabindex="-1"></a><span class="in">```{r variable_names, echo=TRUE}</span></span>
<span id="cb54-249"><a href="#cb54-249" aria-hidden="true" tabindex="-1"></a>LPC_def <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"LPC_variable_def.csv"</span>, <span class="at">header =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb54-250"><a href="#cb54-250" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">header_id =</span> <span class="fu">cumsum</span>(<span class="fu">nchar</span>(V2) <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">*</span> (<span class="fu">nchar</span>(V1) <span class="sc">&gt;</span> <span class="dv">0</span>), </span>
<span id="cb54-251"><a href="#cb54-251" aria-hidden="true" tabindex="-1"></a>         <span class="at">header_true =</span> (<span class="fu">nchar</span>(V1) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">&amp;</span> (<span class="fu">nchar</span>(V2) <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb54-252"><a href="#cb54-252" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb54-253"><a href="#cb54-253" aria-hidden="true" tabindex="-1"></a><span class="co"># LPC_def %&gt;% head(30) %&gt;% View()</span></span>
<span id="cb54-254"><a href="#cb54-254" aria-hidden="true" tabindex="-1"></a>LPC_def_class <span class="ot">&lt;-</span> LPC_def <span class="sc">%&gt;%</span> <span class="co"># the list of variables under each class. </span></span>
<span id="cb54-255"><a href="#cb54-255" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(header_true <span class="sc">==</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb54-256"><a href="#cb54-256" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">header =</span> V1, header_id) <span class="sc">%&gt;%</span> </span>
<span id="cb54-257"><a href="#cb54-257" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(LPC_def, <span class="at">by =</span> <span class="st">"header_id"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-258"><a href="#cb54-258" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(header, header_id, <span class="at">variable =</span> V1) <span class="sc">%&gt;%</span> </span>
<span id="cb54-259"><a href="#cb54-259" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(header <span class="sc">!=</span> variable) <span class="sc">%&gt;%</span> </span>
<span id="cb54-260"><a href="#cb54-260" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">clean_strings</span>(variable), </span>
<span id="cb54-261"><a href="#cb54-261" aria-hidden="true" tabindex="-1"></a>         <span class="at">unique_key_1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(.)</span>
<span id="cb54-262"><a href="#cb54-262" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb54-263"><a href="#cb54-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-264"><a href="#cb54-264" aria-hidden="true" tabindex="-1"></a>all_names <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(<span class="fu">str_replace</span>(<span class="fu">names</span>(DealScan_borrower), <span class="at">pattern =</span> <span class="st">"_"</span>, <span class="at">replacement =</span> <span class="st">" "</span>) <span class="sc">%&gt;%</span> <span class="fu">clean_strings</span>()) </span>
<span id="cb54-265"><a href="#cb54-265" aria-hidden="true" tabindex="-1"></a>all_names<span class="sc">$</span>unique_key_2 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">names</span>(DealScan_borrower))</span>
<span id="cb54-266"><a href="#cb54-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-267"><a href="#cb54-267" aria-hidden="true" tabindex="-1"></a>fuzzy_result <span class="ot">&lt;-</span> <span class="fu">merge_plus</span>(<span class="at">data1 =</span> LPC_def_class, </span>
<span id="cb54-268"><a href="#cb54-268" aria-hidden="true" tabindex="-1"></a>                          <span class="at">data2 =</span> all_names,</span>
<span id="cb54-269"><a href="#cb54-269" aria-hidden="true" tabindex="-1"></a>                          <span class="at">by.x =</span> <span class="st">"variable"</span>,</span>
<span id="cb54-270"><a href="#cb54-270" aria-hidden="true" tabindex="-1"></a>                          <span class="at">by.y =</span> <span class="st">"V1"</span>, <span class="at">match_type =</span> <span class="st">"fuzzy"</span>, </span>
<span id="cb54-271"><a href="#cb54-271" aria-hidden="true" tabindex="-1"></a>                          <span class="at">fuzzy_settings =</span> <span class="fu">build_fuzzy_settings</span>(<span class="at">maxDist =</span> .<span class="dv">8</span>),</span>
<span id="cb54-272"><a href="#cb54-272" aria-hidden="true" tabindex="-1"></a>                          <span class="at">unique_key_1 =</span> <span class="st">"unique_key_1"</span>,</span>
<span id="cb54-273"><a href="#cb54-273" aria-hidden="true" tabindex="-1"></a>                          <span class="at">unique_key_2 =</span> <span class="st">"unique_key_2"</span>)</span>
<span id="cb54-274"><a href="#cb54-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-275"><a href="#cb54-275" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Results from fuzzy matching the names from LPC DealScan and WRDS DealScan: </span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb54-276"><a href="#cb54-276" aria-hidden="true" tabindex="-1"></a>fuzzy_result<span class="sc">$</span>match_evaluation</span>
<span id="cb54-277"><a href="#cb54-277" aria-hidden="true" tabindex="-1"></a>fuzzy_result<span class="sc">$</span>matches</span>
<span id="cb54-278"><a href="#cb54-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-279"><a href="#cb54-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-280"><a href="#cb54-280" aria-hidden="true" tabindex="-1"></a><span class="co"># all_names &lt;- names(DealScan_borrower) </span></span>
<span id="cb54-281"><a href="#cb54-281" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb54-282"><a href="#cb54-282" aria-hidden="true" tabindex="-1"></a><span class="co"># all_names.id &lt;- all_names %&gt;% </span></span>
<span id="cb54-283"><a href="#cb54-283" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "I[dD]", x = ., value = T)</span></span>
<span id="cb54-284"><a href="#cb54-284" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb54-285"><a href="#cb54-285" aria-hidden="true" tabindex="-1"></a><span class="co"># all_names.borrower &lt;- all_names %&gt;% </span></span>
<span id="cb54-286"><a href="#cb54-286" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "I[dD]", x = ., value = T, invert = T) %&gt;% </span></span>
<span id="cb54-287"><a href="#cb54-287" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "Borrower", x = ., ignore.case = T, value = T)</span></span>
<span id="cb54-288"><a href="#cb54-288" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb54-289"><a href="#cb54-289" aria-hidden="true" tabindex="-1"></a><span class="co"># all_names.deal &lt;- all_names %&gt;% </span></span>
<span id="cb54-290"><a href="#cb54-290" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "I[dD]|Borrower", x = ., ignore.case = T, value = T, invert = T) %&gt;% </span></span>
<span id="cb54-291"><a href="#cb54-291" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "Deal", x = ., ignore.case = T, value = T)</span></span>
<span id="cb54-292"><a href="#cb54-292" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb54-293"><a href="#cb54-293" aria-hidden="true" tabindex="-1"></a><span class="co"># all_names.tranche &lt;- all_names %&gt;% </span></span>
<span id="cb54-294"><a href="#cb54-294" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "Deal|I[dD]|Borrower", x = ., ignore.case = T, value = T, invert = T) %&gt;% </span></span>
<span id="cb54-295"><a href="#cb54-295" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "Tranche", x = ., ignore.case = T, value = T)</span></span>
<span id="cb54-296"><a href="#cb54-296" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb54-297"><a href="#cb54-297" aria-hidden="true" tabindex="-1"></a><span class="co"># regex_number_of &lt;- all_names %&gt;% </span></span>
<span id="cb54-298"><a href="#cb54-298" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "Tranche|Deal|I[dD]|Borrower", x = ., ignore.case = T, value = T, invert = T) %&gt;% </span></span>
<span id="cb54-299"><a href="#cb54-299" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "Number", x = ., ignore.case = T, value = T) %&gt;%</span></span>
<span id="cb54-300"><a href="#cb54-300" aria-hidden="true" tabindex="-1"></a><span class="co">#   str_replace(pattern = "Number_of_", replacement = "") %&gt;% </span></span>
<span id="cb54-301"><a href="#cb54-301" aria-hidden="true" tabindex="-1"></a><span class="co">#   str_replace(pattern = "s$", replacement = "") %&gt;% </span></span>
<span id="cb54-302"><a href="#cb54-302" aria-hidden="true" tabindex="-1"></a><span class="co">#   paste(collapse = "|")</span></span>
<span id="cb54-303"><a href="#cb54-303" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb54-304"><a href="#cb54-304" aria-hidden="true" tabindex="-1"></a><span class="co"># all_names %&gt;% </span></span>
<span id="cb54-305"><a href="#cb54-305" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "Tranche|Deal|I[dD]|Borrower", x = ., ignore.case = T, value = T, invert = T) %&gt;% </span></span>
<span id="cb54-306"><a href="#cb54-306" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "Number", x = ., ignore.case = T, value = T)</span></span>
<span id="cb54-307"><a href="#cb54-307" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb54-308"><a href="#cb54-308" aria-hidden="true" tabindex="-1"></a><span class="co"># all_names.lenders &lt;- all_names %&gt;% </span></span>
<span id="cb54-309"><a href="#cb54-309" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = "Tranche|Deal|I[dD]|Borrower", x = ., ignore.case = T, value = T, invert = T) %&gt;% </span></span>
<span id="cb54-310"><a href="#cb54-310" aria-hidden="true" tabindex="-1"></a><span class="co">#   grep(pattern = regex_number_of, x = ., ignore.case = T, value = T)</span></span>
<span id="cb54-311"><a href="#cb54-311" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb54-312"><a href="#cb54-312" aria-hidden="true" tabindex="-1"></a><span class="co"># ## the set of </span></span>
<span id="cb54-313"><a href="#cb54-313" aria-hidden="true" tabindex="-1"></a><span class="co"># all_names_remain &lt;- setdiff(all_names, c(all_names.borrower, all_names.deal, all_names.id, all_names.lenders, all_names.tranche))</span></span>
<span id="cb54-314"><a href="#cb54-314" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb54-315"><a href="#cb54-315" aria-hidden="true" tabindex="-1"></a><span class="co"># ## the Call protection: </span></span>
<span id="cb54-316"><a href="#cb54-316" aria-hidden="true" tabindex="-1"></a><span class="co"># grep(pattern = "call", x = all_names_remain, ignore.case = T, value = T)</span></span>
<span id="cb54-317"><a href="#cb54-317" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb54-318"><a href="#cb54-318" aria-hidden="true" tabindex="-1"></a><span class="co"># all_names.borrower_info &lt;- all_names_remain[1:17]</span></span>
<span id="cb54-319"><a href="#cb54-319" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb54-320"><a href="#cb54-320" aria-hidden="true" tabindex="-1"></a><span class="co"># all_names_remain[-c(1:17)]</span></span>
<span id="cb54-321"><a href="#cb54-321" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb54-322"><a href="#cb54-322" aria-hidden="true" tabindex="-1"></a><span class="co"># DealScan_borrower</span></span>
<span id="cb54-323"><a href="#cb54-323" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-324"><a href="#cb54-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-325"><a href="#cb54-325" aria-hidden="true" tabindex="-1"></a>The name of each variable is defined in <span class="co">[</span><span class="ot">Loan Connector FTP User Guide and Fact Sheet</span><span class="co">](https://wrds-www.wharton.upenn.edu/documents/1560/Loan_Connector_FTP_User_Guide_and_Fact_Sheet.xlsx)</span>. Through the fuzzy matching, I can match most of the variables in <span class="in">`DealScan_borrower`</span> to that file.</span>
<span id="cb54-326"><a href="#cb54-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-327"><a href="#cb54-327" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- Start the work: June 5, 2024 --&gt;</span></span>
<span id="cb54-328"><a href="#cb54-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-329"><a href="#cb54-329" aria-hidden="true" tabindex="-1"></a>In the next code block, I will look into amendments/refinancing <span class="co">[</span><span class="ot">for firms operating in US</span><span class="co">]</span>{style="color: red;"}. The date for each step in the syndication process is crucial.</span>
<span id="cb54-330"><a href="#cb54-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-331"><a href="#cb54-331" aria-hidden="true" tabindex="-1"></a>Definition of Variables:</span>
<span id="cb54-332"><a href="#cb54-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-333"><a href="#cb54-333" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Deal/Tranche Identifier: <span class="in">`LPC_Deal_ID`</span>, <span class="in">`LPC_Tranche_ID`</span>;</span>
<span id="cb54-334"><a href="#cb54-334" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Size of Deal/Tranche: <span class="in">`Deal_Amount`</span>, <span class="in">`Tranche_Amount`</span></span>
<span id="cb54-335"><a href="#cb54-335" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Amend/Refinancing Flag: <span class="in">`Deal_Amended`</span>, <span class="in">`Tranche_Amended`</span>, <span class="in">`Tranche_O_A`</span>, <span class="in">`Deal_Refinancing`</span>, <span class="in">`Tranche_Refinancing`</span>, <span class="in">`Amend_Extend_Flag`</span>;</span>
<span id="cb54-336"><a href="#cb54-336" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`Amend_Extend_Flag`</span>: For analytic purposes, LPC defines an amend and extend during instances when a portion of the lending group wishes not to extend out their commitments. Thus only a percentage of the original overall commitment amount would get extended and that portion would get flagged as amend &amp; extend volume (Yes/No).</span>
<span id="cb54-337"><a href="#cb54-337" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Maturity Time: <span class="in">`Tranche_Maturity_Date`</span>, <span class="in">`Tenor_Maturity`</span>;</span>
<span id="cb54-338"><a href="#cb54-338" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Deal (re-)Starting Time: <span class="in">`Deal_Active_Date`</span>, <span class="in">`Deal_Input_Date`</span>, <span class="in">`Tranche_Active_Date`</span>.</span>
<span id="cb54-339"><a href="#cb54-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-340"><a href="#cb54-340" aria-hidden="true" tabindex="-1"></a><span class="in">```{r amend_refinance, echo=TRUE, ref.label="amend_refinance", warning=FALSE}</span></span>
<span id="cb54-341"><a href="#cb54-341" aria-hidden="true" tabindex="-1"></a><span class="do">## construct the dataset for the deal/tranche amendments or refinancing. </span></span>
<span id="cb54-342"><a href="#cb54-342" aria-hidden="true" tabindex="-1"></a>dt.Deal_Amend_Refin <span class="ot">&lt;-</span> DealScan_borrower <span class="sc">%&gt;%</span> </span>
<span id="cb54-343"><a href="#cb54-343" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">"United States"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-344"><a href="#cb54-344" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">grep</span>(<span class="at">x =</span> <span class="fu">names</span>(.), <span class="at">pattern =</span> <span class="st">"LPC"</span>, <span class="at">value =</span> T), </span>
<span id="cb54-345"><a href="#cb54-345" aria-hidden="true" tabindex="-1"></a>         <span class="fu">grep</span>(<span class="at">x =</span> <span class="fu">names</span>(.), <span class="at">pattern =</span> <span class="st">"Amend"</span>, <span class="at">value =</span> T), </span>
<span id="cb54-346"><a href="#cb54-346" aria-hidden="true" tabindex="-1"></a>         <span class="fu">grep</span>(<span class="at">x =</span> <span class="fu">names</span>(.), <span class="at">pattern =</span> <span class="st">"Refinanc|Tranche_O_A"</span>, <span class="at">value =</span> T), </span>
<span id="cb54-347"><a href="#cb54-347" aria-hidden="true" tabindex="-1"></a>         <span class="fu">grep</span>(<span class="at">x =</span> <span class="fu">names</span>(.), <span class="at">pattern =</span> <span class="st">"Matur"</span>, <span class="at">ignore.case =</span> T, <span class="at">value =</span> T), </span>
<span id="cb54-348"><a href="#cb54-348" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Deal_Amount"</span>, <span class="st">"Tranche_Amount"</span>, </span>
<span id="cb54-349"><a href="#cb54-349" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Deal_Active_Date"</span>, <span class="st">"Deal_Input_Date"</span>, <span class="st">"Tranche_Active_Date"</span></span>
<span id="cb54-350"><a href="#cb54-350" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb54-351"><a href="#cb54-351" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Variable names: </span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb54-352"><a href="#cb54-352" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dt.Deal_Amend_Refin) <span class="co"># check the selected variables </span></span>
<span id="cb54-353"><a href="#cb54-353" aria-hidden="true" tabindex="-1"></a><span class="do">## some examples: </span></span>
<span id="cb54-354"><a href="#cb54-354" aria-hidden="true" tabindex="-1"></a><span class="co"># dt.Deal_Amend_Refin %&gt;% head(30) %&gt;% View("dt.Deal_Amend_Refin")</span></span>
<span id="cb54-355"><a href="#cb54-355" aria-hidden="true" tabindex="-1"></a><span class="co"># dt.Deal_Amend_Refin %&gt;% </span></span>
<span id="cb54-356"><a href="#cb54-356" aria-hidden="true" tabindex="-1"></a><span class="co">#   arrange(LPC_Tranche_ID) %&gt;% </span></span>
<span id="cb54-357"><a href="#cb54-357" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(LPC_Deal_ID == 21561) %&gt;% View("dt.Deal_Amend_Refin")</span></span>
<span id="cb54-358"><a href="#cb54-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-359"><a href="#cb54-359" aria-hidden="true" tabindex="-1"></a><span class="do">## calculate the frequency of deal amend/refinancing in the dataset - ex. "Origination"</span></span>
<span id="cb54-360"><a href="#cb54-360" aria-hidden="true" tabindex="-1"></a>dt.Deal_Amend_Refin.freq <span class="ot">&lt;-</span> dt.Deal_Amend_Refin <span class="sc">%&gt;%</span> </span>
<span id="cb54-361"><a href="#cb54-361" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(LPC_Deal_ID, LPC_Tranche_ID) <span class="sc">%&gt;%</span> <span class="do">## for each deal-tranche IDs over its life-cycle. </span></span>
<span id="cb54-362"><a href="#cb54-362" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb54-363"><a href="#cb54-363" aria-hidden="true" tabindex="-1"></a>    <span class="do">### frequency of tranche amendments - ex. "Origination" </span></span>
<span id="cb54-364"><a href="#cb54-364" aria-hidden="true" tabindex="-1"></a>    <span class="at">Tranche_Change_Freq =</span> <span class="fu">length</span>(<span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">"Orig"</span>, <span class="at">x =</span> <span class="fu">unique</span>(Tranche_O_A), <span class="at">value =</span> T, <span class="at">invert =</span> T )), </span>
<span id="cb54-365"><a href="#cb54-365" aria-hidden="true" tabindex="-1"></a>    <span class="do">### number of different deal size / tranche size </span></span>
<span id="cb54-366"><a href="#cb54-366" aria-hidden="true" tabindex="-1"></a>    <span class="at">Tranche_Size =</span> <span class="fu">mean</span>(Tranche_Amount, <span class="at">na.rm =</span> T),  </span>
<span id="cb54-367"><a href="#cb54-367" aria-hidden="true" tabindex="-1"></a>    <span class="do">### deal origination year  </span></span>
<span id="cb54-368"><a href="#cb54-368" aria-hidden="true" tabindex="-1"></a>    <span class="at">Deal_Start_ym =</span> <span class="fu">as.yearmon</span>(<span class="fu">unique</span>(Deal_Active_Date))</span>
<span id="cb54-369"><a href="#cb54-369" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-370"><a href="#cb54-370" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-371"><a href="#cb54-371" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Change_Freq_Positive =</span> <span class="fu">ifelse</span>(Tranche_Change_Freq <span class="sc">&gt;</span> <span class="dv">0</span>, Tranche_Change_Freq, <span class="cn">NA</span>), <span class="co"># keep only observations with deal/tranche modifications </span></span>
<span id="cb54-372"><a href="#cb54-372" aria-hidden="true" tabindex="-1"></a>         <span class="at">Year_groups =</span> <span class="fu">cut</span>(<span class="fu">as.numeric</span>(Deal_Start_ym), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1950</span>, <span class="dv">2000</span>, <span class="dv">2010</span>, <span class="dv">2020</span>, <span class="dv">2030</span>),</span>
<span id="cb54-373"><a href="#cb54-373" aria-hidden="true" tabindex="-1"></a>                           <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Pre-2000"</span>, <span class="st">"2000-2010"</span>, <span class="st">"2010-2020"</span>, <span class="st">"Post-2020"</span>) ) <span class="co"># create decade groups </span></span>
<span id="cb54-374"><a href="#cb54-374" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb54-375"><a href="#cb54-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-376"><a href="#cb54-376" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Data preview: </span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb54-377"><a href="#cb54-377" aria-hidden="true" tabindex="-1"></a>dt.Deal_Amend_Refin.freq <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">20</span>) </span>
<span id="cb54-378"><a href="#cb54-378" aria-hidden="true" tabindex="-1"></a><span class="do">### double check</span></span>
<span id="cb54-379"><a href="#cb54-379" aria-hidden="true" tabindex="-1"></a><span class="co"># dt.Deal_Amend_Refin %&gt;% filter(LPC_Deal_ID == 7)</span></span>
<span id="cb54-380"><a href="#cb54-380" aria-hidden="true" tabindex="-1"></a><span class="co"># DealScan_borrower %&gt;% filter(LPC_Deal_ID == 7)</span></span>
<span id="cb54-381"><a href="#cb54-381" aria-hidden="true" tabindex="-1"></a><span class="co"># DealScan_borrower %&gt;% filter(Borrower_Id == 228)</span></span>
<span id="cb54-382"><a href="#cb54-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-383"><a href="#cb54-383" aria-hidden="true" tabindex="-1"></a><span class="do">### visualization </span></span>
<span id="cb54-384"><a href="#cb54-384" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dt.Deal_Amend_Refin.freq)</span>
<span id="cb54-385"><a href="#cb54-385" aria-hidden="true" tabindex="-1"></a><span class="do">#### number of unique deal / deal-tranche </span></span>
<span id="cb54-386"><a href="#cb54-386" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(dt.Deal_Amend_Refin.freq[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>], <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> <span class="cf">function</span>(x) <span class="fu">length</span>(<span class="fu">unique</span>(x)) )</span>
<span id="cb54-387"><a href="#cb54-387" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(<span class="fu">names</span>(dt.Deal_Amend_Refin.freq))</span>
<span id="cb54-388"><a href="#cb54-388" aria-hidden="true" tabindex="-1"></a><span class="do">#### frequency</span></span>
<span id="cb54-389"><a href="#cb54-389" aria-hidden="true" tabindex="-1"></a>dt.Deal_Amend_Refin.plot <span class="ot">&lt;-</span> dt.Deal_Amend_Refin.freq <span class="sc">%&gt;%</span></span>
<span id="cb54-390"><a href="#cb54-390" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-391"><a href="#cb54-391" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Change_Freq_Positive, Year_groups) <span class="sc">%&gt;%</span></span>
<span id="cb54-392"><a href="#cb54-392" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb54-393"><a href="#cb54-393" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-394"><a href="#cb54-394" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year_groups) <span class="sc">%&gt;%</span> </span>
<span id="cb54-395"><a href="#cb54-395" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">share_in_yeargroup =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n, <span class="at">na.rm =</span> T) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-396"><a href="#cb54-396" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb54-397"><a href="#cb54-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-398"><a href="#cb54-398" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> <span class="fu">na.omit</span>(dt.Deal_Amend_Refin.plot), <span class="fu">aes</span>(<span class="at">fill =</span> Year_groups, <span class="at">x =</span> Change_Freq_Positive, <span class="at">y =</span> n) ) <span class="sc">+</span> </span>
<span id="cb54-399"><a href="#cb54-399" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">"stack"</span>, <span class="at">stat=</span><span class="st">"identity"</span>) <span class="co"># + </span></span>
<span id="cb54-400"><a href="#cb54-400" aria-hidden="true" tabindex="-1"></a>  <span class="co"># scale_y_continuous(name = "Number of Deal-Tranche", trans='log10')</span></span>
<span id="cb54-401"><a href="#cb54-401" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-402"><a href="#cb54-402" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">na.omit</span>(dt.Deal_Amend_Refin.plot), <span class="fu">aes</span>(<span class="at">fill=</span>Year_groups, <span class="at">y=</span>n, <span class="at">x=</span>Change_Freq_Positive)) <span class="sc">+</span> </span>
<span id="cb54-403"><a href="#cb54-403" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">"dodge"</span>, <span class="at">stat=</span><span class="st">"identity"</span>) <span class="sc">+</span> </span>
<span id="cb54-404"><a href="#cb54-404" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Number of Deal-Tranche w/ Amendments"</span>) <span class="sc">+</span> </span>
<span id="cb54-405"><a href="#cb54-405" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Frequency of Amendments"</span>)</span>
<span id="cb54-406"><a href="#cb54-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-407"><a href="#cb54-407" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">na.omit</span>(dt.Deal_Amend_Refin.plot), <span class="fu">aes</span>(<span class="at">fill=</span>Year_groups, <span class="at">y=</span>share_in_yeargroup, <span class="at">x=</span>Change_Freq_Positive)) <span class="sc">+</span> </span>
<span id="cb54-408"><a href="#cb54-408" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">"dodge"</span>, <span class="at">stat=</span><span class="st">"identity"</span>) <span class="sc">+</span> </span>
<span id="cb54-409"><a href="#cb54-409" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Number of Deal-Tranche w/ Amendments"</span>) <span class="sc">+</span> </span>
<span id="cb54-410"><a href="#cb54-410" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Frequency of Amendments"</span>)</span>
<span id="cb54-411"><a href="#cb54-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-412"><a href="#cb54-412" aria-hidden="true" tabindex="-1"></a><span class="do">#### number of deal-tranche (1 to 10)</span></span>
<span id="cb54-413"><a href="#cb54-413" aria-hidden="true" tabindex="-1"></a>fig_amend_count <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">na.omit</span>(<span class="fu">filter</span>(dt.Deal_Amend_Refin.plot, Change_Freq_Positive <span class="sc">&lt;=</span> <span class="dv">10</span>)), <span class="fu">aes</span>(<span class="at">fill=</span>Year_groups, <span class="at">y=</span>n, <span class="at">x=</span>Change_Freq_Positive)) <span class="sc">+</span> </span>
<span id="cb54-414"><a href="#cb54-414" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">"dodge"</span>, <span class="at">stat=</span><span class="st">"identity"</span>) <span class="sc">+</span> </span>
<span id="cb54-415"><a href="#cb54-415" aria-hidden="true" tabindex="-1"></a>  <span class="co"># scale_y_continuous(name = "Number of Deal-Tranche w/ Amendments") + </span></span>
<span id="cb54-416"><a href="#cb54-416" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Frequency of Amendments"</span>, <span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">+</span> </span>
<span id="cb54-417"><a href="#cb54-417" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of Deal-Tranches w/ Amendments"</span>, </span>
<span id="cb54-418"><a href="#cb54-418" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Number of Deal-Tranche w/ Amendments"</span>, </span>
<span id="cb54-419"><a href="#cb54-419" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Origination Year Groups"</span>) <span class="sc">+</span> </span>
<span id="cb54-420"><a href="#cb54-420" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_economist</span>(</span>
<span id="cb54-421"><a href="#cb54-421" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_size =</span> <span class="dv">10</span>,</span>
<span id="cb54-422"><a href="#cb54-422" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_family =</span> <span class="st">"Courier"</span>,</span>
<span id="cb54-423"><a href="#cb54-423" aria-hidden="true" tabindex="-1"></a>    <span class="at">horizontal =</span> <span class="cn">TRUE</span>,</span>
<span id="cb54-424"><a href="#cb54-424" aria-hidden="true" tabindex="-1"></a>    <span class="at">dkpanel =</span> <span class="cn">FALSE</span></span>
<span id="cb54-425"><a href="#cb54-425" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb54-426"><a href="#cb54-426" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb54-427"><a href="#cb54-427" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove labels from the vertical axis</span></span>
<span id="cb54-428"><a href="#cb54-428" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb54-429"><a href="#cb54-429" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">vjust=</span><span class="dv">3</span>),</span>
<span id="cb54-430"><a href="#cb54-430" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">1</span>),</span>
<span id="cb54-431"><a href="#cb54-431" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb54-432"><a href="#cb54-432" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Title format</span></span>
<span id="cb54-433"><a href="#cb54-433" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb54-434"><a href="#cb54-434" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">"Comic Sans MS"</span>, </span>
<span id="cb54-435"><a href="#cb54-435" aria-hidden="true" tabindex="-1"></a>      <span class="at">face =</span> <span class="st">"bold"</span>,</span>
<span id="cb54-436"><a href="#cb54-436" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="fl">13.5</span>, <span class="at">hjust =</span> <span class="dv">0</span> <span class="co"># shift the </span></span>
<span id="cb54-437"><a href="#cb54-437" aria-hidden="true" tabindex="-1"></a>    ), </span>
<span id="cb54-438"><a href="#cb54-438" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Subtitle format </span></span>
<span id="cb54-439"><a href="#cb54-439" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(</span>
<span id="cb54-440"><a href="#cb54-440" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">"Comic Sans MS"</span>,</span>
<span id="cb54-441"><a href="#cb54-441" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">12</span>, <span class="at">hjust =</span> <span class="dv">0</span></span>
<span id="cb54-442"><a href="#cb54-442" aria-hidden="true" tabindex="-1"></a>    ), </span>
<span id="cb54-443"><a href="#cb54-443" aria-hidden="true" tabindex="-1"></a>    <span class="co"># plot.title.position = "plot",</span></span>
<span id="cb54-444"><a href="#cb54-444" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>), <span class="co">#change font size of legend text</span></span>
<span id="cb54-445"><a href="#cb54-445" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>), <span class="co">#change font size of legend title   </span></span>
<span id="cb54-446"><a href="#cb54-446" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>, </span>
<span id="cb54-447"><a href="#cb54-447" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="fl">0.3</span>, <span class="st">'cm'</span>) <span class="co"># change the size of the legend key - the blocks</span></span>
<span id="cb54-448"><a href="#cb54-448" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb54-449"><a href="#cb54-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-450"><a href="#cb54-450" aria-hidden="true" tabindex="-1"></a><span class="do">#### share of deal-tranche within each year group (1 to 10)</span></span>
<span id="cb54-451"><a href="#cb54-451" aria-hidden="true" tabindex="-1"></a>fig_amend_share <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">na.omit</span>(<span class="fu">filter</span>(dt.Deal_Amend_Refin.plot, Change_Freq_Positive <span class="sc">&lt;=</span> <span class="dv">10</span>)), <span class="fu">aes</span>(<span class="at">fill=</span>Year_groups, <span class="at">y=</span>share_in_yeargroup, <span class="at">x=</span>Change_Freq_Positive)) <span class="sc">+</span> </span>
<span id="cb54-452"><a href="#cb54-452" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">"dodge"</span>, <span class="at">stat=</span><span class="st">"identity"</span>) <span class="sc">+</span> </span>
<span id="cb54-453"><a href="#cb54-453" aria-hidden="true" tabindex="-1"></a>  <span class="co"># scale_y_continuous(name = ) + </span></span>
<span id="cb54-454"><a href="#cb54-454" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Frequency of Amendments"</span>, <span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">+</span> </span>
<span id="cb54-455"><a href="#cb54-455" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Share of Deal-Tranches w/ Amendments within Origination-year Group"</span>, </span>
<span id="cb54-456"><a href="#cb54-456" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Percentage of Deal-Tranche w/ Amendments (%)"</span>, </span>
<span id="cb54-457"><a href="#cb54-457" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Origination Year Groups"</span>) <span class="sc">+</span> </span>
<span id="cb54-458"><a href="#cb54-458" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_economist</span>(</span>
<span id="cb54-459"><a href="#cb54-459" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_size =</span> <span class="dv">10</span>,</span>
<span id="cb54-460"><a href="#cb54-460" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_family =</span> <span class="st">"Courier"</span>,</span>
<span id="cb54-461"><a href="#cb54-461" aria-hidden="true" tabindex="-1"></a>    <span class="at">horizontal =</span> <span class="cn">TRUE</span>,</span>
<span id="cb54-462"><a href="#cb54-462" aria-hidden="true" tabindex="-1"></a>    <span class="at">dkpanel =</span> <span class="cn">FALSE</span></span>
<span id="cb54-463"><a href="#cb54-463" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb54-464"><a href="#cb54-464" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb54-465"><a href="#cb54-465" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove labels from the vertical axis</span></span>
<span id="cb54-466"><a href="#cb54-466" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb54-467"><a href="#cb54-467" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">vjust=</span><span class="dv">3</span>),</span>
<span id="cb54-468"><a href="#cb54-468" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">1</span>),</span>
<span id="cb54-469"><a href="#cb54-469" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb54-470"><a href="#cb54-470" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Title format</span></span>
<span id="cb54-471"><a href="#cb54-471" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb54-472"><a href="#cb54-472" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">"Comic Sans MS"</span>, </span>
<span id="cb54-473"><a href="#cb54-473" aria-hidden="true" tabindex="-1"></a>      <span class="at">face =</span> <span class="st">"bold"</span>,</span>
<span id="cb54-474"><a href="#cb54-474" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="fl">13.5</span>, <span class="at">hjust =</span> <span class="dv">0</span> <span class="co"># shift the </span></span>
<span id="cb54-475"><a href="#cb54-475" aria-hidden="true" tabindex="-1"></a>    ), </span>
<span id="cb54-476"><a href="#cb54-476" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Subtitle format </span></span>
<span id="cb54-477"><a href="#cb54-477" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(</span>
<span id="cb54-478"><a href="#cb54-478" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">"Comic Sans MS"</span>,</span>
<span id="cb54-479"><a href="#cb54-479" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">12</span>, <span class="at">hjust =</span> <span class="dv">0</span></span>
<span id="cb54-480"><a href="#cb54-480" aria-hidden="true" tabindex="-1"></a>    ), </span>
<span id="cb54-481"><a href="#cb54-481" aria-hidden="true" tabindex="-1"></a>    <span class="co"># plot.title.position = "plot",</span></span>
<span id="cb54-482"><a href="#cb54-482" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>), <span class="co">#change font size of legend text</span></span>
<span id="cb54-483"><a href="#cb54-483" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>), <span class="co">#change font size of legend title   </span></span>
<span id="cb54-484"><a href="#cb54-484" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>, </span>
<span id="cb54-485"><a href="#cb54-485" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="fl">0.3</span>, <span class="st">'cm'</span>) <span class="co"># change the size of the legend key - the blocks</span></span>
<span id="cb54-486"><a href="#cb54-486" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb54-487"><a href="#cb54-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-488"><a href="#cb54-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-489"><a href="#cb54-489" aria-hidden="true" tabindex="-1"></a>cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(fig_amend_count, fig_amend_share, <span class="at">ncol =</span> <span class="dv">1</span>)</span>
<span id="cb54-490"><a href="#cb54-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-491"><a href="#cb54-491" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(na.omit(dt.Deal_Amend_Refin.plot), aes(fill=Year_groups, y=n, x=Change_Freq_Positive)) + </span></span>
<span id="cb54-492"><a href="#cb54-492" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_bar(position="dodge", stat="identity") + </span></span>
<span id="cb54-493"><a href="#cb54-493" aria-hidden="true" tabindex="-1"></a><span class="co">#   scale_y_continuous(name = "Number of Deal-Tranche w/ Amendments") + </span></span>
<span id="cb54-494"><a href="#cb54-494" aria-hidden="true" tabindex="-1"></a><span class="co">#   scale_x_continuous(name = "Frequency of Amendments")</span></span>
<span id="cb54-495"><a href="#cb54-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-496"><a href="#cb54-496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-497"><a href="#cb54-497" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(dt.Deal_Amend_Refin.freq<span class="sc">$</span>Change_Freq_Positive, <span class="at">na.rm =</span> T)</span>
<span id="cb54-498"><a href="#cb54-498" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(dt.Deal_Amend_Refin.freq<span class="sc">$</span>Tranche_Size, <span class="at">na.rm =</span> T)</span>
<span id="cb54-499"><a href="#cb54-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-500"><a href="#cb54-500" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> <span class="fu">log10</span>(dt.Deal_Amend_Refin.freq<span class="sc">$</span>Tranche_Size), <span class="at">y =</span> dt.Deal_Amend_Refin.freq<span class="sc">$</span>Change_Freq_Positive, <span class="at">col =</span> dt.Deal_Amend_Refin.freq<span class="sc">$</span>Year_groups)</span>
<span id="cb54-501"><a href="#cb54-501" aria-hidden="true" tabindex="-1"></a><span class="co"># legend("topright", col = dt.Deal_Amend_Refin.freq$Year_groups, legend = dt.Deal_Amend_Refin.freq$Year_groups, lty = 1:4, cex = 1)</span></span>
<span id="cb54-502"><a href="#cb54-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-503"><a href="#cb54-503" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(dt.Deal_Amend_Refin.freq <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="st">"Tranche_Change_Freq"</span>, <span class="st">"Change_Freq_Positive"</span>), <span class="at">IQR =</span> T) </span>
<span id="cb54-504"><a href="#cb54-504" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(dt.Deal_Amend_Refin.freq <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Year_groups <span class="sc">!=</span> <span class="st">"Post-2020"</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="st">"Tranche_Change_Freq"</span>, <span class="st">"Change_Freq_Positive"</span>), <span class="at">IQR =</span> T) </span>
<span id="cb54-505"><a href="#cb54-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-506"><a href="#cb54-506" aria-hidden="true" tabindex="-1"></a>dt.Deal_Amend_Refin.freq <span class="sc">%&gt;%</span> </span>
<span id="cb54-507"><a href="#cb54-507" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(LPC_Deal_ID) <span class="sc">%&gt;%</span> </span>
<span id="cb54-508"><a href="#cb54-508" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Deal_Change_Freq =</span> <span class="fu">max</span>(Tranche_Change_Freq)) <span class="sc">%&gt;%</span> </span>
<span id="cb54-509"><a href="#cb54-509" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="fu">describe</span>() </span>
<span id="cb54-510"><a href="#cb54-510" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-511"><a href="#cb54-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-512"><a href="#cb54-512" aria-hidden="true" tabindex="-1"></a>Among all <span class="in">`r nrow(dt.Deal_Amend_Refin.freq) %&gt;% format(big.mark = ",")`</span> unique Deal-Tranche observations, <span class="in">`r nrow(na.omit(dt.Deal_Amend_Refin.freq)) %&gt;% format(big.mark = ",")`</span> of those have recorded amendments to their Deal-Tranches. Among deals experienced amendments, each Deal-Tranche is amended on average <span class="in">`r round(mean(dt.Deal_Amend_Refin.freq$Change_Freq_Positive, na.rm = T), digits = 1)`</span> times and this seems to be quite stable to the origination time of the Deal-Tranche. This is somewhat consistent with the idea that the renegotiation is not rare.</span>
<span id="cb54-513"><a href="#cb54-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-514"><a href="#cb54-514" aria-hidden="true" tabindex="-1"></a>::: {.alert .alert-dismissible .alert-info}</span>
<span id="cb54-515"><a href="#cb54-515" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;button</span> <span class="er">type</span><span class="ot">=</span><span class="st">"button"</span> <span class="er">class</span><span class="ot">=</span><span class="st">"btn-close"</span> <span class="er">data-bs-dismiss</span><span class="ot">=</span><span class="st">"alert"</span><span class="kw">&gt;</span></span>
<span id="cb54-516"><a href="#cb54-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-517"><a href="#cb54-517" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/button&gt;</span></span>
<span id="cb54-518"><a href="#cb54-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-519"><a href="#cb54-519" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;strong&gt;</span>Heads up!<span class="kw">&lt;/strong&gt;</span> However, one thing to be noted is <span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"##sec-s3.2-amendaments-and-refinancing"</span> <span class="er">class</span><span class="ot">=</span><span class="st">"alert-link"</span><span class="kw">&gt;</span>the renegotiation with the good or bad news are not distinguished<span class="kw">&lt;/a&gt;</span> in the above statistics..</span>
<span id="cb54-520"><a href="#cb54-520" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb54-521"><a href="#cb54-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-522"><a href="#cb54-522" aria-hidden="true" tabindex="-1"></a><span class="fu">### s3.3 Follow Roberts (2015)</span></span>
<span id="cb54-523"><a href="#cb54-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-524"><a href="#cb54-524" aria-hidden="true" tabindex="-1"></a>For Table B1, I extract the loan information and path for Aeroflex Inc. (<span class="in">`Borrower_Id`</span> = 8532) from the dataset <span class="in">`DealScan_borrower`</span>. <span class="co">[</span><span class="ot">Company SEC Filings</span><span class="co">](https://www.sec.gov/edgar/browse/?CIK=0000002601)</span></span>
<span id="cb54-525"><a href="#cb54-525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-526"><a href="#cb54-526" aria-hidden="true" tabindex="-1"></a><span class="in">```{r roberts_2015_B1_PanelA, echo=TRUE, size=0.5}</span></span>
<span id="cb54-527"><a href="#cb54-527" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page</span></span>
<span id="cb54-528"><a href="#cb54-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-529"><a href="#cb54-529" aria-hidden="true" tabindex="-1"></a>DealScan_Aeroflex <span class="ot">&lt;-</span> DealScan_borrower <span class="sc">%&gt;%</span> </span>
<span id="cb54-530"><a href="#cb54-530" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Borrower_Id <span class="sc">==</span> <span class="dv">8532</span>)</span>
<span id="cb54-531"><a href="#cb54-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-532"><a href="#cb54-532" aria-hidden="true" tabindex="-1"></a>DealScan_Aeroflex <span class="sc">%&gt;%</span> </span>
<span id="cb54-533"><a href="#cb54-533" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">names</span>(dt.Deal_Amend_Refin), Deal_Input_Date, Tranche_Type, Deal_Purpose) <span class="sc">%&gt;%</span> </span>
<span id="cb54-534"><a href="#cb54-534" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-535"><a href="#cb54-535" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="at">pattern =</span> <span class="st">"Orig"</span>, <span class="at">x =</span> Tranche_O_A, <span class="at">ignore.case =</span> F)) <span class="sc">%&gt;%</span> <span class="co"># keep only observations at origination </span></span>
<span id="cb54-536"><a href="#cb54-536" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Deal_Active_Date, Tranche_Active_Date, Tranche_Maturity_Date) <span class="sc">%&gt;%</span> </span>
<span id="cb54-537"><a href="#cb54-537" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span> <span class="fu">str_replace</span>(<span class="at">string =</span> .x, <span class="at">pattern =</span> <span class="st">"_"</span>, <span class="at">replacement =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb54-538"><a href="#cb54-538" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">id =</span> <span class="st">'table_id'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-539"><a href="#cb54-539" aria-hidden="true" tabindex="-1"></a>  <span class="co"># cols_label(fn = ~ str_replace(string = ., pattern = "_", replacement = "\n") ) %&gt;% </span></span>
<span id="cb54-540"><a href="#cb54-540" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Table 1. Panel A: Aeroflex Inc. Deal Originations"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-541"><a href="#cb54-541" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(<span class="at">table.font.size =</span> <span class="dv">10</span>, <span class="at">heading.align =</span> <span class="st">'left'</span> ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-542"><a href="#cb54-542" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>( <span class="co"># update the font size for table cells. </span></span>
<span id="cb54-543"><a href="#cb54-543" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">size =</span> <span class="fu">px</span>(<span class="dv">10</span>) ),</span>
<span id="cb54-544"><a href="#cb54-544" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()</span>
<span id="cb54-545"><a href="#cb54-545" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb54-546"><a href="#cb54-546" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-547"><a href="#cb54-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-548"><a href="#cb54-548" aria-hidden="true" tabindex="-1"></a>This table is consistent with Table B1 Panel A in Roberts (2015):</span>
<span id="cb54-549"><a href="#cb54-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-550"><a href="#cb54-550" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The identifier <span class="in">`(LPC_Deal_ID, LPC_Tranche_ID)`</span> maps to <span class="in">`(Package ID, Facility ID)`</span>.</span>
<span id="cb54-551"><a href="#cb54-551" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The identifier <span class="in">`Tranche_Type`</span> maps to <span class="in">`Loan type`</span>.</span>
<span id="cb54-552"><a href="#cb54-552" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The date information - <span class="in">`Deal_Active_Date`</span> maps to <span class="in">`Event date`</span>.</span>
<span id="cb54-553"><a href="#cb54-553" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`Tranche_Maturity_Date`</span> maps to <span class="in">`Maturity date`</span>.</span>
<span id="cb54-554"><a href="#cb54-554" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`Tranche_Amount`</span> maps to <span class="in">`Amount (millions)`</span>.</span>
<span id="cb54-555"><a href="#cb54-555" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`Tranche_O_A`</span> maps to <span class="in">`Event`</span>.</span>
<span id="cb54-556"><a href="#cb54-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-557"><a href="#cb54-557" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- Start the work: June 6, 2024 --&gt;</span></span>
<span id="cb54-558"><a href="#cb54-558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-559"><a href="#cb54-559" aria-hidden="true" tabindex="-1"></a><span class="fu">#### s3.3a Example from borrower (`Borrower_Id` = 8532)</span></span>
<span id="cb54-560"><a href="#cb54-560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-561"><a href="#cb54-561" aria-hidden="true" tabindex="-1"></a>The next step is to construct the life-cycle / loan path as in Table B1 Panel B.</span>
<span id="cb54-562"><a href="#cb54-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-563"><a href="#cb54-563" aria-hidden="true" tabindex="-1"></a>E.g. This deal (<span class="in">`LPC_Deal_ID`</span> = 151556, <span class="in">`LPC_Tranche_ID`</span> = 197238) can be found in <span class="co">[</span><span class="ot">this filing</span><span class="co">](https://www.sec.gov/Archives/edgar/data/2601/000093221406000138/0000932214-06-000138.txt)</span>.</span>
<span id="cb54-564"><a href="#cb54-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-565"><a href="#cb54-565" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>This <span class="co">[</span><span class="ot">deal</span><span class="co">](https://www.sec.gov/Archives/edgar/data/2601/000093221406000138/0000932214-06-000138.txt)</span> is originated at March 21, 2006.</span>
<span id="cb54-566"><a href="#cb54-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-567"><a href="#cb54-567" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">The amendment</span><span class="co">](https://www.sec.gov/edgar/search/?r=el#exhibit10-1.txt)</span> is made at August 28, 2006. The amended document says that</span>
<span id="cb54-568"><a href="#cb54-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-569"><a href="#cb54-569" aria-hidden="true" tabindex="-1"></a><span class="at">    &gt; ... WHEREAS, </span><span class="kw">&lt;mark&gt;</span><span class="at">the Borrowers has requested an amendment to the Credit Agreement</span><span class="kw">&lt;/mark&gt;</span><span class="at">; and WHEREAS, the Lenders are willing to agree to such amendments, subject to the terms and conditions set forth herein; ...</span></span>
<span id="cb54-570"><a href="#cb54-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-571"><a href="#cb54-571" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>This seems that if the borrower request an amendment, it can be approved by the syndicate.</span>
<span id="cb54-572"><a href="#cb54-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-573"><a href="#cb54-573" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>This amendment happened in around 5 months after the loan origination.</span>
<span id="cb54-574"><a href="#cb54-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-575"><a href="#cb54-575" aria-hidden="true" tabindex="-1"></a>    ::: {#imp-amend .callout-important}</span>
<span id="cb54-576"><a href="#cb54-576" aria-hidden="true" tabindex="-1"></a>    ## Who initiates the renegotiation process?</span>
<span id="cb54-577"><a href="#cb54-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-578"><a href="#cb54-578" aria-hidden="true" tabindex="-1"></a><span class="in">    I only observe the successful renegotiations and potentially can also identify who initiates this process. This may create selection bias in your analysis. Need to think about how will this issue create upward/downward bias in your results.</span></span>
<span id="cb54-579"><a href="#cb54-579" aria-hidden="true" tabindex="-1"></a><span class="in">    :::</span></span>
<span id="cb54-580"><a href="#cb54-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-581"><a href="#cb54-581" aria-hidden="true" tabindex="-1"></a><span class="in">    -   The syndicte has four banks and the cost of renegotiation might be small? &amp; What is usually the fees/expenses for renegotiations?</span></span>
<span id="cb54-582"><a href="#cb54-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-583"><a href="#cb54-583" aria-hidden="true" tabindex="-1"></a>::: {#tip-syndicate .callout-tip .column-margin}</span>
<span id="cb54-584"><a href="#cb54-584" aria-hidden="true" tabindex="-1"></a><span class="fu">## How to detect the relationship lending?</span></span>
<span id="cb54-585"><a href="#cb54-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-586"><a href="#cb54-586" aria-hidden="true" tabindex="-1"></a>One tip to detect such lending relationship might be a scrap and search for the person and his/her title along the loan path and also for a single firm's loan pool.</span>
<span id="cb54-587"><a href="#cb54-587" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb54-588"><a href="#cb54-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-589"><a href="#cb54-589" aria-hidden="true" tabindex="-1"></a>Different types of term loans:</span>
<span id="cb54-590"><a href="#cb54-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-591"><a href="#cb54-591" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Term loan (also Term Loan A): This layer of debt is typically amortized evenly over 5 to 7 years. Just like a mortgage.</span>
<span id="cb54-592"><a href="#cb54-592" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Term loan B (also TLB): This layer of debt usually involves nominal amortization (repayment) over 5 to 8 years, with a large bullet payment in the last year. Term Loan B allows borrowers to defer repayment of a large portion of the loan, but is more costly to borrowers than Term Loan A.</span>
<span id="cb54-593"><a href="#cb54-593" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>TLB proceeds can be used in various ways, including for refinancing, acquisitions and general corporate use.</span>
<span id="cb54-594"><a href="#cb54-594" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>The first two types generally are secured loans.</span>
<span id="cb54-595"><a href="#cb54-595" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Repayment can be made and is generally required at a premium to face value.</span>
<span id="cb54-596"><a href="#cb54-596" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Term loan C (also TLC): TLC proceeds are used to fund cash collateral accounts that support letters of credit---a letter from a bank guaranteeing that a seller of goods or services will receive payment in full and on time, even if the buyer defaults.</span>
<span id="cb54-597"><a href="#cb54-597" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>TLC debt, however, may only be used to provide collateral for letters of credit.</span>
<span id="cb54-598"><a href="#cb54-598" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Since TLCs are specifically raised to provide cash collateral, which must be available in an account to support letters of credit, they also do not amortize.</span>
<span id="cb54-599"><a href="#cb54-599" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>TLB is senior than TLC debt.</span>
<span id="cb54-600"><a href="#cb54-600" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>The idea is to use long-term debt to hedge the short-term liquidity/cash needs. TLC plays such a role for this specific purpose. It is a risky debt; however, very strict covenants and purposes are imposed to mitigate risk-shifting by the manager.</span>
<span id="cb54-601"><a href="#cb54-601" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="co">[</span><span class="ot">A nice article about TLC debt</span><span class="co">](https://debtexplorer.whitecase.com/leveraged-finance-commentary/term-loan-c-in-the-spotlight)</span>.</span>
<span id="cb54-602"><a href="#cb54-602" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Revolver/Line: Revolving Credit Facility, which is basically a credit card for the borrower. There are two costs associated with revolving lines of credit: (1) the interest rate charged on the revolver's drawn balance, and (2) an undrawn commitment fee.</span>
<span id="cb54-603"><a href="#cb54-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-604"><a href="#cb54-604" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Q: What happens to the loan path?</span></span>
<span id="cb54-605"><a href="#cb54-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-606"><a href="#cb54-606" aria-hidden="true" tabindex="-1"></a><span class="in">```{r roberts_2015_B1_PanelB, echo=TRUE}</span></span>
<span id="cb54-607"><a href="#cb54-607" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page</span></span>
<span id="cb54-608"><a href="#cb54-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-609"><a href="#cb54-609" aria-hidden="true" tabindex="-1"></a>DealScan_Aeroflex <span class="sc">%&gt;%</span> </span>
<span id="cb54-610"><a href="#cb54-610" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">names</span>(dt.Deal_Amend_Refin), Deal_Input_Date, Tranche_Type, Deal_Purpose) <span class="sc">%&gt;%</span> </span>
<span id="cb54-611"><a href="#cb54-611" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-612"><a href="#cb54-612" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Tranche_O_A_round =</span> <span class="fu">replace_na</span>(<span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(<span class="at">string =</span> Tranche_O_A, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">d+$"</span>)) , <span class="at">replace =</span> <span class="dv">0</span> ), </span>
<span id="cb54-613"><a href="#cb54-613" aria-hidden="true" tabindex="-1"></a>         <span class="at">LPC_Deal_ID =</span> <span class="fu">paste</span>(<span class="st">"Deal: "</span>, LPC_Deal_ID, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb54-614"><a href="#cb54-614" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-615"><a href="#cb54-615" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(LPC_Deal_ID, LPC_Tranche_ID) <span class="sc">%&gt;%</span> </span>
<span id="cb54-616"><a href="#cb54-616" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Deal_Active_Date) <span class="sc">%&gt;%</span> </span>
<span id="cb54-617"><a href="#cb54-617" aria-hidden="true" tabindex="-1"></a>  <span class="co"># check whether there exists tranche amendment in the dataset </span></span>
<span id="cb54-618"><a href="#cb54-618" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Amend_Flag_check =</span> <span class="fu">max</span>(Tranche_O_A_round) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-619"><a href="#cb54-619" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-620"><a href="#cb54-620" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span> <span class="fu">str_replace</span>(<span class="at">string =</span> .x, <span class="at">pattern =</span> <span class="st">"_"</span>, <span class="at">replacement =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb54-621"><a href="#cb54-621" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">id =</span> <span class="st">'table_id'</span>, <span class="at">groupname_col =</span> <span class="st">"LPC</span><span class="sc">\n</span><span class="st">Deal_ID"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-622"><a href="#cb54-622" aria-hidden="true" tabindex="-1"></a>  <span class="co"># cols_label(fn = ~ str_replace(string = ., pattern = "_", replacement = "\n") ) %&gt;% </span></span>
<span id="cb54-623"><a href="#cb54-623" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Table 1. Panel B: Aeroflex Inc. Deal-Tranche Level Loan Path"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-624"><a href="#cb54-624" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(<span class="at">table.font.size =</span> <span class="dv">10</span>, <span class="at">heading.align =</span> <span class="st">'left'</span> ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-625"><a href="#cb54-625" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>( <span class="co"># update the font size for table cells. </span></span>
<span id="cb54-626"><a href="#cb54-626" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">size =</span> <span class="fu">px</span>(<span class="dv">10</span>)),</span>
<span id="cb54-627"><a href="#cb54-627" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()</span>
<span id="cb54-628"><a href="#cb54-628" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-629"><a href="#cb54-629" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb54-630"><a href="#cb54-630" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">style =</span> <span class="st">"italic"</span>, <span class="at">color =</span> <span class="st">'red'</span>), </span>
<span id="cb54-631"><a href="#cb54-631" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(</span>
<span id="cb54-632"><a href="#cb54-632" aria-hidden="true" tabindex="-1"></a>      <span class="at">columns =</span> <span class="st">"LPC</span><span class="sc">\n</span><span class="st">Tranche_ID"</span>, </span>
<span id="cb54-633"><a href="#cb54-633" aria-hidden="true" tabindex="-1"></a>      <span class="at">rows =</span>  <span class="st">`</span><span class="at">Amend</span><span class="sc">\n</span><span class="at">Flag_check</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="dv">0</span></span>
<span id="cb54-634"><a href="#cb54-634" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb54-635"><a href="#cb54-635" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-636"><a href="#cb54-636" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_hide</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"Tranche</span><span class="sc">\n</span><span class="st">O_A_round"</span>, <span class="st">"Amend</span><span class="sc">\n</span><span class="st">Flag_check"</span>) ) <span class="co"># hide columns </span></span>
<span id="cb54-637"><a href="#cb54-637" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-638"><a href="#cb54-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-639"><a href="#cb54-639" aria-hidden="true" tabindex="-1"></a>Consistent with Roberts (2015), most of deal-tranche observations in DealScan are not consistent with their SEC filings. In other words, the loan path in the DealScan data is rather incomplete. For instance, the tranche (<span class="in">`LPC_Deal_ID`</span> = 128721, <span class="in">`LPC_Tranche_ID`</span> = 224767) only appears once in DealScan and is classified as an "Origination" + "Refinancing" deal. However, the SEC filings from Table B1 Panel B in Roberts (2015) shows a total 8 observations along the loan path. The observation recorded in DealScan is not an origination and is classified as an "Amended/Restate" event in Roberts dataset. Therefore, the renegotiation frequency is significantly different from the actual ones and the full dataset may not be granular enough.</span>
<span id="cb54-640"><a href="#cb54-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-641"><a href="#cb54-641" aria-hidden="true" tabindex="-1"></a>Another way to better identify the connection between different deals, and tranches in particular, is to look into variable <span class="in">`Deal_Remark`</span>. Some examples below: </span>
<span id="cb54-642"><a href="#cb54-642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-643"><a href="#cb54-643" aria-hidden="true" tabindex="-1"></a><span class="in">```{r roberts_2015_B1_PanelB2, echo=TRUE}</span></span>
<span id="cb54-644"><a href="#cb54-644" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: screen-inset</span></span>
<span id="cb54-645"><a href="#cb54-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-646"><a href="#cb54-646" aria-hidden="true" tabindex="-1"></a>DealScan_Aeroflex <span class="sc">%&gt;%</span> </span>
<span id="cb54-647"><a href="#cb54-647" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">names</span>(dt.Deal_Amend_Refin), Deal_Input_Date, Tranche_Type, Deal_Purpose, </span>
<span id="cb54-648"><a href="#cb54-648" aria-hidden="true" tabindex="-1"></a>         <span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">"Remark"</span>, <span class="at">x =</span> <span class="fu">names</span>(.), <span class="at">value =</span> T)</span>
<span id="cb54-649"><a href="#cb54-649" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-650"><a href="#cb54-650" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-651"><a href="#cb54-651" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Tranche_O_A_round =</span> <span class="fu">replace_na</span>(<span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(<span class="at">string =</span> Tranche_O_A, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">d+$"</span>)) , <span class="at">replace =</span> <span class="dv">0</span> ), </span>
<span id="cb54-652"><a href="#cb54-652" aria-hidden="true" tabindex="-1"></a>         <span class="at">LPC_Deal_ID =</span> <span class="fu">paste</span>(<span class="st">"Deal: "</span>, LPC_Deal_ID, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb54-653"><a href="#cb54-653" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-654"><a href="#cb54-654" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(LPC_Deal_ID, LPC_Tranche_ID) <span class="sc">%&gt;%</span> </span>
<span id="cb54-655"><a href="#cb54-655" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Deal_Active_Date) <span class="sc">%&gt;%</span> </span>
<span id="cb54-656"><a href="#cb54-656" aria-hidden="true" tabindex="-1"></a>  <span class="co"># check whether there exists tranche amendment in the dataset </span></span>
<span id="cb54-657"><a href="#cb54-657" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Amend_Flag_check =</span> <span class="fu">max</span>(Tranche_O_A_round) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-658"><a href="#cb54-658" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-659"><a href="#cb54-659" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(LPC_Deal_ID <span class="sc">==</span> <span class="st">"Deal: 128721"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-660"><a href="#cb54-660" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span> <span class="fu">str_replace</span>(<span class="at">string =</span> .x, <span class="at">pattern =</span> <span class="st">"_"</span>, <span class="at">replacement =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb54-661"><a href="#cb54-661" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">id =</span> <span class="st">'table_id'</span>, <span class="at">groupname_col =</span> <span class="st">"LPC</span><span class="sc">\n</span><span class="st">Deal_ID"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-662"><a href="#cb54-662" aria-hidden="true" tabindex="-1"></a>  <span class="co"># cols_label(fn = ~ str_replace(string = ., pattern = "_", replacement = "\n") ) %&gt;% </span></span>
<span id="cb54-663"><a href="#cb54-663" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Table 1. Panel C: Aeroflex Inc. Deal-Tranche Level Loan Path"</span>, </span>
<span id="cb54-664"><a href="#cb54-664" aria-hidden="true" tabindex="-1"></a>             <span class="at">subtitle =</span> <span class="st">"w/ additional information in remarks"</span></span>
<span id="cb54-665"><a href="#cb54-665" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-666"><a href="#cb54-666" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(<span class="at">table.font.size =</span> <span class="dv">10</span>, <span class="at">heading.align =</span> <span class="st">'left'</span> ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-667"><a href="#cb54-667" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>( <span class="co"># update the font size for table cells. </span></span>
<span id="cb54-668"><a href="#cb54-668" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">size =</span> <span class="fu">px</span>(<span class="dv">10</span>)),</span>
<span id="cb54-669"><a href="#cb54-669" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()</span>
<span id="cb54-670"><a href="#cb54-670" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-671"><a href="#cb54-671" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb54-672"><a href="#cb54-672" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">style =</span> <span class="st">"italic"</span>, <span class="at">color =</span> <span class="st">'red'</span>), </span>
<span id="cb54-673"><a href="#cb54-673" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(</span>
<span id="cb54-674"><a href="#cb54-674" aria-hidden="true" tabindex="-1"></a>      <span class="at">columns =</span> <span class="st">"LPC</span><span class="sc">\n</span><span class="st">Tranche_ID"</span>, </span>
<span id="cb54-675"><a href="#cb54-675" aria-hidden="true" tabindex="-1"></a>      <span class="at">rows =</span>  <span class="st">`</span><span class="at">Amend</span><span class="sc">\n</span><span class="at">Flag_check</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="dv">0</span></span>
<span id="cb54-676"><a href="#cb54-676" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb54-677"><a href="#cb54-677" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-678"><a href="#cb54-678" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_width</span>(<span class="fu">ends_with</span>(<span class="st">"Remark"</span>) <span class="sc">~</span> <span class="fu">px</span>(<span class="dv">800</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb54-679"><a href="#cb54-679" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_hide</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"Tranche</span><span class="sc">\n</span><span class="st">O_A_round"</span>, <span class="st">"Amend</span><span class="sc">\n</span><span class="st">Flag_check"</span>) ) <span class="co"># hide columns </span></span>
<span id="cb54-680"><a href="#cb54-680" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-681"><a href="#cb54-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-682"><a href="#cb54-682" aria-hidden="true" tabindex="-1"></a>You can see the ample information covered in the <span class="in">`Deal_Remark`</span> and <span class="in">`Tranche_Remark`</span> section.</span>
<span id="cb54-683"><a href="#cb54-683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-684"><a href="#cb54-684" aria-hidden="true" tabindex="-1"></a>To connect to loan contracts preceding these ones, I recovered the loans originated under the same entity but under a different name. These are loans from ARX Inc. (<span class="in">`Borrower_Id = 31224`</span>):</span>
<span id="cb54-685"><a href="#cb54-685" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-686"><a href="#cb54-686" aria-hidden="true" tabindex="-1"></a><span class="in">```{r roberts_2015_B1_PanelB3, echo=TRUE}</span></span>
<span id="cb54-687"><a href="#cb54-687" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: screen-inset</span></span>
<span id="cb54-688"><a href="#cb54-688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-689"><a href="#cb54-689" aria-hidden="true" tabindex="-1"></a>DealScan_borrower <span class="sc">%&gt;%</span> </span>
<span id="cb54-690"><a href="#cb54-690" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Borrower_Id <span class="sc">==</span> <span class="dv">31224</span>) <span class="sc">%&gt;%</span> <span class="do">## now is the DealScan_ARX </span></span>
<span id="cb54-691"><a href="#cb54-691" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">names</span>(dt.Deal_Amend_Refin), Deal_Input_Date, Tranche_Type, Deal_Purpose, </span>
<span id="cb54-692"><a href="#cb54-692" aria-hidden="true" tabindex="-1"></a>         <span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">"Remark"</span>, <span class="at">x =</span> <span class="fu">names</span>(.), <span class="at">value =</span> T)</span>
<span id="cb54-693"><a href="#cb54-693" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-694"><a href="#cb54-694" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-695"><a href="#cb54-695" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Tranche_O_A_round =</span> <span class="fu">replace_na</span>(<span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(<span class="at">string =</span> Tranche_O_A, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">d+$"</span>)) , <span class="at">replace =</span> <span class="dv">0</span> ), </span>
<span id="cb54-696"><a href="#cb54-696" aria-hidden="true" tabindex="-1"></a>         <span class="at">LPC_Deal_ID =</span> <span class="fu">paste</span>(<span class="st">"Deal: "</span>, LPC_Deal_ID, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb54-697"><a href="#cb54-697" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-698"><a href="#cb54-698" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(LPC_Deal_ID, LPC_Tranche_ID) <span class="sc">%&gt;%</span> </span>
<span id="cb54-699"><a href="#cb54-699" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Deal_Active_Date) <span class="sc">%&gt;%</span> </span>
<span id="cb54-700"><a href="#cb54-700" aria-hidden="true" tabindex="-1"></a>  <span class="co"># check whether there exists tranche amendment in the dataset </span></span>
<span id="cb54-701"><a href="#cb54-701" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Amend_Flag_check =</span> <span class="fu">max</span>(Tranche_O_A_round) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-702"><a href="#cb54-702" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-703"><a href="#cb54-703" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span> <span class="fu">str_replace</span>(<span class="at">string =</span> .x, <span class="at">pattern =</span> <span class="st">"_"</span>, <span class="at">replacement =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb54-704"><a href="#cb54-704" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">id =</span> <span class="st">'table_id'</span>, <span class="at">groupname_col =</span> <span class="st">"LPC</span><span class="sc">\n</span><span class="st">Deal_ID"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-705"><a href="#cb54-705" aria-hidden="true" tabindex="-1"></a>  <span class="co"># cols_label(fn = ~ str_replace(string = ., pattern = "_", replacement = "\n") ) %&gt;% </span></span>
<span id="cb54-706"><a href="#cb54-706" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Table 1. Panel D: ARX Inc. Deal-Tranche Level Loan Path"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-707"><a href="#cb54-707" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(<span class="at">table.font.size =</span> <span class="dv">10</span>, <span class="at">heading.align =</span> <span class="st">'left'</span> ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-708"><a href="#cb54-708" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>( <span class="co"># update the font size for table cells. </span></span>
<span id="cb54-709"><a href="#cb54-709" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">size =</span> <span class="fu">px</span>(<span class="dv">10</span>)),</span>
<span id="cb54-710"><a href="#cb54-710" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()</span>
<span id="cb54-711"><a href="#cb54-711" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-712"><a href="#cb54-712" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb54-713"><a href="#cb54-713" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">style =</span> <span class="st">"italic"</span>, <span class="at">color =</span> <span class="st">'red'</span>), </span>
<span id="cb54-714"><a href="#cb54-714" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(</span>
<span id="cb54-715"><a href="#cb54-715" aria-hidden="true" tabindex="-1"></a>      <span class="at">columns =</span> <span class="st">"LPC</span><span class="sc">\n</span><span class="st">Tranche_ID"</span>, </span>
<span id="cb54-716"><a href="#cb54-716" aria-hidden="true" tabindex="-1"></a>      <span class="at">rows =</span>  <span class="st">`</span><span class="at">Amend</span><span class="sc">\n</span><span class="at">Flag_check</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="dv">0</span></span>
<span id="cb54-717"><a href="#cb54-717" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb54-718"><a href="#cb54-718" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-719"><a href="#cb54-719" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_width</span>(<span class="fu">ends_with</span>(<span class="st">"Remark"</span>) <span class="sc">~</span> <span class="fu">px</span>(<span class="dv">800</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb54-720"><a href="#cb54-720" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_hide</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"Tranche</span><span class="sc">\n</span><span class="st">O_A_round"</span>, <span class="st">"Amend</span><span class="sc">\n</span><span class="st">Flag_check"</span>) ) <span class="co"># hide columns </span></span>
<span id="cb54-721"><a href="#cb54-721" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-722"><a href="#cb54-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-723"><a href="#cb54-723" aria-hidden="true" tabindex="-1"></a>Although this is far from perfect in recording the life-cycle of the loan, it is not as sparse as I thought previously. Also, the frequency of renegotiation needs to be recalculated, with around 25% of the "Origination"s to be reclassified as "Amend/Restate".</span>
<span id="cb54-724"><a href="#cb54-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-725"><a href="#cb54-725" aria-hidden="true" tabindex="-1"></a>::: {#tip-loan-path .callout-tip .column-margin}</span>
<span id="cb54-726"><a href="#cb54-726" aria-hidden="true" tabindex="-1"></a><span class="fu">## The correct way to recover loan path for a unique firm!</span></span>
<span id="cb54-727"><a href="#cb54-727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-728"><a href="#cb54-728" aria-hidden="true" tabindex="-1"></a>A thorough look into the DealScan dataset shows that the issue of incomplete loan path presented in Roberts (2015) may not be as severe as what he suggested. The huge amount of missing observations comes from the ignoring that the company has a different name, and so a different <span class="in">`Borrower_Id`</span>, in the dataset. The Aeroflex Inc. is previously known as ARX Inc. (<span class="in">`gvkey`</span> = 1056).</span>
<span id="cb54-729"><a href="#cb54-729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-730"><a href="#cb54-730" aria-hidden="true" tabindex="-1"></a>We can recover past observations from <span class="in">`Borrower_Id = 31224`</span> (rather than <span class="in">`8532`</span>). However, in order to recover the exact loan path and connects the evolution of each tranche under the same deal, we need to use variable <span class="in">`Deal_Remark`</span> and extract textual information and match previous deals.</span>
<span id="cb54-731"><a href="#cb54-731" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb54-732"><a href="#cb54-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-733"><a href="#cb54-733" aria-hidden="true" tabindex="-1"></a>However, this should not be an issue for my project.</span>
<span id="cb54-734"><a href="#cb54-734" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-735"><a href="#cb54-735" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>First, my focus is on the firm-level observations and the dependent variable in the first step is whether a renegotiation happens.</span>
<span id="cb54-736"><a href="#cb54-736" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-737"><a href="#cb54-737" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Second, to identify an amendment/restatement/refinancing, I should use the <span class="in">`Deal_Refinancing`</span> rather than the <span class="in">`Origination`</span> variable. While the majority (60%) of tranche observations classified as <span class="in">`Origination`</span> has "No" for all other identifiers, around 25% of tranche observations in those has "Yes" for <span class="in">`Deal_Refinancing`</span>. This is exactly the case we saw in the example above. <span class="sc">\&gt;</span> updated @tip-loan-path</span>
<span id="cb54-738"><a href="#cb54-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-739"><a href="#cb54-739" aria-hidden="true" tabindex="-1"></a><span class="in">```{r identify_refinance, echo=TRUE, message=FALSE}</span></span>
<span id="cb54-740"><a href="#cb54-740" aria-hidden="true" tabindex="-1"></a><span class="co"># to identify different types of contracts which are defined as "Origination". </span></span>
<span id="cb54-741"><a href="#cb54-741" aria-hidden="true" tabindex="-1"></a>DealScan_borrower <span class="sc">%&gt;%</span> </span>
<span id="cb54-742"><a href="#cb54-742" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="at">pattern =</span> <span class="st">"Orig"</span>, <span class="at">x =</span> Tranche_O_A)) <span class="sc">%&gt;%</span> <span class="co"># only keep tranches classified as "Origination"</span></span>
<span id="cb54-743"><a href="#cb54-743" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Deal_Amended, Tranche_Amended, Deal_Refinancing, Tranche_Refinancing) <span class="sc">%&gt;%</span> </span>
<span id="cb54-744"><a href="#cb54-744" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="co"># count the number of each types </span></span>
<span id="cb54-745"><a href="#cb54-745" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-746"><a href="#cb54-746" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percentage =</span> (n <span class="sc">/</span> <span class="fu">sum</span>(n))) <span class="sc">%&gt;%</span> </span>
<span id="cb54-747"><a href="#cb54-747" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-748"><a href="#cb54-748" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Table 2: WRDS DealScan Deal-Tranche Level Loan Events"</span>, </span>
<span id="cb54-749"><a href="#cb54-749" aria-hidden="true" tabindex="-1"></a>             <span class="at">subtitle =</span> <span class="st">"Subgroup: `Tranche_O_A` = Origination"</span></span>
<span id="cb54-750"><a href="#cb54-750" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-751"><a href="#cb54-751" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(<span class="at">table.font.size =</span> <span class="dv">11</span>, <span class="at">heading.align =</span> <span class="st">'left'</span> ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-752"><a href="#cb54-752" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>( <span class="co"># update the font size for table cells. </span></span>
<span id="cb54-753"><a href="#cb54-753" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">size =</span> <span class="fu">px</span>(<span class="dv">11</span>)),</span>
<span id="cb54-754"><a href="#cb54-754" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()</span>
<span id="cb54-755"><a href="#cb54-755" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-756"><a href="#cb54-756" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(<span class="at">columns =</span> percentage, <span class="at">decimals =</span> <span class="dv">2</span>)</span>
<span id="cb54-757"><a href="#cb54-757" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-758"><a href="#cb54-758" aria-hidden="true" tabindex="-1"></a><span class="co"># to identify different types of contracts which are defined as "Amendment 1". </span></span>
<span id="cb54-759"><a href="#cb54-759" aria-hidden="true" tabindex="-1"></a>DealScan_borrower <span class="sc">%&gt;%</span> </span>
<span id="cb54-760"><a href="#cb54-760" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="at">pattern =</span> <span class="st">"Amendment"</span>, <span class="at">x =</span> Tranche_O_A)) <span class="sc">%&gt;%</span> <span class="co"># only keep tranches classified as "Origination"</span></span>
<span id="cb54-761"><a href="#cb54-761" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Deal_Amended, Tranche_Amended, Deal_Refinancing, Tranche_Refinancing) <span class="sc">%&gt;%</span> </span>
<span id="cb54-762"><a href="#cb54-762" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="co"># count the number of each types </span></span>
<span id="cb54-763"><a href="#cb54-763" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-764"><a href="#cb54-764" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percentage =</span> (n <span class="sc">/</span> <span class="fu">sum</span>(n))) <span class="sc">%&gt;%</span> </span>
<span id="cb54-765"><a href="#cb54-765" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-766"><a href="#cb54-766" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Table 2b: WRDS DealScan Deal-Tranche Level Loan Events"</span>, </span>
<span id="cb54-767"><a href="#cb54-767" aria-hidden="true" tabindex="-1"></a>             <span class="at">subtitle =</span> <span class="st">"Subgroup: `Tranche_O_A` = Amendment(s)"</span></span>
<span id="cb54-768"><a href="#cb54-768" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-769"><a href="#cb54-769" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(<span class="at">table.font.size =</span> <span class="dv">11</span>, <span class="at">heading.align =</span> <span class="st">'left'</span> ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-770"><a href="#cb54-770" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>( <span class="co"># update the font size for table cells. </span></span>
<span id="cb54-771"><a href="#cb54-771" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">size =</span> <span class="fu">px</span>(<span class="dv">11</span>)),</span>
<span id="cb54-772"><a href="#cb54-772" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()</span>
<span id="cb54-773"><a href="#cb54-773" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-774"><a href="#cb54-774" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(<span class="at">columns =</span> percentage, <span class="at">decimals =</span> <span class="dv">2</span>)</span>
<span id="cb54-775"><a href="#cb54-775" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-776"><a href="#cb54-776" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-777"><a href="#cb54-777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-778"><a href="#cb54-778" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Third, I won't expect that renegotiations happen extremely frequency, not at each month. Thus, if some terms are changed, e.g. spreads and deal/tranche amounts, I can validate these changes from the balance sheet.</span>
<span id="cb54-779"><a href="#cb54-779" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-780"><a href="#cb54-780" aria-hidden="true" tabindex="-1"></a><span class="in">```{r roberts_2015_B1_flowchat, echo=TRUE}</span></span>
<span id="cb54-781"><a href="#cb54-781" aria-hidden="true" tabindex="-1"></a>dt.DealScan_Aeroflex <span class="ot">&lt;-</span> DealScan_Aeroflex <span class="sc">%&gt;%</span> </span>
<span id="cb54-782"><a href="#cb54-782" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="fu">names</span>(dt.Deal_Amend_Refin), Deal_Input_Date, Tranche_Type, Deal_Purpose) <span class="sc">%&gt;%</span> </span>
<span id="cb54-783"><a href="#cb54-783" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-784"><a href="#cb54-784" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Tranche_O_A_round =</span> <span class="fu">replace_na</span>(<span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(<span class="at">string =</span> Tranche_O_A, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">d+$"</span>)) , <span class="at">replace =</span> <span class="dv">0</span> ), </span>
<span id="cb54-785"><a href="#cb54-785" aria-hidden="true" tabindex="-1"></a>           <span class="at">LPC_Deal_ID =</span> <span class="fu">paste</span>(<span class="st">"Deal: "</span>, LPC_Deal_ID, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb54-786"><a href="#cb54-786" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-787"><a href="#cb54-787" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(LPC_Deal_ID, LPC_Tranche_ID) <span class="sc">%&gt;%</span> </span>
<span id="cb54-788"><a href="#cb54-788" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(Deal_Active_Date) <span class="sc">%&gt;%</span> </span>
<span id="cb54-789"><a href="#cb54-789" aria-hidden="true" tabindex="-1"></a>    <span class="co"># check whether there exists tranche amendment in the dataset </span></span>
<span id="cb54-790"><a href="#cb54-790" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Amend_Flag_check =</span> <span class="fu">max</span>(Tranche_O_A_round) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-791"><a href="#cb54-791" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-792"><a href="#cb54-792" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(LPC_Deal_ID, LPC_Tranche_ID, Deal_Refinancing, Tranche_Amount, Tranche_Active_Date, Tranche_Type)  </span>
<span id="cb54-793"><a href="#cb54-793" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-794"><a href="#cb54-794" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt.DealScan_Aeroflex, <span class="fu">aes</span>(<span class="at">x =</span> Tranche_Active_Date)) <span class="sc">+</span> </span>
<span id="cb54-795"><a href="#cb54-795" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">fill =</span> LPC_Deal_ID)) </span>
<span id="cb54-796"><a href="#cb54-796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-797"><a href="#cb54-797" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-798"><a href="#cb54-798" aria-hidden="true" tabindex="-1"></a>DiagrammeR<span class="sc">::</span><span class="fu">grViz</span>(<span class="st">"digraph {</span></span>
<span id="cb54-799"><a href="#cb54-799" aria-hidden="true" tabindex="-1"></a><span class="st">  graph [layout = dot, rankdir = TB]</span></span>
<span id="cb54-800"><a href="#cb54-800" aria-hidden="true" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb54-801"><a href="#cb54-801" aria-hidden="true" tabindex="-1"></a><span class="st">  node [shape = rectangle]        </span></span>
<span id="cb54-802"><a href="#cb54-802" aria-hidden="true" tabindex="-1"></a><span class="st">  rec1 [label = 'Deal: 128721'] </span></span>
<span id="cb54-803"><a href="#cb54-803" aria-hidden="true" tabindex="-1"></a><span class="st">  rec2 [label = 'Deal: 143473']</span></span>
<span id="cb54-804"><a href="#cb54-804" aria-hidden="true" tabindex="-1"></a><span class="st">  rec3 [label = 'Deal: 42818']</span></span>
<span id="cb54-805"><a href="#cb54-805" aria-hidden="true" tabindex="-1"></a><span class="st">  rec4 [label = 'Deal: 151556']</span></span>
<span id="cb54-806"><a href="#cb54-806" aria-hidden="true" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb54-807"><a href="#cb54-807" aria-hidden="true" tabindex="-1"></a><span class="st">  # edge definitions with the node IDs</span></span>
<span id="cb54-808"><a href="#cb54-808" aria-hidden="true" tabindex="-1"></a><span class="st">  rec1 -&gt; rec2 -&gt; rec3 -&gt; rec4 </span></span>
<span id="cb54-809"><a href="#cb54-809" aria-hidden="true" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb54-810"><a href="#cb54-810" aria-hidden="true" tabindex="-1"></a><span class="st">  }"</span>,</span>
<span id="cb54-811"><a href="#cb54-811" aria-hidden="true" tabindex="-1"></a>  <span class="at">height =</span> <span class="dv">300</span>)</span>
<span id="cb54-812"><a href="#cb54-812" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-813"><a href="#cb54-813" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-814"><a href="#cb54-814" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-815"><a href="#cb54-815" aria-hidden="true" tabindex="-1"></a><span class="fu">#### A List for the following tasks: June 7, 2024 {#sec-to-do-list}</span></span>
<span id="cb54-816"><a href="#cb54-816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-817"><a href="#cb54-817" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="va">[ ]</span> Use <span class="in">`Deal_Remark`</span> to extract information about <span class="in">`Event`</span> and <span class="in">`Network`</span> information. The variable <span class="in">`Network`</span> will be defined as the loan deal preceding the current one. These information can be extracted from <span class="kw">&lt;mark&gt;</span>Table 1. Panel D<span class="kw">&lt;/mark&gt;</span>.</span>
<span id="cb54-818"><a href="#cb54-818" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="va">[ ]</span> Re-generate the loan paths for each firm.</span>
<span id="cb54-819"><a href="#cb54-819" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-820"><a href="#cb54-820" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb54-821"><a href="#cb54-821" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb54-822"><a href="#cb54-822" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-823"><a href="#cb54-823" aria-hidden="true" tabindex="-1"></a><span class="fu">### s3.4 Covenants Preview</span></span>
<span id="cb54-824"><a href="#cb54-824" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-825"><a href="#cb54-825" aria-hidden="true" tabindex="-1"></a>Look into the type of covenants.</span>
<span id="cb54-826"><a href="#cb54-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-827"><a href="#cb54-827" aria-hidden="true" tabindex="-1"></a><span class="in">```{r covenants, echo=TRUE}</span></span>
<span id="cb54-828"><a href="#cb54-828" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-829"><a href="#cb54-829" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-830"><a href="#cb54-830" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-831"><a href="#cb54-831" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-832"><a href="#cb54-832" aria-hidden="true" tabindex="-1"></a><span class="fu">### s3.5 Leverage Covenants</span></span>
<span id="cb54-833"><a href="#cb54-833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-834"><a href="#cb54-834" aria-hidden="true" tabindex="-1"></a>Look into the changes in covenants related to the leverage restrictions &amp;/ spread and fees.</span>
<span id="cb54-835"><a href="#cb54-835" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-836"><a href="#cb54-836" aria-hidden="true" tabindex="-1"></a><span class="fu">### Definitions</span></span>
<span id="cb54-837"><a href="#cb54-837" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-838"><a href="#cb54-838" aria-hidden="true" tabindex="-1"></a><span class="fu">## S4. Future Notes {#sec-s4.-future-notes}</span></span>
<span id="cb54-839"><a href="#cb54-839" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-840"><a href="#cb54-840" aria-hidden="true" tabindex="-1"></a><span class="fu">## Reference {#sec-reference}</span></span>
<span id="cb54-841"><a href="#cb54-841" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-842"><a href="#cb54-842" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Roberts, M.R., 2015. The role of dynamic renegotiation and asymmetric information in financial contracting. Journal of Financial Economics 116, 61--81. https://doi.org/10.1016/j.jfineco.2014.11.013</span>
<span id="cb54-843"><a href="#cb54-843" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">HTML Themes</span><span class="co">](https://quarto.org/docs/output-formats/html-themes.html#dark-mode)</span></span>
<span id="cb54-844"><a href="#cb54-844" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="co">[</span><span class="ot">Callout Blocks</span><span class="co">](https://quarto.org/docs/authoring/callouts.html)</span> <span class="sc">\&gt;</span> e.g. @imp-amend</span>
<span id="cb54-845"><a href="#cb54-845" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="co">[</span><span class="ot">Layout</span><span class="co">](https://quarto.org/docs/authoring/article-layout.html)</span></span>
<span id="cb54-846"><a href="#cb54-846" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">`gt()` Cell Style</span><span class="co">](https://gt.albert-rapp.de/styling#sec-theming)</span></span>
<span id="cb54-847"><a href="#cb54-847" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">`DiagrammeR`: Network and Flowchat</span><span class="co">](https://rich-iannone.github.io/DiagrammeR/)</span></span>
<span id="cb54-848"><a href="#cb54-848" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-849"><a href="#cb54-849" aria-hidden="true" tabindex="-1"></a><span class="fu">## To-do list:</span></span>
<span id="cb54-850"><a href="#cb54-850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-851"><a href="#cb54-851" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">June 7, 2024</span><span class="co">](@sec-to-do-list)</span></span>
<span id="cb54-852"><a href="#cb54-852" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-853"><a href="#cb54-853" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ## Notes  --&gt;</span></span>
<span id="cb54-854"><a href="#cb54-854" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-855"><a href="#cb54-855" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- color: &lt;span style="color: red;"&gt; text &lt;/span&gt; // {style="color: red;"} --&gt;</span></span>
<span id="cb54-856"><a href="#cb54-856" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-857"><a href="#cb54-857" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ## Quarto --&gt;</span></span>
<span id="cb54-858"><a href="#cb54-858" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-859"><a href="#cb54-859" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- Quarto enables you to weave together content and executable code into a finished document. To learn more about Quarto see &lt;https://quarto.org&gt;. --&gt;</span></span>
<span id="cb54-860"><a href="#cb54-860" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-861"><a href="#cb54-861" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ## Running Code --&gt;</span></span>
<span id="cb54-862"><a href="#cb54-862" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-863"><a href="#cb54-863" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- When you click the **Render** button a document will be generated that includes both content and the output of embedded code. You can embed code like this: --&gt;</span></span>
<span id="cb54-864"><a href="#cb54-864" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-865"><a href="#cb54-865" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ```{r} --&gt;</span></span>
<span id="cb54-866"><a href="#cb54-866" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-867"><a href="#cb54-867" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- 1 + 1 --&gt;</span></span>
<span id="cb54-868"><a href="#cb54-868" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-869"><a href="#cb54-869" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ``` --&gt;</span></span>
<span id="cb54-870"><a href="#cb54-870" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-871"><a href="#cb54-871" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- You can add options to executable code like this --&gt;</span></span>
<span id="cb54-872"><a href="#cb54-872" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-873"><a href="#cb54-873" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ```{r} --&gt;</span></span>
<span id="cb54-874"><a href="#cb54-874" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-875"><a href="#cb54-875" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- #| echo: false --&gt;</span></span>
<span id="cb54-876"><a href="#cb54-876" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-877"><a href="#cb54-877" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- 2 * 2 --&gt;</span></span>
<span id="cb54-878"><a href="#cb54-878" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-879"><a href="#cb54-879" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ``` --&gt;</span></span>
<span id="cb54-880"><a href="#cb54-880" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-881"><a href="#cb54-881" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- The `echo: false` option disables the printing of code (only output is displayed). --&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>